import{S as mx,i as gx,s as yx,k as ot,q as Yt,a as Nt,l as at,m as gt,r as Kt,h as Ze,c as Bt,n as Je,p as vx,b as dr,G as De,J as Dr,H as na,K as mu,L as cl,o as bx,M as Gr,u as ia,e as Om}from"../chunks/index.27dd1d36.js";var Pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _x(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fd={},wx={get exports(){return Fd},set exports(i){Fd=i}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */(function(i){(function(t,n){i.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Pa,function(t,n){var r=[],s=Object.getPrototypeOf,a=r.slice,o=r.flat?function(T){return r.flat.call(T)}:function(T){return r.concat.apply([],T)},u=r.push,l=r.indexOf,c={},p=c.toString,m=c.hasOwnProperty,h=m.toString,f=h.call(Object),d={},g=function(A){return typeof A=="function"&&typeof A.nodeType!="number"&&typeof A.item!="function"},y=function(A){return A!=null&&A===A.window},b=t.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function C(T,A,N){N=N||b;var V,te,ne=N.createElement("script");if(ne.text=T,A)for(V in x)te=A[V]||A.getAttribute&&A.getAttribute(V),te&&ne.setAttribute(V,te);N.head.appendChild(ne).parentNode.removeChild(ne)}function S(T){return T==null?T+"":typeof T=="object"||typeof T=="function"?c[p.call(T)]||"object":typeof T}var w="3.6.3",_=function(T,A){return new _.fn.init(T,A)};_.fn=_.prototype={jquery:w,constructor:_,length:0,toArray:function(){return a.call(this)},get:function(T){return T==null?a.call(this):T<0?this[T+this.length]:this[T]},pushStack:function(T){var A=_.merge(this.constructor(),T);return A.prevObject=this,A},each:function(T){return _.each(this,T)},map:function(T){return this.pushStack(_.map(this,function(A,N){return T.call(A,N,A)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(T,A){return(A+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(T,A){return A%2}))},eq:function(T){var A=this.length,N=+T+(T<0?A:0);return this.pushStack(N>=0&&N<A?[this[N]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},_.extend=_.fn.extend=function(){var T,A,N,V,te,ne,ue=arguments[0]||{},Ae=1,Ce=arguments.length,Ve=!1;for(typeof ue=="boolean"&&(Ve=ue,ue=arguments[Ae]||{},Ae++),typeof ue!="object"&&!g(ue)&&(ue={}),Ae===Ce&&(ue=this,Ae--);Ae<Ce;Ae++)if((T=arguments[Ae])!=null)for(A in T)V=T[A],!(A==="__proto__"||ue===V)&&(Ve&&V&&(_.isPlainObject(V)||(te=Array.isArray(V)))?(N=ue[A],te&&!Array.isArray(N)?ne=[]:!te&&!_.isPlainObject(N)?ne={}:ne=N,te=!1,ue[A]=_.extend(Ve,ne,V)):V!==void 0&&(ue[A]=V));return ue},_.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(T){throw new Error(T)},noop:function(){},isPlainObject:function(T){var A,N;return!T||p.call(T)!=="[object Object]"?!1:(A=s(T),A?(N=m.call(A,"constructor")&&A.constructor,typeof N=="function"&&h.call(N)===f):!0)},isEmptyObject:function(T){var A;for(A in T)return!1;return!0},globalEval:function(T,A,N){C(T,{nonce:A&&A.nonce},N)},each:function(T,A){var N,V=0;if(M(T))for(N=T.length;V<N&&A.call(T[V],V,T[V])!==!1;V++);else for(V in T)if(A.call(T[V],V,T[V])===!1)break;return T},makeArray:function(T,A){var N=A||[];return T!=null&&(M(Object(T))?_.merge(N,typeof T=="string"?[T]:T):u.call(N,T)),N},inArray:function(T,A,N){return A==null?-1:l.call(A,T,N)},merge:function(T,A){for(var N=+A.length,V=0,te=T.length;V<N;V++)T[te++]=A[V];return T.length=te,T},grep:function(T,A,N){for(var V,te=[],ne=0,ue=T.length,Ae=!N;ne<ue;ne++)V=!A(T[ne],ne),V!==Ae&&te.push(T[ne]);return te},map:function(T,A,N){var V,te,ne=0,ue=[];if(M(T))for(V=T.length;ne<V;ne++)te=A(T[ne],ne,N),te!=null&&ue.push(te);else for(ne in T)te=A(T[ne],ne,N),te!=null&&ue.push(te);return o(ue)},guid:1,support:d}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=r[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(T,A){c["[object "+A+"]"]=A.toLowerCase()});function M(T){var A=!!T&&"length"in T&&T.length,N=S(T);return g(T)||y(T)?!1:N==="array"||A===0||typeof A=="number"&&A>0&&A-1 in T}var I=function(T){var A,N,V,te,ne,ue,Ae,Ce,Ve,et,vt,Qe,it,Rt,Xt,ut,_n,gn,kn,Nr="sizzle"+1*new Date,nr=T.document,hr=0,Cr=0,on=wn(),$n=wn(),Ta=wn(),gi=wn(),Bs=function(he,Te){return he===Te&&(vt=!0),0},Fs={}.hasOwnProperty,ii=[],ms=ii.pop,yi=ii.push,Fr=ii.push,ka=ii.slice,v=function(he,Te){for(var Le=0,ht=he.length;Le<ht;Le++)if(he[Le]===Te)return Le;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",E="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+k+"*("+E+")(?:"+k+"*([*^$|!~]?=)"+k+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+E+"))|)"+k+"*\\]",G=":("+E+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+L+")*)|.*)\\)|)",W=new RegExp(k+"+","g"),se=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),fe=new RegExp("^"+k+"*,"+k+"*"),de=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),Oe=new RegExp(k+"|>"),He=new RegExp(G),Ne=new RegExp("^"+E+"$"),_e={ID:new RegExp("^#("+E+")"),CLASS:new RegExp("^\\.("+E+")"),TAG:new RegExp("^("+E+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},ct=/HTML$/i,Ke=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,ze=/^[^{]+\{\s*\[native \w/,qe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Dt=/[+~]/,qt=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),It=function(he,Te){var Le="0x"+he.slice(1)-65536;return Te||(Le<0?String.fromCharCode(Le+65536):String.fromCharCode(Le>>10|55296,Le&1023|56320))},Lt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,cr=function(he,Te){return Te?he==="\0"?"ï¿½":he.slice(0,-1)+"\\"+he.charCodeAt(he.length-1).toString(16)+" ":"\\"+he},Ur=function(){Qe()},hn=ss(function(he){return he.disabled===!0&&he.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Fr.apply(ii=ka.call(nr.childNodes),nr.childNodes),ii[nr.childNodes.length].nodeType}catch{Fr={apply:ii.length?function(Te,Le){yi.apply(Te,ka.call(Le))}:function(Te,Le){for(var ht=Te.length,We=0;Te[ht++]=Le[We++];);Te.length=ht-1}}}function rr(he,Te,Le,ht){var We,dt,bt,kt,Mt,Jt,$t,er=Te&&Te.ownerDocument,yr=Te?Te.nodeType:9;if(Le=Le||[],typeof he!="string"||!he||yr!==1&&yr!==9&&yr!==11)return Le;if(!ht&&(Qe(Te),Te=Te||it,Xt)){if(yr!==11&&(Mt=qe.exec(he)))if(We=Mt[1]){if(yr===9)if(bt=Te.getElementById(We)){if(bt.id===We)return Le.push(bt),Le}else return Le;else if(er&&(bt=er.getElementById(We))&&kn(Te,bt)&&bt.id===We)return Le.push(bt),Le}else{if(Mt[2])return Fr.apply(Le,Te.getElementsByTagName(he)),Le;if((We=Mt[3])&&N.getElementsByClassName&&Te.getElementsByClassName)return Fr.apply(Le,Te.getElementsByClassName(We)),Le}if(N.qsa&&!gi[he+" "]&&(!ut||!ut.test(he))&&(yr!==1||Te.nodeName.toLowerCase()!=="object")){if($t=he,er=Te,yr===1&&(Oe.test(he)||de.test(he))){for(er=Dt.test(he)&&Vr(Te.parentNode)||Te,(er!==Te||!N.scope)&&((kt=Te.getAttribute("id"))?kt=kt.replace(Lt,cr):Te.setAttribute("id",kt=Nr)),Jt=ue(he),dt=Jt.length;dt--;)Jt[dt]=(kt?"#"+kt:":scope")+" "+gs(Jt[dt]);$t=Jt.join(",")}try{if(N.cssSupportsSelector&&!CSS.supports("selector(:is("+$t+"))"))throw new Error;return Fr.apply(Le,er.querySelectorAll($t)),Le}catch{gi(he,!0)}finally{kt===Nr&&Te.removeAttribute("id")}}}return Ce(he.replace(se,"$1"),Te,Le,ht)}function wn(){var he=[];function Te(Le,ht){return he.push(Le+" ")>V.cacheLength&&delete Te[he.shift()],Te[Le+" "]=ht}return Te}function Wr(he){return he[Nr]=!0,he}function dn(he){var Te=it.createElement("fieldset");try{return!!he(Te)}catch{return!1}finally{Te.parentNode&&Te.parentNode.removeChild(Te),Te=null}}function Pr(he,Te){for(var Le=he.split("|"),ht=Le.length;ht--;)V.attrHandle[Le[ht]]=Te}function qr(he,Te){var Le=Te&&he,ht=Le&&he.nodeType===1&&Te.nodeType===1&&he.sourceIndex-Te.sourceIndex;if(ht)return ht;if(Le){for(;Le=Le.nextSibling;)if(Le===Te)return-1}return he?1:-1}function Rr(he){return function(Te){var Le=Te.nodeName.toLowerCase();return Le==="input"&&Te.type===he}}function Vn(he){return function(Te){var Le=Te.nodeName.toLowerCase();return(Le==="input"||Le==="button")&&Te.type===he}}function rn(he){return function(Te){return"form"in Te?Te.parentNode&&Te.disabled===!1?"label"in Te?"label"in Te.parentNode?Te.parentNode.disabled===he:Te.disabled===he:Te.isDisabled===he||Te.isDisabled!==!he&&hn(Te)===he:Te.disabled===he:"label"in Te?Te.disabled===he:!1}}function an(he){return Wr(function(Te){return Te=+Te,Wr(function(Le,ht){for(var We,dt=he([],Le.length,Te),bt=dt.length;bt--;)Le[We=dt[bt]]&&(Le[We]=!(ht[We]=Le[We]))})})}function Vr(he){return he&&typeof he.getElementsByTagName<"u"&&he}N=rr.support={},ne=rr.isXML=function(he){var Te=he&&he.namespaceURI,Le=he&&(he.ownerDocument||he).documentElement;return!ct.test(Te||Le&&Le.nodeName||"HTML")},Qe=rr.setDocument=function(he){var Te,Le,ht=he?he.ownerDocument||he:nr;return ht==it||ht.nodeType!==9||!ht.documentElement||(it=ht,Rt=it.documentElement,Xt=!ne(it),nr!=it&&(Le=it.defaultView)&&Le.top!==Le&&(Le.addEventListener?Le.addEventListener("unload",Ur,!1):Le.attachEvent&&Le.attachEvent("onunload",Ur)),N.scope=dn(function(We){return Rt.appendChild(We).appendChild(it.createElement("div")),typeof We.querySelectorAll<"u"&&!We.querySelectorAll(":scope fieldset div").length}),N.cssSupportsSelector=dn(function(){return CSS.supports("selector(*)")&&it.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),N.attributes=dn(function(We){return We.className="i",!We.getAttribute("className")}),N.getElementsByTagName=dn(function(We){return We.appendChild(it.createComment("")),!We.getElementsByTagName("*").length}),N.getElementsByClassName=ze.test(it.getElementsByClassName),N.getById=dn(function(We){return Rt.appendChild(We).id=Nr,!it.getElementsByName||!it.getElementsByName(Nr).length}),N.getById?(V.filter.ID=function(We){var dt=We.replace(qt,It);return function(bt){return bt.getAttribute("id")===dt}},V.find.ID=function(We,dt){if(typeof dt.getElementById<"u"&&Xt){var bt=dt.getElementById(We);return bt?[bt]:[]}}):(V.filter.ID=function(We){var dt=We.replace(qt,It);return function(bt){var kt=typeof bt.getAttributeNode<"u"&&bt.getAttributeNode("id");return kt&&kt.value===dt}},V.find.ID=function(We,dt){if(typeof dt.getElementById<"u"&&Xt){var bt,kt,Mt,Jt=dt.getElementById(We);if(Jt){if(bt=Jt.getAttributeNode("id"),bt&&bt.value===We)return[Jt];for(Mt=dt.getElementsByName(We),kt=0;Jt=Mt[kt++];)if(bt=Jt.getAttributeNode("id"),bt&&bt.value===We)return[Jt]}return[]}}),V.find.TAG=N.getElementsByTagName?function(We,dt){if(typeof dt.getElementsByTagName<"u")return dt.getElementsByTagName(We);if(N.qsa)return dt.querySelectorAll(We)}:function(We,dt){var bt,kt=[],Mt=0,Jt=dt.getElementsByTagName(We);if(We==="*"){for(;bt=Jt[Mt++];)bt.nodeType===1&&kt.push(bt);return kt}return Jt},V.find.CLASS=N.getElementsByClassName&&function(We,dt){if(typeof dt.getElementsByClassName<"u"&&Xt)return dt.getElementsByClassName(We)},_n=[],ut=[],(N.qsa=ze.test(it.querySelectorAll))&&(dn(function(We){var dt;Rt.appendChild(We).innerHTML="<a id='"+Nr+"'></a><select id='"+Nr+"-\r\\' msallowcapture=''><option selected=''></option></select>",We.querySelectorAll("[msallowcapture^='']").length&&ut.push("[*^$]="+k+`*(?:''|"")`),We.querySelectorAll("[selected]").length||ut.push("\\["+k+"*(?:value|"+j+")"),We.querySelectorAll("[id~="+Nr+"-]").length||ut.push("~="),dt=it.createElement("input"),dt.setAttribute("name",""),We.appendChild(dt),We.querySelectorAll("[name='']").length||ut.push("\\["+k+"*name"+k+"*="+k+`*(?:''|"")`),We.querySelectorAll(":checked").length||ut.push(":checked"),We.querySelectorAll("a#"+Nr+"+*").length||ut.push(".#.+[+~]"),We.querySelectorAll("\\\f"),ut.push("[\\r\\n\\f]")}),dn(function(We){We.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var dt=it.createElement("input");dt.setAttribute("type","hidden"),We.appendChild(dt).setAttribute("name","D"),We.querySelectorAll("[name=d]").length&&ut.push("name"+k+"*[*^$|!~]?="),We.querySelectorAll(":enabled").length!==2&&ut.push(":enabled",":disabled"),Rt.appendChild(We).disabled=!0,We.querySelectorAll(":disabled").length!==2&&ut.push(":enabled",":disabled"),We.querySelectorAll("*,:x"),ut.push(",.*:")})),(N.matchesSelector=ze.test(gn=Rt.matches||Rt.webkitMatchesSelector||Rt.mozMatchesSelector||Rt.oMatchesSelector||Rt.msMatchesSelector))&&dn(function(We){N.disconnectedMatch=gn.call(We,"*"),gn.call(We,"[s!='']:x"),_n.push("!=",G)}),N.cssSupportsSelector||ut.push(":has"),ut=ut.length&&new RegExp(ut.join("|")),_n=_n.length&&new RegExp(_n.join("|")),Te=ze.test(Rt.compareDocumentPosition),kn=Te||ze.test(Rt.contains)?function(We,dt){var bt=We.nodeType===9&&We.documentElement||We,kt=dt&&dt.parentNode;return We===kt||!!(kt&&kt.nodeType===1&&(bt.contains?bt.contains(kt):We.compareDocumentPosition&&We.compareDocumentPosition(kt)&16))}:function(We,dt){if(dt){for(;dt=dt.parentNode;)if(dt===We)return!0}return!1},Bs=Te?function(We,dt){if(We===dt)return vt=!0,0;var bt=!We.compareDocumentPosition-!dt.compareDocumentPosition;return bt||(bt=(We.ownerDocument||We)==(dt.ownerDocument||dt)?We.compareDocumentPosition(dt):1,bt&1||!N.sortDetached&&dt.compareDocumentPosition(We)===bt?We==it||We.ownerDocument==nr&&kn(nr,We)?-1:dt==it||dt.ownerDocument==nr&&kn(nr,dt)?1:et?v(et,We)-v(et,dt):0:bt&4?-1:1)}:function(We,dt){if(We===dt)return vt=!0,0;var bt,kt=0,Mt=We.parentNode,Jt=dt.parentNode,$t=[We],er=[dt];if(!Mt||!Jt)return We==it?-1:dt==it?1:Mt?-1:Jt?1:et?v(et,We)-v(et,dt):0;if(Mt===Jt)return qr(We,dt);for(bt=We;bt=bt.parentNode;)$t.unshift(bt);for(bt=dt;bt=bt.parentNode;)er.unshift(bt);for(;$t[kt]===er[kt];)kt++;return kt?qr($t[kt],er[kt]):$t[kt]==nr?-1:er[kt]==nr?1:0}),it},rr.matches=function(he,Te){return rr(he,null,null,Te)},rr.matchesSelector=function(he,Te){if(Qe(he),N.matchesSelector&&Xt&&!gi[Te+" "]&&(!_n||!_n.test(Te))&&(!ut||!ut.test(Te)))try{var Le=gn.call(he,Te);if(Le||N.disconnectedMatch||he.document&&he.document.nodeType!==11)return Le}catch{gi(Te,!0)}return rr(Te,it,null,[he]).length>0},rr.contains=function(he,Te){return(he.ownerDocument||he)!=it&&Qe(he),kn(he,Te)},rr.attr=function(he,Te){(he.ownerDocument||he)!=it&&Qe(he);var Le=V.attrHandle[Te.toLowerCase()],ht=Le&&Fs.call(V.attrHandle,Te.toLowerCase())?Le(he,Te,!Xt):void 0;return ht!==void 0?ht:N.attributes||!Xt?he.getAttribute(Te):(ht=he.getAttributeNode(Te))&&ht.specified?ht.value:null},rr.escape=function(he){return(he+"").replace(Lt,cr)},rr.error=function(he){throw new Error("Syntax error, unrecognized expression: "+he)},rr.uniqueSort=function(he){var Te,Le=[],ht=0,We=0;if(vt=!N.detectDuplicates,et=!N.sortStable&&he.slice(0),he.sort(Bs),vt){for(;Te=he[We++];)Te===he[We]&&(ht=Le.push(We));for(;ht--;)he.splice(Le[ht],1)}return et=null,he},te=rr.getText=function(he){var Te,Le="",ht=0,We=he.nodeType;if(We){if(We===1||We===9||We===11){if(typeof he.textContent=="string")return he.textContent;for(he=he.firstChild;he;he=he.nextSibling)Le+=te(he)}else if(We===3||We===4)return he.nodeValue}else for(;Te=he[ht++];)Le+=te(Te);return Le},V=rr.selectors={cacheLength:50,createPseudo:Wr,match:_e,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(he){return he[1]=he[1].replace(qt,It),he[3]=(he[3]||he[4]||he[5]||"").replace(qt,It),he[2]==="~="&&(he[3]=" "+he[3]+" "),he.slice(0,4)},CHILD:function(he){return he[1]=he[1].toLowerCase(),he[1].slice(0,3)==="nth"?(he[3]||rr.error(he[0]),he[4]=+(he[4]?he[5]+(he[6]||1):2*(he[3]==="even"||he[3]==="odd")),he[5]=+(he[7]+he[8]||he[3]==="odd")):he[3]&&rr.error(he[0]),he},PSEUDO:function(he){var Te,Le=!he[6]&&he[2];return _e.CHILD.test(he[0])?null:(he[3]?he[2]=he[4]||he[5]||"":Le&&He.test(Le)&&(Te=ue(Le,!0))&&(Te=Le.indexOf(")",Le.length-Te)-Le.length)&&(he[0]=he[0].slice(0,Te),he[2]=Le.slice(0,Te)),he.slice(0,3))}},filter:{TAG:function(he){var Te=he.replace(qt,It).toLowerCase();return he==="*"?function(){return!0}:function(Le){return Le.nodeName&&Le.nodeName.toLowerCase()===Te}},CLASS:function(he){var Te=on[he+" "];return Te||(Te=new RegExp("(^|"+k+")"+he+"("+k+"|$)"))&&on(he,function(Le){return Te.test(typeof Le.className=="string"&&Le.className||typeof Le.getAttribute<"u"&&Le.getAttribute("class")||"")})},ATTR:function(he,Te,Le){return function(ht){var We=rr.attr(ht,he);return We==null?Te==="!=":Te?(We+="",Te==="="?We===Le:Te==="!="?We!==Le:Te==="^="?Le&&We.indexOf(Le)===0:Te==="*="?Le&&We.indexOf(Le)>-1:Te==="$="?Le&&We.slice(-Le.length)===Le:Te==="~="?(" "+We.replace(W," ")+" ").indexOf(Le)>-1:Te==="|="?We===Le||We.slice(0,Le.length+1)===Le+"-":!1):!0}},CHILD:function(he,Te,Le,ht,We){var dt=he.slice(0,3)!=="nth",bt=he.slice(-4)!=="last",kt=Te==="of-type";return ht===1&&We===0?function(Mt){return!!Mt.parentNode}:function(Mt,Jt,$t){var er,yr,Kr,Qt,Rn,si,Li=dt!==bt?"nextSibling":"previousSibling",fn=Mt.parentNode,vl=kt&&Mt.nodeName.toLowerCase(),bl=!$t&&!kt,Ni=!1;if(fn){if(dt){for(;Li;){for(Qt=Mt;Qt=Qt[Li];)if(kt?Qt.nodeName.toLowerCase()===vl:Qt.nodeType===1)return!1;si=Li=he==="only"&&!si&&"nextSibling"}return!0}if(si=[bt?fn.firstChild:fn.lastChild],bt&&bl){for(Qt=fn,Kr=Qt[Nr]||(Qt[Nr]={}),yr=Kr[Qt.uniqueID]||(Kr[Qt.uniqueID]={}),er=yr[he]||[],Rn=er[0]===hr&&er[1],Ni=Rn&&er[2],Qt=Rn&&fn.childNodes[Rn];Qt=++Rn&&Qt&&Qt[Li]||(Ni=Rn=0)||si.pop();)if(Qt.nodeType===1&&++Ni&&Qt===Mt){yr[he]=[hr,Rn,Ni];break}}else if(bl&&(Qt=Mt,Kr=Qt[Nr]||(Qt[Nr]={}),yr=Kr[Qt.uniqueID]||(Kr[Qt.uniqueID]={}),er=yr[he]||[],Rn=er[0]===hr&&er[1],Ni=Rn),Ni===!1)for(;(Qt=++Rn&&Qt&&Qt[Li]||(Ni=Rn=0)||si.pop())&&!((kt?Qt.nodeName.toLowerCase()===vl:Qt.nodeType===1)&&++Ni&&(bl&&(Kr=Qt[Nr]||(Qt[Nr]={}),yr=Kr[Qt.uniqueID]||(Kr[Qt.uniqueID]={}),yr[he]=[hr,Ni]),Qt===Mt)););return Ni-=We,Ni===ht||Ni%ht===0&&Ni/ht>=0}}},PSEUDO:function(he,Te){var Le,ht=V.pseudos[he]||V.setFilters[he.toLowerCase()]||rr.error("unsupported pseudo: "+he);return ht[Nr]?ht(Te):ht.length>1?(Le=[he,he,"",Te],V.setFilters.hasOwnProperty(he.toLowerCase())?Wr(function(We,dt){for(var bt,kt=ht(We,Te),Mt=kt.length;Mt--;)bt=v(We,kt[Mt]),We[bt]=!(dt[bt]=kt[Mt])}):function(We){return ht(We,0,Le)}):ht}},pseudos:{not:Wr(function(he){var Te=[],Le=[],ht=Ae(he.replace(se,"$1"));return ht[Nr]?Wr(function(We,dt,bt,kt){for(var Mt,Jt=ht(We,null,kt,[]),$t=We.length;$t--;)(Mt=Jt[$t])&&(We[$t]=!(dt[$t]=Mt))}):function(We,dt,bt){return Te[0]=We,ht(Te,null,bt,Le),Te[0]=null,!Le.pop()}}),has:Wr(function(he){return function(Te){return rr(he,Te).length>0}}),contains:Wr(function(he){return he=he.replace(qt,It),function(Te){return(Te.textContent||te(Te)).indexOf(he)>-1}}),lang:Wr(function(he){return Ne.test(he||"")||rr.error("unsupported lang: "+he),he=he.replace(qt,It).toLowerCase(),function(Te){var Le;do if(Le=Xt?Te.lang:Te.getAttribute("xml:lang")||Te.getAttribute("lang"))return Le=Le.toLowerCase(),Le===he||Le.indexOf(he+"-")===0;while((Te=Te.parentNode)&&Te.nodeType===1);return!1}}),target:function(he){var Te=T.location&&T.location.hash;return Te&&Te.slice(1)===he.id},root:function(he){return he===Rt},focus:function(he){return he===it.activeElement&&(!it.hasFocus||it.hasFocus())&&!!(he.type||he.href||~he.tabIndex)},enabled:rn(!1),disabled:rn(!0),checked:function(he){var Te=he.nodeName.toLowerCase();return Te==="input"&&!!he.checked||Te==="option"&&!!he.selected},selected:function(he){return he.parentNode&&he.parentNode.selectedIndex,he.selected===!0},empty:function(he){for(he=he.firstChild;he;he=he.nextSibling)if(he.nodeType<6)return!1;return!0},parent:function(he){return!V.pseudos.empty(he)},header:function(he){return tt.test(he.nodeName)},input:function(he){return Ke.test(he.nodeName)},button:function(he){var Te=he.nodeName.toLowerCase();return Te==="input"&&he.type==="button"||Te==="button"},text:function(he){var Te;return he.nodeName.toLowerCase()==="input"&&he.type==="text"&&((Te=he.getAttribute("type"))==null||Te.toLowerCase()==="text")},first:an(function(){return[0]}),last:an(function(he,Te){return[Te-1]}),eq:an(function(he,Te,Le){return[Le<0?Le+Te:Le]}),even:an(function(he,Te){for(var Le=0;Le<Te;Le+=2)he.push(Le);return he}),odd:an(function(he,Te){for(var Le=1;Le<Te;Le+=2)he.push(Le);return he}),lt:an(function(he,Te,Le){for(var ht=Le<0?Le+Te:Le>Te?Te:Le;--ht>=0;)he.push(ht);return he}),gt:an(function(he,Te,Le){for(var ht=Le<0?Le+Te:Le;++ht<Te;)he.push(ht);return he})}},V.pseudos.nth=V.pseudos.eq;for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})V.pseudos[A]=Rr(A);for(A in{submit:!0,reset:!0})V.pseudos[A]=Vn(A);function xn(){}xn.prototype=V.filters=V.pseudos,V.setFilters=new xn,ue=rr.tokenize=function(he,Te){var Le,ht,We,dt,bt,kt,Mt,Jt=$n[he+" "];if(Jt)return Te?0:Jt.slice(0);for(bt=he,kt=[],Mt=V.preFilter;bt;){(!Le||(ht=fe.exec(bt)))&&(ht&&(bt=bt.slice(ht[0].length)||bt),kt.push(We=[])),Le=!1,(ht=de.exec(bt))&&(Le=ht.shift(),We.push({value:Le,type:ht[0].replace(se," ")}),bt=bt.slice(Le.length));for(dt in V.filter)(ht=_e[dt].exec(bt))&&(!Mt[dt]||(ht=Mt[dt](ht)))&&(Le=ht.shift(),We.push({value:Le,type:dt,matches:ht}),bt=bt.slice(Le.length));if(!Le)break}return Te?bt.length:bt?rr.error(he):$n(he,kt).slice(0)};function gs(he){for(var Te=0,Le=he.length,ht="";Te<Le;Te++)ht+=he[Te].value;return ht}function ss(he,Te,Le){var ht=Te.dir,We=Te.next,dt=We||ht,bt=Le&&dt==="parentNode",kt=Cr++;return Te.first?function(Mt,Jt,$t){for(;Mt=Mt[ht];)if(Mt.nodeType===1||bt)return he(Mt,Jt,$t);return!1}:function(Mt,Jt,$t){var er,yr,Kr,Qt=[hr,kt];if($t){for(;Mt=Mt[ht];)if((Mt.nodeType===1||bt)&&he(Mt,Jt,$t))return!0}else for(;Mt=Mt[ht];)if(Mt.nodeType===1||bt)if(Kr=Mt[Nr]||(Mt[Nr]={}),yr=Kr[Mt.uniqueID]||(Kr[Mt.uniqueID]={}),We&&We===Mt.nodeName.toLowerCase())Mt=Mt[ht]||Mt;else{if((er=yr[dt])&&er[0]===hr&&er[1]===kt)return Qt[2]=er[2];if(yr[dt]=Qt,Qt[2]=he(Mt,Jt,$t))return!0}return!1}}function Ea(he){return he.length>1?function(Te,Le,ht){for(var We=he.length;We--;)if(!he[We](Te,Le,ht))return!1;return!0}:he[0]}function fx(he,Te,Le){for(var ht=0,We=Te.length;ht<We;ht++)rr(he,Te[ht],Le);return Le}function Du(he,Te,Le,ht,We){for(var dt,bt=[],kt=0,Mt=he.length,Jt=Te!=null;kt<Mt;kt++)(dt=he[kt])&&(!Le||Le(dt,ht,We))&&(bt.push(dt),Jt&&Te.push(kt));return bt}function Qh(he,Te,Le,ht,We,dt){return ht&&!ht[Nr]&&(ht=Qh(ht)),We&&!We[Nr]&&(We=Qh(We,dt)),Wr(function(bt,kt,Mt,Jt){var $t,er,yr,Kr=[],Qt=[],Rn=kt.length,si=bt||fx(Te||"*",Mt.nodeType?[Mt]:Mt,[]),Li=he&&(bt||!Te)?Du(si,Kr,he,Mt,Jt):si,fn=Le?We||(bt?he:Rn||ht)?[]:kt:Li;if(Le&&Le(Li,fn,Mt,Jt),ht)for($t=Du(fn,Qt),ht($t,[],Mt,Jt),er=$t.length;er--;)(yr=$t[er])&&(fn[Qt[er]]=!(Li[Qt[er]]=yr));if(bt){if(We||he){if(We){for($t=[],er=fn.length;er--;)(yr=fn[er])&&$t.push(Li[er]=yr);We(null,fn=[],$t,Jt)}for(er=fn.length;er--;)(yr=fn[er])&&($t=We?v(bt,yr):Kr[er])>-1&&(bt[$t]=!(kt[$t]=yr))}}else fn=Du(fn===kt?fn.splice(Rn,fn.length):fn),We?We(null,kt,fn,Jt):Fr.apply(kt,fn)})}function Zh(he){for(var Te,Le,ht,We=he.length,dt=V.relative[he[0].type],bt=dt||V.relative[" "],kt=dt?1:0,Mt=ss(function(er){return er===Te},bt,!0),Jt=ss(function(er){return v(Te,er)>-1},bt,!0),$t=[function(er,yr,Kr){var Qt=!dt&&(Kr||yr!==Ve)||((Te=yr).nodeType?Mt(er,yr,Kr):Jt(er,yr,Kr));return Te=null,Qt}];kt<We;kt++)if(Le=V.relative[he[kt].type])$t=[ss(Ea($t),Le)];else{if(Le=V.filter[he[kt].type].apply(null,he[kt].matches),Le[Nr]){for(ht=++kt;ht<We&&!V.relative[he[ht].type];ht++);return Qh(kt>1&&Ea($t),kt>1&&gs(he.slice(0,kt-1).concat({value:he[kt-2].type===" "?"*":""})).replace(se,"$1"),Le,kt<ht&&Zh(he.slice(kt,ht)),ht<We&&Zh(he=he.slice(ht)),ht<We&&gs(he))}$t.push(Le)}return Ea($t)}function px(he,Te){var Le=Te.length>0,ht=he.length>0,We=function(dt,bt,kt,Mt,Jt){var $t,er,yr,Kr=0,Qt="0",Rn=dt&&[],si=[],Li=Ve,fn=dt||ht&&V.find.TAG("*",Jt),vl=hr+=Li==null?1:Math.random()||.1,bl=fn.length;for(Jt&&(Ve=bt==it||bt||Jt);Qt!==bl&&($t=fn[Qt])!=null;Qt++){if(ht&&$t){for(er=0,!bt&&$t.ownerDocument!=it&&(Qe($t),kt=!Xt);yr=he[er++];)if(yr($t,bt||it,kt)){Mt.push($t);break}Jt&&(hr=vl)}Le&&(($t=!yr&&$t)&&Kr--,dt&&Rn.push($t))}if(Kr+=Qt,Le&&Qt!==Kr){for(er=0;yr=Te[er++];)yr(Rn,si,bt,kt);if(dt){if(Kr>0)for(;Qt--;)Rn[Qt]||si[Qt]||(si[Qt]=ms.call(Mt));si=Du(si)}Fr.apply(Mt,si),Jt&&!dt&&si.length>0&&Kr+Te.length>1&&rr.uniqueSort(Mt)}return Jt&&(hr=vl,Ve=Li),Rn};return Le?Wr(We):We}return Ae=rr.compile=function(he,Te){var Le,ht=[],We=[],dt=Ta[he+" "];if(!dt){for(Te||(Te=ue(he)),Le=Te.length;Le--;)dt=Zh(Te[Le]),dt[Nr]?ht.push(dt):We.push(dt);dt=Ta(he,px(We,ht)),dt.selector=he}return dt},Ce=rr.select=function(he,Te,Le,ht){var We,dt,bt,kt,Mt,Jt=typeof he=="function"&&he,$t=!ht&&ue(he=Jt.selector||he);if(Le=Le||[],$t.length===1){if(dt=$t[0]=$t[0].slice(0),dt.length>2&&(bt=dt[0]).type==="ID"&&Te.nodeType===9&&Xt&&V.relative[dt[1].type]){if(Te=(V.find.ID(bt.matches[0].replace(qt,It),Te)||[])[0],Te)Jt&&(Te=Te.parentNode);else return Le;he=he.slice(dt.shift().value.length)}for(We=_e.needsContext.test(he)?0:dt.length;We--&&(bt=dt[We],!V.relative[kt=bt.type]);)if((Mt=V.find[kt])&&(ht=Mt(bt.matches[0].replace(qt,It),Dt.test(dt[0].type)&&Vr(Te.parentNode)||Te))){if(dt.splice(We,1),he=ht.length&&gs(dt),!he)return Fr.apply(Le,ht),Le;break}}return(Jt||Ae(he,$t))(ht,Te,!Xt,Le,!Te||Dt.test(he)&&Vr(Te.parentNode)||Te),Le},N.sortStable=Nr.split("").sort(Bs).join("")===Nr,N.detectDuplicates=!!vt,Qe(),N.sortDetached=dn(function(he){return he.compareDocumentPosition(it.createElement("fieldset"))&1}),dn(function(he){return he.innerHTML="<a href='#'></a>",he.firstChild.getAttribute("href")==="#"})||Pr("type|href|height|width",function(he,Te,Le){if(!Le)return he.getAttribute(Te,Te.toLowerCase()==="type"?1:2)}),(!N.attributes||!dn(function(he){return he.innerHTML="<input/>",he.firstChild.setAttribute("value",""),he.firstChild.getAttribute("value")===""}))&&Pr("value",function(he,Te,Le){if(!Le&&he.nodeName.toLowerCase()==="input")return he.defaultValue}),dn(function(he){return he.getAttribute("disabled")==null})||Pr(j,function(he,Te,Le){var ht;if(!Le)return he[Te]===!0?Te.toLowerCase():(ht=he.getAttributeNode(Te))&&ht.specified?ht.value:null}),rr}(t);_.find=I,_.expr=I.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=I.uniqueSort,_.text=I.getText,_.isXMLDoc=I.isXML,_.contains=I.contains,_.escapeSelector=I.escape;var R=function(T,A,N){for(var V=[],te=N!==void 0;(T=T[A])&&T.nodeType!==9;)if(T.nodeType===1){if(te&&_(T).is(N))break;V.push(T)}return V},P=function(T,A){for(var N=[];T;T=T.nextSibling)T.nodeType===1&&T!==A&&N.push(T);return N},D=_.expr.match.needsContext;function U(T,A){return T.nodeName&&T.nodeName.toLowerCase()===A.toLowerCase()}var F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(T,A,N){return g(A)?_.grep(T,function(V,te){return!!A.call(V,te,V)!==N}):A.nodeType?_.grep(T,function(V){return V===A!==N}):typeof A!="string"?_.grep(T,function(V){return l.call(A,V)>-1!==N}):_.filter(A,T,N)}_.filter=function(T,A,N){var V=A[0];return N&&(T=":not("+T+")"),A.length===1&&V.nodeType===1?_.find.matchesSelector(V,T)?[V]:[]:_.find.matches(T,_.grep(A,function(te){return te.nodeType===1}))},_.fn.extend({find:function(T){var A,N,V=this.length,te=this;if(typeof T!="string")return this.pushStack(_(T).filter(function(){for(A=0;A<V;A++)if(_.contains(te[A],this))return!0}));for(N=this.pushStack([]),A=0;A<V;A++)_.find(T,te[A],N);return V>1?_.uniqueSort(N):N},filter:function(T){return this.pushStack(z(this,T||[],!1))},not:function(T){return this.pushStack(z(this,T||[],!0))},is:function(T){return!!z(this,typeof T=="string"&&D.test(T)?_(T):T||[],!1).length}});var J,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Z=_.fn.init=function(T,A,N){var V,te;if(!T)return this;if(N=N||J,typeof T=="string")if(T[0]==="<"&&T[T.length-1]===">"&&T.length>=3?V=[null,T,null]:V=Q.exec(T),V&&(V[1]||!A))if(V[1]){if(A=A instanceof _?A[0]:A,_.merge(this,_.parseHTML(V[1],A&&A.nodeType?A.ownerDocument||A:b,!0)),F.test(V[1])&&_.isPlainObject(A))for(V in A)g(this[V])?this[V](A[V]):this.attr(V,A[V]);return this}else return te=b.getElementById(V[2]),te&&(this[0]=te,this.length=1),this;else return!A||A.jquery?(A||N).find(T):this.constructor(A).find(T);else{if(T.nodeType)return this[0]=T,this.length=1,this;if(g(T))return N.ready!==void 0?N.ready(T):T(_)}return _.makeArray(T,this)};Z.prototype=_.fn,J=_(b);var K=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(T){var A=_(T,this),N=A.length;return this.filter(function(){for(var V=0;V<N;V++)if(_.contains(this,A[V]))return!0})},closest:function(T,A){var N,V=0,te=this.length,ne=[],ue=typeof T!="string"&&_(T);if(!D.test(T)){for(;V<te;V++)for(N=this[V];N&&N!==A;N=N.parentNode)if(N.nodeType<11&&(ue?ue.index(N)>-1:N.nodeType===1&&_.find.matchesSelector(N,T))){ne.push(N);break}}return this.pushStack(ne.length>1?_.uniqueSort(ne):ne)},index:function(T){return T?typeof T=="string"?l.call(_(T),this[0]):l.call(this,T.jquery?T[0]:T):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(T,A){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(T,A))))},addBack:function(T){return this.add(T==null?this.prevObject:this.prevObject.filter(T))}});function $(T,A){for(;(T=T[A])&&T.nodeType!==1;);return T}_.each({parent:function(T){var A=T.parentNode;return A&&A.nodeType!==11?A:null},parents:function(T){return R(T,"parentNode")},parentsUntil:function(T,A,N){return R(T,"parentNode",N)},next:function(T){return $(T,"nextSibling")},prev:function(T){return $(T,"previousSibling")},nextAll:function(T){return R(T,"nextSibling")},prevAll:function(T){return R(T,"previousSibling")},nextUntil:function(T,A,N){return R(T,"nextSibling",N)},prevUntil:function(T,A,N){return R(T,"previousSibling",N)},siblings:function(T){return P((T.parentNode||{}).firstChild,T)},children:function(T){return P(T.firstChild)},contents:function(T){return T.contentDocument!=null&&s(T.contentDocument)?T.contentDocument:(U(T,"template")&&(T=T.content||T),_.merge([],T.childNodes))}},function(T,A){_.fn[T]=function(N,V){var te=_.map(this,A,N);return T.slice(-5)!=="Until"&&(V=N),V&&typeof V=="string"&&(te=_.filter(V,te)),this.length>1&&(H[T]||_.uniqueSort(te),K.test(T)&&te.reverse()),this.pushStack(te)}});var Y=/[^\x20\t\r\n\f]+/g;function oe(T){var A={};return _.each(T.match(Y)||[],function(N,V){A[V]=!0}),A}_.Callbacks=function(T){T=typeof T=="string"?oe(T):_.extend({},T);var A,N,V,te,ne=[],ue=[],Ae=-1,Ce=function(){for(te=te||T.once,V=A=!0;ue.length;Ae=-1)for(N=ue.shift();++Ae<ne.length;)ne[Ae].apply(N[0],N[1])===!1&&T.stopOnFalse&&(Ae=ne.length,N=!1);T.memory||(N=!1),A=!1,te&&(N?ne=[]:ne="")},Ve={add:function(){return ne&&(N&&!A&&(Ae=ne.length-1,ue.push(N)),function et(vt){_.each(vt,function(Qe,it){g(it)?(!T.unique||!Ve.has(it))&&ne.push(it):it&&it.length&&S(it)!=="string"&&et(it)})}(arguments),N&&!A&&Ce()),this},remove:function(){return _.each(arguments,function(et,vt){for(var Qe;(Qe=_.inArray(vt,ne,Qe))>-1;)ne.splice(Qe,1),Qe<=Ae&&Ae--}),this},has:function(et){return et?_.inArray(et,ne)>-1:ne.length>0},empty:function(){return ne&&(ne=[]),this},disable:function(){return te=ue=[],ne=N="",this},disabled:function(){return!ne},lock:function(){return te=ue=[],!N&&!A&&(ne=N=""),this},locked:function(){return!!te},fireWith:function(et,vt){return te||(vt=vt||[],vt=[et,vt.slice?vt.slice():vt],ue.push(vt),A||Ce()),this},fire:function(){return Ve.fireWith(this,arguments),this},fired:function(){return!!V}};return Ve};function O(T){return T}function B(T){throw T}function q(T,A,N,V){var te;try{T&&g(te=T.promise)?te.call(T).done(A).fail(N):T&&g(te=T.then)?te.call(T,A,N):A.apply(void 0,[T].slice(V))}catch(ne){N.apply(void 0,[ne])}}_.extend({Deferred:function(T){var A=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],N="pending",V={state:function(){return N},always:function(){return te.done(arguments).fail(arguments),this},catch:function(ne){return V.then(null,ne)},pipe:function(){var ne=arguments;return _.Deferred(function(ue){_.each(A,function(Ae,Ce){var Ve=g(ne[Ce[4]])&&ne[Ce[4]];te[Ce[1]](function(){var et=Ve&&Ve.apply(this,arguments);et&&g(et.promise)?et.promise().progress(ue.notify).done(ue.resolve).fail(ue.reject):ue[Ce[0]+"With"](this,Ve?[et]:arguments)})}),ne=null}).promise()},then:function(ne,ue,Ae){var Ce=0;function Ve(et,vt,Qe,it){return function(){var Rt=this,Xt=arguments,ut=function(){var gn,kn;if(!(et<Ce)){if(gn=Qe.apply(Rt,Xt),gn===vt.promise())throw new TypeError("Thenable self-resolution");kn=gn&&(typeof gn=="object"||typeof gn=="function")&&gn.then,g(kn)?it?kn.call(gn,Ve(Ce,vt,O,it),Ve(Ce,vt,B,it)):(Ce++,kn.call(gn,Ve(Ce,vt,O,it),Ve(Ce,vt,B,it),Ve(Ce,vt,O,vt.notifyWith))):(Qe!==O&&(Rt=void 0,Xt=[gn]),(it||vt.resolveWith)(Rt,Xt))}},_n=it?ut:function(){try{ut()}catch(gn){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(gn,_n.stackTrace),et+1>=Ce&&(Qe!==B&&(Rt=void 0,Xt=[gn]),vt.rejectWith(Rt,Xt))}};et?_n():(_.Deferred.getStackHook&&(_n.stackTrace=_.Deferred.getStackHook()),t.setTimeout(_n))}}return _.Deferred(function(et){A[0][3].add(Ve(0,et,g(Ae)?Ae:O,et.notifyWith)),A[1][3].add(Ve(0,et,g(ne)?ne:O)),A[2][3].add(Ve(0,et,g(ue)?ue:B))}).promise()},promise:function(ne){return ne!=null?_.extend(ne,V):V}},te={};return _.each(A,function(ne,ue){var Ae=ue[2],Ce=ue[5];V[ue[1]]=Ae.add,Ce&&Ae.add(function(){N=Ce},A[3-ne][2].disable,A[3-ne][3].disable,A[0][2].lock,A[0][3].lock),Ae.add(ue[3].fire),te[ue[0]]=function(){return te[ue[0]+"With"](this===te?void 0:this,arguments),this},te[ue[0]+"With"]=Ae.fireWith}),V.promise(te),T&&T.call(te,te),te},when:function(T){var A=arguments.length,N=A,V=Array(N),te=a.call(arguments),ne=_.Deferred(),ue=function(Ae){return function(Ce){V[Ae]=this,te[Ae]=arguments.length>1?a.call(arguments):Ce,--A||ne.resolveWith(V,te)}};if(A<=1&&(q(T,ne.done(ue(N)).resolve,ne.reject,!A),ne.state()==="pending"||g(te[N]&&te[N].then)))return ne.then();for(;N--;)q(te[N],ue(N),ne.reject);return ne.promise()}});var re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(T,A){t.console&&t.console.warn&&T&&re.test(T.name)&&t.console.warn("jQuery.Deferred exception: "+T.message,T.stack,A)},_.readyException=function(T){t.setTimeout(function(){throw T})};var ae=_.Deferred();_.fn.ready=function(T){return ae.then(T).catch(function(A){_.readyException(A)}),this},_.extend({isReady:!1,readyWait:1,ready:function(T){(T===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(T!==!0&&--_.readyWait>0)&&ae.resolveWith(b,[_]))}}),_.ready.then=ae.then;function me(){b.removeEventListener("DOMContentLoaded",me),t.removeEventListener("load",me),_.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?t.setTimeout(_.ready):(b.addEventListener("DOMContentLoaded",me),t.addEventListener("load",me));var ge=function(T,A,N,V,te,ne,ue){var Ae=0,Ce=T.length,Ve=N==null;if(S(N)==="object"){te=!0;for(Ae in N)ge(T,A,Ae,N[Ae],!0,ne,ue)}else if(V!==void 0&&(te=!0,g(V)||(ue=!0),Ve&&(ue?(A.call(T,V),A=null):(Ve=A,A=function(et,vt,Qe){return Ve.call(_(et),Qe)})),A))for(;Ae<Ce;Ae++)A(T[Ae],N,ue?V:V.call(T[Ae],Ae,A(T[Ae],N)));return te?T:Ve?A.call(T):Ce?A(T[0],N):ne},xe=/^-ms-/,pe=/-([a-z])/g;function ve(T,A){return A.toUpperCase()}function Ee(T){return T.replace(xe,"ms-").replace(pe,ve)}var le=function(T){return T.nodeType===1||T.nodeType===9||!+T.nodeType};function Se(){this.expando=_.expando+Se.uid++}Se.uid=1,Se.prototype={cache:function(T){var A=T[this.expando];return A||(A={},le(T)&&(T.nodeType?T[this.expando]=A:Object.defineProperty(T,this.expando,{value:A,configurable:!0}))),A},set:function(T,A,N){var V,te=this.cache(T);if(typeof A=="string")te[Ee(A)]=N;else for(V in A)te[Ee(V)]=A[V];return te},get:function(T,A){return A===void 0?this.cache(T):T[this.expando]&&T[this.expando][Ee(A)]},access:function(T,A,N){return A===void 0||A&&typeof A=="string"&&N===void 0?this.get(T,A):(this.set(T,A,N),N!==void 0?N:A)},remove:function(T,A){var N,V=T[this.expando];if(V!==void 0){if(A!==void 0)for(Array.isArray(A)?A=A.map(Ee):(A=Ee(A),A=A in V?[A]:A.match(Y)||[]),N=A.length;N--;)delete V[A[N]];(A===void 0||_.isEmptyObject(V))&&(T.nodeType?T[this.expando]=void 0:delete T[this.expando])}},hasData:function(T){var A=T[this.expando];return A!==void 0&&!_.isEmptyObject(A)}};var be=new Se,Ie=new Se,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ye=/[A-Z]/g;function Be(T){return T==="true"?!0:T==="false"?!1:T==="null"?null:T===+T+""?+T:Me.test(T)?JSON.parse(T):T}function rt(T,A,N){var V;if(N===void 0&&T.nodeType===1)if(V="data-"+A.replace(Ye,"-$&").toLowerCase(),N=T.getAttribute(V),typeof N=="string"){try{N=Be(N)}catch{}Ie.set(T,A,N)}else N=void 0;return N}_.extend({hasData:function(T){return Ie.hasData(T)||be.hasData(T)},data:function(T,A,N){return Ie.access(T,A,N)},removeData:function(T,A){Ie.remove(T,A)},_data:function(T,A,N){return be.access(T,A,N)},_removeData:function(T,A){be.remove(T,A)}}),_.fn.extend({data:function(T,A){var N,V,te,ne=this[0],ue=ne&&ne.attributes;if(T===void 0){if(this.length&&(te=Ie.get(ne),ne.nodeType===1&&!be.get(ne,"hasDataAttrs"))){for(N=ue.length;N--;)ue[N]&&(V=ue[N].name,V.indexOf("data-")===0&&(V=Ee(V.slice(5)),rt(ne,V,te[V])));be.set(ne,"hasDataAttrs",!0)}return te}return typeof T=="object"?this.each(function(){Ie.set(this,T)}):ge(this,function(Ae){var Ce;if(ne&&Ae===void 0)return Ce=Ie.get(ne,T),Ce!==void 0||(Ce=rt(ne,T),Ce!==void 0)?Ce:void 0;this.each(function(){Ie.set(this,T,Ae)})},null,A,arguments.length>1,null,!0)},removeData:function(T){return this.each(function(){Ie.remove(this,T)})}}),_.extend({queue:function(T,A,N){var V;if(T)return A=(A||"fx")+"queue",V=be.get(T,A),N&&(!V||Array.isArray(N)?V=be.access(T,A,_.makeArray(N)):V.push(N)),V||[]},dequeue:function(T,A){A=A||"fx";var N=_.queue(T,A),V=N.length,te=N.shift(),ne=_._queueHooks(T,A),ue=function(){_.dequeue(T,A)};te==="inprogress"&&(te=N.shift(),V--),te&&(A==="fx"&&N.unshift("inprogress"),delete ne.stop,te.call(T,ue,ne)),!V&&ne&&ne.empty.fire()},_queueHooks:function(T,A){var N=A+"queueHooks";return be.get(T,N)||be.access(T,N,{empty:_.Callbacks("once memory").add(function(){be.remove(T,[A+"queue",N])})})}}),_.fn.extend({queue:function(T,A){var N=2;return typeof T!="string"&&(A=T,T="fx",N--),arguments.length<N?_.queue(this[0],T):A===void 0?this:this.each(function(){var V=_.queue(this,T,A);_._queueHooks(this,T),T==="fx"&&V[0]!=="inprogress"&&_.dequeue(this,T)})},dequeue:function(T){return this.each(function(){_.dequeue(this,T)})},clearQueue:function(T){return this.queue(T||"fx",[])},promise:function(T,A){var N,V=1,te=_.Deferred(),ne=this,ue=this.length,Ae=function(){--V||te.resolveWith(ne,[ne])};for(typeof T!="string"&&(A=T,T=void 0),T=T||"fx";ue--;)N=be.get(ne[ue],T+"queueHooks"),N&&N.empty&&(V++,N.empty.add(Ae));return Ae(),te.promise(A)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ye=new RegExp("^(?:([+-])=|)("+Ge+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],Ue=b.documentElement,nt=function(T){return _.contains(T.ownerDocument,T)},st={composed:!0};Ue.getRootNode&&(nt=function(T){return _.contains(T.ownerDocument,T)||T.getRootNode(st)===T.ownerDocument});var je=function(T,A){return T=A||T,T.style.display==="none"||T.style.display===""&&nt(T)&&_.css(T,"display")==="none"};function Xe(T,A,N,V){var te,ne,ue=20,Ae=V?function(){return V.cur()}:function(){return _.css(T,A,"")},Ce=Ae(),Ve=N&&N[3]||(_.cssNumber[A]?"":"px"),et=T.nodeType&&(_.cssNumber[A]||Ve!=="px"&&+Ce)&&ye.exec(_.css(T,A));if(et&&et[3]!==Ve){for(Ce=Ce/2,Ve=Ve||et[3],et=+Ce||1;ue--;)_.style(T,A,et+Ve),(1-ne)*(1-(ne=Ae()/Ce||.5))<=0&&(ue=0),et=et/ne;et=et*2,_.style(T,A,et+Ve),N=N||[]}return N&&(et=+et||+Ce||0,te=N[1]?et+(N[1]+1)*N[2]:+N[2],V&&(V.unit=Ve,V.start=et,V.end=te)),te}var Pe={};function ee(T){var A,N=T.ownerDocument,V=T.nodeName,te=Pe[V];return te||(A=N.body.appendChild(N.createElement(V)),te=_.css(A,"display"),A.parentNode.removeChild(A),te==="none"&&(te="block"),Pe[V]=te,te)}function ie(T,A){for(var N,V,te=[],ne=0,ue=T.length;ne<ue;ne++)V=T[ne],V.style&&(N=V.style.display,A?(N==="none"&&(te[ne]=be.get(V,"display")||null,te[ne]||(V.style.display="")),V.style.display===""&&je(V)&&(te[ne]=ee(V))):N!=="none"&&(te[ne]="none",be.set(V,"display",N)));for(ne=0;ne<ue;ne++)te[ne]!=null&&(T[ne].style.display=te[ne]);return T}_.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(T){return typeof T=="boolean"?T?this.show():this.hide():this.each(function(){je(this)?_(this).show():_(this).hide()})}});var X=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ke=/^$|^module$|\/(?:java|ecma)script/i;(function(){var T=b.createDocumentFragment(),A=T.appendChild(b.createElement("div")),N=b.createElement("input");N.setAttribute("type","radio"),N.setAttribute("checked","checked"),N.setAttribute("name","t"),A.appendChild(N),d.checkClone=A.cloneNode(!0).cloneNode(!0).lastChild.checked,A.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!A.cloneNode(!0).lastChild.defaultValue,A.innerHTML="<option></option>",d.option=!!A.lastChild})();var Re={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,d.option||(Re.optgroup=Re.option=[1,"<select multiple='multiple'>","</select>"]);function $e(T,A){var N;return typeof T.getElementsByTagName<"u"?N=T.getElementsByTagName(A||"*"):typeof T.querySelectorAll<"u"?N=T.querySelectorAll(A||"*"):N=[],A===void 0||A&&U(T,A)?_.merge([T],N):N}function mt(T,A){for(var N=0,V=T.length;N<V;N++)be.set(T[N],"globalEval",!A||be.get(A[N],"globalEval"))}var _t=/<|&#?\w+;/;function wt(T,A,N,V,te){for(var ne,ue,Ae,Ce,Ve,et,vt=A.createDocumentFragment(),Qe=[],it=0,Rt=T.length;it<Rt;it++)if(ne=T[it],ne||ne===0)if(S(ne)==="object")_.merge(Qe,ne.nodeType?[ne]:ne);else if(!_t.test(ne))Qe.push(A.createTextNode(ne));else{for(ue=ue||vt.appendChild(A.createElement("div")),Ae=(ce.exec(ne)||["",""])[1].toLowerCase(),Ce=Re[Ae]||Re._default,ue.innerHTML=Ce[1]+_.htmlPrefilter(ne)+Ce[2],et=Ce[0];et--;)ue=ue.lastChild;_.merge(Qe,ue.childNodes),ue=vt.firstChild,ue.textContent=""}for(vt.textContent="",it=0;ne=Qe[it++];){if(V&&_.inArray(ne,V)>-1){te&&te.push(ne);continue}if(Ve=nt(ne),ue=$e(vt.appendChild(ne),"script"),Ve&&mt(ue),N)for(et=0;ne=ue[et++];)ke.test(ne.type||"")&&N.push(ne)}return vt}var Ct=/^([^.]*)(?:\.(.+)|)/;function zt(){return!0}function Pt(){return!1}function At(T,A){return T===Wt()==(A==="focus")}function Wt(){try{return b.activeElement}catch{}}function Gt(T,A,N,V,te,ne){var ue,Ae;if(typeof A=="object"){typeof N!="string"&&(V=V||N,N=void 0);for(Ae in A)Gt(T,Ae,N,V,A[Ae],ne);return T}if(V==null&&te==null?(te=N,V=N=void 0):te==null&&(typeof N=="string"?(te=V,V=void 0):(te=V,V=N,N=void 0)),te===!1)te=Pt;else if(!te)return T;return ne===1&&(ue=te,te=function(Ce){return _().off(Ce),ue.apply(this,arguments)},te.guid=ue.guid||(ue.guid=_.guid++)),T.each(function(){_.event.add(this,A,te,V,N)})}_.event={global:{},add:function(T,A,N,V,te){var ne,ue,Ae,Ce,Ve,et,vt,Qe,it,Rt,Xt,ut=be.get(T);if(le(T))for(N.handler&&(ne=N,N=ne.handler,te=ne.selector),te&&_.find.matchesSelector(Ue,te),N.guid||(N.guid=_.guid++),(Ce=ut.events)||(Ce=ut.events=Object.create(null)),(ue=ut.handle)||(ue=ut.handle=function(_n){return typeof _<"u"&&_.event.triggered!==_n.type?_.event.dispatch.apply(T,arguments):void 0}),A=(A||"").match(Y)||[""],Ve=A.length;Ve--;)Ae=Ct.exec(A[Ve])||[],it=Xt=Ae[1],Rt=(Ae[2]||"").split(".").sort(),it&&(vt=_.event.special[it]||{},it=(te?vt.delegateType:vt.bindType)||it,vt=_.event.special[it]||{},et=_.extend({type:it,origType:Xt,data:V,handler:N,guid:N.guid,selector:te,needsContext:te&&_.expr.match.needsContext.test(te),namespace:Rt.join(".")},ne),(Qe=Ce[it])||(Qe=Ce[it]=[],Qe.delegateCount=0,(!vt.setup||vt.setup.call(T,V,Rt,ue)===!1)&&T.addEventListener&&T.addEventListener(it,ue)),vt.add&&(vt.add.call(T,et),et.handler.guid||(et.handler.guid=N.guid)),te?Qe.splice(Qe.delegateCount++,0,et):Qe.push(et),_.event.global[it]=!0)},remove:function(T,A,N,V,te){var ne,ue,Ae,Ce,Ve,et,vt,Qe,it,Rt,Xt,ut=be.hasData(T)&&be.get(T);if(!(!ut||!(Ce=ut.events))){for(A=(A||"").match(Y)||[""],Ve=A.length;Ve--;){if(Ae=Ct.exec(A[Ve])||[],it=Xt=Ae[1],Rt=(Ae[2]||"").split(".").sort(),!it){for(it in Ce)_.event.remove(T,it+A[Ve],N,V,!0);continue}for(vt=_.event.special[it]||{},it=(V?vt.delegateType:vt.bindType)||it,Qe=Ce[it]||[],Ae=Ae[2]&&new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"),ue=ne=Qe.length;ne--;)et=Qe[ne],(te||Xt===et.origType)&&(!N||N.guid===et.guid)&&(!Ae||Ae.test(et.namespace))&&(!V||V===et.selector||V==="**"&&et.selector)&&(Qe.splice(ne,1),et.selector&&Qe.delegateCount--,vt.remove&&vt.remove.call(T,et));ue&&!Qe.length&&((!vt.teardown||vt.teardown.call(T,Rt,ut.handle)===!1)&&_.removeEvent(T,it,ut.handle),delete Ce[it])}_.isEmptyObject(Ce)&&be.remove(T,"handle events")}},dispatch:function(T){var A,N,V,te,ne,ue,Ae=new Array(arguments.length),Ce=_.event.fix(T),Ve=(be.get(this,"events")||Object.create(null))[Ce.type]||[],et=_.event.special[Ce.type]||{};for(Ae[0]=Ce,A=1;A<arguments.length;A++)Ae[A]=arguments[A];if(Ce.delegateTarget=this,!(et.preDispatch&&et.preDispatch.call(this,Ce)===!1)){for(ue=_.event.handlers.call(this,Ce,Ve),A=0;(te=ue[A++])&&!Ce.isPropagationStopped();)for(Ce.currentTarget=te.elem,N=0;(ne=te.handlers[N++])&&!Ce.isImmediatePropagationStopped();)(!Ce.rnamespace||ne.namespace===!1||Ce.rnamespace.test(ne.namespace))&&(Ce.handleObj=ne,Ce.data=ne.data,V=((_.event.special[ne.origType]||{}).handle||ne.handler).apply(te.elem,Ae),V!==void 0&&(Ce.result=V)===!1&&(Ce.preventDefault(),Ce.stopPropagation()));return et.postDispatch&&et.postDispatch.call(this,Ce),Ce.result}},handlers:function(T,A){var N,V,te,ne,ue,Ae=[],Ce=A.delegateCount,Ve=T.target;if(Ce&&Ve.nodeType&&!(T.type==="click"&&T.button>=1)){for(;Ve!==this;Ve=Ve.parentNode||this)if(Ve.nodeType===1&&!(T.type==="click"&&Ve.disabled===!0)){for(ne=[],ue={},N=0;N<Ce;N++)V=A[N],te=V.selector+" ",ue[te]===void 0&&(ue[te]=V.needsContext?_(te,this).index(Ve)>-1:_.find(te,this,null,[Ve]).length),ue[te]&&ne.push(V);ne.length&&Ae.push({elem:Ve,handlers:ne})}}return Ve=this,Ce<A.length&&Ae.push({elem:Ve,handlers:A.slice(Ce)}),Ae},addProp:function(T,A){Object.defineProperty(_.Event.prototype,T,{enumerable:!0,configurable:!0,get:g(A)?function(){if(this.originalEvent)return A(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[T]},set:function(N){Object.defineProperty(this,T,{enumerable:!0,configurable:!0,writable:!0,value:N})}})},fix:function(T){return T[_.expando]?T:new _.Event(T)},special:{load:{noBubble:!0},click:{setup:function(T){var A=this||T;return X.test(A.type)&&A.click&&U(A,"input")&&kr(A,"click",zt),!1},trigger:function(T){var A=this||T;return X.test(A.type)&&A.click&&U(A,"input")&&kr(A,"click"),!0},_default:function(T){var A=T.target;return X.test(A.type)&&A.click&&U(A,"input")&&be.get(A,"click")||U(A,"a")}},beforeunload:{postDispatch:function(T){T.result!==void 0&&T.originalEvent&&(T.originalEvent.returnValue=T.result)}}}};function kr(T,A,N){if(!N){be.get(T,A)===void 0&&_.event.add(T,A,zt);return}be.set(T,A,!1),_.event.add(T,A,{namespace:!1,handler:function(V){var te,ne,ue=be.get(this,A);if(V.isTrigger&1&&this[A]){if(ue.length)(_.event.special[A]||{}).delegateType&&V.stopPropagation();else if(ue=a.call(arguments),be.set(this,A,ue),te=N(this,A),this[A](),ne=be.get(this,A),ue!==ne||te?be.set(this,A,!1):ne={},ue!==ne)return V.stopImmediatePropagation(),V.preventDefault(),ne&&ne.value}else ue.length&&(be.set(this,A,{value:_.event.trigger(_.extend(ue[0],_.Event.prototype),ue.slice(1),this)}),V.stopImmediatePropagation())}})}_.removeEvent=function(T,A,N){T.removeEventListener&&T.removeEventListener(A,N)},_.Event=function(T,A){if(!(this instanceof _.Event))return new _.Event(T,A);T&&T.type?(this.originalEvent=T,this.type=T.type,this.isDefaultPrevented=T.defaultPrevented||T.defaultPrevented===void 0&&T.returnValue===!1?zt:Pt,this.target=T.target&&T.target.nodeType===3?T.target.parentNode:T.target,this.currentTarget=T.currentTarget,this.relatedTarget=T.relatedTarget):this.type=T,A&&_.extend(this,A),this.timeStamp=T&&T.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var T=this.originalEvent;this.isDefaultPrevented=zt,T&&!this.isSimulated&&T.preventDefault()},stopPropagation:function(){var T=this.originalEvent;this.isPropagationStopped=zt,T&&!this.isSimulated&&T.stopPropagation()},stopImmediatePropagation:function(){var T=this.originalEvent;this.isImmediatePropagationStopped=zt,T&&!this.isSimulated&&T.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(T,A){_.event.special[T]={setup:function(){return kr(this,T,At),!1},trigger:function(){return kr(this,T),!0},_default:function(N){return be.get(N.target,T)},delegateType:A}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(T,A){_.event.special[T]={delegateType:A,bindType:A,handle:function(N){var V,te=this,ne=N.relatedTarget,ue=N.handleObj;return(!ne||ne!==te&&!_.contains(te,ne))&&(N.type=ue.origType,V=ue.handler.apply(this,arguments),N.type=A),V}}}),_.fn.extend({on:function(T,A,N,V){return Gt(this,T,A,N,V)},one:function(T,A,N,V){return Gt(this,T,A,N,V,1)},off:function(T,A,N){var V,te;if(T&&T.preventDefault&&T.handleObj)return V=T.handleObj,_(T.delegateTarget).off(V.namespace?V.origType+"."+V.namespace:V.origType,V.selector,V.handler),this;if(typeof T=="object"){for(te in T)this.off(te,A,T[te]);return this}return(A===!1||typeof A=="function")&&(N=A,A=void 0),N===!1&&(N=Pt),this.each(function(){_.event.remove(this,T,N,A)})}});var en=/<script|<style|<link/i,Xr=/checked\s*(?:[^=]|=\s*.checked.)/i,xr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Sr(T,A){return U(T,"table")&&U(A.nodeType!==11?A:A.firstChild,"tr")&&_(T).children("tbody")[0]||T}function lr(T){return T.type=(T.getAttribute("type")!==null)+"/"+T.type,T}function mn(T){return(T.type||"").slice(0,5)==="true/"?T.type=T.type.slice(5):T.removeAttribute("type"),T}function Br(T,A){var N,V,te,ne,ue,Ae,Ce;if(A.nodeType===1){if(be.hasData(T)&&(ne=be.get(T),Ce=ne.events,Ce)){be.remove(A,"handle events");for(te in Ce)for(N=0,V=Ce[te].length;N<V;N++)_.event.add(A,te,Ce[te][N])}Ie.hasData(T)&&(ue=Ie.access(T),Ae=_.extend({},ue),Ie.set(A,Ae))}}function br(T,A){var N=A.nodeName.toLowerCase();N==="input"&&X.test(T.type)?A.checked=T.checked:(N==="input"||N==="textarea")&&(A.defaultValue=T.defaultValue)}function Or(T,A,N,V){A=o(A);var te,ne,ue,Ae,Ce,Ve,et=0,vt=T.length,Qe=vt-1,it=A[0],Rt=g(it);if(Rt||vt>1&&typeof it=="string"&&!d.checkClone&&Xr.test(it))return T.each(function(Xt){var ut=T.eq(Xt);Rt&&(A[0]=it.call(this,Xt,ut.html())),Or(ut,A,N,V)});if(vt&&(te=wt(A,T[0].ownerDocument,!1,T,V),ne=te.firstChild,te.childNodes.length===1&&(te=ne),ne||V)){for(ue=_.map($e(te,"script"),lr),Ae=ue.length;et<vt;et++)Ce=te,et!==Qe&&(Ce=_.clone(Ce,!0,!0),Ae&&_.merge(ue,$e(Ce,"script"))),N.call(T[et],Ce,et);if(Ae)for(Ve=ue[ue.length-1].ownerDocument,_.map(ue,mn),et=0;et<Ae;et++)Ce=ue[et],ke.test(Ce.type||"")&&!be.access(Ce,"globalEval")&&_.contains(Ve,Ce)&&(Ce.src&&(Ce.type||"").toLowerCase()!=="module"?_._evalUrl&&!Ce.noModule&&_._evalUrl(Ce.src,{nonce:Ce.nonce||Ce.getAttribute("nonce")},Ve):C(Ce.textContent.replace(xr,""),Ce,Ve))}return T}function On(T,A,N){for(var V,te=A?_.filter(A,T):T,ne=0;(V=te[ne])!=null;ne++)!N&&V.nodeType===1&&_.cleanData($e(V)),V.parentNode&&(N&&nt(V)&&mt($e(V,"script")),V.parentNode.removeChild(V));return T}_.extend({htmlPrefilter:function(T){return T},clone:function(T,A,N){var V,te,ne,ue,Ae=T.cloneNode(!0),Ce=nt(T);if(!d.noCloneChecked&&(T.nodeType===1||T.nodeType===11)&&!_.isXMLDoc(T))for(ue=$e(Ae),ne=$e(T),V=0,te=ne.length;V<te;V++)br(ne[V],ue[V]);if(A)if(N)for(ne=ne||$e(T),ue=ue||$e(Ae),V=0,te=ne.length;V<te;V++)Br(ne[V],ue[V]);else Br(T,Ae);return ue=$e(Ae,"script"),ue.length>0&&mt(ue,!Ce&&$e(T,"script")),Ae},cleanData:function(T){for(var A,N,V,te=_.event.special,ne=0;(N=T[ne])!==void 0;ne++)if(le(N)){if(A=N[be.expando]){if(A.events)for(V in A.events)te[V]?_.event.remove(N,V):_.removeEvent(N,V,A.handle);N[be.expando]=void 0}N[Ie.expando]&&(N[Ie.expando]=void 0)}}}),_.fn.extend({detach:function(T){return On(this,T,!0)},remove:function(T){return On(this,T)},text:function(T){return ge(this,function(A){return A===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=A)})},null,T,arguments.length)},append:function(){return Or(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var A=Sr(this,T);A.appendChild(T)}})},prepend:function(){return Or(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var A=Sr(this,T);A.insertBefore(T,A.firstChild)}})},before:function(){return Or(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this)})},after:function(){return Or(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this.nextSibling)})},empty:function(){for(var T,A=0;(T=this[A])!=null;A++)T.nodeType===1&&(_.cleanData($e(T,!1)),T.textContent="");return this},clone:function(T,A){return T=T??!1,A=A??T,this.map(function(){return _.clone(this,T,A)})},html:function(T){return ge(this,function(A){var N=this[0]||{},V=0,te=this.length;if(A===void 0&&N.nodeType===1)return N.innerHTML;if(typeof A=="string"&&!en.test(A)&&!Re[(ce.exec(A)||["",""])[1].toLowerCase()]){A=_.htmlPrefilter(A);try{for(;V<te;V++)N=this[V]||{},N.nodeType===1&&(_.cleanData($e(N,!1)),N.innerHTML=A);N=0}catch{}}N&&this.empty().append(A)},null,T,arguments.length)},replaceWith:function(){var T=[];return Or(this,arguments,function(A){var N=this.parentNode;_.inArray(this,T)<0&&(_.cleanData($e(this)),N&&N.replaceChild(A,this))},T)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(T,A){_.fn[T]=function(N){for(var V,te=[],ne=_(N),ue=ne.length-1,Ae=0;Ae<=ue;Ae++)V=Ae===ue?this:this.clone(!0),_(ne[Ae])[A](V),u.apply(te,V.get());return this.pushStack(te)}});var Zn=new RegExp("^("+Ge+")(?!px)[a-z%]+$","i"),Oi=/^--/,Un=function(T){var A=T.ownerDocument.defaultView;return(!A||!A.opener)&&(A=t),A.getComputedStyle(T)},Wi=function(T,A,N){var V,te,ne={};for(te in A)ne[te]=T.style[te],T.style[te]=A[te];V=N.call(T);for(te in A)T.style[te]=ne[te];return V},Zi=new RegExp(Fe.join("|"),"i"),we="[\\x20\\t\\r\\n\\f]",pt=new RegExp("^"+we+"+|((?:^|[^\\\\])(?:\\\\.)*)"+we+"+$","g");(function(){function T(){if(Ve){Ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ve.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ue.appendChild(Ce).appendChild(Ve);var et=t.getComputedStyle(Ve);N=et.top!=="1%",Ae=A(et.marginLeft)===12,Ve.style.right="60%",ne=A(et.right)===36,V=A(et.width)===36,Ve.style.position="absolute",te=A(Ve.offsetWidth/3)===12,Ue.removeChild(Ce),Ve=null}}function A(et){return Math.round(parseFloat(et))}var N,V,te,ne,ue,Ae,Ce=b.createElement("div"),Ve=b.createElement("div");Ve.style&&(Ve.style.backgroundClip="content-box",Ve.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle=Ve.style.backgroundClip==="content-box",_.extend(d,{boxSizingReliable:function(){return T(),V},pixelBoxStyles:function(){return T(),ne},pixelPosition:function(){return T(),N},reliableMarginLeft:function(){return T(),Ae},scrollboxSize:function(){return T(),te},reliableTrDimensions:function(){var et,vt,Qe,it;return ue==null&&(et=b.createElement("table"),vt=b.createElement("tr"),Qe=b.createElement("div"),et.style.cssText="position:absolute;left:-11111px;border-collapse:separate",vt.style.cssText="border:1px solid",vt.style.height="1px",Qe.style.height="9px",Qe.style.display="block",Ue.appendChild(et).appendChild(vt).appendChild(Qe),it=t.getComputedStyle(vt),ue=parseInt(it.height,10)+parseInt(it.borderTopWidth,10)+parseInt(it.borderBottomWidth,10)===vt.offsetHeight,Ue.removeChild(et)),ue}}))})();function xt(T,A,N){var V,te,ne,ue,Ae=Oi.test(A),Ce=T.style;return N=N||Un(T),N&&(ue=N.getPropertyValue(A)||N[A],Ae&&ue&&(ue=ue.replace(pt,"$1")||void 0),ue===""&&!nt(T)&&(ue=_.style(T,A)),!d.pixelBoxStyles()&&Zn.test(ue)&&Zi.test(A)&&(V=Ce.width,te=Ce.minWidth,ne=Ce.maxWidth,Ce.minWidth=Ce.maxWidth=Ce.width=ue,ue=N.width,Ce.width=V,Ce.minWidth=te,Ce.maxWidth=ne)),ue!==void 0?ue+"":ue}function ft(T,A){return{get:function(){if(T()){delete this.get;return}return(this.get=A).apply(this,arguments)}}}var sr=["Webkit","Moz","ms"],lt=b.createElement("div").style,fr={};function St(T){for(var A=T[0].toUpperCase()+T.slice(1),N=sr.length;N--;)if(T=sr[N]+A,T in lt)return T}function ur(T){var A=_.cssProps[T]||fr[T];return A||(T in lt?T:fr[T]=St(T)||T)}var Tt=/^(none|table(?!-c[ea]).+)/,tn={position:"absolute",visibility:"hidden",display:"block"},Yr={letterSpacing:"0",fontWeight:"400"};function _r(T,A,N){var V=ye.exec(A);return V?Math.max(0,V[2]-(N||0))+(V[3]||"px"):A}function gr(T,A,N,V,te,ne){var ue=A==="width"?1:0,Ae=0,Ce=0;if(N===(V?"border":"content"))return 0;for(;ue<4;ue+=2)N==="margin"&&(Ce+=_.css(T,N+Fe[ue],!0,te)),V?(N==="content"&&(Ce-=_.css(T,"padding"+Fe[ue],!0,te)),N!=="margin"&&(Ce-=_.css(T,"border"+Fe[ue]+"Width",!0,te))):(Ce+=_.css(T,"padding"+Fe[ue],!0,te),N!=="padding"?Ce+=_.css(T,"border"+Fe[ue]+"Width",!0,te):Ae+=_.css(T,"border"+Fe[ue]+"Width",!0,te));return!V&&ne>=0&&(Ce+=Math.max(0,Math.ceil(T["offset"+A[0].toUpperCase()+A.slice(1)]-ne-Ce-Ae-.5))||0),Ce}function Cn(T,A,N){var V=Un(T),te=!d.boxSizingReliable()||N,ne=te&&_.css(T,"boxSizing",!1,V)==="border-box",ue=ne,Ae=xt(T,A,V),Ce="offset"+A[0].toUpperCase()+A.slice(1);if(Zn.test(Ae)){if(!N)return Ae;Ae="auto"}return(!d.boxSizingReliable()&&ne||!d.reliableTrDimensions()&&U(T,"tr")||Ae==="auto"||!parseFloat(Ae)&&_.css(T,"display",!1,V)==="inline")&&T.getClientRects().length&&(ne=_.css(T,"boxSizing",!1,V)==="border-box",ue=Ce in T,ue&&(Ae=T[Ce])),Ae=parseFloat(Ae)||0,Ae+gr(T,A,N||(ne?"border":"content"),ue,V,Ae)+"px"}_.extend({cssHooks:{opacity:{get:function(T,A){if(A){var N=xt(T,"opacity");return N===""?"1":N}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(T,A,N,V){if(!(!T||T.nodeType===3||T.nodeType===8||!T.style)){var te,ne,ue,Ae=Ee(A),Ce=Oi.test(A),Ve=T.style;if(Ce||(A=ur(Ae)),ue=_.cssHooks[A]||_.cssHooks[Ae],N!==void 0){if(ne=typeof N,ne==="string"&&(te=ye.exec(N))&&te[1]&&(N=Xe(T,A,te),ne="number"),N==null||N!==N)return;ne==="number"&&!Ce&&(N+=te&&te[3]||(_.cssNumber[Ae]?"":"px")),!d.clearCloneStyle&&N===""&&A.indexOf("background")===0&&(Ve[A]="inherit"),(!ue||!("set"in ue)||(N=ue.set(T,N,V))!==void 0)&&(Ce?Ve.setProperty(A,N):Ve[A]=N)}else return ue&&"get"in ue&&(te=ue.get(T,!1,V))!==void 0?te:Ve[A]}},css:function(T,A,N,V){var te,ne,ue,Ae=Ee(A),Ce=Oi.test(A);return Ce||(A=ur(Ae)),ue=_.cssHooks[A]||_.cssHooks[Ae],ue&&"get"in ue&&(te=ue.get(T,!0,N)),te===void 0&&(te=xt(T,A,V)),te==="normal"&&A in Yr&&(te=Yr[A]),N===""||N?(ne=parseFloat(te),N===!0||isFinite(ne)?ne||0:te):te}}),_.each(["height","width"],function(T,A){_.cssHooks[A]={get:function(N,V,te){if(V)return Tt.test(_.css(N,"display"))&&(!N.getClientRects().length||!N.getBoundingClientRect().width)?Wi(N,tn,function(){return Cn(N,A,te)}):Cn(N,A,te)},set:function(N,V,te){var ne,ue=Un(N),Ae=!d.scrollboxSize()&&ue.position==="absolute",Ce=Ae||te,Ve=Ce&&_.css(N,"boxSizing",!1,ue)==="border-box",et=te?gr(N,A,te,Ve,ue):0;return Ve&&Ae&&(et-=Math.ceil(N["offset"+A[0].toUpperCase()+A.slice(1)]-parseFloat(ue[A])-gr(N,A,"border",!1,ue)-.5)),et&&(ne=ye.exec(V))&&(ne[3]||"px")!=="px"&&(N.style[A]=V,V=_.css(N,A)),_r(N,V,et)}}}),_.cssHooks.marginLeft=ft(d.reliableMarginLeft,function(T,A){if(A)return(parseFloat(xt(T,"marginLeft"))||T.getBoundingClientRect().left-Wi(T,{marginLeft:0},function(){return T.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(T,A){_.cssHooks[T+A]={expand:function(N){for(var V=0,te={},ne=typeof N=="string"?N.split(" "):[N];V<4;V++)te[T+Fe[V]+A]=ne[V]||ne[V-2]||ne[0];return te}},T!=="margin"&&(_.cssHooks[T+A].set=_r)}),_.fn.extend({css:function(T,A){return ge(this,function(N,V,te){var ne,ue,Ae={},Ce=0;if(Array.isArray(V)){for(ne=Un(N),ue=V.length;Ce<ue;Ce++)Ae[V[Ce]]=_.css(N,V[Ce],!1,ne);return Ae}return te!==void 0?_.style(N,V,te):_.css(N,V)},T,A,arguments.length>1)}});function or(T,A,N,V,te){return new or.prototype.init(T,A,N,V,te)}_.Tween=or,or.prototype={constructor:or,init:function(T,A,N,V,te,ne){this.elem=T,this.prop=N,this.easing=te||_.easing._default,this.options=A,this.start=this.now=this.cur(),this.end=V,this.unit=ne||(_.cssNumber[N]?"":"px")},cur:function(){var T=or.propHooks[this.prop];return T&&T.get?T.get(this):or.propHooks._default.get(this)},run:function(T){var A,N=or.propHooks[this.prop];return this.options.duration?this.pos=A=_.easing[this.easing](T,this.options.duration*T,0,1,this.options.duration):this.pos=A=T,this.now=(this.end-this.start)*A+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),N&&N.set?N.set(this):or.propHooks._default.set(this),this}},or.prototype.init.prototype=or.prototype,or.propHooks={_default:{get:function(T){var A;return T.elem.nodeType!==1||T.elem[T.prop]!=null&&T.elem.style[T.prop]==null?T.elem[T.prop]:(A=_.css(T.elem,T.prop,""),!A||A==="auto"?0:A)},set:function(T){_.fx.step[T.prop]?_.fx.step[T.prop](T):T.elem.nodeType===1&&(_.cssHooks[T.prop]||T.elem.style[ur(T.prop)]!=null)?_.style(T.elem,T.prop,T.now+T.unit):T.elem[T.prop]=T.now}}},or.propHooks.scrollTop=or.propHooks.scrollLeft={set:function(T){T.elem.nodeType&&T.elem.parentNode&&(T.elem[T.prop]=T.now)}},_.easing={linear:function(T){return T},swing:function(T){return .5-Math.cos(T*Math.PI)/2},_default:"swing"},_.fx=or.prototype.init,_.fx.step={};var jn,zr,ei=/^(?:toggle|show|hide)$/,ti=/queueHooks$/;function di(){zr&&(b.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(di):t.setTimeout(di,_.fx.interval),_.fx.tick())}function In(){return t.setTimeout(function(){jn=void 0}),jn=Date.now()}function ds(T,A){var N,V=0,te={height:T};for(A=A?1:0;V<4;V+=2-A)N=Fe[V],te["margin"+N]=te["padding"+N]=T;return A&&(te.opacity=te.width=T),te}function fs(T,A,N){for(var V,te=(mr.tweeners[A]||[]).concat(mr.tweeners["*"]),ne=0,ue=te.length;ne<ue;ne++)if(V=te[ne].call(N,A,T))return V}function ri(T,A,N){var V,te,ne,ue,Ae,Ce,Ve,et,vt="width"in A||"height"in A,Qe=this,it={},Rt=T.style,Xt=T.nodeType&&je(T),ut=be.get(T,"fxshow");N.queue||(ue=_._queueHooks(T,"fx"),ue.unqueued==null&&(ue.unqueued=0,Ae=ue.empty.fire,ue.empty.fire=function(){ue.unqueued||Ae()}),ue.unqueued++,Qe.always(function(){Qe.always(function(){ue.unqueued--,_.queue(T,"fx").length||ue.empty.fire()})}));for(V in A)if(te=A[V],ei.test(te)){if(delete A[V],ne=ne||te==="toggle",te===(Xt?"hide":"show"))if(te==="show"&&ut&&ut[V]!==void 0)Xt=!0;else continue;it[V]=ut&&ut[V]||_.style(T,V)}if(Ce=!_.isEmptyObject(A),!(!Ce&&_.isEmptyObject(it))){vt&&T.nodeType===1&&(N.overflow=[Rt.overflow,Rt.overflowX,Rt.overflowY],Ve=ut&&ut.display,Ve==null&&(Ve=be.get(T,"display")),et=_.css(T,"display"),et==="none"&&(Ve?et=Ve:(ie([T],!0),Ve=T.style.display||Ve,et=_.css(T,"display"),ie([T]))),(et==="inline"||et==="inline-block"&&Ve!=null)&&_.css(T,"float")==="none"&&(Ce||(Qe.done(function(){Rt.display=Ve}),Ve==null&&(et=Rt.display,Ve=et==="none"?"":et)),Rt.display="inline-block")),N.overflow&&(Rt.overflow="hidden",Qe.always(function(){Rt.overflow=N.overflow[0],Rt.overflowX=N.overflow[1],Rt.overflowY=N.overflow[2]})),Ce=!1;for(V in it)Ce||(ut?"hidden"in ut&&(Xt=ut.hidden):ut=be.access(T,"fxshow",{display:Ve}),ne&&(ut.hidden=!Xt),Xt&&ie([T],!0),Qe.done(function(){Xt||ie([T]),be.remove(T,"fxshow");for(V in it)_.style(T,V,it[V])})),Ce=fs(Xt?ut[V]:0,V,Qe),V in ut||(ut[V]=Ce.start,Xt&&(Ce.end=Ce.start,Ce.start=0))}}function Ir(T,A){var N,V,te,ne,ue;for(N in T)if(V=Ee(N),te=A[V],ne=T[N],Array.isArray(ne)&&(te=ne[1],ne=T[N]=ne[0]),N!==V&&(T[V]=ne,delete T[N]),ue=_.cssHooks[V],ue&&"expand"in ue){ne=ue.expand(ne),delete T[V];for(N in ne)N in T||(T[N]=ne[N],A[N]=te)}else A[V]=te}function mr(T,A,N){var V,te,ne=0,ue=mr.prefilters.length,Ae=_.Deferred().always(function(){delete Ce.elem}),Ce=function(){if(te)return!1;for(var vt=jn||In(),Qe=Math.max(0,Ve.startTime+Ve.duration-vt),it=Qe/Ve.duration||0,Rt=1-it,Xt=0,ut=Ve.tweens.length;Xt<ut;Xt++)Ve.tweens[Xt].run(Rt);return Ae.notifyWith(T,[Ve,Rt,Qe]),Rt<1&&ut?Qe:(ut||Ae.notifyWith(T,[Ve,1,0]),Ae.resolveWith(T,[Ve]),!1)},Ve=Ae.promise({elem:T,props:_.extend({},A),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},N),originalProperties:A,originalOptions:N,startTime:jn||In(),duration:N.duration,tweens:[],createTween:function(vt,Qe){var it=_.Tween(T,Ve.opts,vt,Qe,Ve.opts.specialEasing[vt]||Ve.opts.easing);return Ve.tweens.push(it),it},stop:function(vt){var Qe=0,it=vt?Ve.tweens.length:0;if(te)return this;for(te=!0;Qe<it;Qe++)Ve.tweens[Qe].run(1);return vt?(Ae.notifyWith(T,[Ve,1,0]),Ae.resolveWith(T,[Ve,vt])):Ae.rejectWith(T,[Ve,vt]),this}}),et=Ve.props;for(Ir(et,Ve.opts.specialEasing);ne<ue;ne++)if(V=mr.prefilters[ne].call(Ve,T,et,Ve.opts),V)return g(V.stop)&&(_._queueHooks(Ve.elem,Ve.opts.queue).stop=V.stop.bind(V)),V;return _.map(et,fs,Ve),g(Ve.opts.start)&&Ve.opts.start.call(T,Ve),Ve.progress(Ve.opts.progress).done(Ve.opts.done,Ve.opts.complete).fail(Ve.opts.fail).always(Ve.opts.always),_.fx.timer(_.extend(Ce,{elem:T,anim:Ve,queue:Ve.opts.queue})),Ve}_.Animation=_.extend(mr,{tweeners:{"*":[function(T,A){var N=this.createTween(T,A);return Xe(N.elem,T,ye.exec(A),N),N}]},tweener:function(T,A){g(T)?(A=T,T=["*"]):T=T.match(Y);for(var N,V=0,te=T.length;V<te;V++)N=T[V],mr.tweeners[N]=mr.tweeners[N]||[],mr.tweeners[N].unshift(A)},prefilters:[ri],prefilter:function(T,A){A?mr.prefilters.unshift(T):mr.prefilters.push(T)}}),_.speed=function(T,A,N){var V=T&&typeof T=="object"?_.extend({},T):{complete:N||!N&&A||g(T)&&T,duration:T,easing:N&&A||A&&!g(A)&&A};return _.fx.off?V.duration=0:typeof V.duration!="number"&&(V.duration in _.fx.speeds?V.duration=_.fx.speeds[V.duration]:V.duration=_.fx.speeds._default),(V.queue==null||V.queue===!0)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){g(V.old)&&V.old.call(this),V.queue&&_.dequeue(this,V.queue)},V},_.fn.extend({fadeTo:function(T,A,N,V){return this.filter(je).css("opacity",0).show().end().animate({opacity:A},T,N,V)},animate:function(T,A,N,V){var te=_.isEmptyObject(T),ne=_.speed(A,N,V),ue=function(){var Ae=mr(this,_.extend({},T),ne);(te||be.get(this,"finish"))&&Ae.stop(!0)};return ue.finish=ue,te||ne.queue===!1?this.each(ue):this.queue(ne.queue,ue)},stop:function(T,A,N){var V=function(te){var ne=te.stop;delete te.stop,ne(N)};return typeof T!="string"&&(N=A,A=T,T=void 0),A&&this.queue(T||"fx",[]),this.each(function(){var te=!0,ne=T!=null&&T+"queueHooks",ue=_.timers,Ae=be.get(this);if(ne)Ae[ne]&&Ae[ne].stop&&V(Ae[ne]);else for(ne in Ae)Ae[ne]&&Ae[ne].stop&&ti.test(ne)&&V(Ae[ne]);for(ne=ue.length;ne--;)ue[ne].elem===this&&(T==null||ue[ne].queue===T)&&(ue[ne].anim.stop(N),te=!1,ue.splice(ne,1));(te||!N)&&_.dequeue(this,T)})},finish:function(T){return T!==!1&&(T=T||"fx"),this.each(function(){var A,N=be.get(this),V=N[T+"queue"],te=N[T+"queueHooks"],ne=_.timers,ue=V?V.length:0;for(N.finish=!0,_.queue(this,T,[]),te&&te.stop&&te.stop.call(this,!0),A=ne.length;A--;)ne[A].elem===this&&ne[A].queue===T&&(ne[A].anim.stop(!0),ne.splice(A,1));for(A=0;A<ue;A++)V[A]&&V[A].finish&&V[A].finish.call(this);delete N.finish})}}),_.each(["toggle","show","hide"],function(T,A){var N=_.fn[A];_.fn[A]=function(V,te,ne){return V==null||typeof V=="boolean"?N.apply(this,arguments):this.animate(ds(A,!0),V,te,ne)}}),_.each({slideDown:ds("show"),slideUp:ds("hide"),slideToggle:ds("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(T,A){_.fn[T]=function(N,V,te){return this.animate(A,N,V,te)}}),_.timers=[],_.fx.tick=function(){var T,A=0,N=_.timers;for(jn=Date.now();A<N.length;A++)T=N[A],!T()&&N[A]===T&&N.splice(A--,1);N.length||_.fx.stop(),jn=void 0},_.fx.timer=function(T){_.timers.push(T),_.fx.start()},_.fx.interval=13,_.fx.start=function(){zr||(zr=!0,di())},_.fx.stop=function(){zr=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(T,A){return T=_.fx&&_.fx.speeds[T]||T,A=A||"fx",this.queue(A,function(N,V){var te=t.setTimeout(N,T);V.stop=function(){t.clearTimeout(te)}})},function(){var T=b.createElement("input"),A=b.createElement("select"),N=A.appendChild(b.createElement("option"));T.type="checkbox",d.checkOn=T.value!=="",d.optSelected=N.selected,T=b.createElement("input"),T.value="t",T.type="radio",d.radioValue=T.value==="t"}();var Er,Ci=_.expr.attrHandle;_.fn.extend({attr:function(T,A){return ge(this,_.attr,T,A,arguments.length>1)},removeAttr:function(T){return this.each(function(){_.removeAttr(this,T)})}}),_.extend({attr:function(T,A,N){var V,te,ne=T.nodeType;if(!(ne===3||ne===8||ne===2)){if(typeof T.getAttribute>"u")return _.prop(T,A,N);if((ne!==1||!_.isXMLDoc(T))&&(te=_.attrHooks[A.toLowerCase()]||(_.expr.match.bool.test(A)?Er:void 0)),N!==void 0){if(N===null){_.removeAttr(T,A);return}return te&&"set"in te&&(V=te.set(T,N,A))!==void 0?V:(T.setAttribute(A,N+""),N)}return te&&"get"in te&&(V=te.get(T,A))!==null?V:(V=_.find.attr(T,A),V??void 0)}},attrHooks:{type:{set:function(T,A){if(!d.radioValue&&A==="radio"&&U(T,"input")){var N=T.value;return T.setAttribute("type",A),N&&(T.value=N),A}}}},removeAttr:function(T,A){var N,V=0,te=A&&A.match(Y);if(te&&T.nodeType===1)for(;N=te[V++];)T.removeAttribute(N)}}),Er={set:function(T,A,N){return A===!1?_.removeAttr(T,N):T.setAttribute(N,N),N}},_.each(_.expr.match.bool.source.match(/\w+/g),function(T,A){var N=Ci[A]||_.find.attr;Ci[A]=function(V,te,ne){var ue,Ae,Ce=te.toLowerCase();return ne||(Ae=Ci[Ce],Ci[Ce]=ue,ue=N(V,te,ne)!=null?Ce:null,Ci[Ce]=Ae),ue}});var ba=/^(?:input|select|textarea|button)$/i,to=/^(?:a|area)$/i;_.fn.extend({prop:function(T,A){return ge(this,_.prop,T,A,arguments.length>1)},removeProp:function(T){return this.each(function(){delete this[_.propFix[T]||T]})}}),_.extend({prop:function(T,A,N){var V,te,ne=T.nodeType;if(!(ne===3||ne===8||ne===2))return(ne!==1||!_.isXMLDoc(T))&&(A=_.propFix[A]||A,te=_.propHooks[A]),N!==void 0?te&&"set"in te&&(V=te.set(T,N,A))!==void 0?V:T[A]=N:te&&"get"in te&&(V=te.get(T,A))!==null?V:T[A]},propHooks:{tabIndex:{get:function(T){var A=_.find.attr(T,"tabindex");return A?parseInt(A,10):ba.test(T.nodeName)||to.test(T.nodeName)&&T.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(_.propHooks.selected={get:function(T){var A=T.parentNode;return A&&A.parentNode&&A.parentNode.selectedIndex,null},set:function(T){var A=T.parentNode;A&&(A.selectedIndex,A.parentNode&&A.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function Ii(T){var A=T.match(Y)||[];return A.join(" ")}function Pi(T){return T.getAttribute&&T.getAttribute("class")||""}function Pn(T){return Array.isArray(T)?T:typeof T=="string"?T.match(Y)||[]:[]}_.fn.extend({addClass:function(T){var A,N,V,te,ne,ue;return g(T)?this.each(function(Ae){_(this).addClass(T.call(this,Ae,Pi(this)))}):(A=Pn(T),A.length?this.each(function(){if(V=Pi(this),N=this.nodeType===1&&" "+Ii(V)+" ",N){for(ne=0;ne<A.length;ne++)te=A[ne],N.indexOf(" "+te+" ")<0&&(N+=te+" ");ue=Ii(N),V!==ue&&this.setAttribute("class",ue)}}):this)},removeClass:function(T){var A,N,V,te,ne,ue;return g(T)?this.each(function(Ae){_(this).removeClass(T.call(this,Ae,Pi(this)))}):arguments.length?(A=Pn(T),A.length?this.each(function(){if(V=Pi(this),N=this.nodeType===1&&" "+Ii(V)+" ",N){for(ne=0;ne<A.length;ne++)for(te=A[ne];N.indexOf(" "+te+" ")>-1;)N=N.replace(" "+te+" "," ");ue=Ii(N),V!==ue&&this.setAttribute("class",ue)}}):this):this.attr("class","")},toggleClass:function(T,A){var N,V,te,ne,ue=typeof T,Ae=ue==="string"||Array.isArray(T);return g(T)?this.each(function(Ce){_(this).toggleClass(T.call(this,Ce,Pi(this),A),A)}):typeof A=="boolean"&&Ae?A?this.addClass(T):this.removeClass(T):(N=Pn(T),this.each(function(){if(Ae)for(ne=_(this),te=0;te<N.length;te++)V=N[te],ne.hasClass(V)?ne.removeClass(V):ne.addClass(V);else(T===void 0||ue==="boolean")&&(V=Pi(this),V&&be.set(this,"__className__",V),this.setAttribute&&this.setAttribute("class",V||T===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(T){var A,N,V=0;for(A=" "+T+" ";N=this[V++];)if(N.nodeType===1&&(" "+Ii(Pi(N))+" ").indexOf(A)>-1)return!0;return!1}});var Ri=/\r/g;_.fn.extend({val:function(T){var A,N,V,te=this[0];return arguments.length?(V=g(T),this.each(function(ne){var ue;this.nodeType===1&&(V?ue=T.call(this,ne,_(this).val()):ue=T,ue==null?ue="":typeof ue=="number"?ue+="":Array.isArray(ue)&&(ue=_.map(ue,function(Ae){return Ae==null?"":Ae+""})),A=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!A||!("set"in A)||A.set(this,ue,"value")===void 0)&&(this.value=ue))})):te?(A=_.valHooks[te.type]||_.valHooks[te.nodeName.toLowerCase()],A&&"get"in A&&(N=A.get(te,"value"))!==void 0?N:(N=te.value,typeof N=="string"?N.replace(Ri,""):N??"")):void 0}}),_.extend({valHooks:{option:{get:function(T){var A=_.find.attr(T,"value");return A??Ii(_.text(T))}},select:{get:function(T){var A,N,V,te=T.options,ne=T.selectedIndex,ue=T.type==="select-one",Ae=ue?null:[],Ce=ue?ne+1:te.length;for(ne<0?V=Ce:V=ue?ne:0;V<Ce;V++)if(N=te[V],(N.selected||V===ne)&&!N.disabled&&(!N.parentNode.disabled||!U(N.parentNode,"optgroup"))){if(A=_(N).val(),ue)return A;Ae.push(A)}return Ae},set:function(T,A){for(var N,V,te=T.options,ne=_.makeArray(A),ue=te.length;ue--;)V=te[ue],(V.selected=_.inArray(_.valHooks.option.get(V),ne)>-1)&&(N=!0);return N||(T.selectedIndex=-1),ne}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(T,A){if(Array.isArray(A))return T.checked=_.inArray(_(T).val(),A)>-1}},d.checkOn||(_.valHooks[this].get=function(T){return T.getAttribute("value")===null?"on":T.value})}),d.focusin="onfocusin"in t;var Tn=/^(?:focusinfocus|focusoutblur)$/,ro=function(T){T.stopPropagation()};_.extend(_.event,{trigger:function(T,A,N,V){var te,ne,ue,Ae,Ce,Ve,et,vt,Qe=[N||b],it=m.call(T,"type")?T.type:T,Rt=m.call(T,"namespace")?T.namespace.split("."):[];if(ne=vt=ue=N=N||b,!(N.nodeType===3||N.nodeType===8)&&!Tn.test(it+_.event.triggered)&&(it.indexOf(".")>-1&&(Rt=it.split("."),it=Rt.shift(),Rt.sort()),Ce=it.indexOf(":")<0&&"on"+it,T=T[_.expando]?T:new _.Event(it,typeof T=="object"&&T),T.isTrigger=V?2:3,T.namespace=Rt.join("."),T.rnamespace=T.namespace?new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,T.result=void 0,T.target||(T.target=N),A=A==null?[T]:_.makeArray(A,[T]),et=_.event.special[it]||{},!(!V&&et.trigger&&et.trigger.apply(N,A)===!1))){if(!V&&!et.noBubble&&!y(N)){for(Ae=et.delegateType||it,Tn.test(Ae+it)||(ne=ne.parentNode);ne;ne=ne.parentNode)Qe.push(ne),ue=ne;ue===(N.ownerDocument||b)&&Qe.push(ue.defaultView||ue.parentWindow||t)}for(te=0;(ne=Qe[te++])&&!T.isPropagationStopped();)vt=ne,T.type=te>1?Ae:et.bindType||it,Ve=(be.get(ne,"events")||Object.create(null))[T.type]&&be.get(ne,"handle"),Ve&&Ve.apply(ne,A),Ve=Ce&&ne[Ce],Ve&&Ve.apply&&le(ne)&&(T.result=Ve.apply(ne,A),T.result===!1&&T.preventDefault());return T.type=it,!V&&!T.isDefaultPrevented()&&(!et._default||et._default.apply(Qe.pop(),A)===!1)&&le(N)&&Ce&&g(N[it])&&!y(N)&&(ue=N[Ce],ue&&(N[Ce]=null),_.event.triggered=it,T.isPropagationStopped()&&vt.addEventListener(it,ro),N[it](),T.isPropagationStopped()&&vt.removeEventListener(it,ro),_.event.triggered=void 0,ue&&(N[Ce]=ue)),T.result}},simulate:function(T,A,N){var V=_.extend(new _.Event,N,{type:T,isSimulated:!0});_.event.trigger(V,null,A)}}),_.fn.extend({trigger:function(T,A){return this.each(function(){_.event.trigger(T,A,this)})},triggerHandler:function(T,A){var N=this[0];if(N)return _.event.trigger(T,A,N,!0)}}),d.focusin||_.each({focus:"focusin",blur:"focusout"},function(T,A){var N=function(V){_.event.simulate(A,V.target,_.event.fix(V))};_.event.special[A]={setup:function(){var V=this.ownerDocument||this.document||this,te=be.access(V,A);te||V.addEventListener(T,N,!0),be.access(V,A,(te||0)+1)},teardown:function(){var V=this.ownerDocument||this.document||this,te=be.access(V,A)-1;te?be.access(V,A,te):(V.removeEventListener(T,N,!0),be.remove(V,A))}}});var es=t.location,ni={guid:Date.now()},Ds=/\?/;_.parseXML=function(T){var A,N;if(!T||typeof T!="string")return null;try{A=new t.DOMParser().parseFromString(T,"text/xml")}catch{}return N=A&&A.getElementsByTagName("parsererror")[0],(!A||N)&&_.error("Invalid XML: "+(N?_.map(N.childNodes,function(V){return V.textContent}).join(`
`):T)),A};var no=/\[\]$/,ts=/\r?\n/g,Bo=/^(?:submit|button|image|reset|file)$/i,_a=/^(?:input|select|textarea|keygen)/i;function Ls(T,A,N,V){var te;if(Array.isArray(A))_.each(A,function(ne,ue){N||no.test(T)?V(T,ue):Ls(T+"["+(typeof ue=="object"&&ue!=null?ne:"")+"]",ue,N,V)});else if(!N&&S(A)==="object")for(te in A)Ls(T+"["+te+"]",A[te],N,V);else V(T,A)}_.param=function(T,A){var N,V=[],te=function(ne,ue){var Ae=g(ue)?ue():ue;V[V.length]=encodeURIComponent(ne)+"="+encodeURIComponent(Ae??"")};if(T==null)return"";if(Array.isArray(T)||T.jquery&&!_.isPlainObject(T))_.each(T,function(){te(this.name,this.value)});else for(N in T)Ls(N,T[N],A,te);return V.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var T=_.prop(this,"elements");return T?_.makeArray(T):this}).filter(function(){var T=this.type;return this.name&&!_(this).is(":disabled")&&_a.test(this.nodeName)&&!Bo.test(T)&&(this.checked||!X.test(T))}).map(function(T,A){var N=_(this).val();return N==null?null:Array.isArray(N)?_.map(N,function(V){return{name:A.name,value:V.replace(ts,`\r
`)}}):{name:A.name,value:N.replace(ts,`\r
`)}}).get()}});var Di=/%20/g,wa=/#.*$/,Fo=/([?&])_=[^&]*/,xa=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sa=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ca=/^(?:GET|HEAD)$/,io=/^\/\//,ps={},qn={},fi="*/".concat("*"),qi=b.createElement("a");qi.href=es.href;function rs(T){return function(A,N){typeof A!="string"&&(N=A,A="*");var V,te=0,ne=A.toLowerCase().match(Y)||[];if(g(N))for(;V=ne[te++];)V[0]==="+"?(V=V.slice(1)||"*",(T[V]=T[V]||[]).unshift(N)):(T[V]=T[V]||[]).push(N)}}function pi(T,A,N,V){var te={},ne=T===qn;function ue(Ae){var Ce;return te[Ae]=!0,_.each(T[Ae]||[],function(Ve,et){var vt=et(A,N,V);if(typeof vt=="string"&&!ne&&!te[vt])return A.dataTypes.unshift(vt),ue(vt),!1;if(ne)return!(Ce=vt)}),Ce}return ue(A.dataTypes[0])||!te["*"]&&ue("*")}function $i(T,A){var N,V,te=_.ajaxSettings.flatOptions||{};for(N in A)A[N]!==void 0&&((te[N]?T:V||(V={}))[N]=A[N]);return V&&_.extend(!0,T,V),T}function ja(T,A,N){for(var V,te,ne,ue,Ae=T.contents,Ce=T.dataTypes;Ce[0]==="*";)Ce.shift(),V===void 0&&(V=T.mimeType||A.getResponseHeader("Content-Type"));if(V){for(te in Ae)if(Ae[te]&&Ae[te].test(V)){Ce.unshift(te);break}}if(Ce[0]in N)ne=Ce[0];else{for(te in N){if(!Ce[0]||T.converters[te+" "+Ce[0]]){ne=te;break}ue||(ue=te)}ne=ne||ue}if(ne)return ne!==Ce[0]&&Ce.unshift(ne),N[ne]}function mi(T,A,N,V){var te,ne,ue,Ae,Ce,Ve={},et=T.dataTypes.slice();if(et[1])for(ue in T.converters)Ve[ue.toLowerCase()]=T.converters[ue];for(ne=et.shift();ne;)if(T.responseFields[ne]&&(N[T.responseFields[ne]]=A),!Ce&&V&&T.dataFilter&&(A=T.dataFilter(A,T.dataType)),Ce=ne,ne=et.shift(),ne){if(ne==="*")ne=Ce;else if(Ce!=="*"&&Ce!==ne){if(ue=Ve[Ce+" "+ne]||Ve["* "+ne],!ue){for(te in Ve)if(Ae=te.split(" "),Ae[1]===ne&&(ue=Ve[Ce+" "+Ae[0]]||Ve["* "+Ae[0]],ue)){ue===!0?ue=Ve[te]:Ve[te]!==!0&&(ne=Ae[0],et.unshift(Ae[1]));break}}if(ue!==!0)if(ue&&T.throws)A=ue(A);else try{A=ue(A)}catch(vt){return{state:"parsererror",error:ue?vt:"No conversion from "+Ce+" to "+ne}}}}return{state:"success",data:A}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:es.href,type:"GET",isLocal:Sa.test(es.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":fi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(T,A){return A?$i($i(T,_.ajaxSettings),A):$i(_.ajaxSettings,T)},ajaxPrefilter:rs(ps),ajaxTransport:rs(qn),ajax:function(T,A){typeof T=="object"&&(A=T,T=void 0),A=A||{};var N,V,te,ne,ue,Ae,Ce,Ve,et,vt,Qe=_.ajaxSetup({},A),it=Qe.context||Qe,Rt=Qe.context&&(it.nodeType||it.jquery)?_(it):_.event,Xt=_.Deferred(),ut=_.Callbacks("once memory"),_n=Qe.statusCode||{},gn={},kn={},Nr="canceled",nr={readyState:0,getResponseHeader:function(Cr){var on;if(Ce){if(!ne)for(ne={};on=xa.exec(te);)ne[on[1].toLowerCase()+" "]=(ne[on[1].toLowerCase()+" "]||[]).concat(on[2]);on=ne[Cr.toLowerCase()+" "]}return on==null?null:on.join(", ")},getAllResponseHeaders:function(){return Ce?te:null},setRequestHeader:function(Cr,on){return Ce==null&&(Cr=kn[Cr.toLowerCase()]=kn[Cr.toLowerCase()]||Cr,gn[Cr]=on),this},overrideMimeType:function(Cr){return Ce==null&&(Qe.mimeType=Cr),this},statusCode:function(Cr){var on;if(Cr)if(Ce)nr.always(Cr[nr.status]);else for(on in Cr)_n[on]=[_n[on],Cr[on]];return this},abort:function(Cr){var on=Cr||Nr;return N&&N.abort(on),hr(0,on),this}};if(Xt.promise(nr),Qe.url=((T||Qe.url||es.href)+"").replace(io,es.protocol+"//"),Qe.type=A.method||A.type||Qe.method||Qe.type,Qe.dataTypes=(Qe.dataType||"*").toLowerCase().match(Y)||[""],Qe.crossDomain==null){Ae=b.createElement("a");try{Ae.href=Qe.url,Ae.href=Ae.href,Qe.crossDomain=qi.protocol+"//"+qi.host!=Ae.protocol+"//"+Ae.host}catch{Qe.crossDomain=!0}}if(Qe.data&&Qe.processData&&typeof Qe.data!="string"&&(Qe.data=_.param(Qe.data,Qe.traditional)),pi(ps,Qe,A,nr),Ce)return nr;Ve=_.event&&Qe.global,Ve&&_.active++===0&&_.event.trigger("ajaxStart"),Qe.type=Qe.type.toUpperCase(),Qe.hasContent=!Ca.test(Qe.type),V=Qe.url.replace(wa,""),Qe.hasContent?Qe.data&&Qe.processData&&(Qe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Qe.data=Qe.data.replace(Di,"+")):(vt=Qe.url.slice(V.length),Qe.data&&(Qe.processData||typeof Qe.data=="string")&&(V+=(Ds.test(V)?"&":"?")+Qe.data,delete Qe.data),Qe.cache===!1&&(V=V.replace(Fo,"$1"),vt=(Ds.test(V)?"&":"?")+"_="+ni.guid+++vt),Qe.url=V+vt),Qe.ifModified&&(_.lastModified[V]&&nr.setRequestHeader("If-Modified-Since",_.lastModified[V]),_.etag[V]&&nr.setRequestHeader("If-None-Match",_.etag[V])),(Qe.data&&Qe.hasContent&&Qe.contentType!==!1||A.contentType)&&nr.setRequestHeader("Content-Type",Qe.contentType),nr.setRequestHeader("Accept",Qe.dataTypes[0]&&Qe.accepts[Qe.dataTypes[0]]?Qe.accepts[Qe.dataTypes[0]]+(Qe.dataTypes[0]!=="*"?", "+fi+"; q=0.01":""):Qe.accepts["*"]);for(et in Qe.headers)nr.setRequestHeader(et,Qe.headers[et]);if(Qe.beforeSend&&(Qe.beforeSend.call(it,nr,Qe)===!1||Ce))return nr.abort();if(Nr="abort",ut.add(Qe.complete),nr.done(Qe.success),nr.fail(Qe.error),N=pi(qn,Qe,A,nr),!N)hr(-1,"No Transport");else{if(nr.readyState=1,Ve&&Rt.trigger("ajaxSend",[nr,Qe]),Ce)return nr;Qe.async&&Qe.timeout>0&&(ue=t.setTimeout(function(){nr.abort("timeout")},Qe.timeout));try{Ce=!1,N.send(gn,hr)}catch(Cr){if(Ce)throw Cr;hr(-1,Cr)}}function hr(Cr,on,$n,Ta){var gi,Bs,Fs,ii,ms,yi=on;Ce||(Ce=!0,ue&&t.clearTimeout(ue),N=void 0,te=Ta||"",nr.readyState=Cr>0?4:0,gi=Cr>=200&&Cr<300||Cr===304,$n&&(ii=ja(Qe,nr,$n)),!gi&&_.inArray("script",Qe.dataTypes)>-1&&_.inArray("json",Qe.dataTypes)<0&&(Qe.converters["text script"]=function(){}),ii=mi(Qe,ii,nr,gi),gi?(Qe.ifModified&&(ms=nr.getResponseHeader("Last-Modified"),ms&&(_.lastModified[V]=ms),ms=nr.getResponseHeader("etag"),ms&&(_.etag[V]=ms)),Cr===204||Qe.type==="HEAD"?yi="nocontent":Cr===304?yi="notmodified":(yi=ii.state,Bs=ii.data,Fs=ii.error,gi=!Fs)):(Fs=yi,(Cr||!yi)&&(yi="error",Cr<0&&(Cr=0))),nr.status=Cr,nr.statusText=(on||yi)+"",gi?Xt.resolveWith(it,[Bs,yi,nr]):Xt.rejectWith(it,[nr,yi,Fs]),nr.statusCode(_n),_n=void 0,Ve&&Rt.trigger(gi?"ajaxSuccess":"ajaxError",[nr,Qe,gi?Bs:Fs]),ut.fireWith(it,[nr,yi]),Ve&&(Rt.trigger("ajaxComplete",[nr,Qe]),--_.active||_.event.trigger("ajaxStop")))}return nr},getJSON:function(T,A,N){return _.get(T,A,N,"json")},getScript:function(T,A){return _.get(T,void 0,A,"script")}}),_.each(["get","post"],function(T,A){_[A]=function(N,V,te,ne){return g(V)&&(ne=ne||te,te=V,V=void 0),_.ajax(_.extend({url:N,type:A,dataType:ne,data:V,success:te},_.isPlainObject(N)&&N))}}),_.ajaxPrefilter(function(T){var A;for(A in T.headers)A.toLowerCase()==="content-type"&&(T.contentType=T.headers[A]||"")}),_._evalUrl=function(T,A,N){return _.ajax({url:T,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(V){_.globalEval(V,A,N)}})},_.fn.extend({wrapAll:function(T){var A;return this[0]&&(g(T)&&(T=T.call(this[0])),A=_(T,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&A.insertBefore(this[0]),A.map(function(){for(var N=this;N.firstElementChild;)N=N.firstElementChild;return N}).append(this)),this},wrapInner:function(T){return g(T)?this.each(function(A){_(this).wrapInner(T.call(this,A))}):this.each(function(){var A=_(this),N=A.contents();N.length?N.wrapAll(T):A.append(T)})},wrap:function(T){var A=g(T);return this.each(function(N){_(this).wrapAll(A?T.call(this,N):T)})},unwrap:function(T){return this.parent(T).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(T){return!_.expr.pseudos.visible(T)},_.expr.pseudos.visible=function(T){return!!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Ns={0:200,1223:204},ns=_.ajaxSettings.xhr();d.cors=!!ns&&"withCredentials"in ns,d.ajax=ns=!!ns,_.ajaxTransport(function(T){var A,N;if(d.cors||ns&&!T.crossDomain)return{send:function(V,te){var ne,ue=T.xhr();if(ue.open(T.type,T.url,T.async,T.username,T.password),T.xhrFields)for(ne in T.xhrFields)ue[ne]=T.xhrFields[ne];T.mimeType&&ue.overrideMimeType&&ue.overrideMimeType(T.mimeType),!T.crossDomain&&!V["X-Requested-With"]&&(V["X-Requested-With"]="XMLHttpRequest");for(ne in V)ue.setRequestHeader(ne,V[ne]);A=function(Ae){return function(){A&&(A=N=ue.onload=ue.onerror=ue.onabort=ue.ontimeout=ue.onreadystatechange=null,Ae==="abort"?ue.abort():Ae==="error"?typeof ue.status!="number"?te(0,"error"):te(ue.status,ue.statusText):te(Ns[ue.status]||ue.status,ue.statusText,(ue.responseType||"text")!=="text"||typeof ue.responseText!="string"?{binary:ue.response}:{text:ue.responseText},ue.getAllResponseHeaders()))}},ue.onload=A(),N=ue.onerror=ue.ontimeout=A("error"),ue.onabort!==void 0?ue.onabort=N:ue.onreadystatechange=function(){ue.readyState===4&&t.setTimeout(function(){A&&N()})},A=A("abort");try{ue.send(T.hasContent&&T.data||null)}catch(Ae){if(A)throw Ae}},abort:function(){A&&A()}}}),_.ajaxPrefilter(function(T){T.crossDomain&&(T.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(T){return _.globalEval(T),T}}}),_.ajaxPrefilter("script",function(T){T.cache===void 0&&(T.cache=!1),T.crossDomain&&(T.type="GET")}),_.ajaxTransport("script",function(T){if(T.crossDomain||T.scriptAttrs){var A,N;return{send:function(V,te){A=_("<script>").attr(T.scriptAttrs||{}).prop({charset:T.scriptCharset,src:T.url}).on("load error",N=function(ne){A.remove(),N=null,ne&&te(ne.type==="error"?404:200,ne.type)}),b.head.appendChild(A[0])},abort:function(){N&&N()}}}});var so=[],is=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var T=so.pop()||_.expando+"_"+ni.guid++;return this[T]=!0,T}}),_.ajaxPrefilter("json jsonp",function(T,A,N){var V,te,ne,ue=T.jsonp!==!1&&(is.test(T.url)?"url":typeof T.data=="string"&&(T.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&is.test(T.data)&&"data");if(ue||T.dataTypes[0]==="jsonp")return V=T.jsonpCallback=g(T.jsonpCallback)?T.jsonpCallback():T.jsonpCallback,ue?T[ue]=T[ue].replace(is,"$1"+V):T.jsonp!==!1&&(T.url+=(Ds.test(T.url)?"&":"?")+T.jsonp+"="+V),T.converters["script json"]=function(){return ne||_.error(V+" was not called"),ne[0]},T.dataTypes[0]="json",te=t[V],t[V]=function(){ne=arguments},N.always(function(){te===void 0?_(t).removeProp(V):t[V]=te,T[V]&&(T.jsonpCallback=A.jsonpCallback,so.push(V)),ne&&g(te)&&te(ne[0]),ne=te=void 0}),"script"}),d.createHTMLDocument=function(){var T=b.implementation.createHTMLDocument("").body;return T.innerHTML="<form></form><form></form>",T.childNodes.length===2}(),_.parseHTML=function(T,A,N){if(typeof T!="string")return[];typeof A=="boolean"&&(N=A,A=!1);var V,te,ne;return A||(d.createHTMLDocument?(A=b.implementation.createHTMLDocument(""),V=A.createElement("base"),V.href=b.location.href,A.head.appendChild(V)):A=b),te=F.exec(T),ne=!N&&[],te?[A.createElement(te[1])]:(te=wt([T],A,ne),ne&&ne.length&&_(ne).remove(),_.merge([],te.childNodes))},_.fn.load=function(T,A,N){var V,te,ne,ue=this,Ae=T.indexOf(" ");return Ae>-1&&(V=Ii(T.slice(Ae)),T=T.slice(0,Ae)),g(A)?(N=A,A=void 0):A&&typeof A=="object"&&(te="POST"),ue.length>0&&_.ajax({url:T,type:te||"GET",dataType:"html",data:A}).done(function(Ce){ne=arguments,ue.html(V?_("<div>").append(_.parseHTML(Ce)).find(V):Ce)}).always(N&&function(Ce,Ve){ue.each(function(){N.apply(this,ne||[Ce.responseText,Ve,Ce])})}),this},_.expr.pseudos.animated=function(T){return _.grep(_.timers,function(A){return T===A.elem}).length},_.offset={setOffset:function(T,A,N){var V,te,ne,ue,Ae,Ce,Ve,et=_.css(T,"position"),vt=_(T),Qe={};et==="static"&&(T.style.position="relative"),Ae=vt.offset(),ne=_.css(T,"top"),Ce=_.css(T,"left"),Ve=(et==="absolute"||et==="fixed")&&(ne+Ce).indexOf("auto")>-1,Ve?(V=vt.position(),ue=V.top,te=V.left):(ue=parseFloat(ne)||0,te=parseFloat(Ce)||0),g(A)&&(A=A.call(T,N,_.extend({},Ae))),A.top!=null&&(Qe.top=A.top-Ae.top+ue),A.left!=null&&(Qe.left=A.left-Ae.left+te),"using"in A?A.using.call(T,Qe):vt.css(Qe)}},_.fn.extend({offset:function(T){if(arguments.length)return T===void 0?this:this.each(function(te){_.offset.setOffset(this,T,te)});var A,N,V=this[0];if(V)return V.getClientRects().length?(A=V.getBoundingClientRect(),N=V.ownerDocument.defaultView,{top:A.top+N.pageYOffset,left:A.left+N.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var T,A,N,V=this[0],te={top:0,left:0};if(_.css(V,"position")==="fixed")A=V.getBoundingClientRect();else{for(A=this.offset(),N=V.ownerDocument,T=V.offsetParent||N.documentElement;T&&(T===N.body||T===N.documentElement)&&_.css(T,"position")==="static";)T=T.parentNode;T&&T!==V&&T.nodeType===1&&(te=_(T).offset(),te.top+=_.css(T,"borderTopWidth",!0),te.left+=_.css(T,"borderLeftWidth",!0))}return{top:A.top-te.top-_.css(V,"marginTop",!0),left:A.left-te.left-_.css(V,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var T=this.offsetParent;T&&_.css(T,"position")==="static";)T=T.offsetParent;return T||Ue})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(T,A){var N=A==="pageYOffset";_.fn[T]=function(V){return ge(this,function(te,ne,ue){var Ae;if(y(te)?Ae=te:te.nodeType===9&&(Ae=te.defaultView),ue===void 0)return Ae?Ae[A]:te[ne];Ae?Ae.scrollTo(N?Ae.pageXOffset:ue,N?ue:Ae.pageYOffset):te[ne]=ue},T,V,arguments.length)}}),_.each(["top","left"],function(T,A){_.cssHooks[A]=ft(d.pixelPosition,function(N,V){if(V)return V=xt(N,A),Zn.test(V)?_(N).position()[A]+"px":V})}),_.each({Height:"height",Width:"width"},function(T,A){_.each({padding:"inner"+T,content:A,"":"outer"+T},function(N,V){_.fn[V]=function(te,ne){var ue=arguments.length&&(N||typeof te!="boolean"),Ae=N||(te===!0||ne===!0?"margin":"border");return ge(this,function(Ce,Ve,et){var vt;return y(Ce)?V.indexOf("outer")===0?Ce["inner"+T]:Ce.document.documentElement["client"+T]:Ce.nodeType===9?(vt=Ce.documentElement,Math.max(Ce.body["scroll"+T],vt["scroll"+T],Ce.body["offset"+T],vt["offset"+T],vt["client"+T])):et===void 0?_.css(Ce,Ve,Ae):_.style(Ce,Ve,et,Ae)},A,ue?te:void 0,ue)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(T,A){_.fn[A]=function(N){return this.on(A,N)}}),_.fn.extend({bind:function(T,A,N){return this.on(T,null,A,N)},unbind:function(T,A){return this.off(T,null,A)},delegate:function(T,A,N,V){return this.on(A,T,N,V)},undelegate:function(T,A,N){return arguments.length===1?this.off(T,"**"):this.off(A,T||"**",N)},hover:function(T,A){return this.mouseenter(T).mouseleave(A||T)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(T,A){_.fn[A]=function(N,V){return arguments.length>0?this.on(A,null,N,V):this.trigger(A)}});var Uo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(T,A){var N,V,te;if(typeof A=="string"&&(N=T[A],A=T,T=N),!!g(T))return V=a.call(arguments,2),te=function(){return T.apply(A||this,V.concat(a.call(arguments)))},te.guid=T.guid=T.guid||_.guid++,te},_.holdReady=function(T){T?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=U,_.isFunction=g,_.isWindow=y,_.camelCase=Ee,_.type=S,_.now=Date.now,_.isNumeric=function(T){var A=_.type(T);return(A==="number"||A==="string")&&!isNaN(T-parseFloat(T))},_.trim=function(T){return T==null?"":(T+"").replace(Uo,"$1")};var Vo=t.jQuery,Go=t.$;return _.noConflict=function(T){return t.$===_&&(t.$=Go),T&&t.jQuery===_&&(t.jQuery=Vo),_},typeof n>"u"&&(t.jQuery=t.$=_),_})})(wx);const $r=Fd,F0=`// vert file and comments from adam ferriss
// https://github.com/aferriss/p5jsShaderExamples

// our vertex data
attribute vec3 aPosition;
attribute vec2 aTexCoord;

// lets get texcoords just for fun!
varying vec2 vTexCoord;

void main() {
    // copy the texcoords
    vTexCoord = aTexCoord;
    
    // copy the position data into a vec4, using 1.0 as the w component
    vec4 positionVec4 = vec4(aPosition, 1.0);
    positionVec4.xy = positionVec4.xy * 2.0 - 1.0;
    
    // send the vertex information on to the fragment shader
    gl_Position = positionVec4;
}
`;function Lu(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ud={},xx={get exports(){return Ud},set exports(i){Ud=i}};/*! p5.js v1.6.0 February 22, 2023 */(function(i,t){(function(n){i.exports=n()})(function(){var n;return function r(s,a,o){function u(p,m){if(!a[p]){if(!s[p]){var h=typeof Lu=="function"&&Lu;if(!m&&h)return h(p,!0);if(l)return l(p,!0);throw(m=new Error("Cannot find module '"+p+"'")).code="MODULE_NOT_FOUND",m}h=a[p]={exports:{}},s[p][0].call(h.exports,function(f){return u(s[p][1][f]||f)},h,h.exports,r,s,a,o)}return a[p].exports}for(var l=typeof Lu=="function"&&Lu,c=0;c<o.length;c++)u(o[c]);return u}({1:[function(r,s,a){a.byteLength=function(g){var g=h(g),d=g[0],g=g[1];return 3*(d+g)/4-g},a.toByteArray=function(f){var d,g,b=h(f),y=b[0],b=b[1],x=new l(function(w,_){return 3*(w+_)/4-_}(y,b)),C=0,S=0<b?y-4:y;for(g=0;g<S;g+=4)d=u[f.charCodeAt(g)]<<18|u[f.charCodeAt(g+1)]<<12|u[f.charCodeAt(g+2)]<<6|u[f.charCodeAt(g+3)],x[C++]=d>>16&255,x[C++]=d>>8&255,x[C++]=255&d;return b===2&&(d=u[f.charCodeAt(g)]<<2|u[f.charCodeAt(g+1)]>>4,x[C++]=255&d),b===1&&(d=u[f.charCodeAt(g)]<<10|u[f.charCodeAt(g+1)]<<4|u[f.charCodeAt(g+2)]>>2,x[C++]=d>>8&255,x[C++]=255&d),x},a.fromByteArray=function(f){for(var d,g=f.length,y=g%3,b=[],x=0,C=g-y;x<C;x+=16383)b.push(function(S,w,_){for(var M,I=[],R=w;R<_;R+=3)M=(S[R]<<16&16711680)+(S[R+1]<<8&65280)+(255&S[R+2]),I.push(function(P){return o[P>>18&63]+o[P>>12&63]+o[P>>6&63]+o[63&P]}(M));return I.join("")}(f,x,C<x+16383?C:x+16383));return y==1?(d=f[g-1],b.push(o[d>>2]+o[d<<4&63]+"==")):y==2&&(d=(f[g-2]<<8)+f[g-1],b.push(o[d>>10]+o[d>>4&63]+o[d<<2&63]+"=")),b.join("")};for(var o=[],u=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,m=c.length;p<m;++p)o[p]=c[p],u[c.charCodeAt(p)]=p;function h(f){var d=f.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");return f=f.indexOf("="),d=(f=f===-1?d:f)===d?0:4-f%4,[f,d]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(r,s,a){},{}],3:[function(r,s,a){arguments[4][2][0].apply(a,arguments)},{dup:2}],4:[function(r,s,a){(function(h){var u=r("base64-js"),l=r("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,p=(a.Buffer=h,a.SlowBuffer=function(O){return+O!=O&&(O=0),h.alloc(+O)},a.INSPECT_MAX_BYTES=50,2147483647);function m(O){if(p<O)throw new RangeError('The value "'+O+'" is invalid for option "size"');return O=new Uint8Array(O),Object.setPrototypeOf(O,h.prototype),O}function h(O,B,q){if(typeof O!="number")return f(O,B,q);if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(O)}function f(O,B,q){if(typeof O=="string"){var re=O,ae=B;if(h.isEncoding(ae=typeof ae=="string"&&ae!==""?ae:"utf8"))return me=0|x(re,ae),ge=m(me),ge=(re=ge.write(re,ae))!==me?ge.slice(0,re):ge;throw new TypeError("Unknown encoding: "+ae)}if(ArrayBuffer.isView(O))return y(O);if(O!=null){if($(O,ArrayBuffer)||O&&$(O.buffer,ArrayBuffer)){var me=O,re=B,ge=q;if(re<0||me.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(me.byteLength<re+(ge||0))throw new RangeError('"length" is outside of buffer bounds');return me=re===void 0&&ge===void 0?new Uint8Array(me):ge===void 0?new Uint8Array(me,re):new Uint8Array(me,re,ge),Object.setPrototypeOf(me,h.prototype),me}if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ae=O.valueOf&&O.valueOf(),ae!=null&&ae!==O)return h.from(ae,B,q);var xe=function(pe){{var ve,Ee;if(h.isBuffer(pe))return ve=0|b(pe.length),(Ee=m(ve)).length!==0&&pe.copy(Ee,0,0,ve),Ee}if(pe.length!==void 0)return typeof pe.length!="number"||Y(pe.length)?m(0):y(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return y(pe.data)}(O);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return h.from(O[Symbol.toPrimitive]("string"),B,q)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function d(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function g(O){return d(O),m(O<0?0:0|b(O))}function y(O){for(var B=O.length<0?0:0|b(O.length),q=m(B),re=0;re<B;re+=1)q[re]=255&O[re];return q}function b(O){if(p<=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|O}function x(O,B){if(h.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||$(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,re=2<arguments.length&&arguments[2]===!0;if(!re&&q===0)return 0;for(var ae=!1;;)switch(B){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Z(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return K(O).length;default:if(ae)return re?-1:Z(O).length;B=(""+B).toLowerCase(),ae=!0}}function C(O,B,q){var re,ae=!1;if((B=B===void 0||B<0?0:B)>this.length||(q=q===void 0||q>this.length?this.length:q)<=0||(q>>>=0)<=(B>>>=0))return"";for(O=O||"utf8";;)switch(O){case"hex":var me=this,Me=B,ge=q,Ee=me.length;(!ge||ge<0||Ee<ge)&&(ge=Ee);for(var xe="",pe=Me=!Me||Me<0?0:Me;pe<ge;++pe)xe+=oe[me[pe]];return xe;case"utf8":case"utf-8":return R(this,B,q);case"ascii":var ve=this,Ee=B,le=q,Se="";le=Math.min(ve.length,le);for(var be=Ee;be<le;++be)Se+=String.fromCharCode(127&ve[be]);return Se;case"latin1":case"binary":var Ie=this,Me=B,Ye=q,Be="";Ye=Math.min(Ie.length,Ye);for(var rt=Me;rt<Ye;++rt)Be+=String.fromCharCode(Ie[rt]);return Be;case"base64":return Ge=this,re=q,(ye=B)===0&&re===Ge.length?u.fromByteArray(Ge):u.fromByteArray(Ge.slice(ye,re));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Ge=B,ye=q,Fe=this.slice(Ge,ye),Ue="",nt=0;nt<Fe.length;nt+=2)Ue+=String.fromCharCode(Fe[nt]+256*Fe[nt+1]);return Ue;default:if(ae)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),ae=!0}}function S(O,B,q){var re=O[B];O[B]=O[q],O[q]=re}function w(O,B,q,re,ae){if(O.length===0)return-1;if(typeof q=="string"?(re=q,q=0):2147483647<q?q=2147483647:q<-2147483648&&(q=-2147483648),(q=(q=Y(q=+q)?ae?0:O.length-1:q)<0?O.length+q:q)>=O.length){if(ae)return-1;q=O.length-1}else if(q<0){if(!ae)return-1;q=0}if(typeof B=="string"&&(B=h.from(B,re)),h.isBuffer(B))return B.length===0?-1:_(O,B,q,re,ae);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?(ae?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(O,B,q):_(O,[B],q,re,ae);throw new TypeError("val must be string, number or Buffer")}function _(O,B,q,re,ae){var me=1,ge=O.length,xe=B.length;if(re!==void 0&&((re=String(re).toLowerCase())==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(O.length<2||B.length<2)return-1;ge/=me=2,xe/=2,q/=2}function pe(be,Ie){return me===1?be[Ie]:be.readUInt16BE(Ie*me)}if(ae)for(var ve=-1,Ee=q;Ee<ge;Ee++)if(pe(O,Ee)===pe(B,ve===-1?0:Ee-ve)){if(Ee-(ve=ve===-1?Ee:ve)+1===xe)return ve*me}else ve!==-1&&(Ee-=Ee-ve),ve=-1;else for(Ee=q=ge<q+xe?ge-xe:q;0<=Ee;Ee--){for(var le=!0,Se=0;Se<xe;Se++)if(pe(O,Ee+Se)!==pe(B,Se)){le=!1;break}if(le)return Ee}return-1}function M(O,B,q,re){return H(function(ae){for(var me=[],ge=0;ge<ae.length;++ge)me.push(255&ae.charCodeAt(ge));return me}(B),O,q,re)}function I(O,B,q,re){return H(function(ae,me){for(var ge,xe,pe=[],ve=0;ve<ae.length&&!((me-=2)<0);++ve)xe=ae.charCodeAt(ve),ge=xe>>8,xe=xe%256,pe.push(xe),pe.push(ge);return pe}(B,O.length-q),O,q,re)}function R(O,B,q){q=Math.min(O.length,q);for(var re=[],ae=B;ae<q;){var me,ge,xe,pe,ve=O[ae],Ee=null,le=239<ve?4:223<ve?3:191<ve?2:1;if(ae+le<=q)switch(le){case 1:ve<128&&(Ee=ve);break;case 2:(192&(me=O[ae+1]))==128&&127<(pe=(31&ve)<<6|63&me)&&(Ee=pe);break;case 3:me=O[ae+1],ge=O[ae+2],(192&me)==128&&(192&ge)==128&&2047<(pe=(15&ve)<<12|(63&me)<<6|63&ge)&&(pe<55296||57343<pe)&&(Ee=pe);break;case 4:me=O[ae+1],ge=O[ae+2],xe=O[ae+3],(192&me)==128&&(192&ge)==128&&(192&xe)==128&&65535<(pe=(15&ve)<<18|(63&me)<<12|(63&ge)<<6|63&xe)&&pe<1114112&&(Ee=pe)}Ee===null?(Ee=65533,le=1):65535<Ee&&(Ee-=65536,re.push(Ee>>>10&1023|55296),Ee=56320|1023&Ee),re.push(Ee),ae+=le}var Se=re,be=Se.length;if(be<=P)return String.fromCharCode.apply(String,Se);for(var Ie="",Me=0;Me<be;)Ie+=String.fromCharCode.apply(String,Se.slice(Me,Me+=P));return Ie}a.kMaxLength=p,(h.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(O,B),O.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=f,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(O,B,q){return B=B,q=q,d(O=O),!(O<=0)&&B!==void 0?typeof q=="string"?m(O).fill(B,q):m(O).fill(B):m(O)},h.allocUnsafe=g,h.allocUnsafeSlow=g,h.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==h.prototype},h.compare=function(O,B){if($(O,Uint8Array)&&(O=h.from(O,O.offset,O.byteLength)),$(B,Uint8Array)&&(B=h.from(B,B.offset,B.byteLength)),!h.isBuffer(O)||!h.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===B)return 0;for(var q=O.length,re=B.length,ae=0,me=Math.min(q,re);ae<me;++ae)if(O[ae]!==B[ae]){q=O[ae],re=B[ae];break}return q<re?-1:re<q?1:0},h.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(O,B){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return h.alloc(0);if(B===void 0)for(ae=B=0;ae<O.length;++ae)B+=O[ae].length;for(var q=h.allocUnsafe(B),re=0,ae=0;ae<O.length;++ae){var me=O[ae];if($(me,Uint8Array)&&(me=h.from(me)),!h.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(q,re),re+=me.length}return q},h.byteLength=x,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<O;B+=2)S(this,B,B+1);return this},h.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<O;B+=4)S(this,B,B+3),S(this,B+1,B+2);return this},h.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<O;B+=8)S(this,B,B+7),S(this,B+1,B+6),S(this,B+2,B+5),S(this,B+3,B+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?R(this,0,O):C.apply(this,arguments)},h.prototype.equals=function(O){if(h.isBuffer(O))return this===O||h.compare(this,O)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var B="",O=a.INSPECT_MAX_BYTES,B=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim();return this.length>O&&(B+=" ... "),"<Buffer "+B+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(O,B,q,re,ae){if($(O,Uint8Array)&&(O=h.from(O,O.offset,O.byteLength)),!h.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(q===void 0&&(q=O?O.length:0),re===void 0&&(re=0),ae===void 0&&(ae=this.length),(B=B===void 0?0:B)<0||q>O.length||re<0||ae>this.length)throw new RangeError("out of range index");if(ae<=re&&q<=B)return 0;if(ae<=re)return-1;if(q<=B)return 1;if(this===O)return 0;for(var me=(ae>>>=0)-(re>>>=0),ge=(q>>>=0)-(B>>>=0),xe=Math.min(me,ge),pe=this.slice(re,ae),ve=O.slice(B,q),Ee=0;Ee<xe;++Ee)if(pe[Ee]!==ve[Ee]){me=pe[Ee],ge=ve[Ee];break}return me<ge?-1:ge<me?1:0},h.prototype.includes=function(O,B,q){return this.indexOf(O,B,q)!==-1},h.prototype.indexOf=function(O,B,q){return w(this,O,B,q,!0)},h.prototype.lastIndexOf=function(O,B,q){return w(this,O,B,q,!1)},h.prototype.write=function(O,B,q,re){if(B===void 0)re="utf8",q=this.length,B=0;else if(q===void 0&&typeof B=="string")re=B,q=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(q)?(q>>>=0,re===void 0&&(re="utf8")):(re=q,q=void 0)}var ae=this.length-B;if((q===void 0||ae<q)&&(q=ae),0<O.length&&(q<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");re=re||"utf8";for(var me,ge,xe,pe=!1;;)switch(re){case"hex":var ve=this,Ee=O,le=B,Se=q,be=(le=Number(le)||0,ve.length-le);(!Se||be<(Se=Number(Se)))&&(Se=be),(be=Ee.length)/2<Se&&(Se=be/2);for(var Ie=0;Ie<Se;++Ie){var Me=parseInt(Ee.substr(2*Ie,2),16);if(Y(Me))return Ie;ve[le+Ie]=Me}return Ie;case"utf8":case"utf-8":return be=B,xe=q,H(Z(O,(ge=this).length-be),ge,be,xe);case"ascii":return M(this,O,B,q);case"latin1":case"binary":return M(this,O,B,q);case"base64":return ge=this,xe=B,me=q,H(K(O),ge,xe,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,O,B,q);default:if(pe)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),pe=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function D(O,B,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(q<O+B)throw new RangeError("Trying to access beyond buffer length")}function U(O,B,q,re,ae,me){if(!h.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae<B||B<me)throw new RangeError('"value" argument is out of bounds');if(q+re>O.length)throw new RangeError("Index out of range")}function F(O,B,q,re){if(q+re>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function z(O,B,q,re,ae){return B=+B,q>>>=0,ae||F(O,0,q,4),l.write(O,B,q,re,23,4),q+4}function J(O,B,q,re,ae){return B=+B,q>>>=0,ae||F(O,0,q,8),l.write(O,B,q,re,52,8),q+8}h.prototype.slice=function(O,B){var q=this.length,q=((O=~~O)<0?(O+=q)<0&&(O=0):q<O&&(O=q),(B=B===void 0?q:~~B)<0?(B+=q)<0&&(B=0):q<B&&(B=q),B<O&&(B=O),this.subarray(O,B));return Object.setPrototypeOf(q,h.prototype),q},h.prototype.readUIntLE=function(O,B,q){O>>>=0,B>>>=0,q||D(O,B,this.length);for(var re=this[O],ae=1,me=0;++me<B&&(ae*=256);)re+=this[O+me]*ae;return re},h.prototype.readUIntBE=function(O,B,q){O>>>=0,B>>>=0,q||D(O,B,this.length);for(var re=this[O+--B],ae=1;0<B&&(ae*=256);)re+=this[O+--B]*ae;return re},h.prototype.readUInt8=function(O,B){return O>>>=0,B||D(O,1,this.length),this[O]},h.prototype.readUInt16LE=function(O,B){return O>>>=0,B||D(O,2,this.length),this[O]|this[O+1]<<8},h.prototype.readUInt16BE=function(O,B){return O>>>=0,B||D(O,2,this.length),this[O]<<8|this[O+1]},h.prototype.readUInt32LE=function(O,B){return O>>>=0,B||D(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},h.prototype.readUInt32BE=function(O,B){return O>>>=0,B||D(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},h.prototype.readIntLE=function(O,B,q){O>>>=0,B>>>=0,q||D(O,B,this.length);for(var re=this[O],ae=1,me=0;++me<B&&(ae*=256);)re+=this[O+me]*ae;return(ae*=128)<=re&&(re-=Math.pow(2,8*B)),re},h.prototype.readIntBE=function(O,B,q){O>>>=0,B>>>=0,q||D(O,B,this.length);for(var re=B,ae=1,me=this[O+--re];0<re&&(ae*=256);)me+=this[O+--re]*ae;return(ae*=128)<=me&&(me-=Math.pow(2,8*B)),me},h.prototype.readInt8=function(O,B){return O>>>=0,B||D(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},h.prototype.readInt16LE=function(O,B){return O>>>=0,B||D(O,2,this.length),B=this[O]|this[O+1]<<8,32768&B?4294901760|B:B},h.prototype.readInt16BE=function(O,B){return O>>>=0,B||D(O,2,this.length),B=this[O+1]|this[O]<<8,32768&B?4294901760|B:B},h.prototype.readInt32LE=function(O,B){return O>>>=0,B||D(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},h.prototype.readInt32BE=function(O,B){return O>>>=0,B||D(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},h.prototype.readFloatLE=function(O,B){return O>>>=0,B||D(O,4,this.length),l.read(this,O,!0,23,4)},h.prototype.readFloatBE=function(O,B){return O>>>=0,B||D(O,4,this.length),l.read(this,O,!1,23,4)},h.prototype.readDoubleLE=function(O,B){return O>>>=0,B||D(O,8,this.length),l.read(this,O,!0,52,8)},h.prototype.readDoubleBE=function(O,B){return O>>>=0,B||D(O,8,this.length),l.read(this,O,!1,52,8)},h.prototype.writeUIntLE=function(O,B,q,re){O=+O,B>>>=0,q>>>=0,re||U(this,O,B,q,Math.pow(2,8*q)-1,0);var ae=1,me=0;for(this[B]=255&O;++me<q&&(ae*=256);)this[B+me]=O/ae&255;return B+q},h.prototype.writeUIntBE=function(O,B,q,re){O=+O,B>>>=0,q>>>=0,re||U(this,O,B,q,Math.pow(2,8*q)-1,0);var ae=q-1,me=1;for(this[B+ae]=255&O;0<=--ae&&(me*=256);)this[B+ae]=O/me&255;return B+q},h.prototype.writeUInt8=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,1,255,0),this[B]=255&O,B+1},h.prototype.writeUInt16LE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,2,65535,0),this[B]=255&O,this[B+1]=O>>>8,B+2},h.prototype.writeUInt16BE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,2,65535,0),this[B]=O>>>8,this[B+1]=255&O,B+2},h.prototype.writeUInt32LE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,4,4294967295,0),this[B+3]=O>>>24,this[B+2]=O>>>16,this[B+1]=O>>>8,this[B]=255&O,B+4},h.prototype.writeUInt32BE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,4,4294967295,0),this[B]=O>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=255&O,B+4},h.prototype.writeIntLE=function(O,B,q,re){O=+O,B>>>=0,re||U(this,O,B,q,(re=Math.pow(2,8*q-1))-1,-re);var ae=0,me=1,ge=0;for(this[B]=255&O;++ae<q&&(me*=256);)O<0&&ge===0&&this[B+ae-1]!==0&&(ge=1),this[B+ae]=(O/me>>0)-ge&255;return B+q},h.prototype.writeIntBE=function(O,B,q,re){O=+O,B>>>=0,re||U(this,O,B,q,(re=Math.pow(2,8*q-1))-1,-re);var ae=q-1,me=1,ge=0;for(this[B+ae]=255&O;0<=--ae&&(me*=256);)O<0&&ge===0&&this[B+ae+1]!==0&&(ge=1),this[B+ae]=(O/me>>0)-ge&255;return B+q},h.prototype.writeInt8=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,1,127,-128),this[B]=255&(O=O<0?255+O+1:O),B+1},h.prototype.writeInt16LE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,2,32767,-32768),this[B]=255&O,this[B+1]=O>>>8,B+2},h.prototype.writeInt16BE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,2,32767,-32768),this[B]=O>>>8,this[B+1]=255&O,B+2},h.prototype.writeInt32LE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,4,2147483647,-2147483648),this[B]=255&O,this[B+1]=O>>>8,this[B+2]=O>>>16,this[B+3]=O>>>24,B+4},h.prototype.writeInt32BE=function(O,B,q){return O=+O,B>>>=0,q||U(this,O,B,4,2147483647,-2147483648),this[B]=(O=O<0?4294967295+O+1:O)>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=255&O,B+4},h.prototype.writeFloatLE=function(O,B,q){return z(this,O,B,!0,q)},h.prototype.writeFloatBE=function(O,B,q){return z(this,O,B,!1,q)},h.prototype.writeDoubleLE=function(O,B,q){return J(this,O,B,!0,q)},h.prototype.writeDoubleBE=function(O,B,q){return J(this,O,B,!1,q)},h.prototype.copy=function(O,B,q,re){if(!h.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q=q||0,re||re===0||(re=this.length),B>=O.length&&(B=O.length),(re=0<re&&re<q?q:re)===q||O.length===0||this.length===0)return 0;if((B=B||0)<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length);var ae=(re=O.length-B<re-q?O.length-B+q:re)-q;if(this===O&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,q,re);else if(this===O&&q<B&&B<re)for(var me=ae-1;0<=me;--me)O[me+B]=this[me+q];else Uint8Array.prototype.set.call(O,this.subarray(q,re),B);return ae},h.prototype.fill=function(O,B,q,re){if(typeof O=="string"){if(typeof B=="string"?(re=B,B=0,q=this.length):typeof q=="string"&&(re=q,q=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!h.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var ae;O.length===1&&(ae=O.charCodeAt(0),(re==="utf8"&&ae<128||re==="latin1")&&(O=ae))}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(B<0||this.length<B||this.length<q)throw new RangeError("Out of range index");var me;if(!(q<=B))if(B>>>=0,q=q===void 0?this.length:q>>>0,typeof(O=O||0)=="number")for(me=B;me<q;++me)this[me]=O;else{var ge=h.isBuffer(O)?O:h.from(O,re),xe=ge.length;if(xe===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(me=0;me<q-B;++me)this[me+B]=ge[me%xe]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function Z(O,B){B=B||1/0;for(var q,re=O.length,ae=null,me=[],ge=0;ge<re;++ge){if(55295<(q=O.charCodeAt(ge))&&q<57344){if(!ae){if(56319<q){-1<(B-=3)&&me.push(239,191,189);continue}if(ge+1===re){-1<(B-=3)&&me.push(239,191,189);continue}ae=q;continue}if(q<56320){-1<(B-=3)&&me.push(239,191,189),ae=q;continue}q=65536+(ae-55296<<10|q-56320)}else ae&&-1<(B-=3)&&me.push(239,191,189);if(ae=null,q<128){if(--B<0)break;me.push(q)}else if(q<2048){if((B-=2)<0)break;me.push(q>>6|192,63&q|128)}else if(q<65536){if((B-=3)<0)break;me.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;me.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return me}function K(O){return u.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(O))}function H(O,B,q,re){for(var ae=0;ae<re&&!(ae+q>=B.length||ae>=O.length);++ae)B[ae+q]=O[ae];return ae}function $(O,B){return O instanceof B||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===B.name}function Y(O){return O!=O}var oe=function(){for(var O="0123456789abcdef",B=new Array(256),q=0;q<16;++q)for(var re=16*q,ae=0;ae<16;++ae)B[re+ae]=O[q]+O[ae];return B}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(r,s,a){s.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u){if(o(u)||u===null)return u;throw TypeError("Can't set "+String(u)+" as a prototype")}},{"../internals/is-object":74}],7:[function(l,s,a){var o=l("../internals/well-known-symbol"),u=l("../internals/object-create"),l=l("../internals/object-define-property"),c=o("unscopables"),p=Array.prototype;p[c]==null&&l.f(p,c,{configurable:!0,value:u(null)}),s.exports=function(m){p[c][m]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(r,s,a){var o=r("../internals/string-multibyte").charAt;s.exports=function(u,l,c){return l+(c?o(u,l).length:1)}},{"../internals/string-multibyte":123}],9:[function(r,s,a){s.exports=function(o,u,l){if(o instanceof u)return o;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u){if(o(u))return u;throw TypeError(String(u)+" is not an object")}},{"../internals/is-object":74}],11:[function(r,s,a){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(F,s,a){function o(J){return m(J)&&h(z,f(J))}var u,l=F("../internals/array-buffer-native"),c=F("../internals/descriptors"),p=F("../internals/global"),m=F("../internals/is-object"),h=F("../internals/has"),f=F("../internals/classof"),d=F("../internals/create-non-enumerable-property"),g=F("../internals/redefine"),y=F("../internals/object-define-property").f,b=F("../internals/object-get-prototype-of"),x=F("../internals/object-set-prototype-of"),P=F("../internals/well-known-symbol"),F=F("../internals/uid"),C=p.Int8Array,S=C&&C.prototype,w=p.Uint8ClampedArray,w=w&&w.prototype,_=C&&b(C),M=S&&b(S),I=Object.prototype,R=I.isPrototypeOf,P=P("toStringTag"),D=F("TYPED_ARRAY_TAG"),U=l&&!!x&&f(p.opera)!=="Opera",F=!1,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(u in z)p[u]||(U=!1);if((!U||typeof _!="function"||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},U))for(u in z)p[u]&&x(p[u],_);if((!U||!M||M===I)&&(M=_.prototype,U))for(u in z)p[u]&&x(p[u].prototype,M);if(U&&b(w)!==M&&x(w,M),c&&!h(M,P))for(u in F=!0,y(M,P,{get:function(){return m(this)?this[D]:void 0}}),z)p[u]&&d(p[u],D,u);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:F&&D,aTypedArray:function(J){if(o(J))return J;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(J){if(x){if(R.call(_,J))return J}else for(var Q in z)if(h(z,u)&&(Q=p[Q],Q&&(J===Q||R.call(Q,J))))return J;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(J,Q,Z){if(c){if(Z)for(var K in z)K=p[K],K&&h(K.prototype,J)&&delete K.prototype[J];M[J]&&!Z||g(M,J,!Z&&U&&S[J]||Q)}},exportTypedArrayStaticMethod:function(J,Q,Z){var K,H;if(c){if(x){if(Z)for(K in z)(H=p[K])&&h(H,J)&&delete H[J];if(_[J]&&!Z)return;try{return g(_,J,!Z&&U&&C[J]||Q)}catch{}}for(K in z)!(H=p[K])||H[J]&&!Z||g(H,J,Q)}},isView:function(J){return J=f(J),J==="DataView"||h(z,J)},isTypedArray:o,TypedArray:_,TypedArrayPrototype:M}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(q,s,a){function o(le){return[255&le]}function u(le){return[255&le,le>>8&255]}function l(le){return[255&le,le>>8&255,le>>16&255,le>>24&255]}function c(le){return le[3]<<24|le[2]<<16|le[1]<<8|le[0]}function p(le){return me(le,23,4)}function m(le){return me(le,52,8)}function h(le,Se){F(le[$],Se,{get:function(){return Q(this)[Se]}})}function f(Be,Se,Ye,Ie){if(Ye=I(Ye),Be=Q(Be),Ye+Se>Be.byteLength)throw ae(Y);var Me=Q(Be.buffer).bytes,Ye=Ye+Be.byteOffset,Be=Me.slice(Ye,Ye+Se);return Ie?Be:Be.reverse()}function d(le,Se,be,Ie,Me,Ye){if(be=I(be),le=Q(le),be+Se>le.byteLength)throw ae(Y);for(var Be=Q(le.buffer).bytes,rt=be+le.byteOffset,Ge=Ie(+Me),ye=0;ye<Se;ye++)Be[rt+ye]=Ge[Ye?ye:Se-ye-1]}var g=q("../internals/global"),y=q("../internals/descriptors"),b=q("../internals/array-buffer-native"),x=q("../internals/create-non-enumerable-property"),C=q("../internals/redefine-all"),S=q("../internals/fails"),w=q("../internals/an-instance"),_=q("../internals/to-integer"),M=q("../internals/to-length"),I=q("../internals/to-index"),R=q("../internals/ieee754"),P=q("../internals/object-get-prototype-of"),D=q("../internals/object-set-prototype-of"),U=q("../internals/object-get-own-property-names").f,F=q("../internals/object-define-property").f,z=q("../internals/array-fill"),J=q("../internals/set-to-string-tag"),q=q("../internals/internal-state"),Q=q.get,Z=q.set,K="ArrayBuffer",H="DataView",$="prototype",Y="Wrong index",oe=g[K],O=oe,B=g[H],q=B&&B[$],re=Object.prototype,ae=g.RangeError,me=R.pack,ge=R.unpack;if(b){if(!S(function(){oe(1)})||!S(function(){new oe(-1)})||S(function(){return new oe,new oe(1.5),new oe(NaN),oe.name!=K})){for(var xe,g=(O=function(be){return w(this,O),new oe(I(be))})[$]=oe[$],pe=U(oe),ve=0;pe.length>ve;)(xe=pe[ve++])in O||x(O,xe,oe[xe]);g.constructor=O}D&&P(q)!==re&&D(q,re);var R=new B(new O(2)),Ee=q.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||C(q,{setInt8:function(Se,be){Ee.call(this,Se,be<<24>>24)},setUint8:function(Se,be){Ee.call(this,Se,be<<24>>24)}},{unsafe:!0})}else O=function(le){w(this,O,K),le=I(le),Z(this,{bytes:z.call(new Array(le),0),byteLength:le}),y||(this.byteLength=le)},B=function(le,Me,be){w(this,B,H),w(le,O,H);var Ie=Q(le).byteLength,Me=_(Me);if(Me<0||Ie<Me)throw ae("Wrong offset");if(Ie<Me+(be=be===void 0?Ie-Me:M(be)))throw ae("Wrong length");Z(this,{buffer:le,byteLength:be,byteOffset:Me}),y||(this.buffer=le,this.byteLength=be,this.byteOffset=Me)},y&&(h(O,"byteLength"),h(B,"buffer"),h(B,"byteLength"),h(B,"byteOffset")),C(B[$],{getInt8:function(le){return f(this,1,le)[0]<<24>>24},getUint8:function(le){return f(this,1,le)[0]},getInt16:function(le){return le=f(this,2,le,1<arguments.length?arguments[1]:void 0),(le[1]<<8|le[0])<<16>>16},getUint16:function(le){return le=f(this,2,le,1<arguments.length?arguments[1]:void 0),le[1]<<8|le[0]},getInt32:function(le){return c(f(this,4,le,1<arguments.length?arguments[1]:void 0))},getUint32:function(le){return c(f(this,4,le,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(le){return ge(f(this,4,le,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(le){return ge(f(this,8,le,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(le,Se){d(this,1,le,o,Se)},setUint8:function(le,Se){d(this,1,le,o,Se)},setInt16:function(le,Se){d(this,2,le,u,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(le,Se){d(this,2,le,u,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(le,Se){d(this,4,le,l,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(le,Se){d(this,4,le,l,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(le,Se){d(this,4,le,p,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(le,Se){d(this,8,le,m,Se,2<arguments.length?arguments[2]:void 0)}});J(O,K),J(B,H),s.exports={ArrayBuffer:O,DataView:B}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length"),c=Math.min;s.exports=[].copyWithin||function(y,m){var h=o(this),f=l(h.length),d=u(y,f),g=u(m,f),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?f:u(y,f))-g,f-d),x=1;for(g<d&&d<g+b&&(x=-1,g+=b-1,d+=b-1);0<b--;)g in h?h[d]=h[g]:delete h[d],d+=x,g+=x;return h}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length");s.exports=function(c){for(var p=o(this),m=l(p.length),f=arguments.length,h=u(1<f?arguments[1]:void 0,m),f=2<f?arguments[2]:void 0,d=f===void 0?m:u(f,m);h<d;)p[h++]=c;return p}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(l,s,a){var o=l("../internals/array-iteration").forEach,u=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),u=u("forEach"),l=l("forEach");s.exports=u&&l?[].forEach:function(c){return o(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,a){var o=r("../internals/function-bind-context"),u=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),c=r("../internals/is-array-iterator-method"),p=r("../internals/to-length"),m=r("../internals/create-property"),h=r("../internals/get-iterator-method");s.exports=function(w){var d,g,y,b,x,C,S=u(w),w=typeof this=="function"?this:Array,_=arguments.length,M=1<_?arguments[1]:void 0,I=M!==void 0,R=h(S),P=0;if(I&&(M=o(M,2<_?arguments[2]:void 0,2)),R==null||w==Array&&c(R))for(g=new w(d=p(S.length));P<d;P++)C=I?M(S[P],P):S[P],m(g,P,C);else for(x=(b=R.call(S)).next,g=new w;!(y=x.call(b)).done;P++)C=I?l(b,M,[y.value,P],!0):y.value,m(g,P,C);return g.length=P,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(r,s,a){function o(p){return function(m,h,f){var d,g=u(m),y=l(g.length),b=c(f,y);if(p&&h!=h){for(;b<y;)if((d=g[b++])!=d)return!0}else for(;b<y;b++)if((p||b in g)&&g[b]===h)return p||b||0;return!p&&-1}}var u=r("../internals/to-indexed-object"),l=r("../internals/to-length"),c=r("../internals/to-absolute-index");s.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(r,s,a){function o(f){var d=f==1,g=f==2,y=f==3,b=f==4,x=f==6,C=f==5||x;return function(S,w,_,M){for(var I,R,P=c(S),D=l(P),U=u(w,_,3),F=p(D.length),z=0,w=M||m,J=d?w(S,F):g?w(S,0):void 0;z<F;z++)if((C||z in D)&&(R=U(I=D[z],z,P),f)){if(d)J[z]=R;else if(R)switch(f){case 3:return!0;case 5:return I;case 6:return z;case 2:h.call(J,I)}else if(b)return!1}return x?-1:y||b?b:J}}var u=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),c=r("../internals/to-object"),p=r("../internals/to-length"),m=r("../internals/array-species-create"),h=[].push;s.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(f,s,a){var o=f("../internals/to-indexed-object"),u=f("../internals/to-integer"),l=f("../internals/to-length"),h=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),c=Math.min,p=[].lastIndexOf,m=!!p&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0});s.exports=m||!h||!f?function(d){if(m)return p.apply(this,arguments)||0;var g=o(this),y=l(g.length),b=y-1;for((b=1<arguments.length?c(b,u(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===d)return b||0;return-1}:p},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),c=u("species");s.exports=function(p){return 51<=l||!o(function(){var m=[];return(m.constructor={})[c]=function(){return{foo:1}},m[p](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(r,s,a){var o=r("../internals/fails");s.exports=function(u,l){var c=[][u];return!!c&&o(function(){c.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,s,a){function o(h){throw h}var u=r("../internals/descriptors"),l=r("../internals/fails"),c=r("../internals/has"),p=Object.defineProperty,m={};s.exports=function(h,f){var d,g,y,b;return c(m,h)?m[h]:(d=[][h],g=!!c(f=f||{},"ACCESSORS")&&f.ACCESSORS,y=c(f,0)?f[0]:o,b=c(f,1)?f[1]:void 0,m[h]=!!d&&!l(function(){if(g&&!u)return!0;var x={length:-1};g?p(x,1,{enumerable:!0,get:o}):x[1]=1,d.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(r,s,a){function o(m){return function(h,f,d,g){u(f);var y=l(h),b=c(y),x=p(y.length),C=m?x-1:0,S=m?-1:1;if(d<2)for(;;){if(C in b){g=b[C],C+=S;break}if(C+=S,m?C<0:x<=C)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=C:C<x;C+=S)C in b&&(g=f(g,b[C],C,y));return g}}var u=r("../internals/a-function"),l=r("../internals/to-object"),c=r("../internals/indexed-object"),p=r("../internals/to-length");s.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");s.exports=function(c,p){var m;return new((m=u(c)&&(typeof(m=c.constructor)=="function"&&(m===Array||u(m.prototype))||o(m)&&(m=m[l])===null)?void 0:m)===void 0?Array:m)(p===0?0:p)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(r,s,a){var o=r("../internals/an-object");s.exports=function(u,l,c,p){try{return p?l(o(c)[0],c[1]):l(c)}catch(m){throw p=u.return,p!==void 0&&o(p.call(u)),m}}},{"../internals/an-object":10}],27:[function(r,s,a){var o=r("../internals/well-known-symbol")("iterator"),u=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){u=!0}};c[o]=function(){return this},Array.from(c,function(){throw 2})}catch{}s.exports=function(p,m){if(!m&&!u)return!1;var h=!1;try{var f={};f[o]=function(){return{next:function(){return{done:h=!0}}}},p(f)}catch{}return h}},{"../internals/well-known-symbol":146}],28:[function(r,s,a){var o={}.toString;s.exports=function(u){return o.call(u).slice(8,-1)}},{}],29:[function(r,s,a){var o=r("../internals/to-string-tag-support"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),c=u(function(){return arguments}())=="Arguments";s.exports=o?u:function(p){var m;return p===void 0?"Undefined":p===null?"Null":typeof(m=function(h,f){try{return h[f]}catch{}}(p=Object(p),l))=="string"?m:c?u(p):(m=u(p))=="Object"&&typeof p.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(y,s,a){var o=y("../internals/object-define-property").f,u=y("../internals/object-create"),l=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),p=y("../internals/an-instance"),m=y("../internals/iterate"),h=y("../internals/define-iterator"),f=y("../internals/set-species"),d=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;s.exports={getConstructor:function(C,S,w,_){function M(D,U,F){var z,J=P(D),Q=I(D,U);return Q?Q.value=F:(J.last=Q={index:z=g(U,!0),key:U,value:F,previous:U=J.last,next:void 0,removed:!1},J.first||(J.first=Q),U&&(U.next=Q),d?J.size++:D.size++,z!=="F"&&(J.index[z]=Q)),D}function I(z,U){var F,z=P(z),J=g(U);if(J!=="F")return z.index[J];for(F=z.first;F;F=F.next)if(F.key==U)return F}var R=C(function(D,U){p(D,R,S),b(D,{type:S,index:u(null),first:void 0,last:void 0,size:0}),d||(D.size=0),U!=null&&m(U,D[_],D,w)}),P=x(S);return l(R.prototype,{clear:function(){for(var D=P(this),U=D.index,F=D.first;F;)F.removed=!0,F.previous&&(F.previous=F.previous.next=void 0),delete U[F.index],F=F.next;D.first=D.last=void 0,d?D.size=0:this.size=0},delete:function(J){var U,F,z=P(this),J=I(this,J);return J&&(U=J.next,F=J.previous,delete z.index[J.index],J.removed=!0,F&&(F.next=U),U&&(U.previous=F),z.first==J&&(z.first=U),z.last==J&&(z.last=F),d?z.size--:this.size--),!!J},forEach:function(D){for(var U,F=P(this),z=c(D,1<arguments.length?arguments[1]:void 0,3);U=U?U.next:F.first;)for(z(U.value,U.key,this);U&&U.removed;)U=U.previous},has:function(D){return!!I(this,D)}}),l(R.prototype,w?{get:function(D){return D=I(this,D),D&&D.value},set:function(D,U){return M(this,D===0?0:D,U)}}:{add:function(D){return M(this,D=D===0?0:D,D)}}),d&&o(R.prototype,"size",{get:function(){return P(this).size}}),R},setStrong:function(C,S,w){var _=S+" Iterator",M=x(S),I=x(_);h(C,S,function(R,P){b(this,{type:_,target:R,state:M(R),kind:P,last:void 0})},function(){for(var R=I(this),P=R.kind,D=R.last;D&&D.removed;)D=D.previous;return R.target&&(R.last=D=D?D.next:R.state.first)?P=="keys"?{value:D.key,done:!1}:P=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:{value:R.target=void 0,done:!0}},w?"entries":"values",!w,!0),f(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(b,s,a){function o(M){return M.frozen||(M.frozen=new u)}function u(){this.entries=[]}function l(M,I){return S(M.entries,function(R){return R[0]===I})}var c=b("../internals/redefine-all"),p=b("../internals/internal-metadata").getWeakData,m=b("../internals/an-object"),h=b("../internals/is-object"),f=b("../internals/an-instance"),d=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,C=b.getterFor,S=g.find,w=g.findIndex,_=0;u.prototype={get:function(M){if(M=l(this,M),M)return M[1]},has:function(M){return!!l(this,M)},set:function(M,I){var R=l(this,M);R?R[1]=I:this.entries.push([M,I])},delete:function(M){var I=w(this.entries,function(R){return R[0]===M});return~I&&this.entries.splice(I,1),!!~I}},s.exports={getConstructor:function(M,I,R,P){function D(z,J,Q){var Z=F(z),K=p(m(J),!0);return K===!0?o(Z).set(J,Q):K[Z.id]=Q,z}var U=M(function(z,J){f(z,U,I),x(z,{type:I,id:_++,frozen:void 0}),J!=null&&d(J,z[P],z,R)}),F=C(I);return c(U.prototype,{delete:function(z){var J,Q=F(this);return!!h(z)&&((J=p(z))===!0?o(Q).delete(z):J&&y(J,Q.id)&&delete J[Q.id])},has:function(z){var J,Q=F(this);return!!h(z)&&((J=p(z))===!0?o(Q).has(z):J&&y(J,Q.id))}}),c(U.prototype,R?{get:function(z){var J,Q=F(this);if(h(z))return(J=p(z))===!0?o(Q).get(z):J?J[Q.id]:void 0},set:function(z,J){return D(this,z,J)}}:{add:function(z){return D(this,z,!0)}}),U}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/redefine"),p=r("../internals/internal-metadata"),m=r("../internals/iterate"),h=r("../internals/an-instance"),f=r("../internals/is-object"),d=r("../internals/fails"),g=r("../internals/check-correctness-of-iteration"),y=r("../internals/set-to-string-tag"),b=r("../internals/inherit-if-required");s.exports=function(x,C,S){function w(K){var H=J[K];c(J,K,K=="add"?function($){return H.call(this,$===0?0:$),this}:K=="delete"?function($){return!(U&&!f($))&&H.call(this,$===0?0:$)}:K=="get"?function($){return U&&!f($)?void 0:H.call(this,$===0?0:$)}:K=="has"?function($){return!(U&&!f($))&&H.call(this,$===0?0:$)}:function($,Y){return H.call(this,$===0?0:$,Y),this})}var _,M,I,R,P,D=x.indexOf("Map")!==-1,U=x.indexOf("Weak")!==-1,F=D?"set":"add",z=u[x],J=z&&z.prototype,Q=z,Z={};return l(x,typeof z!="function"||!(U||J.forEach&&!d(function(){new z().entries().next()})))?(Q=S.getConstructor(C,x,D,F),p.REQUIRED=!0):l(x,!0)&&(M=(_=new Q)[F](U?{}:-0,1)!=_,I=d(function(){_.has(1)}),R=g(function(K){new z(K)}),P=!U&&d(function(){for(var K=new z,H=5;H--;)K[F](H,H);return!K.has(-0)}),R||(((Q=C(function(K,H){return h(K,Q,x),K=b(new z,K,Q),H!=null&&m(H,K[F],K,D),K})).prototype=J).constructor=Q),(I||P)&&(w("delete"),w("has"),D&&w("get")),(P||M)&&w(F),U&&J.clear&&delete J.clear),Z[x]=Q,o({global:!0,forced:Q!=z},Z),y(Q,x),U||S.setStrong(Q,x,D),Q}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(r,s,a){var o=r("../internals/has"),u=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),c=r("../internals/object-define-property");s.exports=function(p,m){for(var h=u(m),f=c.f,d=l.f,g=0;g<h.length;g++){var y=h[g];o(p,y)||f(p,y,d(m,y))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(r,s,a){var o=r("../internals/well-known-symbol")("match");s.exports=function(u){var l=/./;try{"/./"[u](l)}catch{try{return l[o]=!1,"/./"[u](l)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(r,s,a){var o=r("../internals/require-object-coercible"),u=/"/g;s.exports=function(h,c,p,m){var h=String(o(h)),f="<"+c;return p!==""&&(f+=" "+p+'="'+String(m).replace(u,"&quot;")+'"'),f+">"+h+"</"+c+">"}},{"../internals/require-object-coercible":113}],37:[function(r,s,a){function o(){return this}var u=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),c=r("../internals/create-property-descriptor"),p=r("../internals/set-to-string-tag"),m=r("../internals/iterators");s.exports=function(h,f,d){return f+=" Iterator",h.prototype=l(u,{next:c(1,d)}),p(h,f,!1,!0),m[f]=o,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=o?function(c,p,m){return u.f(c,p,l(1,m))}:function(c,p,m){return c[p]=m,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(r,s,a){s.exports=function(o,u){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:u}}},{}],40:[function(r,s,a){var o=r("../internals/to-primitive"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=function(c,p,m){p=o(p),p in c?u.f(c,p,l(0,m)):c[p]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(b,s,a){function o(){return this}var u=b("../internals/export"),l=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),p=b("../internals/object-set-prototype-of"),m=b("../internals/set-to-string-tag"),h=b("../internals/create-non-enumerable-property"),f=b("../internals/redefine"),d=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,C=b.BUGGY_SAFARI_ITERATORS,S=d("iterator"),w="values",_="entries";s.exports=function(M,I,R,Z,D,U,F){l(R,I,Z);function z(O){if(O===D&&Y)return Y;if(!C&&O in H)return H[O];switch(O){case"keys":case w:case _:return function(){return new R(this,O)}}return function(){return new R(this)}}var J,Q,Z=I+" Iterator",K=!1,H=M.prototype,$=H[S]||H["@@iterator"]||D&&H[D],Y=!C&&$||z(D),oe=I=="Array"&&H.entries||$;if(oe&&(oe=c(oe.call(new M)),x!==Object.prototype&&oe.next&&(g||c(oe)===x||(p?p(oe,x):typeof oe[S]!="function"&&h(oe,S,o)),m(oe,Z,!0,!0),g&&(y[Z]=o))),D==w&&$&&$.name!==w&&(K=!0,Y=function(){return $.call(this)}),g&&!F||H[S]===Y||h(H,S,Y),y[I]=Y,D)if(J={values:z(w),keys:U?Y:z("keys"),entries:z(_)},F)for(Q in J)!C&&!K&&Q in H||f(H,Q,J[Q]);else u({target:I,proto:!0,forced:C||K},J);return J}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(r,s,a){var o=r("../internals/path"),u=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),c=r("../internals/object-define-property").f;s.exports=function(p){var m=o.Symbol||(o.Symbol={});u(m,p)||c(m,p,{value:l.f(p)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(u,s,a){var o=u("../internals/global"),u=u("../internals/is-object"),l=o.document,c=u(l)&&u(l.createElement);s.exports=function(p){return c?l.createElement(p):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(r,s,a){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,s,a){r=r("../internals/engine-user-agent"),s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,s,a){r=r("../internals/get-built-in"),s.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(l,s,a){var o,u,c=l("../internals/global"),l=l("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?u=(o=c.split("."))[0]+o[1]:l&&(!(o=l.match(/Edge\/(\d+)/))||74<=o[1])&&(o=l.match(/Chrome\/(\d+)/))&&(u=o[1]),s.exports=u&&+u},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(r,s,a){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,s,a){var o=r("../internals/global"),u=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),c=r("../internals/redefine"),p=r("../internals/set-global"),m=r("../internals/copy-constructor-properties"),h=r("../internals/is-forced");s.exports=function(f,d){var g,y,b,x=f.target,C=f.global,S=f.stat,w=C?o:S?o[x]||p(x,{}):(o[x]||{}).prototype;if(w)for(g in d){if(y=d[g],b=f.noTargetGet?(b=u(w,g))&&b.value:w[g],!h(C?g:x+(S?".":"#")+g,f.forced)&&b!==void 0){if(typeof y==typeof b)continue;m(y,b)}(f.sham||b&&b.sham)&&l(y,"sham",!0),c(w,g,y,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(r,s,a){s.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(d,s,a){d("../modules/es.regexp.exec");var o=d("../internals/redefine"),u=d("../internals/fails"),l=d("../internals/well-known-symbol"),c=d("../internals/regexp-exec"),p=d("../internals/create-non-enumerable-property"),m=l("species"),h=!u(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),f="a".replace(/./,"$0")==="$0",d=l("replace"),g=!!/./[d]&&/./[d]("a","$0")==="",y=!u(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});s.exports=function(b,x,C,S){var w,_,M=l(b),I=!u(function(){var P={};return P[M]=function(){return 7},""[b](P)!=7}),R=I&&!u(function(){var P=!1,D=/a/;return b==="split"&&((D={constructor:{}}).constructor[m]=function(){return D},D.flags="",D[M]=/./[M]),D.exec=function(){return P=!0,null},D[M](""),!P});I&&R&&(b!=="replace"||h&&f&&!g)&&(b!=="split"||y)||(w=/./[M],C=(R=C(M,""[b],function(P,D,U,F,z){return D.exec===c?I&&!z?{done:!0,value:w.call(D,U,F)}:{done:!0,value:P.call(U,D,F)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],_=R[1],o(String.prototype,b,C),o(RegExp.prototype,M,x==2?function(P,D){return _.call(P,this,D)}:function(P){return _.call(P,this)})),S&&p(RegExp.prototype[M],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(r,s,a){var o=r("../internals/a-function");s.exports=function(u,l,c){if(o(u),l===void 0)return u;switch(c){case 0:return function(){return u.call(l)};case 1:return function(p){return u.call(l,p)};case 2:return function(p,m){return u.call(l,p,m)};case 3:return function(p,m,h){return u.call(l,p,m,h)}}return function(){return u.apply(l,arguments)}}},{"../internals/a-function":5}],55:[function(r,s,a){var o=r("../internals/a-function"),u=r("../internals/is-object"),l=[].slice,c={};s.exports=Function.bind||function(p){var m=o(this),h=l.call(arguments,1),f=function(){var d=h.concat(l.call(arguments));if(this instanceof f){var g=m,y=d.length,b=d;if(!(y in c)){for(var x=[],C=0;C<y;C++)x[C]="a["+C+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return m.apply(p,d)};return u(m.prototype)&&(f.prototype=m.prototype),f}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(r,s,a){function o(c){return typeof c=="function"?c:void 0}var u=r("../internals/path"),l=r("../internals/global");s.exports=function(c,p){return arguments.length<2?o(u[c])||o(l[c]):u[c]&&u[c][p]||l[c]&&l[c][p]}},{"../internals/global":59,"../internals/path":104}],57:[function(r,s,a){var o=r("../internals/classof"),u=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");s.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||u[o(c)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/get-iterator-method");s.exports=function(l){var c=u(l);if(typeof c!="function")throw TypeError(String(l)+" is not iterable");return o(c.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(r,s,a){(function(o){function u(l){return l&&l.Math==Math&&l}s.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof Pa<"u"?Pa:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(r,s,a){var o={}.hasOwnProperty;s.exports=function(u,l){return o.call(u,l)}},{}],61:[function(r,s,a){s.exports={}},{}],62:[function(r,s,a){var o=r("../internals/global");s.exports=function(u,l){var c=o.console;c&&c.error&&(arguments.length===1?c.error(u):c.error(u,l))}},{"../internals/global":59}],63:[function(r,s,a){r=r("../internals/get-built-in"),s.exports=r("document","documentElement")},{"../internals/get-built-in":56}],64:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/document-create-element");s.exports=!o&&!u(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(r,s,a){var o=Math.abs,u=Math.pow,l=Math.floor,c=Math.log,p=Math.LN2;s.exports={pack:function(m,h,C){var d,g,y,b=new Array(C),x=8*C-h-1,C=(1<<x)-1,S=C>>1,w=h===23?u(2,-24)-u(2,-77):0,_=m<0||m===0&&1/m<0?1:0,M=0;for((m=o(m))!=m||m===1/0?(g=m!=m?1:0,d=C):(d=l(c(m)/p),m*(y=u(2,-d))<1&&(d--,y*=2),2<=(m+=1<=d+S?w/y:w*u(2,1-S))*y&&(d++,y/=2),C<=d+S?(g=0,d=C):1<=d+S?(g=(m*y-1)*u(2,h),d+=S):(g=m*u(2,S-1)*u(2,h),d=0));8<=h;b[M++]=255&g,g/=256,h-=8);for(d=d<<h|g,x+=h;0<x;b[M++]=255&d,d/=256,x-=8);return b[--M]|=128*_,b},unpack:function(m,h){var f,d=m.length,C=8*d-h-1,g=(1<<C)-1,y=g>>1,b=C-7,x=d-1,C=m[x--],S=127&C;for(C>>=7;0<b;S=256*S+m[x],x--,b-=8);for(f=S&(1<<-b)-1,S>>=-b,b+=h;0<b;f=256*f+m[x],x--,b-=8);if(S===0)S=1-y;else{if(S===g)return f?NaN:C?-1/0:1/0;f+=u(2,h),S-=y}return(C?-1:1)*f*u(2,S-h)}}},{}],66:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/classof-raw"),l="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return u(c)=="String"?l.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/object-set-prototype-of");s.exports=function(l,c,p){return u&&typeof(c=c.constructor)=="function"&&c!==p&&o(c=c.prototype)&&c!==p.prototype&&u(l,c),l}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,s,a){var o=o("../internals/shared-store"),u=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(l){return u.call(l)}),s.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(r,s,a){function o(b){p(b,f,{value:{objectID:"O"+ ++d,weakData:{}}})}var u=r("../internals/hidden-keys"),l=r("../internals/is-object"),c=r("../internals/has"),p=r("../internals/object-define-property").f,m=r("../internals/uid"),h=r("../internals/freezing"),f=m("meta"),d=0,g=Object.isExtensible||function(){return!0},y=s.exports={REQUIRED:!1,fastKey:function(b,x){if(!l(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,f)){if(!g(b))return"F";if(!x)return"E";o(b)}return b[f].objectID},getWeakData:function(b,x){if(!c(b,f)){if(!g(b))return!0;if(!x)return!1;o(b)}return b[f].weakData},onFreeze:function(b){return h&&y.REQUIRED&&g(b)&&!c(b,f)&&o(b),b}};u[f]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(C,s,a){var o,u,l,c,p,m,h,f,d=C("../internals/native-weak-map"),S=C("../internals/global"),g=C("../internals/is-object"),y=C("../internals/create-non-enumerable-property"),b=C("../internals/has"),x=C("../internals/shared-key"),C=C("../internals/hidden-keys"),S=S.WeakMap;h=d?(o=new S,u=o.get,l=o.has,c=o.set,p=function(w,_){return c.call(o,w,_),_},m=function(w){return u.call(o,w)||{}},function(w){return l.call(o,w)}):(C[f=x("state")]=!0,p=function(w,_){return y(w,f,_),_},m=function(w){return b(w,f)?w[f]:{}},function(w){return b(w,f)}),s.exports={set:p,get:m,has:h,enforce:function(w){return h(w)?m(w):p(w,{})},getterFor:function(w){return function(_){if(g(_)&&(_=m(_)).type===w)return _;throw TypeError("Incompatible receiver, "+w+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(r,s,a){var o=r("../internals/well-known-symbol"),u=r("../internals/iterators"),l=o("iterator"),c=Array.prototype;s.exports=function(p){return p!==void 0&&(u.Array===p||c[l]===p)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(r,s,a){var o=r("../internals/classof-raw");s.exports=Array.isArray||function(u){return o(u)=="Array"}},{"../internals/classof-raw":28}],73:[function(r,s,a){function o(f,d){return(f=p[c(f)])==h||f!=m&&(typeof d=="function"?u(d):!!d)}var u=r("../internals/fails"),l=/#|\.prototype\./,c=o.normalize=function(f){return String(f).replace(l,".").toLowerCase()},p=o.data={},m=o.NATIVE="N",h=o.POLYFILL="P";s.exports=o},{"../internals/fails":51}],74:[function(r,s,a){s.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(r,s,a){s.exports=!1},{}],76:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");s.exports=function(c){var p;return o(c)&&((p=c[l])!==void 0?!!p:u(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(r,s,a){function o(f,d){this.stopped=f,this.result=d}var u=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),c=r("../internals/to-length"),p=r("../internals/function-bind-context"),m=r("../internals/get-iterator-method"),h=r("../internals/call-with-safe-iteration-closing");(s.exports=function(f,d,g,y,b){var x,C,S,w,_,M,I=p(d,g,y?2:1);if(b)x=f;else{if(typeof(d=m(f))!="function")throw TypeError("Target is not iterable");if(l(d)){for(C=0,S=c(f.length);C<S;C++)if((w=y?I(u(M=f[C])[0],M[1]):I(f[C]))&&w instanceof o)return w;return new o(!1)}x=d.call(f)}for(_=x.next;!(M=_.call(x)).done;)if(typeof(w=h(x,I,M.value,y))=="object"&&w&&w instanceof o)return w;return new o(!1)}).stop=function(f){return new o(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(m,s,a){var o,u,l=m("../internals/object-get-prototype-of"),c=m("../internals/create-non-enumerable-property"),p=m("../internals/has"),h=m("../internals/well-known-symbol"),m=m("../internals/is-pure"),h=h("iterator"),f=!1;[].keys&&("next"in(u=[].keys())?(l=l(l(u)))!==Object.prototype&&(o=l):f=!0),o==null&&(o={}),m||p(o,h)||c(o,h,function(){return this}),s.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(r,s,a){s.exports={}},{}],80:[function(r,s,a){s.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(y,s,a){var o,u,l,c,p,m,h,f,d=y("../internals/global"),_=y("../internals/object-get-own-property-descriptor").f,w=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=d.MutationObserver||d.WebKitMutationObserver,x=d.process,C=d.Promise,S=w(x)=="process",w=_(d,"queueMicrotask"),_=w&&w.value;_||(o=function(){var M,I;for(S&&(M=x.domain)&&M.exit();u;){I=u.fn,u=u.next;try{I()}catch(R){throw u?c():l=void 0,R}}l=void 0,M&&M.enter()},c=S?function(){x.nextTick(o)}:b&&!y?(p=!0,m=document.createTextNode(""),new b(o).observe(m,{characterData:!0}),function(){m.data=p=!p}):C&&C.resolve?(h=C.resolve(void 0),f=h.then,function(){f.call(h,o)}):function(){g.call(d,o)}),s.exports=_||function(M){M={fn:M,next:void 0},l&&(l.next=M),u||(u=M,c()),l=M}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(r,s,a){r=r("../internals/global"),s.exports=r.Promise},{"../internals/global":59}],83:[function(r,s,a){r=r("../internals/fails"),s.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),c=u("iterator");s.exports=!o(function(){var p=new URL("b?a=1&b=2&c=3","http://a"),m=p.searchParams,h="";return p.pathname="c%20d",m.forEach(function(f,d){m.delete("b"),h+=d+f}),l&&!p.toJSON||!m.sort||p.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://ÑÐµÑÑ").host!=="xn--e1aybc"||new URL("http://a#Ð±").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(o,s,a){var u=o("../internals/global"),o=o("../internals/inspect-source"),u=u.WeakMap;s.exports=typeof u=="function"&&/native code/.test(o(u))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(r,s,a){function o(l){var c,p;this.promise=new l(function(m,h){if(c!==void 0||p!==void 0)throw TypeError("Bad Promise constructor");c=m,p=h}),this.resolve=u(c),this.reject=u(p)}var u=r("../internals/a-function");s.exports.f=function(l){return new o(l)}},{"../internals/a-function":5}],87:[function(r,s,a){var o=r("../internals/is-regexp");s.exports=function(u){if(o(u))throw TypeError("The method doesn't accept regular expressions");return u}},{"../internals/is-regexp":76}],88:[function(r,s,a){var o=r("../internals/global").isFinite;s.exports=Number.isFinite||function(u){return typeof u=="number"&&o(u)}},{"../internals/global":59}],89:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/object-keys"),c=r("../internals/object-get-own-property-symbols"),p=r("../internals/object-property-is-enumerable"),m=r("../internals/to-object"),h=r("../internals/indexed-object"),f=Object.assign,d=Object.defineProperty;s.exports=!f||u(function(){var g,y,b,x;return!(!o||f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(C){y[C]=C}),f({},g)[b]!=7||l(f({},y)).join("")!=x)})?function(g,y){for(var b=m(g),x=arguments.length,C=1,S=c.f,w=p.f;C<x;)for(var _,M=h(arguments[C++]),I=S?l(M).concat(S(M)):l(M),R=I.length,P=0;P<R;)_=I[P++],o&&!w.call(M,_)||(b[_]=M[_]);return b}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(d,s,a){function o(){}var u,l=d("../internals/an-object"),c=d("../internals/object-define-properties"),p=d("../internals/enum-bug-keys"),m=d("../internals/hidden-keys"),h=d("../internals/html"),f=d("../internals/document-create-element"),d=d("../internals/shared-key"),g="prototype",y="script",b=d("IE_PROTO"),x=function(S){return"<"+y+">"+S+"</"+y+">"},C=function(){try{u=document.domain&&new ActiveXObject("htmlfile")}catch{}C=u?((S=u).write(x("")),S.close(),w=S.parentWindow.Object,S=null,w):(S=f("iframe"),w="java"+y+":",S.style.display="none",h.appendChild(S),S.src=String(w),(w=S.contentWindow.document).open(),w.write(x("document.F=Object")),w.close(),w.F);for(var S,w,_=p.length;_--;)delete C[g][p[_]];return C()};m[b]=!0,s.exports=Object.create||function(S,w){var _;return S!==null?(o[g]=l(S),_=new o,o[g]=null,_[b]=S):_=C(),w===void 0?_:c(_,w)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/an-object"),c=r("../internals/object-keys");s.exports=o?Object.defineProperties:function(p,m){l(p);for(var h,f=c(m),d=f.length,g=0;g<d;)u.f(p,h=f[g++],m[h]);return p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),c=r("../internals/to-primitive"),p=Object.defineProperty;a.f=o?p:function(m,h,f){if(l(m),h=c(h,!0),l(f),u)try{return p(m,h,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(m[h]=f.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),c=r("../internals/to-indexed-object"),p=r("../internals/to-primitive"),m=r("../internals/has"),h=r("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;a.f=o?f:function(d,g){if(d=c(d),g=p(g,!0),h)try{return f(d,g)}catch{}if(m(d,g))return l(!u.f.call(d,g),d[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(r,s,a){var o=r("../internals/to-indexed-object"),u=r("../internals/object-get-own-property-names").f,l={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(p){if(!c||l.call(p)!="[object Window]")return u(o(p));try{return u(p)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(r,s,a){var o=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(l){return o(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(r,s,a){a.f=Object.getOwnPropertySymbols},{}],97:[function(c,s,a){var o=c("../internals/has"),u=c("../internals/to-object"),l=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),p=l("IE_PROTO"),m=Object.prototype;s.exports=c?Object.getPrototypeOf:function(h){return h=u(h),o(h,p)?h[p]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?m:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(r,s,a){var o=r("../internals/has"),u=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,c=r("../internals/hidden-keys");s.exports=function(p,m){var h,f=u(p),d=0,g=[];for(h in f)!o(c,h)&&o(f,h)&&g.push(h);for(;m.length>d;)!o(f,h=m[d++])||~l(g,h)||g.push(h);return g}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(r,s,a){var o=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys");s.exports=Object.keys||function(l){return o(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(r,s,a){var o={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l=u&&!o.call({1:2},1);a.f=l?function(c){return c=u(this,c),!!c&&c.enumerable}:o},{}],101:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,c=!1,p={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(p,[]),c=p instanceof Array}catch{}return function(m,h){return o(m),u(h),c?l.call(m,h):m.__proto__=h,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(r,s,a){var o=r("../internals/to-string-tag-support"),u=r("../internals/classof");s.exports=o?{}.toString:function(){return"[object "+u(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(r,s,a){var o=r("../internals/get-built-in"),u=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),c=r("../internals/an-object");s.exports=o("Reflect","ownKeys")||function(p){var m=u.f(c(p)),h=l.f;return h?m.concat(h(p)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(r,s,a){r=r("../internals/global"),s.exports=r},{"../internals/global":59}],105:[function(r,s,a){s.exports=function(o){try{return{error:!1,value:o()}}catch(u){return{error:!0,value:u}}}},{}],106:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/is-object"),l=r("../internals/new-promise-capability");s.exports=function(c,p){return o(c),u(p)&&p.constructor===c?p:((0,(c=l.f(c)).resolve)(p),c.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(r,s,a){var o=r("../internals/redefine");s.exports=function(u,l,c){for(var p in l)o(u,p,l[p],c);return u}},{"../internals/redefine":108}],108:[function(m,s,a){var o=m("../internals/global"),u=m("../internals/create-non-enumerable-property"),l=m("../internals/has"),c=m("../internals/set-global"),p=m("../internals/inspect-source"),m=m("../internals/internal-state"),h=m.get,f=m.enforce,d=String(String).split("String");(s.exports=function(g,y,b,w){var C=!!w&&!!w.unsafe,S=!!w&&!!w.enumerable,w=!!w&&!!w.noTargetGet;typeof b=="function"&&(typeof y!="string"||l(b,"name")||u(b,"name",y),f(b).source=d.join(typeof y=="string"?y:"")),g===o?S?g[y]=b:c(y,b):(C?!w&&g[y]&&(S=!0):delete g[y],S?g[y]=b:u(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||p(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(r,s,a){var o=r("./classof-raw"),u=r("./regexp-exec");s.exports=function(l,c){var p=l.exec;if(typeof p=="function"){if(p=p.call(l,c),typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(o(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return u.call(l,c)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(c,s,a){var o,u,l=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),p=RegExp.prototype.exec,m=String.prototype.replace,h=p,f=(o=/a/,u=/b*/g,p.call(o,"a"),p.call(u,"a"),o.lastIndex!==0||u.lastIndex!==0),d=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;s.exports=h=f||g||d?function(y){var b,x,C,S,w=this,_=d&&w.sticky,M=l.call(w),I=w.source,R=0,P=y;return _&&((M=M.replace("y","")).indexOf("g")===-1&&(M+="g"),P=String(y).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&y[w.lastIndex-1]!==`
`)&&(I="(?: "+I+")",P=" "+P,R++),x=new RegExp("^(?:"+I+")",M)),g&&(x=new RegExp("^"+I+"$(?!\\s)",M)),f&&(b=w.lastIndex),C=p.call(_?x:w,P),_?C?(C.input=C.input.slice(R),C[0]=C[0].slice(R),C.index=w.lastIndex,w.lastIndex+=C[0].length):w.lastIndex=0:f&&C&&(w.lastIndex=w.global?C.index+C[0].length:b),g&&C&&1<C.length&&m.call(C[0],x,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(C[S]=void 0)}),C}:h},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(r,s,a){var o=r("../internals/an-object");s.exports=function(){var u=o(this),l="";return u.global&&(l+="g"),u.ignoreCase&&(l+="i"),u.multiline&&(l+="m"),u.dotAll&&(l+="s"),u.unicode&&(l+="u"),u.sticky&&(l+="y"),l}},{"../internals/an-object":10}],112:[function(r,s,a){r=r("./fails");function o(u,l){return RegExp(u,l)}a.UNSUPPORTED_Y=r(function(){var u=o("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),a.BROKEN_CARET=r(function(){var u=o("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},{"./fails":51}],113:[function(r,s,a){s.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(r,s,a){s.exports=Object.is||function(o,u){return o===u?o!==0||1/o==1/u:o!=o&&u!=u}},{}],115:[function(r,s,a){var o=r("../internals/global"),u=r("../internals/create-non-enumerable-property");s.exports=function(l,c){try{u(o,l,c)}catch{o[l]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(r,s,a){var o=r("../internals/get-built-in"),u=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),c=r("../internals/descriptors"),p=l("species");s.exports=function(h){var h=o(h),f=u.f;c&&h&&!h[p]&&f(h,p,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(r,s,a){var o=r("../internals/object-define-property").f,u=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");s.exports=function(c,p,m){c&&!u(c=m?c:c.prototype,l)&&o(c,l,{configurable:!0,value:p})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(r,s,a){var o=r("../internals/shared"),u=r("../internals/uid"),l=o("keys");s.exports=function(c){return l[c]||(l[c]=u(c))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(o,s,a){var l=o("../internals/global"),o=o("../internals/set-global"),u="__core-js_shared__",l=l[u]||o(u,{});s.exports=l},{"../internals/global":59,"../internals/set-global":115}],120:[function(r,s,a){var o=r("../internals/is-pure"),u=r("../internals/shared-store");(s.exports=function(l,c){return u[l]||(u[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");s.exports=function(m,p){var m=o(m).constructor;return m===void 0||(m=o(m)[l])==null?p:u(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(r,s,a){var o=r("../internals/fails");s.exports=function(u){return o(function(){var l=""[u]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],123:[function(r,s,a){function o(c){return function(f,d){var h,f=String(l(f)),d=u(d),g=f.length;return d<0||g<=d?c?"":void 0:(h=f.charCodeAt(d))<55296||56319<h||d+1===g||(g=f.charCodeAt(d+1))<56320||57343<g?c?f.charAt(d):h:c?f.slice(d,d+2):g-56320+(h-55296<<10)+65536}}var u=r("../internals/to-integer"),l=r("../internals/require-object-coercible");s.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(r,s,a){function o(C){return C+22+75*(C<26)}function u(C){var S,w=[],_=(C=function($){for(var Y=[],oe=0,O=$.length;oe<O;){var B,q=$.charCodeAt(oe++);55296<=q&&q<=56319&&oe<O?(64512&(B=$.charCodeAt(oe++)))==56320?Y.push(((1023&q)<<10)+(1023&B)+65536):(Y.push(q),oe--):Y.push(q)}return Y}(C)).length,M=128,I=0,R=72;for(F=0;F<C.length;F++)(S=C[F])<128&&w.push(x(S));var P=w.length,D=P;for(P&&w.push("-");D<_;){for(var U=l,F=0;F<C.length;F++)M<=(S=C[F])&&S<U&&(U=S);var z=D+1;if(U-M>b((l-I)/z))throw RangeError(g);for(I+=(U-M)*z,M=U,F=0;F<C.length;F++){if((S=C[F])<M&&++I>l)throw RangeError(g);if(S==M){for(var J=I,Q=c;;Q+=c){var Z=Q<=R?1:R+p<=Q?p:Q-R;if(J<Z)break;var K=J-Z,H=c-Z;w.push(x(o(Z+K%H))),J=b(K/H)}w.push(x(o(J))),R=function($,Y,oe){var O=0;for($=oe?b($/h):$>>1,$+=b($/Y);y*p>>1<$;O+=c)$=b($/y);return b(O+(y+1)*$/($+m))}(I,z,D==P),I=0,++D}}++I,++M}return w.join("")}var l=2147483647,c=36,p=26,m=38,h=700,f=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;s.exports=function(C){for(var S,w=[],_=C.toLowerCase().replace(d,".").split("."),M=0;M<_.length;M++)S=_[M],w.push(f.test(S)?"xn--"+u(S):S);return w.join(".")}},{}],125:[function(r,s,a){var o=r("../internals/to-integer"),u=r("../internals/require-object-coercible");s.exports="".repeat||function(l){var c=String(u(this)),p="",m=o(l);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(c+=c))1&m&&(p+=c);return p}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/whitespaces");s.exports=function(l){return o(function(){return!!u[l]()||"âÂá "[l]()!="âÂá "||u[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(l,s,a){function o(m){return function(h){return h=String(u(h)),1&m&&(h=h.replace(c,"")),h=2&m?h.replace(p,""):h}}var u=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",c=RegExp("^"+l+l+"*"),p=RegExp(l+l+"*$");s.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(y,s,a){function o(D){return function(){P(D)}}function u(D){P(D.data)}function l(D){p.postMessage(D+"",b.protocol+"//"+b.host)}var c,p=y("../internals/global"),m=y("../internals/fails"),h=y("../internals/classof-raw"),f=y("../internals/function-bind-context"),d=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=p.location,x=p.setImmediate,C=p.clearImmediate,S=p.process,w=p.MessageChannel,_=p.Dispatch,M=0,I={},R="onreadystatechange",P=function(D){var U;I.hasOwnProperty(D)&&(U=I[D],delete I[D],U())};x&&C||(x=function(D){for(var U=[],F=1;F<arguments.length;)U.push(arguments[F++]);return I[++M]=function(){(typeof D=="function"?D:Function(D)).apply(void 0,U)},c(M),M},C=function(D){delete I[D]},h(S)=="process"?c=function(D){S.nextTick(o(D))}:_&&_.now?c=function(D){_.now(o(D))}:w&&!y?(y=(h=new w).port2,h.port1.onmessage=u,c=f(y.postMessage,y,1)):!p.addEventListener||typeof postMessage!="function"||p.importScripts||m(l)||b.protocol==="file:"?c=R in g("script")?function(D){d.appendChild(g("script"))[R]=function(){d.removeChild(this),P(D)}}:function(D){setTimeout(o(D),0)}:(c=l,p.addEventListener("message",u,!1))),s.exports={set:x,clear:C}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(r,s,a){var o=r("../internals/classof-raw");s.exports=function(u){if(typeof u!="number"&&o(u)!="Number")throw TypeError("Incorrect invocation");return+u}},{"../internals/classof-raw":28}],130:[function(r,s,a){var o=r("../internals/to-integer"),u=Math.max,l=Math.min;s.exports=function(c,p){return c=o(c),c<0?u(c+p,0):l(c,p)}},{"../internals/to-integer":133}],131:[function(r,s,a){var o=r("../internals/to-integer"),u=r("../internals/to-length");s.exports=function(c){if(c===void 0)return 0;var c=o(c),p=u(c);if(c!==p)throw RangeError("Wrong length or index");return p}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(r,s,a){var o=r("../internals/indexed-object"),u=r("../internals/require-object-coercible");s.exports=function(l){return o(u(l))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(r,s,a){var o=Math.ceil,u=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(0<l?u:o)(l)}},{}],134:[function(r,s,a){var o=r("../internals/to-integer"),u=Math.min;s.exports=function(l){return 0<l?u(o(l),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(r,s,a){var o=r("../internals/require-object-coercible");s.exports=function(u){return Object(o(u))}},{"../internals/require-object-coercible":113}],136:[function(r,s,a){var o=r("../internals/to-positive-integer");s.exports=function(u,l){if(u=o(u),u%l)throw RangeError("Wrong offset");return u}},{"../internals/to-positive-integer":137}],137:[function(r,s,a){var o=r("../internals/to-integer");s.exports=function(u){if(u=o(u),u<0)throw RangeError("The argument can't be less than 0");return u}},{"../internals/to-integer":133}],138:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u,l){if(!o(u))return u;var c,p;if(l&&typeof(c=u.toString)=="function"&&!o(p=c.call(u))||typeof(c=u.valueOf)=="function"&&!o(p=c.call(u))||!l&&typeof(c=u.toString)=="function"&&!o(p=c.call(u)))return p;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(r,s,a){var o={};o[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(r,s,a){function o(Me,Ye){for(var Be=0,rt=Ye.length,Ge=new(le(Me))(rt);Be<rt;)Ge[Be]=Ye[Be++];return Ge}function u(Me,Ye){B(Me,Ye,{get:function(){return oe(this)[Ye]}})}function l(Me){return Me instanceof me||(Me=P(Me))=="ArrayBuffer"||Me=="SharedArrayBuffer"}function c(Me,Ye){return Se(Me)&&typeof Ye!="symbol"&&Ye in Me&&String(+Ye)==String(Ye)}function p(Me,Ye){return c(Me,Ye=I(Ye,!0))?C(2,Me[Ye]):q(Me,Ye)}function m(Me,Ye,Be){return!(c(Me,Ye=I(Ye,!0))&&D(Be)&&R(Be,"value"))||R(Be,"get")||R(Be,"set")||Be.configurable||R(Be,"writable")&&!Be.writable||R(Be,"enumerable")&&!Be.enumerable?B(Me,Ye,Be):(Me[Ye]=Be.value,Me)}var h=r("../internals/export"),f=r("../internals/global"),d=r("../internals/descriptors"),g=r("../internals/typed-array-constructors-require-wrappers"),y=r("../internals/array-buffer-view-core"),b=r("../internals/array-buffer"),x=r("../internals/an-instance"),C=r("../internals/create-property-descriptor"),S=r("../internals/create-non-enumerable-property"),w=r("../internals/to-length"),_=r("../internals/to-index"),M=r("../internals/to-offset"),I=r("../internals/to-primitive"),R=r("../internals/has"),P=r("../internals/classof"),D=r("../internals/is-object"),U=r("../internals/object-create"),F=r("../internals/object-set-prototype-of"),z=r("../internals/object-get-own-property-names").f,J=r("../internals/typed-array-from"),Q=r("../internals/array-iteration").forEach,Z=r("../internals/set-species"),K=r("../internals/object-define-property"),H=r("../internals/object-get-own-property-descriptor"),$=r("../internals/internal-state"),Y=r("../internals/inherit-if-required"),oe=$.get,O=$.set,B=K.f,q=H.f,re=Math.round,ae=f.RangeError,me=b.ArrayBuffer,ge=b.DataView,xe=y.NATIVE_ARRAY_BUFFER_VIEWS,pe=y.TYPED_ARRAY_TAG,ve=y.TypedArray,Ee=y.TypedArrayPrototype,le=y.aTypedArrayConstructor,Se=y.isTypedArray,be="BYTES_PER_ELEMENT",Ie="Wrong length";d?(xe||(H.f=p,K.f=m,u(Ee,"buffer"),u(Ee,"byteOffset"),u(Ee,"byteLength"),u(Ee,"length")),h({target:"Object",stat:!0,forced:!xe},{getOwnPropertyDescriptor:p,defineProperty:m}),s.exports=function(je,Ye,Be){function rt(Pe,ee){B(Pe,ee,{get:function(){var ie=this,X=ee;return(ie=oe(ie)).view[Fe](X*Ge+ie.byteOffset,!0)},set:function(ie){var X=this,ce=ee;X=oe(X),Be&&(ie=(ie=re(ie))<0?0:255<ie?255:255&ie),X.view[Ue](ce*Ge+X.byteOffset,ie,!0)},enumerable:!0})}var Ge=je.match(/\d+$/)[0]/8,ye=je+(Be?"Clamped":"")+"Array",Fe="get"+je,Ue="set"+je,nt=f[ye],st=nt,je=st&&st.prototype,Xe={};xe?g&&(st=Ye(function(Pe,ee,ie,X){return x(Pe,st,ye),Y(D(ee)?l(ee)?X!==void 0?new nt(ee,M(ie,Ge),X):ie!==void 0?new nt(ee,M(ie,Ge)):new nt(ee):Se(ee)?o(st,ee):J.call(st,ee):new nt(_(ee)),Pe,st)}),F&&F(st,ve),Q(z(nt),function(Pe){Pe in st||S(st,Pe,nt[Pe])}),st.prototype=je):(st=Ye(function(Pe,ee,ie,X){x(Pe,st,ye);var ce,ke,Re=0,$e=0;if(D(ee)){if(!l(ee))return Se(ee)?o(st,ee):J.call(st,ee);var mt=ee,$e=M(ie,Ge),ie=ee.byteLength;if(X===void 0){if(ie%Ge||(ce=ie-$e)<0)throw ae(Ie)}else if(ie<(ce=w(X)*Ge)+$e)throw ae(Ie);ke=ce/Ge}else ke=_(ee),mt=new me(ce=ke*Ge);for(O(Pe,{buffer:mt,byteOffset:$e,byteLength:ce,length:ke,view:new ge(mt)});Re<ke;)rt(Pe,Re++)}),F&&F(st,ve),je=st.prototype=U(Ee)),je.constructor!==st&&S(je,"constructor",st),pe&&S(je,pe,ye),Xe[ye]=st,h({global:!0,forced:st!=nt,sham:!xe},Xe),be in st||S(st,be,Ge),be in je||S(je,be,Ge),Z(ye)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(c,s,a){var o=c("../internals/global"),u=c("../internals/fails"),l=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,p=o.ArrayBuffer,m=o.Int8Array;s.exports=!c||!u(function(){m(1)})||!u(function(){new m(-1)})||!l(function(h){new m,new m(null),new m(1.5),new m(h)},!0)||u(function(){return new m(new p(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-length"),l=r("../internals/get-iterator-method"),c=r("../internals/is-array-iterator-method"),p=r("../internals/function-bind-context"),m=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(h){var f,d,g,y,b,x,C=o(h),S=arguments.length,w=1<S?arguments[1]:void 0,_=w!==void 0,M=l(C);if(M!=null&&!c(M))for(x=(b=M.call(C)).next,C=[];!(y=x.call(b)).done;)C.push(y.value);for(_&&2<S&&(w=p(w,arguments[2],2)),d=u(C.length),g=new(m(this))(d),f=0;f<d;f++)g[f]=_?w(C[f],f):C[f];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(r,s,a){var o=0,u=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+u).toString(36)}},{}],144:[function(r,s,a){r=r("../internals/native-symbol"),s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(r,s,a){r=r("../internals/well-known-symbol"),a.f=r},{"../internals/well-known-symbol":146}],146:[function(m,s,a){var o=m("../internals/global"),u=m("../internals/shared"),l=m("../internals/has"),c=m("../internals/uid"),p=m("../internals/native-symbol"),m=m("../internals/use-symbol-as-uid"),h=u("wks"),f=o.Symbol,d=m?f:f&&f.withoutSetter||c;s.exports=function(g){return l(h,g)||(p&&l(f,g)?h[g]=f[g]:h[g]=d("Symbol."+g)),h[g]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(r,s,a){s.exports=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`},{}],148:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/global"),p=l("../internals/array-buffer"),l=l("../internals/set-species"),c="ArrayBuffer",p=p[c];o({global:!0,forced:u[c]!==p},{ArrayBuffer:p}),l(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(C,s,a){var o=C("../internals/export"),u=C("../internals/fails"),l=C("../internals/is-array"),c=C("../internals/is-object"),p=C("../internals/to-object"),m=C("../internals/to-length"),h=C("../internals/create-property"),f=C("../internals/array-species-create"),d=C("../internals/array-method-has-species-support"),x=C("../internals/well-known-symbol"),C=C("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=C||!u(function(){var S=[];return S[g]=!1,S.concat()[0]!==S}),C=d("concat");o({target:"Array",proto:!0,forced:!x||!C},{concat:function(S){for(var w,_,M,I,R,P=p(this),D=f(P,0),U=0,F=-1,z=arguments.length;F<z;F++)if(R=void 0,!c(I=M=F===-1?P:arguments[F])||((R=I[g])!==void 0?!R:!l(I))){if(y<=U)throw TypeError(b);h(D,U++,M)}else{if(_=m(M.length),y<U+_)throw TypeError(b);for(w=0;w<_;w++,U++)w in M&&h(D,U,M[w])}return D.length=U,D}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:u}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").every,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("every"),c=c("every");o({target:"Array",proto:!0,forced:!l||!c},{every:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:u}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").filter,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("filter"),c=c("filter");o({target:"Array",proto:!0,forced:!l||!c},{filter:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=u},{forEach:u})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/array-from");o({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:u})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return u(this,c,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(m,s,a){var o=m("../internals/export"),u=m("../internals/array-includes").indexOf,p=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,p=p("indexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:c||!p||!m},{indexOf:function(h){return c?l.apply(this,arguments)||0:u(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(p,s,a){var o=p("../internals/to-indexed-object"),u=p("../internals/add-to-unscopables"),l=p("../internals/iterators"),c=p("../internals/internal-state"),p=p("../internals/define-iterator"),m="Array Iterator",h=c.set,f=c.getterFor(m);s.exports=p(Array,"Array",function(d,g){h(this,{type:m,target:o(d),index:0,kind:g})},function(){var d=f(this),g=d.target,y=d.kind,b=d.index++;return!g||b>=g.length?{value:d.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),l.Arguments=l.Array,u("keys"),u("values"),u("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(p,s,a){var o=p("../internals/export"),c=p("../internals/indexed-object"),u=p("../internals/to-indexed-object"),p=p("../internals/array-method-is-strict"),l=[].join,c=c!=Object,p=p("join",",");o({target:"Array",proto:!0,forced:c||!p},{join:function(m){return l.call(u(this),m===void 0?",":m)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:u!==[].lastIndexOf},{lastIndexOf:u})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").map,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("map"),c=c("map");o({target:"Array",proto:!0,forced:!l||!c},{map:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(g,s,a){var o=g("../internals/export"),u=g("../internals/is-object"),l=g("../internals/is-array"),c=g("../internals/to-absolute-index"),p=g("../internals/to-length"),m=g("../internals/to-indexed-object"),h=g("../internals/create-property"),f=g("../internals/well-known-symbol"),d=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),d=d("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=f("species"),b=[].slice,x=Math.max;o({target:"Array",proto:!0,forced:!d||!g},{slice:function(C,S){var w,_,M,I=m(this),R=p(I.length),P=c(C,R),D=c(S===void 0?R:S,R);if(l(I)&&((w=typeof(w=I.constructor)=="function"&&(w===Array||l(w.prototype))||u(w)&&(w=w[y])===null?void 0:w)===Array||w===void 0))return b.call(I,P,D);for(_=new(w===void 0?Array:w)(x(D-P,0)),M=0;P<D;P++,M++)P in I&&h(_,M,I[P]);return _.length=M,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").some,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("some"),c=c("some");o({target:"Array",proto:!0,forced:!l||!c},{some:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(d,s,a){var o=d("../internals/export"),u=d("../internals/to-absolute-index"),l=d("../internals/to-integer"),c=d("../internals/to-length"),p=d("../internals/to-object"),m=d("../internals/array-species-create"),h=d("../internals/create-property"),f=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),f=f("splice"),d=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;o({target:"Array",proto:!0,forced:!f||!d},{splice:function(U,x){var C,S,w,_,M,I,R=p(this),P=c(R.length),D=u(U,P),U=arguments.length;if(U===0?C=S=0:S=U===1?(C=0,P-D):(C=U-2,y(g(l(x),0),P-D)),9007199254740991<P+C-S)throw TypeError("Maximum allowed length exceeded");for(w=m(R,S),_=0;_<S;_++)(M=D+_)in R&&h(w,_,R[M]);if(C<(w.length=S)){for(_=D;_<P-S;_++)I=_+C,(M=_+S)in R?R[I]=R[M]:delete R[I];for(_=P;P-S+C<_;_--)delete R[_-1]}else if(S<C)for(_=P-S;D<_;_--)I=_+C-1,(M=_+S-1)in R?R[I]=R[M]:delete R[I];for(_=0;_<C;_++)R[_+D]=arguments[_+2];return R.length=P-S+C,w}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(u,s,a){var o=u("../internals/descriptors"),u=u("../internals/object-define-property").f,l=Function.prototype,c=l.toString,p=/^\s*function ([^ (]*)/;!o||"name"in l||u(l,"name",{configurable:!0,get:function(){try{return c.call(this).match(p)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(u,s,a){var o=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=o("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(o,s,a){var o=o("../internals/export"),u=Math.hypot,l=Math.abs,c=Math.sqrt;o({target:"Math",stat:!0,forced:!!u&&u(1/0,NaN)!==1/0},{hypot:function(p,m){for(var h,f,d=0,g=0,y=arguments.length,b=0;g<y;)b<(h=l(arguments[g++]))?(d=d*(f=b/h)*f+1,b=h):d+=0<h?(f=h/b)*f:h;return b===1/0?1/0:b*c(d)}})},{"../internals/export":50}],168:[function(r,s,a){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(r,s,a){function o(F){var z,J,Q,Z,K,H,$,Y=d(F,!1);if(typeof Y=="string"&&2<Y.length){if((F=(Y=S(Y)).charCodeAt(0))===43||F===45){if((z=Y.charCodeAt(2))===88||z===120)return NaN}else if(F===48){switch(Y.charCodeAt(1)){case 66:case 98:J=2,Q=49;break;case 79:case 111:J=8,Q=55;break;default:return+Y}for(K=(Z=Y.slice(2)).length,H=0;H<K;H++)if(($=Z.charCodeAt(H))<48||Q<$)return NaN;return parseInt(Z,J)}}return+Y}var u=r("../internals/descriptors"),l=r("../internals/global"),c=r("../internals/is-forced"),p=r("../internals/redefine"),m=r("../internals/has"),h=r("../internals/classof-raw"),f=r("../internals/inherit-if-required"),d=r("../internals/to-primitive"),g=r("../internals/fails"),y=r("../internals/object-create"),b=r("../internals/object-get-own-property-names").f,x=r("../internals/object-get-own-property-descriptor").f,C=r("../internals/object-define-property").f,S=r("../internals/string-trim").trim,w="Number",_=l[w],M=_.prototype,I=h(y(M))==w;if(c(w,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var R,P=function(z){var z=arguments.length<1?0:z,J=this;return J instanceof P&&(I?g(function(){M.valueOf.call(J)}):h(J)!=w)?f(new _(o(z)),J,P):o(z)},D=u?b(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),U=0;D.length>U;U++)m(_,R=D[U])&&!m(P,R)&&C(P,R,x(_,R));(P.prototype=M).constructor=P,p(l,w,P)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(r,s,a){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(m,s,a){function o(d,g,y){return g===0?y:g%2==1?o(d,g-1,y*d):o(d*d,g/2,y)}var u=m("../internals/export"),l=m("../internals/to-integer"),c=m("../internals/this-number-value"),p=m("../internals/string-repeat"),m=m("../internals/fails"),h=1 .toFixed,f=Math.floor;u({target:"Number",proto:!0,forced:h&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!m(function(){h.call({})})},{toFixed:function(w){function g(R,P){for(var D=-1,U=P;++D<6;)U+=R*_[D],_[D]=U%1e7,U=f(U/1e7)}function y(R){for(var P=6,D=0;0<=--P;)D+=_[P],_[P]=f(D/R),D=D%R*1e7}function b(){for(var R,P=6,D="";0<=--P;)D===""&&P!==0&&_[P]===0||(R=String(_[P]),D=D===""?R:D+p.call("0",7-R.length)+R);return D}var x,C,S=c(this),w=l(w),_=[0,0,0,0,0,0],M="",I="0";if(w<0||20<w)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(M="-",S=-S),1e-21<S)if(S=(x=function(R){for(var P=0,D=R;4096<=D;)P+=12,D/=4096;for(;2<=D;)P+=1,D/=2;return P}(S*o(2,69,1))-69)<0?S*o(2,-x,1):S/o(2,x,1),S*=4503599627370496,0<(x=52-x)){for(g(0,S),C=w;7<=C;)g(1e7,0),C-=7;for(g(o(10,C,1),0),C=x-1;23<=C;)y(1<<23),C-=23;y(1<<C),g(1,1),y(2),I=b()}else g(0,S),g(1<<-x,0),I=b()+p.call("0",w);return I=0<w?M+((S=I.length)<=w?"0."+p.call("0",w-S)+I:I.slice(0,S-w)+"."+I.slice(S-w)):M+I}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==u},{assign:u})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(c,s,a){var o=c("../internals/export"),p=c("../internals/fails"),u=c("../internals/to-indexed-object"),l=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),p=p(function(){l(1)});o({target:"Object",stat:!0,forced:!c||p,sham:!c},{getOwnPropertyDescriptor:function(m,h){return l(u(m),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:u(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(p,s,a){var o=p("../internals/export"),u=p("../internals/fails"),l=p("../internals/to-object"),c=p("../internals/object-get-prototype-of"),p=p("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:u(function(){c(1)}),sham:!p},{getPrototypeOf:function(m){return c(l(m))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/to-object"),l=r("../internals/object-keys");o({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(c){return l(u(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(l,s,a){var o=l("../internals/to-string-tag-support"),u=l("../internals/redefine"),l=l("../internals/object-to-string");o||u(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Be,s,a){var o,u,l,c,p=Be("../internals/export"),m=Be("../internals/is-pure"),h=Be("../internals/global"),f=Be("../internals/get-built-in"),d=Be("../internals/native-promise-constructor"),g=Be("../internals/redefine"),y=Be("../internals/redefine-all"),b=Be("../internals/set-to-string-tag"),x=Be("../internals/set-species"),C=Be("../internals/is-object"),S=Be("../internals/a-function"),w=Be("../internals/an-instance"),_=Be("../internals/classof-raw"),M=Be("../internals/inspect-source"),I=Be("../internals/iterate"),R=Be("../internals/check-correctness-of-iteration"),P=Be("../internals/species-constructor"),D=Be("../internals/task").set,U=Be("../internals/microtask"),F=Be("../internals/promise-resolve"),z=Be("../internals/host-report-errors"),J=Be("../internals/new-promise-capability"),Q=Be("../internals/perform"),Z=Be("../internals/internal-state"),K=Be("../internals/is-forced"),rt=Be("../internals/well-known-symbol"),H=Be("../internals/engine-v8-version"),$=rt("species"),Y="Promise",oe=Z.get,O=Z.set,B=Z.getterFor(Y),q=d,re=h.TypeError,ae=h.document,me=h.process,ge=f("fetch"),xe=J.f,pe=xe,ve=_(me)=="process",Ee=!!(ae&&ae.createEvent&&h.dispatchEvent),le="unhandledrejection",Se="rejectionhandled",be=1,Ie=2,Me=1,Ye=2,Be=K(Y,function(){var Xe,Pe;return M(q)===String(q)&&(H===66||!ve&&typeof PromiseRejectionEvent!="function")?!0:!(!m||q.prototype.finally)||!(51<=H&&/native code/.test(q))&&(Pe=function(ee){ee(function(){},function(){})},((Xe=q.resolve(1)).constructor={})[$]=Pe,!(Xe.then(function(){})instanceof Pe))}),rt=Be||!R(function(Xe){q.all(Xe).catch(function(){})}),Ge=function(Xe){var Pe;return!(!C(Xe)||typeof(Pe=Xe.then)!="function")&&Pe},ye=function(Xe,Pe,ee){var ie;Pe.notified||(Pe.notified=!0,ie=Pe.reactions,U(function(){for(var X,ce,ke=Pe.value,Re=Pe.state==be,$e=0;ie.length>$e;){var mt,_t,wt,Ct=ie[$e++],zt=Re?Ct.ok:Ct.fail,Pt=Ct.resolve,At=Ct.reject,Wt=Ct.domain;try{zt?(Re||(Pe.rejection===Ye&&function(Gt,kr){D.call(h,function(){ve?me.emit("rejectionHandled",Gt):Fe(Se,Gt,kr.value)})}(Xe,Pe),Pe.rejection=Me),zt===!0?mt=ke:(Wt&&Wt.enter(),mt=zt(ke),Wt&&(Wt.exit(),wt=!0)),mt===Ct.promise?At(re("Promise-chain cycle")):(_t=Ge(mt))?_t.call(mt,Pt,At):Pt(mt)):At(ke)}catch(Gt){Wt&&!wt&&Wt.exit(),At(Gt)}}Pe.reactions=[],Pe.notified=!1,ee&&!Pe.rejection&&(X=Xe,ce=Pe,D.call(h,function(){var Gt=ce.value,kr=Ue(ce);if(kr&&(kr=Q(function(){ve?me.emit("unhandledRejection",Gt,X):Fe(le,X,Gt)}),ce.rejection=ve||Ue(ce)?Ye:Me,kr.error))throw kr.value}))}))},Fe=function(Xe,Pe,ee){var ie;Ee?((ie=ae.createEvent("Event")).promise=Pe,ie.reason=ee,ie.initEvent(Xe,!1,!0),h.dispatchEvent(ie)):ie={promise:Pe,reason:ee},(Pe=h["on"+Xe])?Pe(ie):Xe===le&&z("Unhandled promise rejection",ee)},Ue=function(Xe){return Xe.rejection!==Me&&!Xe.parent},nt=function(Xe,Pe,ee,ie){return function(X){Xe(Pe,ee,X,ie)}},st=function(Xe,Pe,ee,ie){Pe.done||(Pe.done=!0,(Pe=ie||Pe).value=ee,Pe.state=Ie,ye(Xe,Pe,!0))},je=function(Xe,Pe,ee,ie){if(!Pe.done){Pe.done=!0,ie&&(Pe=ie);try{if(Xe===ee)throw re("Promise can't be resolved itself");var X=Ge(ee);X?U(function(){var ce={done:!1};try{X.call(ee,nt(je,Xe,ce,Pe),nt(st,Xe,ce,Pe))}catch(ke){st(Xe,ce,ke,Pe)}}):(Pe.value=ee,Pe.state=be,ye(Xe,Pe,!1))}catch(ce){st(Xe,{done:!1},ce,Pe)}}};Be&&(q=function(Xe){w(this,q,Y),S(Xe),o.call(this);var Pe=oe(this);try{Xe(nt(je,this,Pe),nt(st,this,Pe))}catch(ee){st(this,Pe,ee)}},(o=function(Xe){O(this,{type:Y,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(q.prototype,{then:function(Xe,Pe){var ee=B(this),ie=xe(P(this,q));return ie.ok=typeof Xe!="function"||Xe,ie.fail=typeof Pe=="function"&&Pe,ie.domain=ve?me.domain:void 0,ee.parent=!0,ee.reactions.push(ie),ee.state!=0&&ye(this,ee,!1),ie.promise},catch:function(Xe){return this.then(void 0,Xe)}}),u=function(){var Xe=new o,Pe=oe(Xe);this.promise=Xe,this.resolve=nt(je,Xe,Pe),this.reject=nt(st,Xe,Pe)},J.f=xe=function(Xe){return Xe===q||Xe===l?new u:pe(Xe)},m||typeof d!="function"||(c=d.prototype.then,g(d.prototype,"then",function(Xe,Pe){var ee=this;return new q(function(ie,X){c.call(ee,ie,X)}).then(Xe,Pe)},{unsafe:!0}),typeof ge=="function"&&p({global:!0,enumerable:!0,forced:!0},{fetch:function(Xe){return F(q,ge.apply(h,arguments))}}))),p({global:!0,wrap:!0,forced:Be},{Promise:q}),b(q,Y,!1,!0),x(Y),l=f(Y),p({target:Y,stat:!0,forced:Be},{reject:function(Xe){var Pe=xe(this);return Pe.reject.call(void 0,Xe),Pe.promise}}),p({target:Y,stat:!0,forced:m||Be},{resolve:function(Xe){return F(m&&this===l?q:this,Xe)}}),p({target:Y,stat:!0,forced:rt},{all:function(Xe){var Pe=this,ee=xe(Pe),ie=ee.resolve,X=ee.reject,ce=Q(function(){var ke=S(Pe.resolve),Re=[],$e=0,mt=1;I(Xe,function(_t){var wt=$e++,Ct=!1;Re.push(void 0),mt++,ke.call(Pe,_t).then(function(zt){Ct||(Ct=!0,Re[wt]=zt,--mt||ie(Re))},X)}),--mt||ie(Re)});return ce.error&&X(ce.value),ee.promise},race:function(Xe){var Pe=this,ee=xe(Pe),ie=ee.reject,X=Q(function(){var ce=S(Pe.resolve);I(Xe,function(ke){ce.call(Pe,ke).then(ee.resolve,ie)})});return X.error&&ie(X.value),ee.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(h,s,a){var o=h("../internals/export"),y=h("../internals/get-built-in"),u=h("../internals/a-function"),l=h("../internals/an-object"),c=h("../internals/is-object"),p=h("../internals/object-create"),m=h("../internals/function-bind"),h=h("../internals/fails"),f=y("Reflect","construct"),d=h(function(){function b(){}return!(f(function(){},[],b)instanceof b)}),g=!h(function(){f(function(){})}),y=d||g;o({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){u(b),l(x);var C=arguments.length<3?b:u(arguments[2]);if(g&&!d)return f(b,x,C);if(b==C){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(m.apply(b,S))}return S=C.prototype,C=p(c(S)?S:Object.prototype),S=Function.apply.call(b,C,x),c(S)?S:C}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/inherit-if-required"),p=r("../internals/object-define-property").f,m=r("../internals/object-get-own-property-names").f,h=r("../internals/is-regexp"),f=r("../internals/regexp-flags"),d=r("../internals/regexp-sticky-helpers"),g=r("../internals/redefine"),y=r("../internals/fails"),b=r("../internals/internal-state").set,x=r("../internals/set-species"),C=r("../internals/well-known-symbol")("match"),S=u.RegExp,w=S.prototype,_=/a/g,M=/a/g,I=new S(_)!==_,R=d.UNSUPPORTED_Y;if(o&&l("RegExp",!I||R||y(function(){return M[C]=!1,S(_)!=_||S(M)==M||S(_,"i")!="/a/i"}))){for(var P=function(F,z){var J,Q=this instanceof P,Z=h(F),K=z===void 0;return!Q&&Z&&F.constructor===P&&K?F:(I?Z&&!K&&(F=F.source):F instanceof P&&(K&&(z=f.call(F)),F=F.source),R&&(J=!!z&&-1<z.indexOf("y"))&&(z=z.replace(/y/g,"")),Z=c(I?new S(F,z):S(F,z),Q?this:w,P),R&&J&&b(Z,{sticky:J}),Z)},D=m(S),U=0;D.length>U;)(function(F){F in P||p(P,F,{configurable:!0,get:function(){return S[F]},set:function(z){S[F]=z}})})(D[U++]);(w.constructor=P).prototype=w,g(u,"RegExp",P)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==u},{exec:u})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(c,s,a){var o=c("../internals/redefine"),u=c("../internals/an-object"),h=c("../internals/fails"),l=c("../internals/regexp-flags"),c="toString",p=RegExp.prototype,m=p[c],h=h(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),f=m.name!=c;(h||f)&&o(RegExp.prototype,c,function(){var d=u(this),g=String(d.source),y=d.flags;return"/"+g+"/"+String(y===void 0&&d instanceof RegExp&&!("flags"in p)?l.call(d):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(u,s,a){var o=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=o("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(m,s,a){var o=m("../internals/export"),u=m("../internals/object-get-own-property-descriptor").f,l=m("../internals/to-length"),c=m("../internals/not-a-regexp"),p=m("../internals/require-object-coercible"),d=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),h="".endsWith,f=Math.min,d=d("endsWith");o({target:"String",proto:!0,forced:!!(m||d||!(o=u(String.prototype,"endsWith"))||o.writable)&&!d},{endsWith:function(g){var y=String(p(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=l(y.length),b=b===void 0?x:f(l(b),x),x=String(g);return h?h.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(l(this)).indexOf(u(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(l,s,a){var o=l("../internals/string-multibyte").charAt,u=l("../internals/internal-state"),l=l("../internals/define-iterator"),c="String Iterator",p=u.set,m=u.getterFor(c);l(String,"String",function(h){p(this,{type:c,string:String(h),index:0})},function(){var h=m(this),f=h.string,d=h.index;return d>=f.length?{value:void 0,done:!0}:(f=o(f,d),h.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-length"),c=r("../internals/require-object-coercible"),p=r("../internals/advance-string-index"),m=r("../internals/regexp-exec-abstract");o("match",1,function(h,f,d){return[function(g){var y=c(this),b=g==null?void 0:g[h];return b!==void 0?b.call(g,y):new RegExp(g)[h](String(y))},function(g){var y=d(f,g,this);if(y.done)return y.value;var b=u(g),x=String(this);if(!b.global)return m(b,x);for(var C=b.unicode,S=[],w=b.lastIndex=0;(_=m(b,x))!==null;){var _=String(_[0]);(S[w]=_)===""&&(b.lastIndex=p(x,l(b.lastIndex),C)),w++}return w===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(r,s,a){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-object"),c=r("../internals/to-length"),p=r("../internals/to-integer"),m=r("../internals/require-object-coercible"),h=r("../internals/advance-string-index"),f=r("../internals/regexp-exec-abstract"),d=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;o("replace",2,function(C,S,w,_){var M=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,I=_.REPLACE_KEEPS_$0,R=M?"$":"$0";return[function(P,D){var U=m(this),F=P==null?void 0:P[C];return F!==void 0?F.call(P,U,D):S.call(String(U),P,D)},function(P,D){if(!M&&I||typeof D=="string"&&D.indexOf(R)===-1){var U=w(S,P,this,D);if(U.done)return U.value}for(var F,z=u(P),J=String(this),Q=typeof D=="function",Z=(Q||(D=String(D)),z.global),K=(Z&&(F=z.unicode,z.lastIndex=0),[]);(O=f(z,J))!==null&&(K.push(O),Z);)String(O[0])===""&&(z.lastIndex=h(J,c(z.lastIndex),F));for(var H,$="",Y=0,oe=0;oe<K.length;oe++){for(var O=K[oe],B=String(O[0]),q=d(g(p(O.index),J.length),0),re=[],ae=1;ae<O.length;ae++)re.push((H=O[ae])===void 0?H:String(H));var me=O.groups,ge=Q?(ge=[B].concat(re,q,J),me!==void 0&&ge.push(me),String(D.apply(void 0,ge))):function(xe,pe,ve,Ee,le,Se){var be=ve+xe.length,Ie=Ee.length,Me=x;return le!==void 0&&(le=l(le),Me=b),S.call(Se,Me,function(Ye,Be){var rt;switch(Be.charAt(0)){case"$":return"$";case"&":return xe;case"`":return pe.slice(0,ve);case"'":return pe.slice(be);case"<":rt=le[Be.slice(1,-1)];break;default:var Ge,ye=+Be;if(ye==0)return Ye;if(Ie<ye)return(Ge=y(ye/10))!==0&&Ge<=Ie?Ee[Ge-1]===void 0?Be.charAt(1):Ee[Ge-1]+Be.charAt(1):Ye;rt=Ee[ye-1]}return rt===void 0?"":rt})}(B,J,q,re,me,D);Y<=q&&($+=J.slice(Y,q)+ge,Y=q+B.length)}return $+J.slice(Y)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/require-object-coercible"),c=r("../internals/same-value"),p=r("../internals/regexp-exec-abstract");o("search",1,function(m,h,f){return[function(d){var g=l(this),y=d==null?void 0:d[m];return y!==void 0?y.call(d,g):new RegExp(d)[m](String(g))},function(d){var g,y=f(h,d,this);return y.done?y.value:(y=u(d),d=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),d=p(y,d),c(y.lastIndex,g)||(y.lastIndex=g),d===null?-1:d.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(g,s,a){var o=g("../internals/fix-regexp-well-known-symbol-logic"),u=g("../internals/is-regexp"),l=g("../internals/an-object"),c=g("../internals/require-object-coercible"),p=g("../internals/species-constructor"),m=g("../internals/advance-string-index"),h=g("../internals/to-length"),f=g("../internals/regexp-exec-abstract"),d=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,C=!g(function(){return!RegExp(x,"y")});o("split",2,function(S,w,_){var M="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(I,R){var P=String(c(this)),D=R===void 0?x:R>>>0;if(D==0)return[];if(I===void 0)return[P];if(!u(I))return w.call(P,I,D);for(var U,F,z,J=[],R=(I.ignoreCase?"i":"")+(I.multiline?"m":"")+(I.unicode?"u":"")+(I.sticky?"y":""),Q=0,Z=new RegExp(I.source,R+"g");(U=d.call(Z,P))&&!(Q<(F=Z.lastIndex)&&(J.push(P.slice(Q,U.index)),1<U.length&&U.index<P.length&&y.apply(J,U.slice(1)),z=U[0].length,Q=F,J.length>=D));)Z.lastIndex===U.index&&Z.lastIndex++;return Q===P.length?!z&&Z.test("")||J.push(""):J.push(P.slice(Q)),J.length>D?J.slice(0,D):J}:"0".split(void 0,0).length?function(I,R){return I===void 0&&R===0?[]:w.call(this,I,R)}:w;return[function(I,R){var P=c(this),D=I==null?void 0:I[S];return D!==void 0?D.call(I,P,R):M.call(String(P),I,R)},function(U,R){var P=_(M,U,this,R,M!==w);if(P.done)return P.value;var P=l(U),D=String(this),U=p(P,RegExp),F=P.unicode,z=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(C?"y":"g"),J=new U(C?P:"^(?:"+P.source+")",z),Q=R===void 0?x:R>>>0;if(Q==0)return[];if(D.length===0)return f(J,D)===null?[D]:[];for(var Z=0,K=0,H=[];K<D.length;){J.lastIndex=C?K:0;var $,Y=f(J,C?D:D.slice(K));if(Y===null||($=b(h(J.lastIndex+(C?0:K)),D.length))===Z)K=m(D,K,F);else{if(H.push(D.slice(Z,K)),H.length===Q)return H;for(var oe=1;oe<=Y.length-1;oe++)if(H.push(Y[oe]),H.length===Q)return H;K=Z=$}}return H.push(D.slice(Z)),H}]},!C)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/create-html");o({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return u(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/string-trim").trim;o({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return u(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(b,s,a){var o,u,l,c,p,m=b("../internals/export"),h=b("../internals/descriptors"),f=b("../internals/global"),d=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=f.Symbol;!h||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(o={},b(u=function(){var C=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof u?new x(C):C===void 0?x():x(C);return C===""&&(o[S]=!0),S},x),(f=u.prototype=x.prototype).constructor=u,l=f.toString,c=String(x("test"))=="Symbol(test)",p=/^Symbol\((.*)\)[^)]+$/,y(f,"description",{configurable:!0,get:function(){var C=g(this)?this.valueOf():this,S=l.call(C);return d(o,C)?"":(C=c?S.slice(7,-1):S.replace(p,"$1"))===""?void 0:C}}),m({global:!0,forced:!0},{Symbol:u}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(r,s,a){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(pe,s,a){function o(X,ce){var ke=rt[X]=P(Se[xe]);return ve(ke,{type:ge,tag:X,description:ce}),d||(ke.description=ce),ke}function u(X,Re){w(X);var ke=M(Re),Re=D(ke).concat(ie(ke));return ae(Re,function($e){d&&!ee.call(ke,$e)||Pe(X,$e,ke[$e])}),X}function l(Re,$e){var ke,Re=M(Re),$e=I($e,!0);if(Re!==le||!x(rt,$e)||x(Ge,$e))return!(ke=Ie(Re,$e))||!x(rt,$e)||x(Re,me)&&Re[me][$e]||(ke.enumerable=!0),ke}function c(ce){var ce=Ye(M(ce)),ke=[];return ae(ce,function(Re){x(rt,Re)||x(Y,Re)||ke.push(Re)}),ke}var p=pe("../internals/export"),m=pe("../internals/global"),h=pe("../internals/get-built-in"),f=pe("../internals/is-pure"),d=pe("../internals/descriptors"),g=pe("../internals/native-symbol"),y=pe("../internals/use-symbol-as-uid"),b=pe("../internals/fails"),x=pe("../internals/has"),C=pe("../internals/is-array"),S=pe("../internals/is-object"),w=pe("../internals/an-object"),_=pe("../internals/to-object"),M=pe("../internals/to-indexed-object"),I=pe("../internals/to-primitive"),R=pe("../internals/create-property-descriptor"),P=pe("../internals/object-create"),D=pe("../internals/object-keys"),U=pe("../internals/object-get-own-property-names"),F=pe("../internals/object-get-own-property-names-external"),z=pe("../internals/object-get-own-property-symbols"),J=pe("../internals/object-get-own-property-descriptor"),Q=pe("../internals/object-define-property"),Z=pe("../internals/object-property-is-enumerable"),K=pe("../internals/create-non-enumerable-property"),H=pe("../internals/redefine"),$=pe("../internals/shared"),Ue=pe("../internals/shared-key"),Y=pe("../internals/hidden-keys"),oe=pe("../internals/uid"),O=pe("../internals/well-known-symbol"),B=pe("../internals/well-known-symbol-wrapped"),q=pe("../internals/define-well-known-symbol"),re=pe("../internals/set-to-string-tag"),nt=pe("../internals/internal-state"),ae=pe("../internals/array-iteration").forEach,me=Ue("hidden"),ge="Symbol",xe="prototype",pe=O("toPrimitive"),ve=nt.set,Ee=nt.getterFor(ge),le=Object[xe],Se=m.Symbol,be=h("JSON","stringify"),Ie=J.f,Me=Q.f,Ye=F.f,Be=Z.f,rt=$("symbols"),Ge=$("op-symbols"),ye=$("string-to-symbol-registry"),Fe=$("symbol-to-string-registry"),Ue=$("wks"),nt=m.QObject,st=!nt||!nt[xe]||!nt[xe].findChild,je=d&&b(function(){return P(Me({},"a",{get:function(){return Me(this,"a",{value:7}).a}})).a!=7})?function(X,ce,ke){var Re=Ie(le,ce);Re&&delete le[ce],Me(X,ce,ke),Re&&X!==le&&Me(le,ce,Re)}:Me,Xe=y?function(X){return typeof X=="symbol"}:function(X){return Object(X)instanceof Se},Pe=function(X,ce,ke){return X===le&&Pe(Ge,ce,ke),w(X),ce=I(ce,!0),w(ke),(x(rt,ce)?(ke.enumerable?(x(X,me)&&X[me][ce]&&(X[me][ce]=!1),ke=P(ke,{enumerable:R(0,!1)})):(x(X,me)||Me(X,me,R(1,{})),X[me][ce]=!0),je):Me)(X,ce,ke)},ee=function(ce){var ce=I(ce,!0),ke=Be.call(this,ce);return!(this===le&&x(rt,ce)&&!x(Ge,ce))&&(!(ke||!x(this,ce)||!x(rt,ce)||x(this,me)&&this[me][ce])||ke)},ie=function(ke){var ce=ke===le,ke=Ye(ce?Ge:M(ke)),Re=[];return ae(ke,function($e){!x(rt,$e)||ce&&!x(le,$e)||Re.push(rt[$e])}),Re};g||(H((Se=function(){if(this instanceof Se)throw TypeError("Symbol is not a constructor");var X=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ce=oe(X),ke=function(Re){this===le&&ke.call(Ge,Re),x(this,me)&&x(this[me],ce)&&(this[me][ce]=!1),je(this,ce,R(1,Re))};return d&&st&&je(le,ce,{configurable:!0,set:ke}),o(ce,X)})[xe],"toString",function(){return Ee(this).tag}),H(Se,"withoutSetter",function(X){return o(oe(X),X)}),Z.f=ee,Q.f=Pe,J.f=l,U.f=F.f=c,z.f=ie,B.f=function(X){return o(O(X),X)},d&&(Me(Se[xe],"description",{configurable:!0,get:function(){return Ee(this).description}}),f||H(le,"propertyIsEnumerable",ee,{unsafe:!0}))),p({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:Se}),ae(D(Ue),function(X){q(X)}),p({target:ge,stat:!0,forced:!g},{for:function(ke){var ce,ke=String(ke);return x(ye,ke)?ye[ke]:(ce=Se(ke),ye[ke]=ce,Fe[ce]=ke,ce)},keyFor:function(X){if(!Xe(X))throw TypeError(X+" is not a symbol");if(x(Fe,X))return Fe[X]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),p({target:"Object",stat:!0,forced:!g,sham:!d},{create:function(X,ce){return ce===void 0?P(X):u(P(X),ce)},defineProperty:Pe,defineProperties:u,getOwnPropertyDescriptor:l}),p({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:ie}),p({target:"Object",stat:!0,forced:b(function(){z.f(1)})},{getOwnPropertySymbols:function(X){return z.f(_(X))}}),be&&p({target:"JSON",stat:!0,forced:!g||b(function(){var X=Se();return be([X])!="[null]"||be({a:X})!="{}"||be(Object(X))!="{}"})},{stringify:function(X,ce,ke){for(var Re,$e=[X],mt=1;mt<arguments.length;)$e.push(arguments[mt++]);if((S(Re=ce)||X!==void 0)&&!Xe(X))return C(ce)||(ce=function(_t,wt){if(typeof Re=="function"&&(wt=Re.call(this,_t,wt)),!Xe(wt))return wt}),$e[1]=ce,be.apply(null,$e)}}),Se[xe][pe]||K(Se[xe],pe,Se[xe].valueOf),re(Se,ge),Y[me]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-copy-within"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(c,p){return u.call(l(this),c,p,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").every,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-fill"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),c=o.aTypedArray,p=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(m){for(var h=u(c(this),m,1<arguments.length?arguments[1]:void 0),m=l(this,this.constructor),f=0,d=h.length,g=new(p(m))(d);f<d;)g[f]=h[f++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").findIndex,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").find,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(r,s,a){r("../internals/typed-array-constructor")("Float32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],204:[function(r,s,a){r("../internals/typed-array-constructor")("Float64",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],205:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").forEach,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(c){u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").includes,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").indexOf,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(r,s,a){r("../internals/typed-array-constructor")("Int16",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],209:[function(r,s,a){r("../internals/typed-array-constructor")("Int32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],210:[function(u,s,a){function o(){return l.call(m(this))}var d=u("../internals/global"),f=u("../internals/array-buffer-view-core"),h=u("../modules/es.array.iterator"),u=u("../internals/well-known-symbol")("iterator"),d=d.Uint8Array,l=h.values,c=h.keys,p=h.entries,m=f.aTypedArray,h=f.exportTypedArrayMethod,f=d&&d.prototype[u],d=!!f&&(f.name=="values"||f.name==null);h("entries",function(){return p.call(m(this))}),h("keys",function(){return c.call(m(this))}),h("values",o,!d),h(u,o,!d)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].join;u("join",function(c){return l.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-last-index-of"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),c=o.aTypedArray,p=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(m){return u(c(this),m,1<arguments.length?arguments[1]:void 0,function(h,f){return new(p(l(h,h.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").right,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").left,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=Math.floor;u("reverse",function(){for(var c,p=o(this).length,m=l(p/2),h=0;h<m;)c=this[h],this[h++]=this[--p],this[p]=c;return this})},{"../internals/array-buffer-view-core":12}],217:[function(p,s,a){var o=p("../internals/array-buffer-view-core"),u=p("../internals/to-length"),l=p("../internals/to-offset"),c=p("../internals/to-object"),p=p("../internals/fails"),m=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(h){m(this);var f=l(1<arguments.length?arguments[1]:void 0,1),d=this.length,g=c(h),y=u(g.length),b=0;if(d<y+f)throw RangeError("Wrong length");for(;b<y;)this[f+b]=g[b++]},p(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(u,s,a){var p=u("../internals/array-buffer-view-core"),o=u("../internals/species-constructor"),u=u("../internals/fails"),l=p.aTypedArray,c=p.aTypedArrayConstructor,p=p.exportTypedArrayMethod,m=[].slice;p("slice",function(h,f){for(var d=m.call(l(this),h,f),h=o(this,this.constructor),g=0,y=d.length,b=new(c(h))(y);g<y;)b[g]=d[g++];return b},u(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").some,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].sort;u("sort",function(c){return l.call(o(this),c)})},{"../internals/array-buffer-view-core":12}],221:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/to-length"),l=r("../internals/to-absolute-index"),c=r("../internals/species-constructor"),p=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(g,h){var f=p(this),d=f.length,g=l(g,d);return new(c(f,f.constructor))(f.buffer,f.byteOffset+g*f.BYTES_PER_ELEMENT,u((h===void 0?d:l(h,d))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(u,s,a){var p=u("../internals/global"),o=u("../internals/array-buffer-view-core"),u=u("../internals/fails"),l=p.Int8Array,c=o.aTypedArray,p=o.exportTypedArrayMethod,m=[].toLocaleString,h=[].slice,f=!!l&&u(function(){m.call(new l(1))});p("toLocaleString",function(){return m.apply(f?h.call(c(this)):c(this),arguments)},u(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!u(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(u,s,a){var o=u("../internals/array-buffer-view-core").exportTypedArrayMethod,p=u("../internals/fails"),u=u("../internals/global").Uint8Array,u=u&&u.prototype||{},l=[].toString,c=[].join,p=(p(function(){l.call({})})&&(l=function(){return c.call(this)}),u.toString!=l);o("toString",l,p)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(r,s,a){r("../internals/typed-array-constructor")("Uint16",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],225:[function(r,s,a){r("../internals/typed-array-constructor")("Uint32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],226:[function(r,s,a){r("../internals/typed-array-constructor")("Uint8",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],227:[function(r,s,a){r("../internals/typed-array-constructor")("Uint8",function(o){return function(u,l,c){return o(this,u,l,c)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(x,w,a){function o(_){return function(){return _(this,arguments.length?arguments[0]:void 0)}}var u,l,c,p,m,C=x("../internals/global"),h=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),d=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),C=!C.ActiveXObject&&"ActiveXObject"in C,S=Object.isExtensible,w=w.exports=d("WeakMap",o,g);x&&C&&(u=g.getConstructor(o,"WeakMap",!0),f.REQUIRED=!0,d=w.prototype,l=d.delete,c=d.has,p=d.get,m=d.set,h(d,{delete:function(_){var M;return y(_)&&!S(_)?((M=b(this)).frozen||(M.frozen=new u),l.call(this,_)||M.frozen.delete(_)):l.call(this,_)},has:function(_){var M;return y(_)&&!S(_)?((M=b(this)).frozen||(M.frozen=new u),c.call(this,_)||M.frozen.has(_)):c.call(this,_)},get:function(_){var M;return!y(_)||S(_)||((M=b(this)).frozen||(M.frozen=new u),c.call(this,_))?p.call(this,_):M.frozen.get(_)},set:function(_,M){var I;return!y(_)||S(_)||((I=b(this)).frozen||(I.frozen=new u),c.call(this,_))?m.call(this,_,M):I.frozen.set(_,M),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(r,s,a){var o,u=r("../internals/global"),l=r("../internals/dom-iterables"),c=r("../internals/array-for-each"),p=r("../internals/create-non-enumerable-property");for(o in l){var m=u[o],m=m&&m.prototype;if(m&&m.forEach!==c)try{p(m,"forEach",c)}catch{m.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(m,s,a){var o,u=m("../internals/global"),l=m("../internals/dom-iterables"),c=m("../modules/es.array.iterator"),p=m("../internals/create-non-enumerable-property"),m=m("../internals/well-known-symbol"),h=m("iterator"),f=m("toStringTag"),d=c.values;for(o in l){var g=u[o],y=g&&g.prototype;if(y){if(y[h]!==d)try{p(y,h,d)}catch{y[h]=d}if(y[f]||p(y,f,o),l[o]){for(var b in c)if(y[b]!==c[b])try{p(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(me,s,a){me("../modules/es.array.iterator");function o(ge){try{return decodeURIComponent(ge)}catch{return ge}}function u(ge){return q[ge]}function l(ge){return encodeURIComponent(ge).replace(B,u)}function c(ge){this.entries.length=0,re(this.entries,ge)}function p(ge,xe){if(ge<xe)throw TypeError("Not enough arguments")}function m(){C(this,m,Q);var ge,xe,pe,ve,Ee,le,Se,be,Ie=0<arguments.length?arguments[0]:void 0,Me=[];if(K(this,{type:Q,entries:Me,updateURL:function(){},updateSearchParams:c}),Ie!==void 0)if(I(Ie))if(typeof(ge=U(Ie))=="function")for(pe=(xe=ge.call(Ie)).next;!(ve=pe.call(xe)).done;){if((le=(Ee=(ve=D(M(ve.value))).next).call(ve)).done||(Se=Ee.call(ve)).done||!Ee.call(ve).done)throw TypeError("Expected sequence with length 2");Me.push({key:le.value+"",value:Se.value+""})}else for(be in Ie)S(Ie,be)&&Me.push({key:be,value:Ie[be]+""});else re(Me,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")}var h=me("../internals/export"),J=me("../internals/get-built-in"),f=me("../internals/native-url"),d=me("../internals/redefine"),g=me("../internals/redefine-all"),y=me("../internals/set-to-string-tag"),b=me("../internals/create-iterator-constructor"),x=me("../internals/internal-state"),C=me("../internals/an-instance"),S=me("../internals/has"),w=me("../internals/function-bind-context"),_=me("../internals/classof"),M=me("../internals/an-object"),I=me("../internals/is-object"),R=me("../internals/object-create"),P=me("../internals/create-property-descriptor"),D=me("../internals/get-iterator"),U=me("../internals/get-iterator-method"),me=me("../internals/well-known-symbol"),F=J("fetch"),z=J("Headers"),J=me("iterator"),Q="URLSearchParams",Z=Q+"Iterator",K=x.set,H=x.getterFor(Q),$=x.getterFor(Z),Y=/\+/g,oe=Array(4),O=function(ge){var xe,pe=ge.replace(Y," "),ve=4;try{return decodeURIComponent(pe)}catch{for(;ve;)pe=pe.replace((xe=ve--,oe[xe-1]||(oe[xe-1]=RegExp("((?:%[\\da-f]{2}){"+xe+"})","gi"))),o);return pe}},B=/[!'()~]|%20/g,q={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(ge,xe){if(xe)for(var pe,ve=xe.split("&"),Ee=0;Ee<ve.length;)(pe=ve[Ee++]).length&&(pe=pe.split("="),ge.push({key:O(pe.shift()),value:O(pe.join("="))}))},ae=b(function(ge,xe){K(this,{type:Z,iterator:D(H(ge).entries),kind:xe})},"Iterator",function(){var xe=$(this),ge=xe.kind,xe=xe.iterator.next(),pe=xe.value;return xe.done||(xe.value=ge==="keys"?pe.key:ge==="values"?pe.value:[pe.key,pe.value]),xe}),me=m.prototype;g(me,{append:function(ge,xe){p(arguments.length,2);var pe=H(this);pe.entries.push({key:ge+"",value:xe+""}),pe.updateURL()},delete:function(ge){p(arguments.length,1);for(var xe=H(this),pe=xe.entries,ve=ge+"",Ee=0;Ee<pe.length;)pe[Ee].key===ve?pe.splice(Ee,1):Ee++;xe.updateURL()},get:function(ge){p(arguments.length,1);for(var xe=H(this).entries,pe=ge+"",ve=0;ve<xe.length;ve++)if(xe[ve].key===pe)return xe[ve].value;return null},getAll:function(ge){p(arguments.length,1);for(var xe=H(this).entries,pe=ge+"",ve=[],Ee=0;Ee<xe.length;Ee++)xe[Ee].key===pe&&ve.push(xe[Ee].value);return ve},has:function(ge){p(arguments.length,1);for(var xe=H(this).entries,pe=ge+"",ve=0;ve<xe.length;)if(xe[ve++].key===pe)return!0;return!1},set:function(ge,xe){p(arguments.length,1);for(var pe,ve=H(this),Ee=ve.entries,le=!1,Se=ge+"",be=xe+"",Ie=0;Ie<Ee.length;Ie++)(pe=Ee[Ie]).key===Se&&(le?Ee.splice(Ie--,1):(le=!0,pe.value=be));le||Ee.push({key:Se,value:be}),ve.updateURL()},sort:function(){for(var ge,xe,pe=H(this),ve=pe.entries,Ee=ve.slice(),le=ve.length=0;le<Ee.length;le++){for(ge=Ee[le],xe=0;xe<le;xe++)if(ve[xe].key>ge.key){ve.splice(xe,0,ge);break}xe===le&&ve.push(ge)}pe.updateURL()},forEach:function(ge){for(var xe,pe=H(this).entries,ve=w(ge,1<arguments.length?arguments[1]:void 0,3),Ee=0;Ee<pe.length;)ve((xe=pe[Ee++]).value,xe.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),d(me,J,me.entries),d(me,"toString",function(){for(var ge,xe=H(this).entries,pe=[],ve=0;ve<xe.length;)ge=xe[ve++],pe.push(l(ge.key)+"="+l(ge.value));return pe.join("&")},{enumerable:!0}),y(m,Q),h({global:!0,forced:!f},{URLSearchParams:m}),f||typeof F!="function"||typeof z!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(Ee){var xe,pe,ve,Ee=[Ee];return 1<arguments.length&&(I(xe=arguments[1])&&(pe=xe.body,_(pe)===Q&&((ve=xe.headers?new z(xe.headers):new z).has("content-type")||ve.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),xe=R(xe,{body:P(0,String(pe)),headers:P(0,ve)}))),Ee.push(xe)),F.apply(this,Ee)}}),s.exports={URLSearchParams:m,getState:H}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(D,s,a){D("../modules/es.string.iterator");function o(we){var pt,xt,ft,sr;if(typeof we=="number"){for(pt=[],xt=0;xt<4;xt++)pt.unshift(we%256),we=Z(we/256);return pt.join(".")}if(typeof we!="object")return we;for(pt="",ft=Se(we),xt=0;xt<8;xt++)sr&&we[xt]===0||(sr=sr&&!1,ft===xt?(pt+=xt?":":"::",sr=!0):(pt+=we[xt].toString(16),xt<7&&(pt+=":")));return"["+pt+"]"}function u(we){return!we.host||we.cannotBeABaseURL||we.scheme=="file"}function l(we,pt,xt,ft){var sr,lt,fr,St=xt||Xe,ur=0,Tt="",tn=!1,Yr=!1,_r=!1;for(xt||(we.scheme="",we.username="",we.password="",we.host=null,we.port=null,we.path=[],we.query=null,we.fragment=null,we.cannotBeABaseURL=!1,pt=pt.replace(ve,"")),pt=pt.replace(Ee,""),sr=_(pt);ur<=sr.length;){switch(lt=sr[ur],St){case Xe:if(!lt||!O.test(lt)){if(xt)return $;St=ee;continue}Tt+=lt.toLowerCase(),St=Pe;break;case Pe:if(lt&&(B.test(lt)||lt=="+"||lt=="-"||lt=="."))Tt+=lt.toLowerCase();else{if(lt!=":"){if(xt)return $;Tt="",St=ee,ur=0;continue}if(xt&&(Ge(we)!=S(rt,Tt)||Tt=="file"&&(ye(we)||we.port!==null)||we.scheme=="file"&&!we.host))return;if(we.scheme=Tt,xt)return void(Ge(we)&&rt[we.scheme]==we.port&&(we.port=null));Tt="",we.scheme=="file"?St=zt:Ge(we)&&ft&&ft.scheme==we.scheme?St=ie:Ge(we)?St=Re:sr[ur+1]=="/"?(St=X,ur++):(we.cannotBeABaseURL=!0,we.path.push(""),St=kr)}break;case ee:if(!ft||ft.cannotBeABaseURL&&lt!="#")return $;if(ft.cannotBeABaseURL&&lt=="#"){we.scheme=ft.scheme,we.path=ft.path.slice(),we.query=ft.query,we.fragment="",we.cannotBeABaseURL=!0,St=Xr;break}St=ft.scheme=="file"?zt:ce;continue;case ie:if(lt!="/"||sr[ur+1]!="/"){St=ce;continue}St=$e,ur++;break;case X:if(lt=="/"){St=mt;break}St=Gt;continue;case ce:if(we.scheme=ft.scheme,lt==m)we.username=ft.username,we.password=ft.password,we.host=ft.host,we.port=ft.port,we.path=ft.path.slice(),we.query=ft.query;else if(lt=="/"||lt=="\\"&&Ge(we))St=ke;else if(lt=="?")we.username=ft.username,we.password=ft.password,we.host=ft.host,we.port=ft.port,we.path=ft.path.slice(),we.query="",St=en;else{if(lt!="#"){we.username=ft.username,we.password=ft.password,we.host=ft.host,we.port=ft.port,we.path=ft.path.slice(),we.path.pop(),St=Gt;continue}we.username=ft.username,we.password=ft.password,we.host=ft.host,we.port=ft.port,we.path=ft.path.slice(),we.query=ft.query,we.fragment="",St=Xr}break;case ke:if(!Ge(we)||lt!="/"&&lt!="\\"){if(lt!="/"){we.username=ft.username,we.password=ft.password,we.host=ft.host,we.port=ft.port,St=Gt;continue}St=mt}else St=$e;break;case Re:if(St=$e,lt!="/"||Tt.charAt(ur+1)!="/")continue;ur++;break;case $e:if(lt=="/"||lt=="\\")break;St=mt;continue;case mt:if(lt=="@"){tn&&(Tt="%40"+Tt);for(var tn=!0,gr=_(Tt),Cn=0;Cn<gr.length;Cn++){var or=gr[Cn];or!=":"||_r?(or=Be(or,Ye),_r?we.password+=or:we.username+=or):_r=!0}Tt=""}else if(lt==m||lt=="/"||lt=="?"||lt=="#"||lt=="\\"&&Ge(we)){if(tn&&Tt=="")return H;ur-=_(Tt).length+1,Tt="",St=_t}else Tt+=lt;break;case _t:case wt:if(xt&&we.scheme=="file"){St=At;continue}if(lt!=":"||Yr){if(lt==m||lt=="/"||lt=="?"||lt=="#"||lt=="\\"&&Ge(we)){if(Ge(we)&&Tt=="")return Y;if(xt&&Tt==""&&(ye(we)||we.port!==null))return;if(fr=le(we,Tt))return fr;if(Tt="",St=Wt,xt)return;continue}lt=="["?Yr=!0:lt=="]"&&(Yr=!1),Tt+=lt}else{if(Tt=="")return Y;if(fr=le(we,Tt))return fr;if(Tt="",St=Ct,xt==wt)return}break;case Ct:if(!q.test(lt)){if(lt==m||lt=="/"||lt=="?"||lt=="#"||lt=="\\"&&Ge(we)||xt){if(Tt!=""){var jn=parseInt(Tt,10);if(65535<jn)return oe;we.port=Ge(we)&&jn===rt[we.scheme]?null:jn,Tt=""}if(xt)return;St=Wt;continue}return oe}Tt+=lt;break;case zt:if(we.scheme="file",lt=="/"||lt=="\\")St=Pt;else{if(!ft||ft.scheme!="file"){St=Gt;continue}if(lt==m)we.host=ft.host,we.path=ft.path.slice(),we.query=ft.query;else if(lt=="?")we.host=ft.host,we.path=ft.path.slice(),we.query="",St=en;else{if(lt!="#"){Ue(sr.slice(ur).join(""))||(we.host=ft.host,we.path=ft.path.slice(),nt(we)),St=Gt;continue}we.host=ft.host,we.path=ft.path.slice(),we.query=ft.query,we.fragment="",St=Xr}}break;case Pt:if(lt=="/"||lt=="\\"){St=At;break}ft&&ft.scheme=="file"&&!Ue(sr.slice(ur).join(""))&&(Fe(ft.path[0],!0)?we.path.push(ft.path[0]):we.host=ft.host),St=Gt;continue;case At:if(lt==m||lt=="/"||lt=="\\"||lt=="?"||lt=="#"){if(!xt&&Fe(Tt))St=Gt;else{if(Tt==""){if(we.host="",xt)return}else{if(fr=le(we,Tt))return fr;if(we.host=="localhost"&&(we.host=""),xt)return;Tt=""}St=Wt}continue}Tt+=lt;break;case Wt:if(Ge(we)){if(St=Gt,lt!="/"&&lt!="\\")continue}else if(xt||lt!="?")if(xt||lt!="#"){if(lt!=m&&(St=Gt,lt!="/"))continue}else we.fragment="",St=Xr;else we.query="",St=en;break;case Gt:if(lt==m||lt=="/"||lt=="\\"&&Ge(we)||!xt&&(lt=="?"||lt=="#")){if(je(Tt)?(nt(we),lt=="/"||lt=="\\"&&Ge(we)||we.path.push("")):st(Tt)?lt=="/"||lt=="\\"&&Ge(we)||we.path.push(""):(we.scheme=="file"&&!we.path.length&&Fe(Tt)&&(we.host&&(we.host=""),Tt=Tt.charAt(0)+":"),we.path.push(Tt)),Tt="",we.scheme=="file"&&(lt==m||lt=="?"||lt=="#"))for(;1<we.path.length&&we.path[0]==="";)we.path.shift();lt=="?"?(we.query="",St=en):lt=="#"&&(we.fragment="",St=Xr)}else Tt+=Be(lt,Me);break;case kr:lt=="?"?(we.query="",St=en):lt=="#"?(we.fragment="",St=Xr):lt!=m&&(we.path[0]+=Be(lt,be));break;case en:xt||lt!="#"?lt!=m&&(lt=="'"&&Ge(we)?we.query+="%27":we.query+=lt=="#"?"%23":Be(lt,be)):(we.fragment="",St=Xr);break;case Xr:lt!=m&&(we.fragment+=Be(lt,Ie))}ur++}}function c(lt){var pt,xt,ft=C(this,c,"URL"),sr=1<arguments.length?arguments[1]:void 0,lt=String(lt),fr=J(ft,{type:"URL"});if(sr!==void 0){if(sr instanceof c)pt=Q(sr);else if(xt=l(pt={},String(sr)))throw TypeError(xt)}if(xt=l(fr,lt,null,pt))throw TypeError(xt);var St=fr.searchParams=new F;(sr=z(St)).updateSearchParams(fr.query),sr.updateURL=function(){fr.query=String(St)||null},g||(ft.href=Sr.call(ft),ft.origin=lr.call(ft),ft.protocol=mn.call(ft),ft.username=Br.call(ft),ft.password=br.call(ft),ft.host=Or.call(ft),ft.hostname=On.call(ft),ft.port=Zn.call(ft),ft.pathname=Oi.call(ft),ft.search=Un.call(ft),ft.searchParams=Wi.call(ft),ft.hash=Zi.call(ft))}function p(we,pt){return{get:we,set:pt,configurable:!0,enumerable:!0}}var m,h,f,d=D("../internals/export"),g=D("../internals/descriptors"),y=D("../internals/native-url"),xr=D("../internals/global"),b=D("../internals/object-define-properties"),x=D("../internals/redefine"),C=D("../internals/an-instance"),S=D("../internals/has"),w=D("../internals/object-assign"),_=D("../internals/array-from"),M=D("../internals/string-multibyte").codeAt,I=D("../internals/string-punycode-to-ascii"),R=D("../internals/set-to-string-tag"),P=D("../modules/web.url-search-params"),D=D("../internals/internal-state"),U=xr.URL,F=P.URLSearchParams,z=P.getState,J=D.set,Q=D.getterFor("URL"),Z=Math.floor,K=Math.pow,H="Invalid authority",$="Invalid scheme",Y="Invalid host",oe="Invalid port",O=/[A-Za-z]/,B=/[\d+-.A-Za-z]/,q=/\d/,re=/^(0x|0X)/,ae=/^[0-7]+$/,me=/^\d+$/,ge=/^[\dA-Fa-f]+$/,xe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,pe=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ve=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Ee=/[\u0009\u000A\u000D]/g,le=function(we,pt){var xt,ft,sr;if(pt.charAt(0)=="[")return pt.charAt(pt.length-1)=="]"&&(xt=function(lt){var fr=[0,0,0,0,0,0,0,0],St=0,ur=null,Tt=0,tn,Yr,_r,gr,Cn,or,jn,zr=function(){return lt.charAt(Tt)};if(zr()==":"){if(lt.charAt(1)!=":")return;Tt+=2,St++,ur=St}for(;zr();){if(St==8)return;if(zr()==":"){if(ur!==null)return;Tt++,St++,ur=St;continue}for(tn=Yr=0;Yr<4&&ge.test(zr());)tn=tn*16+parseInt(zr(),16),Tt++,Yr++;if(zr()=="."){if(Yr==0||(Tt-=Yr,St>6))return;for(_r=0;zr();){if(gr=null,_r>0)if(zr()=="."&&_r<4)Tt++;else return;if(!q.test(zr()))return;for(;q.test(zr());){if(Cn=parseInt(zr(),10),gr===null)gr=Cn;else{if(gr==0)return;gr=gr*10+Cn}if(gr>255)return;Tt++}fr[St]=fr[St]*256+gr,_r++,(_r==2||_r==4)&&St++}if(_r!=4)return;break}else if(zr()==":"){if(Tt++,!zr())return}else if(zr())return;fr[St++]=tn}if(ur!==null)for(or=St-ur,St=7;St!=0&&or>0;)jn=fr[St],fr[St--]=fr[ur+or-1],fr[ur+--or]=jn;else if(St!=8)return;return fr}(pt.slice(1,-1)))?void(we.host=xt):Y;if(Ge(we))return pt=I(pt),xe.test(pt)||(xt=function(lt){var fr=lt.split("."),St,ur,Tt,tn,Yr,_r,gr;if(fr.length&&fr[fr.length-1]==""&&fr.pop(),(St=fr.length)>4)return lt;for(ur=[],Tt=0;Tt<St;Tt++){if(tn=fr[Tt],tn=="")return lt;if(Yr=10,tn.length>1&&tn.charAt(0)=="0"&&(Yr=re.test(tn)?16:8,tn=tn.slice(Yr==8?1:2)),tn==="")_r=0;else{if(!(Yr==10?me:Yr==8?ae:ge).test(tn))return lt;_r=parseInt(tn,Yr)}ur.push(_r)}for(Tt=0;Tt<St;Tt++)if(_r=ur[Tt],Tt==St-1){if(_r>=K(256,5-St))return null}else if(_r>255)return null;for(gr=ur.pop(),Tt=0;Tt<ur.length;Tt++)gr+=ur[Tt]*K(256,3-Tt);return gr}(pt))===null?Y:void(we.host=xt);if(pe.test(pt))return Y;for(xt="",ft=_(pt),sr=0;sr<ft.length;sr++)xt+=Be(ft[sr],be);we.host=xt},Se=function(we){for(var pt=null,xt=1,ft=null,sr=0,lt=0;lt<8;lt++)we[lt]!==0?(xt<sr&&(pt=ft,xt=sr),ft=null,sr=0):(ft===null&&(ft=lt),++sr);return xt<sr&&(pt=ft,xt=sr),pt},be={},Ie=w({},be,{" ":1,'"':1,"<":1,">":1,"`":1}),Me=w({},Ie,{"#":1,"?":1,"{":1,"}":1}),Ye=w({},Me,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Be=function(we,pt){var xt=M(we,0);return 32<xt&&xt<127&&!S(pt,we)?we:encodeURIComponent(we)},rt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ge=function(we){return S(rt,we.scheme)},ye=function(we){return we.username!=""||we.password!=""},Fe=function(we,pt){return we.length==2&&O.test(we.charAt(0))&&((we=we.charAt(1))==":"||!pt&&we=="|")},Ue=function(we){return 1<we.length&&Fe(we.slice(0,2))&&(we.length==2||(we=we.charAt(2))==="/"||we==="\\"||we==="?"||we==="#")},nt=function(we){var pt=we.path,xt=pt.length;!xt||we.scheme=="file"&&xt==1&&Fe(pt[0],!0)||pt.pop()},st=function(we){return we==="."||we.toLowerCase()==="%2e"},je=function(we){return(we=we.toLowerCase())===".."||we==="%2e."||we===".%2e"||we==="%2e%2e"},Xe={},Pe={},ee={},ie={},X={},ce={},ke={},Re={},$e={},mt={},_t={},wt={},Ct={},zt={},Pt={},At={},Wt={},Gt={},kr={},en={},Xr={},xr=c.prototype,Sr=function(){var we=Q(this),pt=we.scheme,xt=we.username,ft=we.password,sr=we.host,lt=we.port,fr=we.path,St=we.query,ur=we.fragment,Tt=pt+":";return sr!==null?(Tt+="//",ye(we)&&(Tt+=xt+(ft?":"+ft:"")+"@"),Tt+=o(sr),lt!==null&&(Tt+=":"+lt)):pt=="file"&&(Tt+="//"),Tt+=we.cannotBeABaseURL?fr[0]:fr.length?"/"+fr.join("/"):"",St!==null&&(Tt+="?"+St),ur!==null&&(Tt+="#"+ur),Tt},lr=function(){var we=Q(this),pt=we.scheme,xt=we.port;if(pt=="blob")try{return new URL(pt.path[0]).origin}catch{return"null"}return pt!="file"&&Ge(we)?pt+"://"+o(we.host)+(xt!==null?":"+xt:""):"null"},mn=function(){return Q(this).scheme+":"},Br=function(){return Q(this).username},br=function(){return Q(this).password},Or=function(){var pt=Q(this),we=pt.host,pt=pt.port;return we===null?"":pt===null?o(we):o(we)+":"+pt},On=function(){var we=Q(this).host;return we===null?"":o(we)},Zn=function(){var we=Q(this).port;return we===null?"":String(we)},Oi=function(){var we=Q(this),pt=we.path;return we.cannotBeABaseURL?pt[0]:pt.length?"/"+pt.join("/"):""},Un=function(){var we=Q(this).query;return we?"?"+we:""},Wi=function(){return Q(this).searchParams},Zi=function(){var we=Q(this).fragment;return we?"#"+we:""};g&&b(xr,{href:p(Sr,function(xt){var pt=Q(this),xt=String(xt),xt=l(pt,xt);if(xt)throw TypeError(xt);z(pt.searchParams).updateSearchParams(pt.query)}),origin:p(lr),protocol:p(mn,function(we){var pt=Q(this);l(pt,String(we)+":",Xe)}),username:p(Br,function(we){var pt=Q(this),xt=_(String(we));if(!u(pt)){pt.username="";for(var ft=0;ft<xt.length;ft++)pt.username+=Be(xt[ft],Ye)}}),password:p(br,function(we){var pt=Q(this),xt=_(String(we));if(!u(pt)){pt.password="";for(var ft=0;ft<xt.length;ft++)pt.password+=Be(xt[ft],Ye)}}),host:p(Or,function(we){var pt=Q(this);pt.cannotBeABaseURL||l(pt,String(we),_t)}),hostname:p(On,function(we){var pt=Q(this);pt.cannotBeABaseURL||l(pt,String(we),wt)}),port:p(Zn,function(we){var pt=Q(this);u(pt)||((we=String(we))==""?pt.port=null:l(pt,we,Ct))}),pathname:p(Oi,function(we){var pt=Q(this);pt.cannotBeABaseURL||(pt.path=[],l(pt,we+"",Wt))}),search:p(Un,function(we){var pt=Q(this);(we=String(we))==""?pt.query=null:(we.charAt(0)=="?"&&(we=we.slice(1)),pt.query="",l(pt,we,en)),z(pt.searchParams).updateSearchParams(pt.query)}),searchParams:p(Wi),hash:p(Zi,function(we){var pt=Q(this);(we=String(we))==""?pt.fragment=null:(we.charAt(0)=="#"&&(we=we.slice(1)),pt.fragment="",l(pt,we,Xr))})}),x(xr,"toJSON",function(){return Sr.call(this)},{enumerable:!0}),x(xr,"toString",function(){return Sr.call(this)},{enumerable:!0}),U&&(h=U.createObjectURL,f=U.revokeObjectURL,h&&x(c,"createObjectURL",function(we){return h.apply(U,arguments)}),f&&x(c,"revokeObjectURL",function(we){return f.apply(U,arguments)})),R(c,"URL"),d({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(r,s,a){s.exports=r("./").polyfill()},{"./":234}],234:[function(r,s,a){(function(o,u){var l,c;l=this,c=function(){function p(le){return typeof le=="function"}var m=Array.isArray||function(le){return Object.prototype.toString.call(le)==="[object Array]"},h=0,f=void 0,d=void 0,g=function(le,Se){w[h]=le,w[h+1]=Se,(h+=2)===2&&(d?d(_):F())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",C=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var le=setTimeout;return function(){return le(_,1)}}var w=new Array(1e3);function _(){for(var le=0;le<h;le+=2)(0,w[le])(w[le+1]),w[le]=void 0,w[le+1]=void 0;h=0}function M(){try{var le=Function("return this")().require("vertx");return(f=le.runOnLoop||le.runOnContext)!==void 0?function(){f(_)}:S()}catch{return S()}}var I,R,P,F=void 0;function D(le,Se){var be,Ie=this,Me=new this.constructor(J),Ye=(Me[z]===void 0&&ge(Me),Ie._state);return Ye?(be=arguments[Ye-1],g(function(){return ae(Ye,Me,be,Ie._result)})):q(Ie,Me,le,Se),Me}function U(le){var Se;return le&&typeof le=="object"&&le.constructor===this?le:(Y(Se=new this(J),le),Se)}var F=x?function(){return o.nextTick(_)}:b?(R=0,x=new b(_),P=document.createTextNode(""),x.observe(P,{characterData:!0}),function(){P.data=R=++R%2}):C?((I=new MessageChannel).port1.onmessage=_,function(){return I.port2.postMessage(0)}):(y===void 0&&typeof r=="function"?M:S)(),z=Math.random().toString(36).substring(2);function J(){}var Q=void 0,Z=1,K=2;function H(le,Se,be){g(function(Ie){var Me=!1,Ye=function(Be,rt,Ge,ye){try{Be.call(rt,Ge,ye)}catch(Fe){return Fe}}(be,Se,function(Be){Me||(Me=!0,(Se!==Be?Y:O)(Ie,Be))},function(Be){Me||(Me=!0,B(Ie,Be))},Ie._label);!Me&&Ye&&(Me=!0,B(Ie,Ye))},le)}function $(le,Se,be){var Ie,Me;Se.constructor===le.constructor&&be===D&&Se.constructor.resolve===U?(Ie=le,(Me=Se)._state===Z?O(Ie,Me._result):Me._state===K?B(Ie,Me._result):q(Me,void 0,function(Ye){return Y(Ie,Ye)},function(Ye){return B(Ie,Ye)})):be!==void 0&&p(be)?H(le,Se,be):O(le,Se)}function Y(le,Se){if(le===Se)B(le,new TypeError("You cannot resolve a promise with itself"));else if(be=typeof Se,Se===null||be!="object"&&be!="function")O(le,Se);else{be=void 0;try{be=Se.then}catch(Ie){return void B(le,Ie)}$(le,Se,be)}var be}function oe(le){le._onerror&&le._onerror(le._result),re(le)}function O(le,Se){le._state===Q&&(le._result=Se,le._state=Z,le._subscribers.length!==0&&g(re,le))}function B(le,Se){le._state===Q&&(le._state=K,le._result=Se,g(oe,le))}function q(le,Se,be,Ie){var Me=le._subscribers,Ye=Me.length;le._onerror=null,Me[Ye]=Se,Me[Ye+Z]=be,Me[Ye+K]=Ie,Ye===0&&le._state&&g(re,le)}function re(le){var Se=le._subscribers,be=le._state;if(Se.length!==0){for(var Ie,Me=void 0,Ye=le._result,Be=0;Be<Se.length;Be+=3)Ie=Se[Be],Me=Se[Be+be],Ie?ae(be,Ie,Me,Ye):Me(Ye);le._subscribers.length=0}}function ae(le,Se,be,Ie){var Me=p(be),Ye=void 0,Be=void 0,rt=!0;if(Me){try{Ye=be(Ie)}catch(Ge){rt=!1,Be=Ge}if(Se===Ye)return void B(Se,new TypeError("A promises callback cannot return that same promise."))}else Ye=Ie;Se._state===Q&&(Me&&rt?Y(Se,Ye):rt===!1?B(Se,Be):le===Z?O(Se,Ye):le===K&&B(Se,Ye))}var me=0;function ge(le){le[z]=me++,le._state=void 0,le._result=void 0,le._subscribers=[]}pe.prototype._enumerate=function(le){for(var Se=0;this._state===Q&&Se<le.length;Se++)this._eachEntry(le[Se],Se)},pe.prototype._eachEntry=function(le,Se){var be=this._instanceConstructor,Ie=be.resolve;if(Ie===U){var Me,Ye=void 0,Be=void 0,rt=!1;try{Ye=le.then}catch(Ge){rt=!0,Be=Ge}Ye===D&&le._state!==Q?this._settledAt(le._state,Se,le._result):typeof Ye!="function"?(this._remaining--,this._result[Se]=le):be===ve?(Me=new be(J),rt?B(Me,Be):$(Me,le,Ye),this._willSettleAt(Me,Se)):this._willSettleAt(new be(function(Ge){return Ge(le)}),Se)}else this._willSettleAt(Ie(le),Se)},pe.prototype._settledAt=function(le,Se,be){var Ie=this.promise;Ie._state===Q&&(this._remaining--,le===K?B(Ie,be):this._result[Se]=be),this._remaining===0&&O(Ie,this._result)},pe.prototype._willSettleAt=function(le,Se){var be=this;q(le,void 0,function(Ie){return be._settledAt(Z,Se,Ie)},function(Ie){return be._settledAt(K,Se,Ie)})};var xe=pe;function pe(le,Se){this._instanceConstructor=le,this.promise=new le(J),this.promise[z]||ge(this.promise),m(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Se),this._remaining!==0)||O(this.promise,this._result)):B(this.promise,new Error("Array Methods must be provided an Array"))}Ee.prototype.catch=function(le){return this.then(null,le)},Ee.prototype.finally=function(le){var Se=this.constructor;return p(le)?this.then(function(be){return Se.resolve(le()).then(function(){return be})},function(be){return Se.resolve(le()).then(function(){throw be})}):this.then(le,le)};var ve=Ee;function Ee(le){if(this[z]=me++,this._result=this._state=void 0,this._subscribers=[],J!==le){if(typeof le!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Ee))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Se=this;try{le(function(be){Y(Se,be)},function(be){B(Se,be)})}catch(be){B(Se,be)}}}return ve.prototype.then=D,ve.all=function(le){return new xe(this,le).promise},ve.race=function(le){var Se=this;return m(le)?new Se(function(be,Ie){for(var Me=le.length,Ye=0;Ye<Me;Ye++)Se.resolve(le[Ye]).then(be,Ie)}):new Se(function(be,Ie){return Ie(new TypeError("You must pass an array to race."))})},ve.resolve=U,ve.reject=function(le){var Se=new this(J);return B(Se,le),Se},ve._setScheduler=function(le){d=le},ve._setAsap=function(le){g=le},ve._asap=g,ve.polyfill=function(){var le=void 0;if(u!==void 0)le=u;else if(typeof self<"u")le=self;else try{le=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=le.Promise;if(Se){var be=null;try{be=Object.prototype.toString.call(Se.resolve())}catch{}if(be==="[object Promise]"&&!Se.cast)return}le.Promise=ve},ve.Promise=ve},typeof a=="object"&&s!==void 0?s.exports=c():l.ES6Promise=c()}).call(this,r("_process"),typeof Pa<"u"?Pa:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(r,s,a){var o,u;o=this,u=function(l,c){var p=5e3,m="callback";function h(d){try{delete window[d]}catch{window[d]=void 0}}function f(d){d=document.getElementById(d),d&&document.getElementsByTagName("head")[0].removeChild(d)}c.exports=function(d){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=d,b=g.timeout||p,x=g.jsonpCallback||m,C=void 0;return new Promise(function(S,w){var _=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),M=x+"_"+_,I=(window[_]=function(R){S({ok:!0,json:function(){return Promise.resolve(R)}}),C&&clearTimeout(C),f(M),h(_)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));I.setAttribute("src",""+y+x+"="+_),g.charset&&I.setAttribute("charset",g.charset),I.id=M,document.getElementsByTagName("head")[0].appendChild(I),C=setTimeout(function(){w(new Error("JSONP request to "+d+" timed out")),h(_),f(M),window[_]=function(){h(_)}},b),I.onerror=function(){w(new Error("JSONP request to "+d+" failed")),h(_),f(M),C&&clearTimeout(C)}})}},a!==void 0&&s!==void 0?u(0,s):(u(u={exports:{}},u),o.fetchJsonp=u.exports)},{}],236:[function(r,s,a){var o=function(u){var l,c,p,m,h,f,d,g,y,b,x;if(!(u===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=u.document,l=function(){return u.URL||u.webkitURL||u},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),p="download"in c,m=/constructor/i.test(u.HTMLElement)||u.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(C){(u.setImmediate||u.setTimeout)(function(){throw C},0)},d=4e4,g=function(C){setTimeout(function(){typeof C=="string"?l().revokeObjectURL(C):C.remove()},d)},y=function(C){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob([String.fromCharCode(65279),C],{type:C.type}):C},x=(b=function(C,S,R){R||(C=y(C));var _,M,I=this,R=C.type==="application/octet-stream",P=function(){for(var D=I,U="writestart progress write writeend".split(" "),F=void 0,z=(U=[].concat(U)).length;z--;){var J=D["on"+U[z]];if(typeof J=="function")try{J.call(D,F||D)}catch(Q){f(Q)}}};I.readyState=I.INIT,p?(_=l().createObjectURL(C),setTimeout(function(){var D,U;c.href=_,c.download=S,D=c,U=new MouseEvent("click"),D.dispatchEvent(U),P(),g(_),I.readyState=I.DONE})):(h||R&&m)&&u.FileReader?((M=new FileReader).onloadend=function(){var D=h?M.result:M.result.replace(/^data:[^;]*;/,"data:attachment/file;");u.open(D,"_blank")||(u.location.href=D),D=void 0,I.readyState=I.DONE,P()},M.readAsDataURL(C),I.readyState=I.INIT):(_=_||l().createObjectURL(C),!R&&u.open(_,"_blank")||(u.location.href=_),I.readyState=I.DONE,P(),g(_))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(C,S,w){return S=S||C.name||"download",w||(C=y(C)),navigator.msSaveOrOpenBlob(C,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(C,S,w){return new b(C,S||C.name||"download",w)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=o:n!=null},{}],237:[function(r,s,a){var o,u=Object.defineProperty,l=(u(a,"__esModule",{value:!0}),a),c={GIFEncoder:()=>P,applyPalette:()=>function(Q,Z,K="rgb565"){if(!Q||!Q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Z.length)throw new Error("applyPalette() only works with 256 colors or less");const H=new Uint32Array(Q.buffer),$=H.length,Y=K==="rgb444"?4096:65536,oe=new Uint8Array($),O=new Array(Y);if(K==="rgba4444")for(let Ee=0;Ee<$;Ee++){var ae=H[Ee],B=ae>>24&255,q=ae>>16&255,re=ae>>8&255,ae=255&ae,me=g(ae,re,q,B),me=me in O?O[me]:O[me]=function(le,Se,be,Ie,Me){let Ye=0,Be=1e100;for(let Fe=0;Fe<Me.length;Fe++){var rt,Ge=Me[Fe],ye=M(Ge[3]-Ie);ye>Be||(rt=Ge[0],(ye+=M(rt-le))>Be||(rt=Ge[1],(ye+=M(rt-Se))>Be||(rt=Ge[2],(ye+=M(rt-be))>Be||(Be=ye,Ye=Fe))))}return Ye}(ae,re,q,B,Z);oe[Ee]=me}else{const Ee=K==="rgb444"?y:d;for(let le=0;le<$;le++){var pe=H[le],ge=pe>>16&255,xe=pe>>8&255,pe=255&pe,ve=Ee(pe,xe,ge),ve=ve in O?O[ve]:O[ve]=function(Se,be,Ie,Me){let Ye=0,Be=1e100;for(let Fe=0;Fe<Me.length;Fe++){var rt,Ge=Me[Fe],ye=M(Ge[0]-Se);ye>Be||(rt=Ge[1],(ye+=M(rt-be))>Be||(rt=Ge[2],(ye+=M(rt-Ie))>Be||(Be=ye,Ye=Fe)))}return Ye}(pe,xe,ge,Z);oe[le]=ve}}return oe},default:()=>J,nearestColor:()=>function(Q,Z,K=w){return Q[I(Q,Z,K)]},nearestColorIndex:()=>I,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(Q,{roundRGB:Z=5,roundAlpha:K=10,oneBitAlpha:H=null}={}){const $=new Uint32Array(Q.buffer);for(let q=0;q<$.length;q++){var B=$[q];let re=B>>24&255;var Y,oe=B>>16&255,O=B>>8&255,B=255&B;re=_(re,K),H&&(Y=typeof H=="number"?H:127,re=re<=Y?0:255),B=_(B,Z),O=_(O,Z),oe=_(oe,Z),$[q]=re<<24|oe<<16|O<<8|B<<0}},quantize:()=>function(Q,Z,K={}){var{format:H="rgb565",clearAlpha:$=!0,clearAlphaColor:Y=0,clearAlphaThreshold:oe=0,oneBitAlpha:O=!1}=K;if(!Q||!Q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Q=new Uint32Array(Q.buffer);let B=K.useSqrt!==!1;const q=H==="rgba4444",re=function(Ue,nt){const st=nt==="rgb444"?4096:65536,je=new Array(st),Xe=Ue.length;if(nt==="rgba4444")for(let Pt=0;Pt<Xe;++Pt){var X=Ue[Pt],Pe=X>>24&255,ee=X>>16&255,ie=X>>8&255,X=255&X,ce=g(X,ie,ee,Pe);let At=ce in je?je[ce]:je[ce]=S();At.rc+=X,At.gc+=ie,At.bc+=ee,At.ac+=Pe,At.cnt++}else if(nt==="rgb444")for(let Pt=0;Pt<Xe;++Pt){var $e=Ue[Pt],ke=$e>>16&255,Re=$e>>8&255,$e=255&$e,mt=y($e,Re,ke);let At=mt in je?je[mt]:je[mt]=S();At.rc+=$e,At.gc+=Re,At.bc+=ke,At.cnt++}else for(let Pt=0;Pt<Xe;++Pt){var Ct=Ue[Pt],_t=Ct>>16&255,wt=Ct>>8&255,Ct=255&Ct,zt=d(Ct,wt,_t);let At=zt in je?je[zt]:je[zt]=S();At.rc+=Ct,At.gc+=wt,At.bc+=_t,At.cnt++}return je}(Q,H),ae=re.length,me=ae-1,ge=new Uint32Array(ae+1);for(var xe=0,pe=0;pe<ae;++pe){const Ue=re[pe];Ue!=null&&(Ge=1/Ue.cnt,q&&(Ue.ac*=Ge),Ue.rc*=Ge,Ue.gc*=Ge,Ue.bc*=Ge,re[xe++]=Ue)}x(Z)/xe<.022&&(B=!1);for(var ve,Ee,le,pe=0;pe<xe-1;++pe)re[pe].fw=pe+1,re[pe+1].bk=pe,B&&(re[pe].cnt=Math.sqrt(re[pe].cnt));for(B&&(re[pe].cnt=Math.sqrt(re[pe].cnt)),pe=0;pe<xe;++pe){C(re,pe,!1);var Se=re[pe].err;for(Ee=++ge[0];1<Ee&&(le=Ee>>1,!(re[ve=ge[le]].err<=Se));Ee=le)ge[Ee]=ve;ge[Ee]=pe}var be,Ie=xe-Z;for(pe=0;pe<Ie;){for(;;){var Me=ge[1];if((be=re[Me]).tm>=be.mtm&&re[be.nn].mtm<=be.tm)break;for(be.mtm==me?Me=ge[1]=ge[ge[0]--]:(C(re,Me,!1),be.tm=pe),Se=re[Me].err,Ee=1;(le=Ee+Ee)<=ge[0]&&(le<ge[0]&&re[ge[le]].err>re[ge[le+1]].err&&le++,!(Se<=re[ve=ge[le]].err));Ee=le)ge[Ee]=ve;ge[Ee]=Me}var Ye=re[be.nn],Be=be.cnt,rt=Ye.cnt,Ge=1/(Be+rt);q&&(be.ac=Ge*(Be*be.ac+rt*Ye.ac)),be.rc=Ge*(Be*be.rc+rt*Ye.rc),be.gc=Ge*(Be*be.gc+rt*Ye.gc),be.bc=Ge*(Be*be.bc+rt*Ye.bc),be.cnt+=Ye.cnt,be.mtm=++pe,re[Ye.bk].fw=Ye.fw,re[Ye.fw].bk=Ye.bk,Ye.mtm=me}let ye=[];for(pe=0;;0){let Ue=b(Math.round(re[pe].rc),0,255),nt=b(Math.round(re[pe].gc),0,255),st=b(Math.round(re[pe].bc),0,255),je=255;q&&(je=b(Math.round(re[pe].ac),0,255),O&&(Fe=typeof O=="number"?O:127,je=je<=Fe?0:255),$&&je<=oe&&(Ue=nt=st=Y,je=0));var Fe=q?[Ue,nt,st,je]:[Ue,nt,st];if(function(Xe,Pe){for(let X=0;X<Xe.length;X++){var ie=Xe[X],ee=ie[0]===Pe[0]&&ie[1]===Pe[1]&&ie[2]===Pe[2],ie=!(4<=ie.length&&4<=Pe.length)||ie[3]===Pe[3];if(ee&&ie)return!0}return!1}(ye,Fe)||ye.push(Fe),(pe=re[pe].fw)==0)break}return ye},snapColorsToPalette:()=>function(Q,Z,K=5){if(Q.length&&Z.length){var H=Q.map(B=>B.slice(0,3)),$=K*K,Y=Q[0].length;for(let B=0;B<Z.length;B++){let q=Z[B];q=q.length<Y?[q[0],q[1],q[2],255]:q.length>Y?q.slice(0,3):q.slice();var O=R(H,q.slice(0,3),w),oe=O[0],O=O[1];0<O&&O<=$&&(Q[oe]=q)}}}};for(o in c)u(l,o,{get:c[o],enumerable:!0});var p={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function m(Q=256){let Z=0,K=new Uint8Array(Q);return{get buffer(){return K.buffer},reset(){Z=0},bytesView(){return K.subarray(0,Z)},bytes(){return K.slice(0,Z)},writeByte($){H(Z+1),K[Z]=$,Z++},writeBytes($,Y=0,oe=$.length){H(Z+oe);for(let O=0;O<oe;O++)K[Z++]=$[O+Y]},writeBytesView($,Y=0,oe=$.byteLength){H(Z+oe),K.set($.subarray(Y,Y+oe),Z),Z+=oe}};function H($){var Y=K.length;if(!($<=Y)){$=Math.max($,Y*(Y<1048576?2:1.125)>>>0),Y!=0&&($=Math.max($,256));const oe=K;K=new Uint8Array($),0<Z&&K.set(oe.subarray(0,Z),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(Q,Z,K,q,$=m(512),Y=new Uint8Array(256),oe=new Int32Array(5003),O=new Int32Array(5003)){var B=oe.length,q=Math.max(2,q);Y.fill(0),O.fill(0),oe.fill(-1);let re=0,ae=0;var me=q+1;const ge=me;let xe=!1,pe=ge,ve=(1<<pe)-1;var Ee=1<<me-1;const le=1+Ee;let Se=2+Ee,be=0,Ie=K[0],Me=0;for(let Fe=B;Fe<65536;Fe*=2)++Me;Me=8-Me,$.writeByte(q),ye(Ee);var Ye=K.length;for(let Fe=1;Fe<Ye;Fe++)e:{var Be=K[Fe],rt=(Be<<12)+Ie;let Ue=Be<<Me^Ie;if(oe[Ue]===rt)Ie=O[Ue];else{for(var Ge=Ue===0?1:B-Ue;0<=oe[Ue];)if((Ue-=Ge)<0&&(Ue+=B),oe[Ue]===rt){Ie=O[Ue];break e}ye(Ie),Ie=Be,Se<4096?(O[Ue]=Se++,oe[Ue]=rt):(oe.fill(-1),Se=2+Ee,xe=!0,ye(Ee))}}return ye(Ie),ye(le),$.writeByte(0),$.bytesView();function ye(Fe){for(re&=h[ae],0<ae?re|=Fe<<ae:re=Fe,ae+=pe;8<=ae;)Y[be++]=255&re,254<=be&&($.writeByte(be),$.writeBytesView(Y,0,be),be=0),re>>=8,ae-=8;if((Se>ve||xe)&&(xe?(pe=ge,ve=(1<<pe)-1,xe=!1):(++pe,ve=pe===12?1<<pe:(1<<pe)-1)),Fe==le){for(;0<ae;)Y[be++]=255&re,254<=be&&($.writeByte(be),$.writeBytesView(Y,0,be),be=0),re>>=8,ae-=8;0<be&&($.writeByte(be),$.writeBytesView(Y,0,be),be=0)}}};function d(Q,Z,K){return Q<<8&63488|Z<<2&992|K>>3}function g(Q,Z,K,H){return Q>>4|240&Z|(240&K)<<4|(240&H)<<8}function y(Q,Z,K){return Q>>4<<8|240&Z|K>>4}function b(Q,Z,K){return Q<Z?Z:K<Q?K:Q}function x(Q){return Q*Q}function C(Q,Z,K){var H=0,$=1e100;const Y=Q[Z];for(var oe=Y.cnt,O=Y.ac,B=Y.rc,q=Y.gc,re=Y.bc,ae=Y.fw;ae!=0;ae=Q[ae].fw){var me,ge=Q[ae],xe=ge.cnt,xe=oe*xe/(oe+xe);$<=xe||(me=0,K&&$<=(me+=xe*x(ge.ac-O))||$<=(me+=xe*x(ge.rc-B))||$<=(me+=xe*x(ge.gc-q))||$<=(me+=xe*x(ge.bc-re))||($=me,H=ae))}Y.err=$,Y.nn=H}function S(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function w(Q,Z){for(var K=0,H=0;H<Q.length;H++){var $=Q[H]-Z[H];K+=$*$}return K}function _(Q,Z){return 1<Z?Math.round(Q/Z)*Z:Q}function M(Q){return Q*Q}function I(Q,Z,K=w){let H=1/0,$=-1;for(let oe=0;oe<Q.length;oe++){var Y=K(Z,Q[oe]);Y<H&&(H=Y,$=oe)}return $}function R(Q,Z,K=w){let H=1/0,$=-1;for(let oe=0;oe<Q.length;oe++){var Y=K(Z,Q[oe]);Y<H&&(H=Y,$=oe)}return[$,H]}function P(Q={}){const{initialCapacity:Z=4096,auto:K=!0}=Q,H=m(Z),$=new Uint8Array(256),Y=new Int32Array(5003),oe=new Int32Array(5003);let O=!1;return{reset(){H.reset(),O=!1},finish(){H.writeByte(p.trailer)},bytes(){return H.bytes()},bytesView(){return H.bytesView()},get buffer(){return H.buffer},get stream(){return H},writeHeader:B,writeFrame(q,re,ae,Ie={}){var{transparent:ge=!1,transparentIndex:xe=0,delay:Ge=0,palette:pe=null,repeat:Ye=0,colorDepth:ve=8,dispose:Ee=-1}=Ie;let le=!1;if(K?O||(le=!0,B(),O=!0):le=Boolean(Ie.first),re=Math.max(0,Math.floor(re)),ae=Math.max(0,Math.floor(ae)),le){if(!pe)throw new Error("First frame must include a { palette } option");var[Ie,Be,be,rt,Me=8]=[H,re,ae,pe,ve];rt=z(rt.length)-1,Me=128|Me-1<<4|rt,U(Ie,Be),U(Ie,be),Ie.writeBytes([Me,0,0]),D(H,pe),0<=Ye&&(rt=H,Be=Ye,rt.writeByte(33),rt.writeByte(255),rt.writeByte(11),F(rt,"NETSCAPE2.0"),rt.writeByte(3),rt.writeByte(1),U(rt,Be),rt.writeByte(0))}var Se,be=Math.round(Ge/10),Ie=H,Me=Ee,Ye=be,Be=ge,rt=xe,Ge=(Ie.writeByte(33),Ie.writeByte(249),Ie.writeByte(4),rt<0&&(rt=0,Be=!1),Be=Be?(Se=1,2):Se=0,0<=Me&&(Be=7&Me),Be<<=2,Ie.writeByte(0|Be|Se),U(Ie,Ye),Ie.writeByte(rt||0),Ie.writeByte(0),Boolean(pe)&&!le);Ee=H,ge=re,xe=ae,Se=Ge?pe:null,Ee.writeByte(44),U(Ee,0),U(Ee,0),U(Ee,ge),U(Ee,xe),Se?(ge=z(Se.length)-1,Ee.writeByte(128|ge)):Ee.writeByte(0),Ge&&D(H,pe),[Ye,Ie,xe,ge,Ee=8,Ge,pe,q]=[H,q,re,ae,ve,$,Y,oe],f(xe,ge,Ie,Ee,Ye,Ge,pe,q)}};function B(){F(H,"GIF89a")}}function D(Q,Z){var K=1<<z(Z.length);for(let H=0;H<K;H++){let $=[0,0,0];H<Z.length&&($=Z[H]),Q.writeByte($[0]),Q.writeByte($[1]),Q.writeByte($[2])}}function U(Q,Z){Q.writeByte(255&Z),Q.writeByte(Z>>8&255)}function F(Q,Z){for(var K=0;K<Z.length;K++)Q.writeByte(Z.charCodeAt(K))}function z(Q){return Math.max(Math.ceil(Math.log2(Q)),1)}var J=P},{}],238:[function(r,s,a){a.read=function(o,u,l,c,C){var m,h,f=8*C-c-1,d=(1<<f)-1,g=d>>1,y=-7,b=l?C-1:0,x=l?-1:1,C=o[u+b];for(b+=x,m=C&(1<<-y)-1,C>>=-y,y+=f;0<y;m=256*m+o[u+b],b+=x,y-=8);for(h=m&(1<<-y)-1,m>>=-y,y+=c;0<y;h=256*h+o[u+b],b+=x,y-=8);if(m===0)m=1-g;else{if(m===d)return h?NaN:1/0*(C?-1:1);h+=Math.pow(2,c),m-=g}return(C?-1:1)*h*Math.pow(2,m-c)},a.write=function(o,u,l,c,p,S){var h,f,d=8*S-p-1,g=(1<<d)-1,y=g>>1,b=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:S-1,C=c?1:-1,S=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(f=isNaN(u)?1:0,h=g):(h=Math.floor(Math.log(u)/Math.LN2),u*(c=Math.pow(2,-h))<1&&(h--,c*=2),2<=(u+=1<=h+y?b/c:b*Math.pow(2,1-y))*c&&(h++,c/=2),g<=h+y?(f=0,h=g):1<=h+y?(f=(u*c-1)*Math.pow(2,p),h+=y):(f=u*Math.pow(2,y-1)*Math.pow(2,p),h=0));8<=p;o[l+x]=255&f,x+=C,f/=256,p-=8);for(h=h<<p|f,d+=p;0<d;o[l+x]=255&h,x+=C,h/=256,d-=8);o[l+x-C]|=128*S}},{}],239:[function(r,s,a){var o;function u(ee,ie){return ee.b===ie.b&&ee.a===ie.a}function l(ee,ie){return ee.b<ie.b||ee.b===ie.b&&ee.a<=ie.a}function c(ee,ie,X){var ce=ie.b-ee.b,ke=X.b-ie.b;return 0<ce+ke?ce<ke?ie.a-ee.a+ce/(ce+ke)*(ee.a-X.a):ie.a-X.a+ke/(ce+ke)*(X.a-ee.a):0}function p(ee,ie,X){var ce=ie.b-ee.b,ke=X.b-ie.b;return 0<ce+ke?(ie.a-X.a)*ce+(ie.a-ee.a)*ke:0}function m(ee,ie){return ee.a<ie.a||ee.a===ie.a&&ee.b<=ie.b}function h(ee,ie,X){var ce=ie.a-ee.a,ke=X.a-ie.a;return 0<ce+ke?ce<ke?ie.b-ee.b+ce/(ce+ke)*(ee.b-X.b):ie.b-X.b+ke/(ce+ke)*(X.b-ee.b):0}function f(ee,ie,X){var ce=ie.a-ee.a,ke=X.a-ie.a;return 0<ce+ke?(ie.b-X.b)*ce+(ie.b-ee.b)*ke:0}function d(ee,ie,X,ce){return(ee=ee<0?0:ee)<=(X=X<0?0:X)?X===0?(ie+ce)/2:ie+ee/(ee+X)*(ce-ie):ce+X/(ee+X)*(ie-ce)}function g(ee){var ie=S(ee.b);return _(ie,ee.c),_(ie.b,ee.c),M(ie,ee.a),ie}function y(ee,ie){var X=!1,ce=!1;ee!==ie&&(ie.a!==ee.a&&(ce=!0,R(ie.a,ee.a)),ie.d!==ee.d&&(X=!0,P(ie.d,ee.d)),w(ie,ee),ce||(_(ie,ee.a),ee.a.c=ee),X||(M(ie,ee.d),ee.d.a=ee))}function b(ee){var ie=ee.b,X=!1;ee.d!==ee.b.d&&(X=!0,P(ee.d,ee.b.d)),ee.c===ee?R(ee.a,null):(ee.b.d.a=ee.b.e,ee.a.c=ee.c,w(ee,ee.b.e),X||M(ee,ee.d)),ie.c===ie?(R(ie.a,null),P(ie.d,null)):(ee.d.a=ie.b.e,ie.a.c=ie.c,w(ie,ie.b.e)),I(ee)}function x(ee){var ie=S(ee),X=ie.b;return w(ie,ee.e),ie.a=ee.b.a,_(X,ie.a),ie.d=X.d=ee.d,ie=ie.b,w(ee.b,ee.b.b.e),w(ee.b,ie),ee.b.a=ie.a,ie.b.a.c=ie.b,ie.b.d=ee.b.d,ie.f=ee.f,ie.b.f=ee.b.f,ie}function C(ee,ie){var X=!1,ce=S(ee),ke=ce.b;return ie.d!==ee.d&&(X=!0,P(ie.d,ee.d)),w(ce,ee.e),w(ke,ie),ce.a=ee.b.a,ke.a=ie.a,ce.d=ke.d=ee.d,ee.d.a=ke,X||M(ce,ee.d),ce}function S(ee){var ie=new be,X=new be,ce=ee.b.h;return(((X.h=ce).b.h=ie).h=ee).b.h=X,ie.b=X,((ie.c=ie).e=X).b=ie,(X.c=X).e=ie}function w(ee,ie){var X=ee.c,ce=ie.c;X.b.e=ie,(ce.b.e=ee).c=ce,ie.c=X}function _(ee,ie){var X=ie.f,ce=new Me(ie,X);for(X.e=ce,X=(ie.f=ce).c=ee;X.a=ce,(X=X.c)!==ee;);}function M(ee,ie){var X=ie.d,ce=new Se(ie,X);for(X.b=ce,(ie.d=ce).a=ee,ce.c=ie.c,X=ee;X.d=ce,(X=X.e)!==ee;);}function I(ee){var ie=ee.h;ee=ee.b.h,(ie.b.h=ee).b.h=ie}function R(ee,ie){for(var X=ee.c,ce=X;ce.a=ie,(ce=ce.c)!==X;);X=ee.f,((ce=ee.e).f=X).e=ce}function P(ee,ie){for(var X=ee.a,ce=X;ce.d=ie,(ce=ce.e)!==X;);X=ee.d,((ce=ee.b).d=X).b=ce}function D(ee){var ie=0;return Math.abs(ee[1])>Math.abs(ee[0])&&(ie=1),ie=Math.abs(ee[2])>Math.abs(ee[ie])?2:ie}function U(ee,ie){ee.f+=ie.f,ee.b.f+=ie.b.f}function F(ee,ie,X){return ee=ee.a,ie=ie.a,X=X.a,ie.b.a===ee?X.b.a===ee?l(ie.a,X.a)?p(X.b.a,ie.a,X.a)<=0:0<=p(ie.b.a,X.a,ie.a):p(X.b.a,ee,X.a)<=0:X.b.a===ee?0<=p(ie.b.a,ee,ie.a):(ie=c(ie.b.a,ee,ie.a),(ee=c(X.b.a,ee,X.a))<=ie)}function z(ee){ee.a.i=null;var ie=ee.e;ie.a.c=ie.c,ie.c.a=ie.a,ee.e=null}function J(ee,ie){b(ee.a),ee.c=!1,(ee.a=ie).i=ee}function Q(ee){for(var ie=ee.a.a;(ee=Pe(ee)).a.a===ie;);return ee.c&&(J(ee,ie=C(Xe(ee).a.b,ee.a.e)),ee=Pe(ee)),ee}function Z(ee,ie,X){var ce=new je;return ce.a=X,ce.e=xe(ee.f,ie.e,ce),X.i=ce}function K(ee,ie){switch(ee.s){case 100130:return(1&ie)!=0;case 100131:return ie!==0;case 100132:return 0<ie;case 100133:return ie<0;case 100134:return 2<=ie||ie<=-2}return!1}function H(ee){var ie=ee.a,X=ie.d;X.c=ee.d,X.a=ie,z(ee)}function $(ee,ie,X){for(ie=(ee=ie).a;ee!==X;){ee.c=!1;var ce=Xe(ee),ke=ce.a;if(ke.a!==ie.a){if(!ce.c){H(ee);break}J(ce,ke=C(ie.c.b,ke.b))}ie.c!==ke&&(y(ke.b.e,ke),y(ie,ke)),H(ee),ie=ce.a,ee=ce}return ie}function Y(ee,ie,X,ce,ke,Re){for(var $e=!0;Z(ee,ie,X.b),(X=X.c)!==ce;);for(ke===null&&(ke=Xe(ie).a.b.c);(X=(ce=Xe(ie)).a.b).a===ke.a;)X.c!==ke&&(y(X.b.e,X),y(ke.b.e,X)),ce.f=ie.f-X.f,ce.d=K(ee,ce.f),ie.b=!0,!$e&&q(ee,ie)&&(U(X,ke),z(ie),b(ke)),$e=!1,ie=ce,ke=X;ie.b=!0,Re&&ae(ee,ie)}function oe(ee,ie,X,ce,ke){var Re=[ie.g[0],ie.g[1],ie.g[2]];ie.d=null,ie.d=ee.o&&ee.o(Re,X,ce,ee.c)||null,ie.d===null&&(ke?ee.n||(le(ee,100156),ee.n=!0):ie.d=X[0])}function O(ee,ie,X){var ce=[null,null,null,null];ce[0]=ie.a.d,ce[1]=X.a.d,oe(ee,ie.a,ce,[.5,.5,0,0],!1),y(ie,X)}function B(ee,ie,X,ce,ke){var Re=Math.abs(ie.b-ee.b)+Math.abs(ie.a-ee.a),$e=Math.abs(X.b-ee.b)+Math.abs(X.a-ee.a),mt=ke+1;ce[ke]=.5*$e/(Re+$e),ce[mt]=.5*Re/(Re+$e),ee.g[0]+=ce[ke]*ie.g[0]+ce[mt]*X.g[0],ee.g[1]+=ce[ke]*ie.g[1]+ce[mt]*X.g[1],ee.g[2]+=ce[ke]*ie.g[2]+ce[mt]*X.g[2]}function q(ee,ie){var X=Xe(ie),ce=ie.a,ke=X.a;if(l(ce.a,ke.a)){if(0<p(ke.b.a,ce.a,ke.a))return;if(u(ce.a,ke.a)){if(ce.a!==ke.a){var X=ee.e,Re=ce.a.h;if(0<=Re){var $e=(X=X.b).d,mt=X.e,_t=X.c,wt=_t[Re];$e[wt]=$e[X.a],(_t[$e[wt]]=wt)<=--X.a&&(wt<=1||l(mt[$e[wt>>1]],mt[$e[wt]])?nt:st)(X,wt),mt[Re]=null,_t[Re]=X.b,X.b=Re}else for(X.c[-(Re+1)]=null;0<X.a&&X.c[X.d[X.a-1]]===null;)--X.a;O(ee,ke.b.e,ce)}}else x(ke.b),y(ce,ke.b.e),ie.b=X.b=!0}else{if(p(ce.b.a,ke.a,ce.a)<0)return;Pe(ie).b=ie.b=!0,x(ce.b),y(ke.b.e,ce)}return 1}function re(ee,ie){var X=Xe(ie),ce=ie.a,ke=X.a,Re=ce.a,$e=ke.a,mt=ce.b.a,_t=ke.b.a,wt=new Me;if(p(mt,ee.a,Re),p(_t,ee.a,$e),!(Re===$e||Math.min(Re.a,mt.a)>Math.max($e.a,_t.a))){if(l(Re,$e)){if(0<p(_t,Re,$e))return}else if(p(mt,$e,Re)<0)return;var Ct,zt,Pt=mt,At=Re,Wt=_t,Gt=$e;if(l(Pt,At)||(Ct=Pt,Pt=At,At=Ct),l(Wt,Gt)||(Ct=Wt,Wt=Gt,Gt=Ct),l(Pt,Wt)||(Ct=Pt,Pt=Wt,Wt=Ct,Ct=At,At=Gt,Gt=Ct),l(Wt,At)?l(At,Gt)?((Ct=c(Pt,Wt,At))+(zt=c(Wt,At,Gt))<0&&(Ct=-Ct,zt=-zt),wt.b=d(Ct,Wt.b,zt,At.b)):((Ct=p(Pt,Wt,At))+(zt=-p(Pt,Gt,At))<0&&(Ct=-Ct,zt=-zt),wt.b=d(Ct,Wt.b,zt,Gt.b)):wt.b=(Wt.b+At.b)/2,m(Pt,At)||(Ct=Pt,Pt=At,At=Ct),m(Wt,Gt)||(Ct=Wt,Wt=Gt,Gt=Ct),m(Pt,Wt)||(Ct=Pt,Pt=Wt,Wt=Ct,Ct=At,At=Gt,Gt=Ct),m(Wt,At)?m(At,Gt)?((Ct=h(Pt,Wt,At))+(zt=h(Wt,At,Gt))<0&&(Ct=-Ct,zt=-zt),wt.a=d(Ct,Wt.a,zt,At.a)):((Ct=f(Pt,Wt,At))+(zt=-f(Pt,Gt,At))<0&&(Ct=-Ct,zt=-zt),wt.a=d(Ct,Wt.a,zt,Gt.a)):wt.a=(Wt.a+At.a)/2,l(wt,ee.a)&&(wt.b=ee.a.b,wt.a=ee.a.a),Pt=l(Re,$e)?Re:$e,l(Pt,wt)&&(wt.b=Pt.b,wt.a=Pt.a),u(wt,Re)||u(wt,$e))return q(ee,ie),0;if(!u(mt,ee.a)&&0<=p(mt,ee.a,wt)||!u(_t,ee.a)&&p(_t,ee.a,wt)<=0){if(_t===ee.a)x(ce.b),y(ke.b,ce),ce=Xe(ie=Q(ie)).a,$(ee,Xe(ie),X),Y(ee,ie,ce.b.e,ce,ce,!0);else{if(mt!==ee.a)return 0<=p(mt,ee.a,wt)&&(Pe(ie).b=ie.b=!0,x(ce.b),ce.a.b=ee.a.b,ce.a.a=ee.a.a),void(p(_t,ee.a,wt)<=0&&(ie.b=X.b=!0,x(ke.b),ke.a.b=ee.a.b,ke.a.a=ee.a.a));for(x(ke.b),y(ce.e,ke.b.e),$e=(Re=X=ie).a.b.a;(Re=Pe(Re)).a.b.a===$e;);Re=Xe(ie=Re).a.b.c,X.a=ke.b.e,Y(ee,ie,(ke=$(ee,X,null)).c,ce.b.c,Re,!0)}return 1}x(ce.b),x(ke.b),y(ke.b.e,ce),ce.a.b=wt.b,ce.a.a=wt.a,ce.a.h=Be(ee.e,ce.a),ce=ce.a,ke=[0,0,0,0],wt=[Re.d,mt.d,$e.d,_t.d],ce.g[0]=ce.g[1]=ce.g[2]=0,B(ce,Re,mt,ke,0),B(ce,$e,_t,ke,2),oe(ee,ce,wt,ke,!0),Pe(ie).b=ie.b=X.b=!0}}function ae(ee,ie){for(var X=Xe(ie);;){for(;X.b;)X=Xe(ie=X);if(!ie.b&&((ie=Pe(X=ie))===null||!ie.b))break;ie.b=!1;var ce=ie.a,ke=X.a;if(Re=ce.b.a!==ke.b.a)e:{var Re,$e=Xe(Re=ie),mt=Re.a,_t=$e.a,wt=void 0;if(l(mt.b.a,_t.b.a)){if(p(mt.b.a,_t.b.a,mt.a)<0){Re=!1;break e}Pe(Re).b=Re.b=!0,wt=x(mt),y(_t.b,wt),wt.d.c=Re.d}else{if(0<p(_t.b.a,mt.b.a,_t.a)){Re=!1;break e}Re.b=$e.b=!0,wt=x(_t),y(mt.e,_t.b),wt.b.d.c=Re.d}Re=!0}if(Re&&(X.c?(z(X),b(ke),ke=(X=Xe(ie)).a):ie.c&&(z(ie),b(ce),ce=(ie=Pe(X)).a)),ce.a!==ke.a){if(ce.b.a===ke.b.a||ie.c||X.c||ce.b.a!==ee.a&&ke.b.a!==ee.a)q(ee,ie);else if(re(ee,ie))break}ce.a===ke.a&&ce.b.a===ke.b.a&&(U(ke,ce),z(ie),b(ce),ie=Pe(X))}}function me(ee,ie){var X=new je,ce=g(ee.b);ce.a.b=4e150,ce.a.a=ie,ce.b.a.b=-4e150,ce.b.a.a=ie,ee.a=ce.b.a,X.a=ce,X.f=0,X.d=!1,X.c=!1,X.h=!0,X.b=!1,ce=xe(ce=ee.f,ce.a,X),X.e=ce}function ge(ee){this.a=new pe,this.b=ee,this.c=F}function xe(ee,ie,X){for(;(ie=ie.c).b!==null&&!ee.c(ee.b,ie.b,X););return ee=new pe(X,ie.a,ie),ie.a.c=ee,ie.a=ee}function pe(ee,ie,X){this.b=ee||null,this.a=ie||this,this.c=X||this}function ve(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Ee(ee,ie){if(ee.d!==ie)for(;ee.d!==ie;)if(ee.d<ie)switch(ee.d){case 0:le(ee,100151),ee.u(null);break;case 1:le(ee,100152),ee.t()}else switch(ee.d){case 2:le(ee,100154),ee.v();break;case 1:le(ee,100153),ee.w()}}function le(ee,ie){ee.p&&ee.p(ie,ee.c)}function Se(ee,ie){this.b=ee||this,this.d=ie||this,this.a=null,this.c=!1}function be(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ie(){this.c=new Me,this.a=new Se,this.b=new be,this.d=new be,this.b.b=this.d,this.d.b=this.b}function Me(ee,ie){this.e=ee||this,this.f=ie||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ye(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ge}function Be(ee,ie){var X,ce,ke;return ee.e?(2*(ce=++(X=ee.b).a)>X.f&&(X.f*=2,X.c=ye(X.c,X.f+1)),X.b===0?ke=ce:(ke=X.b,X.b=X.c[X.b]),X.e[ke]=ie,X.c[ke]=ce,X.d[ce]=ke,X.h&&st(X,ce),ke):(X=ee.a++,ee.c[X]=ie,-(X+1))}function rt(ee){if(ee.a===0)return Ue(ee.b);var ie=ee.c[ee.d[ee.a-1]];if(ee.b.a!==0&&l(Fe(ee.b),ie))return Ue(ee.b);for(;--ee.a,0<ee.a&&ee.c[ee.d[ee.a-1]]===null;);return ie}function Ge(){this.d=ye([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ye(ee,ie){for(var X=Array(ie),ce=0;ce<ee.length;ce++)X[ce]=ee[ce];for(;ce<ie;ce++)X[ce]=0;return X}function Fe(ee){return ee.e[ee.d[1]]}function Ue(ee){var ie=ee.d,X=ee.e,ce=ee.c,ke=ie[1],Re=X[ke];return 0<ee.a&&(ie[1]=ie[ee.a],ce[ie[1]]=1,X[ke]=null,ce[ke]=ee.b,ee.b=ke,0<--ee.a&&nt(ee,1)),Re}function nt(ee,ie){for(var X=ee.d,ce=ee.e,ke=ee.c,Re=ie,$e=X[Re];;){var mt=Re<<1,_t=(mt<ee.a&&l(ce[X[mt+1]],ce[X[mt]])&&(mt+=1),X[mt]);if(mt>ee.a||l(ce[$e],ce[_t])){ke[X[Re]=$e]=Re;break}ke[X[Re]=_t]=Re,Re=mt}}function st(ee,ie){for(var X=ee.d,ce=ee.e,ke=ee.c,Re=ie,$e=X[Re];;){var mt=Re>>1,_t=X[mt];if(mt==0||l(ce[_t],ce[$e])){ke[X[Re]=$e]=Re;break}ke[X[Re]=_t]=Re,Re=mt}}function je(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Xe(ee){return ee.e.c.b}function Pe(ee){return ee.e.a.b}(o=ve.prototype).x=function(){Ee(this,0)},o.B=function(ee,ie){switch(ee){case 100142:return;case 100140:switch(ie){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ie)}break;case 100141:return void(this.m=!!ie);default:return void le(this,100900)}le(this,100901)},o.y=function(ee){switch(ee){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:le(this,100900)}return!1},o.A=function(ee,ie,X){this.j[0]=ee,this.j[1]=ie,this.j[2]=X},o.z=function(ee,ie){var X=ie||null;switch(ee){case 100100:case 100106:this.h=X;break;case 100104:case 100110:this.l=X;break;case 100101:case 100107:this.k=X;break;case 100102:case 100108:this.i=X;break;case 100103:case 100109:this.p=X;break;case 100105:case 100111:this.o=X;break;case 100112:this.r=X;break;default:le(this,100900)}},o.C=function(ee,ie){var X=!1,ce=[0,0,0];Ee(this,2);for(var ke=0;ke<3;++ke){var Re=ee[ke];Re<-1e150&&(Re=-1e150,X=!0),1e150<Re&&(Re=1e150,X=!0),ce[ke]=Re}X&&le(this,100155),(X=this.q)===null?y(X=g(this.b),X.b):(x(X),X=X.e),X.a.d=ie,X.a.g[0]=ce[0],X.a.g[1]=ce[1],X.a.g[2]=ce[2],X.f=1,X.b.f=-1,this.q=X},o.u=function(ee){Ee(this,0),this.d=1,this.b=new Ie,this.c=ee},o.t=function(){Ee(this,1),this.d=2,this.q=null},o.v=function(){Ee(this,2),this.d=1},o.w=function(){Ee(this,1),this.d=0;var ee,ie,X=this.j[0],ce=this.j[1],ke=this.j[2],Re=!1,$e=[X,ce,ke];if(X===0&&ce===0&&ke===0){for(var ce=[-2e150,-2e150,-2e150],mt=[2e150,2e150,2e150],ke=[],_t=[],X=(Re=this.b.c).e;X!==Re;X=X.e)for(var wt=0;wt<3;++wt){var Ct=X.g[wt];Ct<mt[wt]&&(mt[wt]=Ct,_t[wt]=X),Ct>ce[wt]&&(ce[wt]=Ct,ke[wt]=X)}if(ce[1]-mt[1]>ce[X=0]-mt[0]&&(X=1),mt[X=ce[2]-mt[2]>ce[X]-mt[X]?2:X]>=ce[X])$e[0]=0,$e[1]=0,$e[2]=1;else{for(mt=_t[X],ke=ke[X],_t=[ce=0,0,0],mt=[mt.g[0]-ke.g[0],mt.g[1]-ke.g[1],mt.g[2]-ke.g[2]],wt=[0,0,0],X=Re.e;X!==Re;X=X.e)wt[0]=X.g[0]-ke.g[0],wt[1]=X.g[1]-ke.g[1],wt[2]=X.g[2]-ke.g[2],_t[0]=mt[1]*wt[2]-mt[2]*wt[1],_t[1]=mt[2]*wt[0]-mt[0]*wt[2],_t[2]=mt[0]*wt[1]-mt[1]*wt[0],ce<(Ct=_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2])&&(ce=Ct,$e[0]=_t[0],$e[1]=_t[1],$e[2]=_t[2]);ce<=0&&($e[0]=$e[1]=$e[2]=0,$e[D(mt)]=1)}Re=!0}for(_t=D($e),X=this.b.c,ce=(_t+1)%3,ke=(_t+2)%3,_t=0<$e[_t]?1:-1,$e=X.e;$e!==X;$e=$e.e)$e.b=$e.g[ce],$e.a=_t*$e.g[ke];if(Re){for($e=0,X=(Re=this.b.a).b;X!==Re;X=X.b)if(!((ce=X.a).f<=0))for(;$e+=(ce.a.b-ce.b.a.b)*(ce.a.a+ce.b.a.a),(ce=ce.e)!==X.a;);if($e<0)for(Re=($e=this.b.c).e;Re!==$e;Re=Re.e)Re.a=-Re.a}for(this.n=!1,$e=this.b.b,X=$e.h;X!==$e;X=Re)Re=X.h,ce=X.e,u(X.a,X.b.a)&&X.e.e!==X&&(O(this,ce,X),b(X),ce=(X=ce).e),ce.e===X&&(ce!==X&&(ce!==Re&&ce!==Re.b||(Re=Re.h),b(ce)),X!==Re&&X!==Re.b||(Re=Re.h),b(X));for(this.e=$e=new Ye,Re=this.b.c,X=Re.e;X!==Re;X=X.e)X.h=Be($e,X);var zt=$e;zt.d=[];for(var Pt=0;Pt<zt.a;Pt++)zt.d[Pt]=Pt;zt.d.sort(function(Gt){return function(kr,en){return l(Gt[kr],Gt[en])?1:-1}}(zt.c)),zt.e=!0;for(var At=zt.b,Wt=At.a;1<=Wt;--Wt)nt(At,Wt);for(At.h=!0,this.f=new ge(this),me(this,-4e150),me(this,4e150);($e=rt(this.e))!==null;){for(;;){e:if((X=this.e).a===0)Re=Fe(X.b);else if(Re=X.c[X.d[X.a-1]],X.b.a!==0&&l(X=Fe(X.b),Re)){Re=X;break e}if(Re===null||!u(Re,$e))break;Re=rt(this.e),O(this,$e.c,Re.c)}(function Gt(kr,en){for(var Xr,xr=(kr.a=en).c;xr.i===null;)if((xr=xr.c)===en.c){var xr=kr,Sr=en;(br=new je).a=Sr.c.b;for(var Or=(lr=xr.f).a;(Or=Or.a).b!==null&&!lr.c(lr.b,br,Or.b););var lr,mn,Br=Xe(lr=Or.b),br=lr.a,Or=Br.a;return void(p(br.b.a,Sr,br.a)===0?u((br=lr.a).a,Sr)||u(br.b.a,Sr)||(x(br.b),lr.c&&(b(br.c),lr.c=!1),y(Sr.c,br),Gt(xr,Sr)):(mn=l(Or.b.a,br.b.a)?lr:Br,Br=void 0,lr.d||mn.c?(Br=mn===lr?C(Sr.c.b,br.e):C(Or.b.c.b,Sr.c).b,mn.c?J(mn,Br):((lr=Z(br=xr,lr,Br)).f=Pe(lr).f+lr.a.f,lr.d=K(br,lr.f)),Gt(xr,Sr)):Y(xr,lr,Sr.c,Sr.c,null,!0)))}lr=(br=Xe(xr=Q(xr.i))).a,(br=$(kr,br,null)).c===lr?(br=(lr=br).c,Or=Xe(xr),Br=xr.a,mn=Or.a,Xr=!1,Br.b.a!==mn.b.a&&re(kr,xr),u(Br.a,kr.a)&&(y(br.b.e,Br),br=Xe(xr=Q(xr)).a,$(kr,Xe(xr),Or),Xr=!0),u(mn.a,kr.a)&&(y(lr,mn.b.e),lr=$(kr,Or,null),Xr=!0),Xr?Y(kr,xr,lr.c,br,br,!0):(Sr=l(mn.a,Br.a)?mn.b.e:Br,Y(kr,xr,Sr=C(lr.c.b,Sr),Sr.c,Sr.c,!1),Sr.b.i.c=!0,ae(kr,xr))):Y(kr,xr,br.c,lr,lr,!0)})(this,$e)}for(this.a=this.f.a.a.b.a.a,$e=0;(Re=this.f.a.a.b)!==null;)Re.h||++$e,z(Re);for(this.f=null,($e=this.e).b=null,$e.d=null,this.e=$e.c=null,$e=this.b,X=$e.a.b;X!==$e.a;X=Re)Re=X.b,(X=X.a).e.e===X&&(U(X.c,X),b(X));if(!this.n){if($e=this.b,this.m)for(X=$e.b.h;X!==$e.b;X=Re)Re=X.h,X.b.d.c!==X.d.c?X.f=X.d.c?1:-1:b(X);else for(X=$e.a.b;X!==$e.a;X=Re)if(Re=X.b,X.c){for(X=X.a;l(X.b.a,X.a);X=X.c.b);for(;l(X.a,X.b.a);X=X.e);for(ce=X.c.b,ke=void 0;X.e!==ce;)if(l(X.b.a,ce.a)){for(;ce.e!==X&&(l((ie=ce.e).b.a,ie.a)||p(ce.a,ce.b.a,ce.e.b.a)<=0);)ce=(ke=C(ce.e,ce)).b;ce=ce.c.b}else{for(;ce.e!==X&&(l((ee=X.c.b).a,ee.b.a)||0<=p(X.b.a,X.a,X.c.b.a));)X=(ke=C(X,X.c.b)).b;X=X.e}for(;ce.e.e!==X;)ke=C(ce.e,ce),ce=ke.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Re=($e=this.b).a.b;Re!==$e.a;Re=Re.b)if(Re.c){for(this.h&&this.h(2,this.c),X=Re.a;this.k&&this.k(X.a.d,this.c),(X=X.e)!==Re.a;);this.i&&this.i(this.c)}}else{for($e=this.b,Re=!!this.l,X=!1,ce=-1,ke=$e.a.d;ke!==$e.a;ke=ke.d)if(ke.c)for(X||(this.h&&this.h(4,this.c),X=!0),_t=ke.a;Re&&(mt=_t.b.d.c?0:1,ce!==mt&&(ce=mt,this.l&&this.l(!!ce,this.c))),this.k&&this.k(_t.a.d,this.c),(_t=_t.e)!==ke.a;);X&&this.i&&this.i(this.c)}if(this.r){for($e=this.b,X=$e.a.b;X!==$e.a;X=Re)if(Re=X.b,!X.c){for(ke=(ce=X.a).e,_t=void 0;ke=(_t=ke).e,(_t.d=null)===_t.b.d&&(_t.c===_t?R(_t.a,null):(_t.a.c=_t.c,w(_t,_t.b.e)),(mt=_t.b).c===mt?R(mt.a,null):(mt.a.c=mt.c,w(mt,mt.b.e)),I(_t)),_t!==ce;);ce=X.d,((X=X.b).d=ce).b=X}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ve,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ve.prototype.gluDeleteTess=ve.prototype.x,ve.prototype.gluTessProperty=ve.prototype.B,ve.prototype.gluGetTessProperty=ve.prototype.y,ve.prototype.gluTessNormal=ve.prototype.A,ve.prototype.gluTessCallback=ve.prototype.z,ve.prototype.gluTessVertex=ve.prototype.C,ve.prototype.gluTessBeginPolygon=ve.prototype.u,ve.prototype.gluTessBeginContour=ve.prototype.t,ve.prototype.gluTessEndContour=ve.prototype.v,ve.prototype.gluTessEndPolygon=ve.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],240:[function(r,s,a){function o(l,c,p,m){var h=0,f=(m=m===void 0?{}:m).loop===void 0?null:m.loop,d=m.palette===void 0?null:m.palette;if(c<=0||p<=0||65535<c||65535<p)throw new Error("Width/Height invalid.");function g(M){if(M=M.length,M<2||256<M||M&M-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return M}l[h++]=71,l[h++]=73,l[h++]=70,l[h++]=56,l[h++]=57,l[h++]=97;var y=0,b=0;if(d!==null){for(var x=g(d);x>>=1;)++y;if(x=1<<y,--y,m.background!==void 0){if(x<=(b=m.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(l[h++]=255&c,l[h++]=c>>8&255,l[h++]=255&p,l[h++]=p>>8&255,l[h++]=(d!==null?128:0)|y,l[h++]=b,l[h++]=0,d!==null)for(var C=0,S=d.length;C<S;++C){var w=d[C];l[h++]=w>>16&255,l[h++]=w>>8&255,l[h++]=255&w}if(f!==null){if(f<0||65535<f)throw new Error("Loop count invalid.");l[h++]=33,l[h++]=255,l[h++]=11,l[h++]=78,l[h++]=69,l[h++]=84,l[h++]=83,l[h++]=67,l[h++]=65,l[h++]=80,l[h++]=69,l[h++]=50,l[h++]=46,l[h++]=48,l[h++]=3,l[h++]=1,l[h++]=255&f,l[h++]=f>>8&255,l[h++]=0}var _=!1;this.addFrame=function(M,I,R,P,D,U){if(_===!0&&(--h,_=!1),U=U===void 0?{}:U,M<0||I<0||65535<M||65535<I)throw new Error("x/y invalid.");if(R<=0||P<=0||65535<R||65535<P)throw new Error("Width/Height invalid.");if(D.length<R*P)throw new Error("Not enough pixels for the frame size.");var F=!0,z=U.palette;if(z==null&&(F=!1,z=d),z==null)throw new Error("Must supply either a local or global palette.");for(var Q=g(z),J=0;Q>>=1;)++J;var Q=1<<J,Z=U.delay===void 0?0:U.delay,K=U.disposal===void 0?0:U.disposal;if(K<0||3<K)throw new Error("Disposal out of range.");var H=!1,$=0;if(U.transparent!==void 0&&U.transparent!==null&&(H=!0,($=U.transparent)<0||Q<=$))throw new Error("Transparent color index.");if(K===0&&!H&&Z===0||(l[h++]=33,l[h++]=249,l[h++]=4,l[h++]=K<<2|(H===!0?1:0),l[h++]=255&Z,l[h++]=Z>>8&255,l[h++]=$,l[h++]=0),l[h++]=44,l[h++]=255&M,l[h++]=M>>8&255,l[h++]=255&I,l[h++]=I>>8&255,l[h++]=255&R,l[h++]=R>>8&255,l[h++]=255&P,l[h++]=P>>8&255,l[h++]=F===!0?128|J-1:0,F===!0)for(var Y=0,oe=z.length;Y<oe;++Y){var O=z[Y];l[h++]=O>>16&255,l[h++]=O>>8&255,l[h++]=255&O}return h=function(B,q,re,ae){B[q++]=re;var me=q++,ge=1<<re,xe=ge-1,pe=1+ge,ve=1+pe,Ee=re+1,le=0,Se=0;function be(Ue){for(;Ue<=le;)B[q++]=255&Se,Se>>=8,le-=8,q===me+256&&(B[me]=255,me=q++)}function Ie(Ue){Se|=Ue<<le,le+=Ee,be(8)}var Me=ae[0]&xe,Ye={};Ie(ge);for(var Be=1,rt=ae.length;Be<rt;++Be){var Ge=ae[Be]&xe,ye=Me<<8|Ge,Fe=Ye[ye];if(Fe===void 0){for(Se|=Me<<le,le+=Ee;8<=le;)B[q++]=255&Se,Se>>=8,le-=8,q===me+256&&(B[me]=255,me=q++);ve===4096?(Ie(ge),ve=1+pe,Ee=re+1,Ye={}):(1<<Ee<=ve&&++Ee,Ye[ye]=ve++),Me=Ge}else Me=Fe}return Ie(Me),Ie(pe),be(1),me+1===q?B[me]=0:(B[me]=q-me-1,B[q++]=0),q}(l,h,J<2?2:J,D)},this.end=function(){return _===!1&&(l[h++]=59,_=!0),h},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(M){l=M},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(M){h=M}}function u(l,c,p,m){for(var h=l[c++],f=1<<h,d=1+f,g=1+d,y=h+1,b=(1<<y)-1,x=0,C=0,S=0,w=l[c++],_=new Int32Array(4096),M=null;;){for(;x<16&&w!==0;)C|=l[c++]<<x,x+=8,w===1?w=l[c++]:--w;if(x<y)break;var I=C&b;if(C>>=y,x-=y,I==f)g=1+d,b=(1<<(y=h+1))-1,M=null;else{if(I==d)break;for(var R=I<g?I:M,P=0,D=R;f<D;)D=_[D]>>8,++P;var U=D;if(m<S+P+(R!==I?1:0))return void console.log("Warning, gif stream longer than expected.");p[S++]=U;var F=S+=P;for(R!==I&&(p[S++]=U),D=R;P--;)D=_[D],p[--F]=255&D,D>>=8;M!==null&&g<4096&&(_[g++]=M<<8|U,b+1<=g&&y<12&&(++y,b=b<<1|1)),M=I}}S!==m&&console.log("Warning, gif stream shorter than expected.")}try{a.GifWriter=o,a.GifReader=function(l){var c=0;if(l[c++]!==71||l[c++]!==73||l[c++]!==70||l[c++]!==56||(l[c++]+1&253)!=56||l[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var p=l[c++]|l[c++]<<8,m=l[c++]|l[c++]<<8,h=l[c++],f=1<<1+(7&h),d=(l[c++],l[c++],null),g=null,y=(h>>7&&(d=c,c+=3*(g=f)),!0),b=[],x=0,C=null,S=0,w=null;for(this.width=p,this.height=m;y&&c<l.length;)switch(l[c++]){case 33:switch(l[c++]){case 255:if(l[c]!==11||l[c+1]==78&&l[c+2]==69&&l[c+3]==84&&l[c+4]==83&&l[c+5]==67&&l[c+6]==65&&l[c+7]==80&&l[c+8]==69&&l[c+9]==50&&l[c+10]==46&&l[c+11]==48&&l[c+12]==3&&l[c+13]==1&&l[c+16]==0)c+=14,w=l[c++]|l[c++]<<8,c++;else for(c+=12;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;case 249:if(l[c++]!==4||l[c+4]!==0)throw new Error("Invalid graphics extension block.");var _=l[c++],x=l[c++]|l[c++]<<8,C=l[c++];!(1&_)&&(C=null),S=_>>2&7,c++;break;case 254:for(;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;default:throw new Error("Unknown graphic control label: 0x"+l[c-1].toString(16))}break;case 44:var M,I=l[c++]|l[c++]<<8,R=l[c++]|l[c++]<<8,P=l[c++]|l[c++]<<8,D=l[c++]|l[c++]<<8,Z=l[c++],U=Z>>6&1,F=1<<1+(7&Z),z=d,J=g,Q=!1,Z=(Z>>7&&(Q=!0,z=c,c+=3*(J=F)),c);for(c++;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}b.push({x:I,y:R,width:P,height:D,has_local_palette:Q,palette_offset:z,palette_size:J,data_offset:Z,data_length:c-Z,transparent_index:C,interlaced:!!U,delay:x,disposal:S});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+l[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return w},this.frameInfo=function(K){if(K<0||K>=b.length)throw new Error("Frame index out of range.");return b[K]},this.decodeAndBlitFrameBGRA=function(K,H){for(var K=this.frameInfo(K),$=K.width*K.height,Y=new Uint8Array($),oe=(u(l,K.data_offset,Y,$),K.palette_offset),O=K.transparent_index,B=(O===null&&(O=256),K.width),q=p-B,re=B,ae=4*(K.y*p+K.x),me=4*((K.y+K.height)*p+K.x),ge=ae,xe=4*q,pe=(K.interlaced===!0&&(xe+=4*p*7),8),ve=0,Ee=Y.length;ve<Ee;++ve){var le,Se,be=Y[ve];re===0&&(re=B,me<=(ge+=xe)&&(xe=4*q+4*p*(pe-1),ge=ae+(B+q)*(pe<<1),pe>>=1)),be===O?ge+=4:(le=l[oe+3*be],Se=l[oe+3*be+1],be=l[oe+3*be+2],H[ge++]=be,H[ge++]=Se,H[ge++]=le,H[ge++]=255),--re}},this.decodeAndBlitFrameRGBA=function(K,H){for(var K=this.frameInfo(K),$=K.width*K.height,Y=new Uint8Array($),oe=(u(l,K.data_offset,Y,$),K.palette_offset),O=K.transparent_index,B=(O===null&&(O=256),K.width),q=p-B,re=B,ae=4*(K.y*p+K.x),me=4*((K.y+K.height)*p+K.x),ge=ae,xe=4*q,pe=(K.interlaced===!0&&(xe+=4*p*7),8),ve=0,Ee=Y.length;ve<Ee;++ve){var le,Se,be=Y[ve];re===0&&(re=B,me<=(ge+=xe)&&(xe=4*q+4*p*(pe-1),ge=ae+(B+q)*(pe<<1),pe>>=1)),be===O?ge+=4:(le=l[oe+3*be],Se=l[oe+3*be+1],be=l[oe+3*be+2],H[ge++]=le,H[ge++]=Se,H[ge++]=be,H[ge++]=255),--re}}}}catch{}},{}],241:[function(r,s,a){(function(o){var u,l;u=this,l=function(c){function p(L){if(this==null)throw TypeError();var j,k=String(this),E=k.length,L=L?Number(L):0;if(!((L=L!=L?0:L)<0||E<=L))return 55296<=(j=k.charCodeAt(L))&&j<=56319&&L+1<E&&56320<=(E=k.charCodeAt(L+1))&&E<=57343?1024*(j-55296)+E-56320+65536:j}String.prototype.codePointAt||((m=function(){try{var v={},j=Object.defineProperty,k=j(v,v,v)&&j}catch{}return k}())?m(String.prototype,"codePointAt",{value:p,configurable:!0,writable:!0}):String.prototype.codePointAt=p);var m,h=0,f=-3;function d(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(v,j){this.source=v,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=j,this.destLen=0,this.ltree=new d,this.dtree=new d}var y=new d,b=new d,x=new Uint8Array(30),C=new Uint16Array(30),S=new Uint8Array(30),w=new Uint16Array(30),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new d,I=new Uint8Array(320);function R(v,j,k,E){for(var L,G=0;G<k;++G)v[G]=0;for(G=0;G<30-k;++G)v[G+k]=G/k|0;for(L=E,G=0;G<30;++G)j[G]=L,L+=1<<v[G]}var P=new Uint16Array(16);function D(v,j,k,E){for(var L,G=0;G<16;++G)v.table[G]=0;for(G=0;G<E;++G)v.table[j[k+G]]++;for(G=L=v.table[0]=0;G<16;++G)P[G]=L,L+=v.table[G];for(G=0;G<E;++G)j[k+G]&&(v.trans[P[j[k+G]]++]=G)}function U(v,j,k){if(!j)return k;for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;var E=v.tag&65535>>>16-j;return v.tag>>>=j,v.bitcount-=j,E+k}function F(v,j){for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;for(var k=0,E=0,L=0,G=v.tag;E=2*E+(1&G),G>>>=1,k+=j.table[++L],0<=(E-=j.table[L]););return v.tag=G,v.bitcount-=L,j.trans[k+E]}function z(v,j,k){for(;;){var E=F(v,j);if(E===256)return h;if(E<256)v.dest[v.destLen++]=E;else for(var L,G=U(v,x[E-=257],C[E]),E=F(v,k),W=L=v.destLen-U(v,S[E],w[E]);W<L+G;++W)v.dest[v.destLen++]=v.dest[W]}}for(var J=y,Q=b,Z=0;Z<7;++Z)J.table[Z]=0;for(J.table[7]=24,J.table[8]=152,J.table[9]=112,Z=0;Z<24;++Z)J.trans[Z]=256+Z;for(Z=0;Z<144;++Z)J.trans[24+Z]=Z;for(Z=0;Z<8;++Z)J.trans[168+Z]=280+Z;for(Z=0;Z<112;++Z)J.trans[176+Z]=144+Z;for(Z=0;Z<5;++Z)Q.table[Z]=0;for(Q.table[5]=32,Z=0;Z<32;++Z)Q.trans[Z]=Z;R(x,C,4,3),R(S,w,2,1),x[28]=0,C[28]=258;var K=function(v,j){var k,E,L,G=new g(v,j);do{switch(L=void 0,(E=G).bitcount--||(E.tag=E.source[E.sourceIndex++],E.bitcount=7),L=1&E.tag,E.tag>>>=1,E=L,U(G,2,0)){case 0:k=function(qe){for(var Dt,qt;8<qe.bitcount;)qe.sourceIndex--,qe.bitcount-=8;if((Dt=256*qe.source[qe.sourceIndex+1]+qe.source[qe.sourceIndex])!==(65535&~(256*qe.source[qe.sourceIndex+3]+qe.source[qe.sourceIndex+2])))return f;for(qe.sourceIndex+=4,qt=Dt;qt;--qt)qe.dest[qe.destLen++]=qe.source[qe.sourceIndex++];return qe.bitcount=0,h}(G);break;case 1:k=z(G,y,b);break;case 2:tt=Ke=ct=ze=W=_e=Ne=He=Oe=de=fe=se=void 0;for(var W,se=G,fe=G.ltree,de=G.dtree,Oe=U(se,5,257),He=U(se,5,1),Ne=U(se,4,4),_e=0;_e<19;++_e)I[_e]=0;for(_e=0;_e<Ne;++_e){var ct=U(se,3,0);I[_[_e]]=ct}for(D(M,I,0,19),W=0;W<Oe+He;){var Ke=F(se,M);switch(Ke){case 16:for(var tt=I[W-1],ze=U(se,2,3);ze;--ze)I[W++]=tt;break;case 17:for(ze=U(se,3,3);ze;--ze)I[W++]=0;break;case 18:for(ze=U(se,7,11);ze;--ze)I[W++]=0;break;default:I[W++]=Ke}}D(fe,I,0,Oe),D(de,I,Oe,He),k=z(G,G.ltree,G.dtree);break;default:k=f}if(k!==h)throw new Error("Data error")}while(!E);return G.destLen<G.dest.length?typeof G.dest.slice=="function"?G.dest.slice(0,G.destLen):G.dest.subarray(0,G.destLen):G.dest};function H(v,j,k,E,L){return Math.pow(1-L,3)*v+3*Math.pow(1-L,2)*L*j+3*(1-L)*Math.pow(L,2)*k+Math.pow(L,3)*E}function $(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Y(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(v){throw new Error(v)}function O(v,j){v||oe(j)}$.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},$.prototype.addPoint=function(v,j){typeof v=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=v,this.x2=v),v<this.x1&&(this.x1=v),v>this.x2&&(this.x2=v)),typeof j=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))},$.prototype.addX=function(v){this.addPoint(v,null)},$.prototype.addY=function(v){this.addPoint(null,v)},$.prototype.addBezier=function(v,j,k,E,L,G,W,se){var fe=[v,j],de=[k,E],Oe=[L,G],He=[W,se];this.addPoint(v,j),this.addPoint(W,se);for(var Ne=0;Ne<=1;Ne++){var _e,ct=6*fe[Ne]-12*de[Ne]+6*Oe[Ne],Ke=-3*fe[Ne]+9*de[Ne]-9*Oe[Ne]+3*He[Ne],tt=3*de[Ne]-3*fe[Ne];Ke==0?ct==0||0<(_e=-tt/ct)&&_e<1&&(Ne===0&&this.addX(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],_e)),Ne===1&&this.addY(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],_e))):(_e=Math.pow(ct,2)-4*tt*Ke)<0||(0<(tt=(-ct+Math.sqrt(_e))/(2*Ke))&&tt<1&&(Ne===0&&this.addX(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],tt)),Ne===1&&this.addY(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],tt))),0<(tt=(-ct-Math.sqrt(_e))/(2*Ke))&&tt<1&&(Ne===0&&this.addX(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],tt)),Ne===1&&this.addY(H(fe[Ne],de[Ne],Oe[Ne],He[Ne],tt))))}},$.prototype.addQuad=function(v,j,k,E,L,G){k=v+2/3*(k-v),E=j+2/3*(E-j),this.addBezier(v,j,k,E,k+1/3*(L-v),E+1/3*(G-j),L,G)},Y.prototype.moveTo=function(v,j){this.commands.push({type:"M",x:v,y:j})},Y.prototype.lineTo=function(v,j){this.commands.push({type:"L",x:v,y:j})},Y.prototype.curveTo=Y.prototype.bezierCurveTo=function(v,j,k,E,L,G){this.commands.push({type:"C",x1:v,y1:j,x2:k,y2:E,x:L,y:G})},Y.prototype.quadTo=Y.prototype.quadraticCurveTo=function(v,j,k,E){this.commands.push({type:"Q",x1:v,y1:j,x:k,y:E})},Y.prototype.close=Y.prototype.closePath=function(){this.commands.push({type:"Z"})},Y.prototype.extend=function(v){var j;if(v.commands)v=v.commands;else if(v instanceof $)return j=v,this.moveTo(j.x1,j.y1),this.lineTo(j.x2,j.y1),this.lineTo(j.x2,j.y2),this.lineTo(j.x1,j.y2),void this.close();Array.prototype.push.apply(this.commands,v)},Y.prototype.getBoundingBox=function(){for(var v=new $,j=0,k=0,E=0,L=0,G=0;G<this.commands.length;G++){var W=this.commands[G];switch(W.type){case"M":v.addPoint(W.x,W.y),j=E=W.x,k=L=W.y;break;case"L":v.addPoint(W.x,W.y),E=W.x,L=W.y;break;case"Q":v.addQuad(E,L,W.x1,W.y1,W.x,W.y),E=W.x,L=W.y;break;case"C":v.addBezier(E,L,W.x1,W.y1,W.x2,W.y2,W.x,W.y),E=W.x,L=W.y;break;case"Z":E=j,L=k;break;default:throw new Error("Unexpected path command "+W.type)}}return v.isEmpty()&&v.addPoint(0,0),v},Y.prototype.draw=function(v){v.beginPath();for(var j=0;j<this.commands.length;j+=1){var k=this.commands[j];k.type==="M"?v.moveTo(k.x,k.y):k.type==="L"?v.lineTo(k.x,k.y):k.type==="C"?v.bezierCurveTo(k.x1,k.y1,k.x2,k.y2,k.x,k.y):k.type==="Q"?v.quadraticCurveTo(k.x1,k.y1,k.x,k.y):k.type==="Z"&&v.closePath()}this.fill&&(v.fillStyle=this.fill,v.fill()),this.stroke&&(v.strokeStyle=this.stroke,v.lineWidth=this.strokeWidth,v.stroke())},Y.prototype.toPathData=function(v){function j(){for(var G=arguments,W="",se=0;se<arguments.length;se+=1){var fe=G[se];0<=fe&&0<se&&(W+=" "),W+=(fe=fe,Math.round(fe)===fe?""+Math.round(fe):fe.toFixed(v))}return W}v=v!==void 0?v:2;for(var k="",E=0;E<this.commands.length;E+=1){var L=this.commands[E];L.type==="M"?k+="M"+j(L.x,L.y):L.type==="L"?k+="L"+j(L.x,L.y):L.type==="C"?k+="C"+j(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?k+="Q"+j(L.x1,L.y1,L.x,L.y):L.type==="Z"&&(k+="Z")}return k},Y.prototype.toSVG=function(v){var j=(j='<path d="')+this.toPathData(v)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?j+=' fill="none"':j+=' fill="'+this.fill+'"'),this.stroke&&(j+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),j+="/>"},Y.prototype.toDOMElement=function(j){var j=this.toPathData(j),k=document.createElementNS("http://www.w3.org/2000/svg","path");return k.setAttribute("d",j),k};var B={fail:oe,argument:O,assert:O},q={},re={},ae={};function me(v){return function(){return v}}re.BYTE=function(v){return B.argument(0<=v&&v<=255,"Byte value should be between 0 and 255."),[v]},ae.BYTE=me(1),re.CHAR=function(v){return[v.charCodeAt(0)]},ae.CHAR=me(1),re.CHARARRAY=function(v){for(var j=[],k=0;k<v.length;k+=1)j[k]=v.charCodeAt(k);return j},ae.CHARARRAY=function(v){return v.length},re.USHORT=function(v){return[v>>8&255,255&v]},ae.USHORT=me(2),re.SHORT=function(v){return[(v=32768<=v?-(65536-v):v)>>8&255,255&v]},ae.SHORT=me(2),re.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},ae.UINT24=me(3),re.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},ae.ULONG=me(4),re.LONG=function(v){return[(v=2147483648<=v?-(4294967296-v):v)>>24&255,v>>16&255,v>>8&255,255&v]},ae.LONG=me(4),re.FIXED=re.ULONG,ae.FIXED=ae.ULONG,re.FWORD=re.SHORT,ae.FWORD=ae.SHORT,re.UFWORD=re.USHORT,ae.UFWORD=ae.USHORT,re.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},ae.LONGDATETIME=me(8),re.TAG=function(v){return B.argument(v.length===4,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},ae.TAG=me(4),re.Card8=re.BYTE,ae.Card8=ae.BYTE,re.Card16=re.USHORT,ae.Card16=ae.USHORT,re.OffSize=re.BYTE,ae.OffSize=ae.BYTE,re.SID=re.USHORT,ae.SID=ae.USHORT,re.NUMBER=function(v){return-107<=v&&v<=107?[v+139]:108<=v&&v<=1131?[247+((v-=108)>>8),255&v]:-1131<=v&&v<=-108?[251+((v=-v-108)>>8),255&v]:-32768<=v&&v<=32767?re.NUMBER16(v):re.NUMBER32(v)},ae.NUMBER=function(v){return re.NUMBER(v).length},re.NUMBER16=function(v){return[28,v>>8&255,255&v]},ae.NUMBER16=me(3),re.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},ae.NUMBER32=me(5),re.REAL=function(v){for(var j=v.toString(),k=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(j),E=(k&&(k=parseFloat("1e"+((k[2]?+k[2]:0)+k[1].length)),j=(Math.round(v*k)/k).toString()),""),L=0,G=j.length;L<G;L+=1){var W=j[L];E+=W==="e"?j[++L]==="-"?"c":"b":W==="."?"a":W==="-"?"e":W}for(var se=[30],fe=0,de=(E+=1&E.length?"f":"ff").length;fe<de;fe+=2)se.push(parseInt(E.substr(fe,2),16));return se},ae.REAL=function(v){return re.REAL(v).length},re.NAME=re.CHARARRAY,ae.NAME=ae.CHARARRAY,re.STRING=re.CHARARRAY,ae.STRING=ae.CHARARRAY,q.UTF8=function(v,j,k){for(var E=[],L=k,G=0;G<L;G++,j+=1)E[G]=v.getUint8(j);return String.fromCharCode.apply(null,E)},q.UTF16=function(v,j,k){for(var E=[],L=k/2,G=0;G<L;G++,j+=2)E[G]=v.getUint16(j);return String.fromCharCode.apply(null,E)},re.UTF16=function(v){for(var j=[],k=0;k<v.length;k+=1){var E=v.charCodeAt(k);j[j.length]=E>>8&255,j[j.length]=255&E}return j},ae.UTF16=function(v){return 2*v.length};var ge,xe={"x-mac-croatian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Å â¢Â´Â¨â Å½ÃâÂ±â¤â¥âÂµâââÅ¡â«ÂªÂºÎ©Å¾Ã¸Â¿Â¡Â¬âÆâÄÂ«Äâ¦Â ÃÃÃÅÅÄâââââÃ·âï£¿Â©ââ¬â¹âºÃÂ»âÂ·âââ°ÃÄÃÄÃÃÃÃÃÃÃÄÃÃÃÃÄ±ËËÂ¯ÏÃËÂ¸ÃÃ¦Ë","x-mac-cyrillic":"ÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯â Â°ÒÂ£Â§â¢Â¶ÐÂ®Â©â¢ÐÑâ ÐÑâÂ±â¤â¥ÑÂµÒÐÐÑÐÑÐÑÐÑÑÐÂ¬âÆââÂ«Â»â¦Â ÐÑÐÑÑââââââÃ·âÐÑÐÑâÐÑÑÐ°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿ÑÑÑÑÑÑÑÑÑÑÑÑÑÑÑ","x-mac-gaelic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃá¸Â±â¤â¥á¸ÄÄá¸á¸á¸á¸Ä Ä¡á¹Ã¦Ã¸á¹á¹á¹É¼ÆÅ¿á¹ Â«Â»â¦Â ÃÃÃÅÅââââââá¹¡áºÃ¿Å¸á¹ªâ¬â¹âºÅ¶Å·á¹«Â·á»²á»³âÃÃÃÃÃÃÃÃÃÃÃâ£ÃÃÃÃÄ±ÃÃ½Å´Åµáºáºáºáºáºáº","x-mac-greek":"ÃÂ¹Â²ÃÂ³ÃÃÎÃ Ã¢Ã¤ÎÂ¨Ã§Ã©Ã¨ÃªÃ«Â£â¢Ã®Ã¯â¢Â½â°Ã´Ã¶Â¦â¬Ã¹Ã»Ã¼â ÎÎÎÎÎÎ ÃÂ®Â©Î£ÎªÂ§â Â°Â·ÎÂ±â¤â¥Â¥ÎÎÎÎÎÎÎÎ¦Î«Î¨Î©Î¬ÎÂ¬ÎÎ¡âÎ¤Â«Â»â¦Â Î¥Î§ÎÎÅââââââÃ·ÎÎÎÎÎ­Î®Î¯ÏÎÏÎ±Î²ÏÎ´ÎµÏÎ³Î·Î¹Î¾ÎºÎ»Î¼Î½Î¿ÏÏÏÏÏÎ¸ÏÏÏÏÎ¶ÏÏÎÎ°Â­","x-mac-icelandic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼ÃÂ°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬ÃÃ°ÃÃ¾Ã½Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-inuit":"ááááááá±á²á³á´á¸á¹áááááááá¦á­á®á¯á°á²á³áááááááÂ°á¡á¥á¦â¢Â¶á§Â®Â©â¢á¨áªá«á»áááááááá¯á°á±á²á´áµááááááááªá¨á©áªá«á­â¦Â á®á¾áááââââââáááááááááááá¿áááááááááááááá±á²á³á´áµá¶áá á¡á¢á£á¤á¥á¦á¼ÅÅ","x-mac-ce":"ÃÄÄÃÄÃÃÃ¡ÄÄÃ¤ÄÄÄÃ©Å¹ÅºÄÃ­ÄÄÄÄÃ³ÄÃ´Ã¶ÃµÃºÄÄÃ¼â Â°ÄÂ£Â§â¢Â¶ÃÂ®Â©â¢ÄÂ¨â Ä£Ä®Ä¯Äªâ¤â¥Ä«Ä¶ââÅÄ»Ä¼Ä½Ä¾Ä¹ÄºÅÅÅÂ¬âÅÅâÂ«Â»â¦Â ÅÅÃÅÅââââââÃ·âÅÅÅÅâ¹âºÅÅÅÅ ââÅ¡ÅÅÃÅ¤Å¥ÃÅ½Å¾ÅªÃÃÅ«Å®ÃÅ¯Å°Å±Å²Å³ÃÃ½Ä·Å»ÅÅ¼Ä¢Ë",macintosh:"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºï¬ï¬â¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-romanian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÄÈâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©ÄÈÂ¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºÈÈâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-turkish":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ÄÄÄ°Ä±ÅÅâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃï¢ ËËÂ¯ËËËÂ¸ËËË"},pe=(q.MACSTRING=function(v,j,k,E){var L=xe[E];if(L!==void 0){for(var G="",W=0;W<k;W++){var se=v.getUint8(j+W);G+=se<=127?String.fromCharCode(se):L[127&se]}return G}},typeof WeakMap=="function"&&new WeakMap);function ve(v){return-128<=v&&v<=127}re.MACSTRING=function(v,j){var k=function(W){if(!ge)for(var se in ge={},xe)ge[se]=new String(se);var fe=ge[W];if(fe!==void 0){if(pe){var de=pe.get(fe);if(de!==void 0)return de}var Oe=xe[W];if(Oe!==void 0){for(var He={},Ne=0;Ne<Oe.length;Ne++)He[Oe.charCodeAt(Ne)]=Ne+128;return pe&&pe.set(fe,He),He}}}(j);if(k!==void 0){for(var E=[],L=0;L<v.length;L++){var G=v.charCodeAt(L);if(128<=G&&(G=k[G])===void 0)return;E[L]=G}return E}},ae.MACSTRING=function(v,j){return v=re.MACSTRING(v,j),v!==void 0?v.length:0},re.VARDELTAS=function(v){for(var E=0,j=[];E<v.length;)var k=v[E],E=(k===0?function(L,G,W){for(var se=0,fe=L.length;G<fe&&se<64&&L[G]===0;)++G,++se;return W.push(128|se-1),G}:-128<=k&&k<=127?function(L,G,W){for(var se=0,fe=L.length,de=G;de<fe&&se<64;){var Oe=L[de];if(!ve(Oe)||Oe===0&&de+1<fe&&L[de+1]===0)break;++de,++se}W.push(se-1);for(var He=G;He<de;++He)W.push(L[He]+256&255);return de}:function(L,G,W){for(var se=0,fe=L.length,de=G;de<fe&&se<64;){var Oe=L[de];if(Oe===0||ve(Oe)&&de+1<fe&&ve(L[de+1]))break;++de,++se}W.push(64|se-1);for(var He=G;He<de;++He){var Ne=L[He];W.push(Ne+65536>>8&255,Ne+256&255)}return de})(v,E,j);return j},re.INDEX=function(v){for(var j=1,k=[j],E=[],L=0;L<v.length;L+=1){var G=re.OBJECT(v[L]);Array.prototype.push.apply(E,G),j+=G.length,k.push(j)}if(E.length===0)return[0,0];for(var W=[],se=1+Math.floor(Math.log(j)/Math.log(2))/8|0,fe=[void 0,re.BYTE,re.USHORT,re.UINT24,re.ULONG][se],de=0;de<k.length;de+=1){var Oe=fe(k[de]);Array.prototype.push.apply(W,Oe)}return Array.prototype.concat(re.Card16(v.length),re.OffSize(se),W,E)},ae.INDEX=function(v){return re.INDEX(v).length},re.DICT=function(v){for(var j=[],k=Object.keys(v),E=k.length,L=0;L<E;L+=1){var G=parseInt(k[L],0),W=v[G];j=(j=j.concat(re.OPERAND(W.value,W.type))).concat(re.OPERATOR(G))}return j},ae.DICT=function(v){return re.DICT(v).length},re.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},re.OPERAND=function(v,j){var k=[];if(Array.isArray(j))for(var E=0;E<j.length;E+=1)B.argument(v.length===j.length,"Not enough arguments given for type"+j),k=k.concat(re.OPERAND(v[E],j[E]));else if(j==="SID")k=k.concat(re.NUMBER(v));else if(j==="offset")k=k.concat(re.NUMBER32(v));else if(j==="number")k=k.concat(re.NUMBER(v));else{if(j!=="real")throw new Error("Unknown operand type "+j);k=k.concat(re.REAL(v))}return k},re.OP=re.BYTE,ae.OP=ae.BYTE;var Ee=typeof WeakMap=="function"&&new WeakMap;function le(v,j,k){for(var E=0;E<j.length;E+=1){var L=j[E];this[L.name]=L.value}if(this.tableName=v,this.fields=j,k)for(var G=Object.keys(k),W=0;W<G.length;W+=1){var se=G[W],fe=k[se];this[se]!==void 0&&(this[se]=fe)}}function Se(v,j,k){k===void 0&&(k=j.length);var E=new Array(j.length+1);E[0]={name:v+"Count",type:"USHORT",value:k};for(var L=0;L<j.length;L++)E[L+1]={name:v+L,type:"USHORT",value:j[L]};return E}function be(v,j,k){var E=j.length,L=new Array(E+1);L[0]={name:v+"Count",type:"USHORT",value:E};for(var G=0;G<E;G++)L[G+1]={name:v+G,type:"TABLE",value:k(j[G],G)};return L}function Ie(v,j,k){var E=j.length,L=[];L[0]={name:v+"Count",type:"USHORT",value:E};for(var G=0;G<E;G++)L=L.concat(k(j[G],G));return L}function Me(v){v.format===1?le.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Se("glyph",v.glyphs))):B.assert(!1,"Can't create coverage table format 2 yet.")}function Ye(v){le.call(this,"scriptListTable",Ie("scriptRecord",v,function(j,k){var E=j.script,L=E.defaultLangSys;return B.assert(!!L,"Unable to write GSUB: script "+j.tag+" has no default language system."),[{name:"scriptTag"+k,type:"TAG",value:j.tag},{name:"script"+k,type:"TABLE",value:new le("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new le("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:L.reqFeatureIndex}].concat(Se("featureIndex",L.featureIndexes)))}].concat(Ie("langSys",E.langSysRecords,function(G,W){var se=G.langSys;return[{name:"langSysTag"+W,type:"TAG",value:G.tag},{name:"langSys"+W,type:"TABLE",value:new le("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:se.reqFeatureIndex}].concat(Se("featureIndex",se.featureIndexes)))}]})))}]}))}function Be(v){le.call(this,"featureListTable",Ie("featureRecord",v,function(j,k){var E=j.feature;return[{name:"featureTag"+k,type:"TAG",value:j.tag},{name:"feature"+k,type:"TABLE",value:new le("featureTable",[{name:"featureParams",type:"USHORT",value:E.featureParams}].concat(Se("lookupListIndex",E.lookupListIndexes)))}]}))}function rt(v,j){le.call(this,"lookupListTable",be("lookup",v,function(k){var E=j[k.lookupType];return B.assert(!!E,"Unable to write GSUB lookup type "+k.lookupType+" tables."),new le("lookupTable",[{name:"lookupType",type:"USHORT",value:k.lookupType},{name:"lookupFlag",type:"USHORT",value:k.lookupFlag}].concat(be("subtable",k.subtables,E)))}))}re.CHARSTRING=function(v){if(Ee){var j=Ee.get(v);if(j!==void 0)return j}for(var G=[],k=v.length,E=0;E<k;E+=1)var L=v[E],G=G.concat(re[L.type](L.value));return Ee&&Ee.set(v,G),G},ae.CHARSTRING=function(v){return re.CHARSTRING(v).length},re.OBJECT=function(v){var j=re[v.type];return B.argument(j!==void 0,"No encoding function for type "+v.type),j(v.value)},ae.OBJECT=function(v){var j=ae[v.type];return B.argument(j!==void 0,"No sizeOf function for type "+v.type),j(v.value)},re.TABLE=function(v){for(var j=[],k=v.fields.length,E=[],L=[],G=0;G<k;G+=1){var W=v.fields[G],fe=re[W.type],se=(B.argument(fe!==void 0,"No encoding function for field type "+W.type+" ("+W.name+")"),v[W.name]),fe=fe(se=se===void 0?W.value:se);W.type==="TABLE"?(L.push(j.length),j=j.concat([0,0]),E.push(fe)):j=j.concat(fe)}for(var de=0;de<E.length;de+=1){var Oe=L[de],He=j.length;B.argument(He<65536,"Table "+v.tableName+" too big."),j[Oe]=He>>8,j[Oe+1]=255&He,j=j.concat(E[de])}return j},ae.TABLE=function(v){for(var j=0,k=v.fields.length,E=0;E<k;E+=1){var L=v.fields[E],G=ae[L.type],W=(B.argument(G!==void 0,"No sizeOf function for field type "+L.type+" ("+L.name+")"),v[L.name]);j+=G(W=W===void 0?L.value:W),L.type==="TABLE"&&(j+=2)}return j},re.RECORD=re.TABLE,ae.RECORD=ae.TABLE,re.LITERAL=function(v){return v},ae.LITERAL=function(v){return v.length},le.prototype.encode=function(){return re.TABLE(this)},le.prototype.sizeOf=function(){return ae.TABLE(this)};var Ge={Table:le,Record:le,Coverage:(Me.prototype=Object.create(le.prototype)).constructor=Me,ScriptList:(Ye.prototype=Object.create(le.prototype)).constructor=Ye,FeatureList:(Be.prototype=Object.create(le.prototype)).constructor=Be,LookupList:(rt.prototype=Object.create(le.prototype)).constructor=rt,ushortList:Se,tableList:be,recordList:Ie};function ye(v,j){return v.getUint8(j)}function Fe(v,j){return v.getUint16(j,!1)}function Ue(v,j){return v.getUint32(j,!1)}function nt(v,j){return v.getInt16(j,!1)+v.getUint16(j+2,!1)/65535}var st={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function je(v,j){this.data=v,this.offset=j,this.relativeOffset=0}je.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},je.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},je.prototype.parseCard8=je.prototype.parseByte,je.prototype.parseCard16=je.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},je.prototype.parseSID=je.prototype.parseUShort,je.prototype.parseOffset16=je.prototype.parseUShort,je.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},je.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},je.prototype.parseOffset32=je.prototype.parseULong=function(){var v=Ue(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},je.prototype.parseFixed=function(){var v=nt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},je.prototype.parseString=function(v){var j=this.data,k=this.offset+this.relativeOffset,E="";this.relativeOffset+=v;for(var L=0;L<v;L++)E+=String.fromCharCode(j.getUint8(k+L));return E},je.prototype.parseTag=function(){return this.parseString(4)},je.prototype.parseLongDateTime=function(){var v=Ue(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},je.prototype.parseVersion=function(v){var j=Fe(this.data,this.offset+this.relativeOffset),k=Fe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,j+k/(v=v===void 0?4096:v)/10},je.prototype.skip=function(v,j){this.relativeOffset+=st[v]*(j=j===void 0?1:j)},je.prototype.parseULongList=function(v){v===void 0&&(v=this.parseULong());for(var j=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)j[L]=k.getUint32(E),E+=4;return this.relativeOffset+=4*v,j},je.prototype.parseOffset16List=je.prototype.parseUShortList=function(v){v===void 0&&(v=this.parseUShort());for(var j=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)j[L]=k.getUint16(E),E+=2;return this.relativeOffset+=2*v,j},je.prototype.parseShortList=function(v){for(var j=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)j[L]=k.getInt16(E),E+=2;return this.relativeOffset+=2*v,j},je.prototype.parseByteList=function(v){for(var j=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)j[L]=k.getUint8(E++);return this.relativeOffset+=v,j},je.prototype.parseList=function(v,j){j||(j=v,v=this.parseUShort());for(var k=new Array(v),E=0;E<v;E++)k[E]=j.call(this);return k},je.prototype.parseList32=function(v,j){j||(j=v,v=this.parseULong());for(var k=new Array(v),E=0;E<v;E++)k[E]=j.call(this);return k},je.prototype.parseRecordList=function(v,j){j||(j=v,v=this.parseUShort());for(var k=new Array(v),E=Object.keys(j),L=0;L<v;L++){for(var G={},W=0;W<E.length;W++){var se=E[W],fe=j[se];G[se]=fe.call(this)}k[L]=G}return k},je.prototype.parseRecordList32=function(v,j){j||(j=v,v=this.parseULong());for(var k=new Array(v),E=Object.keys(j),L=0;L<v;L++){for(var G={},W=0;W<E.length;W++){var se=E[W],fe=j[se];G[se]=fe.call(this)}k[L]=G}return k},je.prototype.parseStruct=function(v){if(typeof v=="function")return v.call(this);for(var j=Object.keys(v),k={},E=0;E<j.length;E++){var L=j[E],G=v[L];k[L]=G.call(this)}return k},je.prototype.parseValueRecord=function(v){var j;if((v=v===void 0?this.parseUShort():v)!==0)return j={},1&v&&(j.xPlacement=this.parseShort()),2&v&&(j.yPlacement=this.parseShort()),4&v&&(j.xAdvance=this.parseShort()),8&v&&(j.yAdvance=this.parseShort()),16&v&&(j.xPlaDevice=void 0,this.parseShort()),32&v&&(j.yPlaDevice=void 0,this.parseShort()),64&v&&(j.xAdvDevice=void 0,this.parseShort()),128&v&&(j.yAdvDevice=void 0,this.parseShort()),j},je.prototype.parseValueRecordList=function(){for(var v=this.parseUShort(),j=this.parseUShort(),k=new Array(j),E=0;E<j;E++)k[E]=this.parseValueRecord(v);return k},je.prototype.parsePointer=function(v){var j=this.parseOffset16();if(0<j)return new je(this.data,this.offset+j).parseStruct(v)},je.prototype.parsePointer32=function(v){var j=this.parseOffset32();if(0<j)return new je(this.data,this.offset+j).parseStruct(v)},je.prototype.parseListOfLists=function(v){for(var j=this.parseOffset16List(),k=j.length,E=this.relativeOffset,L=new Array(k),G=0;G<k;G++){var W=j[G];if(W===0)L[G]=void 0;else if(this.relativeOffset=W,v){for(var se=this.parseOffset16List(),fe=new Array(se.length),de=0;de<se.length;de++)this.relativeOffset=W+se[de],fe[de]=v.call(this);L[G]=fe}else L[G]=this.parseUShortList()}return this.relativeOffset=E,L},je.prototype.parseCoverage=function(){var v=this.offset+this.relativeOffset,j=this.parseUShort(),k=this.parseUShort();if(j===1)return{format:1,glyphs:this.parseUShortList(k)};if(j!==2)throw new Error("0x"+v.toString(16)+": Coverage format must be 1 or 2.");for(var E=new Array(k),L=0;L<k;L++)E[L]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:E}},je.prototype.parseClassDef=function(){var v=this.offset+this.relativeOffset,j=this.parseUShort();if(j===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(j===2)return{format:2,ranges:this.parseRecordList({start:je.uShort,end:je.uShort,classId:je.uShort})};throw new Error("0x"+v.toString(16)+": ClassDef format must be 1 or 2.")},je.list=function(v,j){return function(){return this.parseList(v,j)}},je.list32=function(v,j){return function(){return this.parseList32(v,j)}},je.recordList=function(v,j){return function(){return this.parseRecordList(v,j)}},je.recordList32=function(v,j){return function(){return this.parseRecordList32(v,j)}},je.pointer=function(v){return function(){return this.parsePointer(v)}},je.pointer32=function(v){return function(){return this.parsePointer32(v)}},je.tag=je.prototype.parseTag,je.byte=je.prototype.parseByte,je.uShort=je.offset16=je.prototype.parseUShort,je.uShortList=je.prototype.parseUShortList,je.uLong=je.offset32=je.prototype.parseULong,je.uLongList=je.prototype.parseULongList,je.struct=je.prototype.parseStruct,je.coverage=je.prototype.parseCoverage,je.classDef=je.prototype.parseClassDef;var Xe={reserved:je.uShort,reqFeatureIndex:je.uShort,featureIndexes:je.uShortList},Pe=(je.prototype.parseScriptList=function(){return this.parsePointer(je.recordList({tag:je.tag,script:je.pointer({defaultLangSys:je.pointer(Xe),langSysRecords:je.recordList({tag:je.tag,langSys:je.pointer(Xe)})})}))||[]},je.prototype.parseFeatureList=function(){return this.parsePointer(je.recordList({tag:je.tag,feature:je.pointer({featureParams:je.offset16,lookupListIndexes:je.uShortList})}))||[]},je.prototype.parseLookupList=function(v){return this.parsePointer(je.list(je.pointer(function(){var j=this.parseUShort(),k=(B.argument(1<=j&&j<=9,"GPOS/GSUB lookup type "+j+" unknown."),this.parseUShort()),E=16&k;return{lookupType:j,lookupFlag:k,subtables:this.parseList(je.pointer(v[j])),markFilteringSet:E?this.parseUShort():void 0}})))||[]},je.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var v=this.parseUShort(),j=this.parseUShort();return B.argument(v===1&&j<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:je.offset32,featureTableSubstitutionOffset:je.offset32})})||[]},{getByte:ye,getCard8:ye,getUShort:Fe,getCard16:Fe,getShort:function(v,j){return v.getInt16(j,!1)},getULong:Ue,getFixed:nt,getTag:function(v,j){for(var k="",E=j;E<j+4;E+=1)k+=String.fromCharCode(v.getInt8(E));return k},getOffset:function(v,j,k){for(var E=0,L=0;L<k;L+=1)E=(E<<=8)+v.getUint8(j+L);return E},getBytes:function(v,j,k){for(var E=[],L=j;L<k;L+=1)E.push(v.getUint8(L));return E},bytesToString:function(v){for(var j="",k=0;k<v.length;k+=1)j+=String.fromCharCode(v[k]);return j},Parser:je}),ee={parse:function(v,j){for(var k={},E=(k.version=Pe.getUShort(v,j),B.argument(k.version===0,"cmap table version should be 0."),k.numTables=Pe.getUShort(v,j+2),-1),L=k.numTables-1;0<=L;--L){var G=Pe.getUShort(v,j+4+8*L),W=Pe.getUShort(v,j+4+8*L+2);if(G===3&&(W===0||W===1||W===10)||G===0&&(W===0||W===1||W===2||W===3||W===4)){E=Pe.getULong(v,j+4+8*L+4);break}}if(E===-1)throw new Error("No valid cmap sub-tables found.");var se=new Pe.Parser(v,j+E);if(k.format=se.parseUShort(),k.format===12){var fe,de=k,Oe=se;Oe.parseUShort(),de.length=Oe.parseULong(),de.language=Oe.parseULong(),de.groupCount=fe=Oe.parseULong(),de.glyphIndexMap={};for(var He=0;He<fe;He+=1)for(var Ne=Oe.parseULong(),_e=Oe.parseULong(),ct=Oe.parseULong(),Ke=Ne;Ke<=_e;Ke+=1)de.glyphIndexMap[Ke]=ct,ct++}else{if(k.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+k.format+").");var tt=k,ze=v,qe=j,Dt=E;tt.length=se.parseUShort(),tt.language=se.parseUShort(),tt.segCount=qt=se.parseUShort()>>1,se.skip("uShort",3),tt.glyphIndexMap={};for(var qt,It=new Pe.Parser(ze,qe+Dt+14),Lt=new Pe.Parser(ze,qe+Dt+16+2*qt),cr=new Pe.Parser(ze,qe+Dt+16+4*qt),Ur=new Pe.Parser(ze,qe+Dt+16+6*qt),hn=qe+Dt+16+8*qt,rr=0;rr<qt-1;rr+=1)for(var wn=void 0,Wr=It.parseUShort(),dn=Lt.parseUShort(),Pr=cr.parseShort(),qr=Ur.parseUShort(),Rr=dn;Rr<=Wr;Rr+=1)qr!==0?(hn=(hn=Ur.offset+Ur.relativeOffset-2)+qr+2*(Rr-dn),(wn=Pe.getUShort(ze,hn))!==0&&(wn=wn+Pr&65535)):wn=Rr+Pr&65535,tt.glyphIndexMap[Rr]=wn}return k},make:function(v){for(var j=!0,k=v.length-1;0<k;--k)if(65535<v.get(k).unicode){console.log("Adding CMAP format 12 (needed!)"),j=!1;break}var E,L,G=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:j?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:j?12:20}],W=(G=(G=j?G:G.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Ge.Table("cmap",G));for(W.segments=[],k=0;k<v.length;k+=1){for(var se=v.get(k),fe=0;fe<se.unicodes.length;fe+=1)E=se.unicodes[fe],L=k,W.segments.push({end:E,start:E,delta:-(E-L),offset:0,glyphIndex:L});W.segments=W.segments.sort(function(qe,Dt){return qe.start-Dt.start})}W.segments.push({end:65535,start:65535,delta:1,offset:0});var de=W.segments.length,Oe=0,He=[],Ne=[],_e=[],ct=[],Ke=[],tt=[];for(k=0;k<de;k+=1){var ze=W.segments[k];ze.end<=65535&&ze.start<=65535?(He=He.concat({name:"end_"+k,type:"USHORT",value:ze.end}),Ne=Ne.concat({name:"start_"+k,type:"USHORT",value:ze.start}),_e=_e.concat({name:"idDelta_"+k,type:"SHORT",value:ze.delta}),ct=ct.concat({name:"idRangeOffset_"+k,type:"USHORT",value:ze.offset}),ze.glyphId!==void 0&&(Ke=Ke.concat({name:"glyph_"+k,type:"USHORT",value:ze.glyphId}))):Oe+=1,j||ze.glyphIndex===void 0||(tt=(tt=(tt=tt.concat({name:"cmap12Start_"+k,type:"ULONG",value:ze.start})).concat({name:"cmap12End_"+k,type:"ULONG",value:ze.end})).concat({name:"cmap12Glyph_"+k,type:"ULONG",value:ze.glyphIndex}))}return W.segCountX2=2*(de-Oe),W.searchRange=2*Math.pow(2,Math.floor(Math.log(de-Oe)/Math.log(2))),W.entrySelector=Math.log(W.searchRange/2)/Math.log(2),W.rangeShift=W.segCountX2-W.searchRange,W.fields=W.fields.concat(He),W.fields.push({name:"reservedPad",type:"USHORT",value:0}),W.fields=W.fields.concat(Ne),W.fields=W.fields.concat(_e),W.fields=W.fields.concat(ct),W.fields=W.fields.concat(Ke),W.cmap4Length=14+2*He.length+2+2*Ne.length+2*_e.length+2*ct.length+2*Ke.length,j||(G=16+4*tt.length,W.cmap12Offset=20+W.cmap4Length,W.fields=W.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:G},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:tt.length/3}]),W.fields=W.fields.concat(tt)),W}},ie=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],X=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ke=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Re(v){this.font=v}function $e(v){this.cmap=v}function mt(v,j){this.encoding=v,this.charset=j}function _t(v){switch(v.version){case 1:this.names=ke.slice();break;case 2:this.names=new Array(v.numberOfGlyphs);for(var j=0;j<v.numberOfGlyphs;j++)v.glyphNameIndex[j]<ke.length?this.names[j]=ke[v.glyphNameIndex[j]]:this.names[j]=v.names[v.glyphNameIndex[j]-ke.length];break;case 2.5:this.names=new Array(v.numberOfGlyphs);for(var k=0;k<v.numberOfGlyphs;k++)this.names[k]=ke[k+v.glyphNameIndex[k]];break;default:this.names=[]}}Re.prototype.charToGlyphIndex=function(v){var j=v.codePointAt(0),k=this.font.glyphs;if(k){for(var E=0;E<k.length;E+=1)for(var L=k.get(E),G=0;G<L.unicodes.length;G+=1)if(L.unicodes[G]===j)return E}return null},$e.prototype.charToGlyphIndex=function(v){return this.cmap.glyphIndexMap[v.codePointAt(0)]||0},mt.prototype.charToGlyphIndex=function(v){return v=v.codePointAt(0),v=this.encoding[v],this.charset.indexOf(v)},_t.prototype.nameToGlyphIndex=function(v){return this.names.indexOf(v)},_t.prototype.glyphIndexToName=function(v){return this.names[v]};var wt={line:function(v,j,k,E,L){v.beginPath(),v.moveTo(j,k),v.lineTo(E,L),v.stroke()}};function Ct(v){this.bindConstructorValues(v)}function zt(v,j,k){Object.defineProperty(v,j,{get:function(){return v.path,v[k]},set:function(E){v[k]=E},enumerable:!0,configurable:!0})}function Pt(v,j){if(this.font=v,this.glyphs={},Array.isArray(j))for(var k=0;k<j.length;k++)this.glyphs[k]=j[k];this.length=j&&j.length||0}Ct.prototype.bindConstructorValues=function(v){var j;this.index=v.index||0,this.name=v.name||null,this.unicode=v.unicode||void 0,this.unicodes=v.unicodes||v.unicode!==void 0?[v.unicode]:[],v.xMin&&(this.xMin=v.xMin),v.yMin&&(this.yMin=v.yMin),v.xMax&&(this.xMax=v.xMax),v.yMax&&(this.yMax=v.yMax),v.advanceWidth&&(this.advanceWidth=v.advanceWidth),Object.defineProperty(this,"path",(v=v.path,j=v||new Y,{configurable:!0,get:function(){return j=typeof j=="function"?j():j},set:function(k){j=k}}))},Ct.prototype.addUnicode=function(v){this.unicodes.length===0&&(this.unicode=v),this.unicodes.push(v)},Ct.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ct.prototype.getPath=function(v,j,k,E,L){v=v!==void 0?v:0,j=j!==void 0?j:0,k=k!==void 0?k:72;for(var G,W,se=(E=E||{}).xScale,fe=E.yScale,de=((G=E.hinting&&L&&L.hinting?this.path&&L.hinting.exec(this,k):G)?(W=L.hinting.getCommands(G),v=Math.round(v),j=Math.round(j),se=fe=1):(W=this.path.commands,E=1/this.path.unitsPerEm*k,se===void 0&&(se=E),fe===void 0&&(fe=E)),new Y),Oe=0;Oe<W.length;Oe+=1){var He=W[Oe];He.type==="M"?de.moveTo(v+He.x*se,j+-He.y*fe):He.type==="L"?de.lineTo(v+He.x*se,j+-He.y*fe):He.type==="Q"?de.quadraticCurveTo(v+He.x1*se,j+-He.y1*fe,v+He.x*se,j+-He.y*fe):He.type==="C"?de.curveTo(v+He.x1*se,j+-He.y1*fe,v+He.x2*se,j+-He.y2*fe,v+He.x*se,j+-He.y*fe):He.type==="Z"&&de.closePath()}return de},Ct.prototype.getContours=function(){if(this.points===void 0)return[];for(var v=[],j=[],k=0;k<this.points.length;k+=1){var E=this.points[k];j.push(E),E.lastPointOfContour&&(v.push(j),j=[])}return B.argument(j.length===0,"There are still points left in the current contour."),v},Ct.prototype.getMetrics=function(){for(var v=this.path.commands,j=[],k=[],E=0;E<v.length;E+=1){var L=v[E];L.type!=="Z"&&(j.push(L.x),k.push(L.y)),L.type!=="Q"&&L.type!=="C"||(j.push(L.x1),k.push(L.y1)),L.type==="C"&&(j.push(L.x2),k.push(L.y2))}var G={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,k),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,k),leftSideBearing:this.leftSideBearing};return isFinite(G.xMin)||(G.xMin=0),isFinite(G.xMax)||(G.xMax=this.advanceWidth),isFinite(G.yMin)||(G.yMin=0),isFinite(G.yMax)||(G.yMax=0),G.rightSideBearing=this.advanceWidth-G.leftSideBearing-(G.xMax-G.xMin),G},Ct.prototype.draw=function(v,j,k,E,L){this.getPath(j,k,E,L).draw(v)},Ct.prototype.drawPoints=function(v,j,k,E){function L(Oe,He,Ne,_e){var ct=2*Math.PI;v.beginPath();for(var Ke=0;Ke<Oe.length;Ke+=1)v.moveTo(He+Oe[Ke].x*_e,Ne+Oe[Ke].y*_e),v.arc(He+Oe[Ke].x*_e,Ne+Oe[Ke].y*_e,2,0,ct,!1);v.closePath(),v.fill()}j=j!==void 0?j:0,k=k!==void 0?k:0;for(var E=1/this.path.unitsPerEm*(E=E!==void 0?E:24),G=[],W=[],se=this.path,fe=0;fe<se.commands.length;fe+=1){var de=se.commands[fe];de.x!==void 0&&G.push({x:de.x,y:-de.y}),de.x1!==void 0&&W.push({x:de.x1,y:-de.y1}),de.x2!==void 0&&W.push({x:de.x2,y:-de.y2})}v.fillStyle="blue",L(G,j,k,E),v.fillStyle="red",L(W,j,k,E)},Ct.prototype.drawMetrics=function(v,j,k,E){j=j!==void 0?j:0,k=k!==void 0?k:0,E=1/this.path.unitsPerEm*(E=E!==void 0?E:24),v.lineWidth=1,v.strokeStyle="black",wt.line(v,j,-1e4,j,1e4),wt.line(v,-1e4,k,1e4,k);var L=this.xMin||0,G=this.yMin||0,W=this.xMax||0,se=this.yMax||0,fe=this.advanceWidth||0;v.strokeStyle="blue",wt.line(v,j+L*E,-1e4,j+L*E,1e4),wt.line(v,j+W*E,-1e4,j+W*E,1e4),wt.line(v,-1e4,k+-G*E,1e4,k+-G*E),wt.line(v,-1e4,k+-se*E,1e4,k+-se*E),v.strokeStyle="green",wt.line(v,j+fe*E,-1e4,j+fe*E,1e4)},Pt.prototype.get=function(v){return typeof this.glyphs[v]=="function"&&(this.glyphs[v]=this.glyphs[v]()),this.glyphs[v]},Pt.prototype.push=function(v,j){this.glyphs[v]=j,this.length++};var At={GlyphSet:Pt,glyphLoader:function(v,j){return new Ct({index:j,font:v})},ttfGlyphLoader:function(v,j,k,E,L,G){return function(){var W=new Ct({index:j,font:v});return W.path=function(){k(W,E,L);var se=G(v.glyphs,W);return se.unitsPerEm=v.unitsPerEm,se},zt(W,"xMin","_xMin"),zt(W,"xMax","_xMax"),zt(W,"yMin","_yMin"),zt(W,"yMax","_yMax"),W}},cffGlyphLoader:function(v,j,k,E){return function(){var L=new Ct({index:j,font:v});return L.path=function(){var G=k(v,L,E);return G.unitsPerEm=v.unitsPerEm,G},L}}};function Wt(v){return v=v.length<1240?107:v.length<33900?1131:32768,v}function Gt(v,j,k){var E,L=[],G=[],W=Pe.getCard16(v,j);if(W!==0){for(var se=Pe.getByte(v,j+2),fe=j+(W+1)*se+2,de=j+3,Oe=0;Oe<W+1;Oe+=1)L.push(Pe.getOffset(v,de,se)),de+=se;E=fe+L[W]}else E=j+2;for(var He=0;He<L.length-1;He+=1){var Ne=Pe.getBytes(v,fe+L[He],fe+L[He+1]);k&&(Ne=k(Ne)),G.push(Ne)}return{objects:G,startOffset:j,endOffset:E}}function kr(v,j){if(j===28)return v.parseByte()<<8|v.parseByte();if(j===29)return v.parseByte()<<24|v.parseByte()<<16|v.parseByte()<<8|v.parseByte();if(j===30){for(var k=v,E="",L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var W=k.parseByte(),G=W>>4,W=15&W;if(G==15||(E+=L[G],W==15))break;E+=L[W]}return parseFloat(E)}if(32<=j&&j<=246)return j-139;if(247<=j&&j<=250)return 256*(j-247)+v.parseByte()+108;if(251<=j&&j<=254)return 256*-(j-251)-v.parseByte()-108;throw new Error("Invalid b0 "+j)}function en(v,j,k){var E=new Pe.Parser(v,j=j!==void 0?j:0),L=[],G=[];for(k=k!==void 0?k:v.length;E.relativeOffset<k;){var W=E.parseByte();W<=21?(W===12&&(W=1200+E.parseByte()),L.push([W,G]),G=[]):G.push(kr(E,W))}for(var se=L,fe={},de=0;de<se.length;de+=1){var Oe=se[de][0],He=se[de][1],Ne=void 0,Ne=He.length===1?He[0]:He;if(fe.hasOwnProperty(Oe)&&!isNaN(fe[Oe]))throw new Error("Object "+fe+" already has key "+Oe);fe[Oe]=Ne}return fe}function Xr(v,j){return j=j<=390?ie[j]:v[j-391]}function xr(v,j,k){for(var E,L={},G=0;G<j.length;G+=1){var W=j[G];if(Array.isArray(W.type)){var se=[];se.length=W.type.length;for(var fe=0;fe<W.type.length;fe++)(E=v[W.op]!==void 0?v[W.op][fe]:void 0)===void 0&&(E=W.value!==void 0&&W.value[fe]!==void 0?W.value[fe]:null),W.type[fe]==="SID"&&(E=Xr(k,E)),se[fe]=E;L[W.name]=se}else(E=v[W.op])===void 0&&(E=W.value!==void 0?W.value:null),W.type==="SID"&&(E=Xr(k,E)),L[W.name]=E}return L}var Sr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],lr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function mn(v,j,k,E){return xr(en(v,j,k),lr,E)}function Br(v,j,k,E){for(var L=[],G=0;G<k.length;G+=1){var W=new DataView(new Uint8Array(k[G]).buffer),W=(se=E,xr(en(W,0,W.byteLength),Sr,se)),se=(W._subrs=[],W._subrsBias=0,W.private[0]),fe=W.private[1];se!==0&&fe!==0&&(se=mn(v,fe+j,se,E),W._defaultWidthX=se.defaultWidthX,W._nominalWidthX=se.nominalWidthX,se.subrs!==0&&(fe=Gt(v,fe+se.subrs+j),W._subrs=fe.objects,W._subrsBias=Wt(W._subrs)),W._privateDict=se),L.push(W)}return L}function br(v,j,k){var E,L,G,W,se,fe,de,Oe,He,Ne=new Y,_e=[],ct=0,Ke=!1,tt=!1,ze=0,qe=0,Dt=(He=(v.isCIDFont?(se=v.tables.cff.topDict._fdSelect[j.index],se=v.tables.cff.topDict._fdArray[se],fe=se._subrs,de=se._subrsBias,Oe=se._defaultWidthX,se):(fe=v.tables.cff.topDict._subrs,de=v.tables.cff.topDict._subrsBias,Oe=v.tables.cff.topDict._defaultWidthX,v.tables.cff.topDict))._nominalWidthX,Oe);function qt(Lt,cr){tt&&Ne.closePath(),Ne.moveTo(Lt,cr),tt=!0}function It(){_e.length%2==0||Ke||(Dt=_e.shift()+He),ct+=_e.length>>1,_e.length=0,Ke=!0}return function Lt(cr){for(var Ur,hn,rr,wn,Wr,dn,Pr,qr,Rr,Vn,rn,an,Vr=0;Vr<cr.length;){var xn=cr[Vr];switch(Vr+=1,xn){case 1:case 3:It();break;case 4:1<_e.length&&!Ke&&(Dt=_e.shift()+He,Ke=!0),qe+=_e.pop(),qt(ze,qe);break;case 5:for(;0<_e.length;)ze+=_e.shift(),qe+=_e.shift(),Ne.lineTo(ze,qe);break;case 6:for(;0<_e.length&&(ze+=_e.shift(),Ne.lineTo(ze,qe),_e.length!==0);)qe+=_e.shift(),Ne.lineTo(ze,qe);break;case 7:for(;0<_e.length&&(qe+=_e.shift(),Ne.lineTo(ze,qe),_e.length!==0);)ze+=_e.shift(),Ne.lineTo(ze,qe);break;case 8:for(;0<_e.length;)E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W+_e.shift(),Ne.curveTo(E,L,G,W,ze,qe);break;case 10:Wr=_e.pop()+de,(dn=fe[Wr])&&Lt(dn);break;case 11:return;case 12:switch(xn=cr[Vr],Vr+=1,xn){case 35:E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),Pr=G+_e.shift(),qr=W+_e.shift(),Rr=Pr+_e.shift(),Vn=qr+_e.shift(),rn=Rr+_e.shift(),an=Vn+_e.shift(),ze=rn+_e.shift(),qe=an+_e.shift(),_e.shift(),Ne.curveTo(E,L,G,W,Pr,qr),Ne.curveTo(Rr,Vn,rn,an,ze,qe);break;case 34:E=ze+_e.shift(),L=qe,G=E+_e.shift(),W=L+_e.shift(),Pr=G+_e.shift(),qr=W,Rr=Pr+_e.shift(),Vn=W,rn=Rr+_e.shift(),an=qe,ze=rn+_e.shift(),Ne.curveTo(E,L,G,W,Pr,qr),Ne.curveTo(Rr,Vn,rn,an,ze,qe);break;case 36:E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),Pr=G+_e.shift(),qr=W,Rr=Pr+_e.shift(),Vn=W,rn=Rr+_e.shift(),an=Vn+_e.shift(),ze=rn+_e.shift(),Ne.curveTo(E,L,G,W,Pr,qr),Ne.curveTo(Rr,Vn,rn,an,ze,qe);break;case 37:E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),Pr=G+_e.shift(),qr=W+_e.shift(),Rr=Pr+_e.shift(),Vn=qr+_e.shift(),rn=Rr+_e.shift(),an=Vn+_e.shift(),Math.abs(rn-ze)>Math.abs(an-qe)?ze=rn+_e.shift():qe=an+_e.shift(),Ne.curveTo(E,L,G,W,Pr,qr),Ne.curveTo(Rr,Vn,rn,an,ze,qe);break;default:console.log("Glyph "+j.index+": unknown operator 1200"+xn),_e.length=0}break;case 14:0<_e.length&&!Ke&&(Dt=_e.shift()+He,Ke=!0),tt&&(Ne.closePath(),tt=!1);break;case 18:It();break;case 19:case 20:It(),Vr+=ct+7>>3;break;case 21:2<_e.length&&!Ke&&(Dt=_e.shift()+He,Ke=!0),qe+=_e.pop(),qt(ze+=_e.pop(),qe);break;case 22:1<_e.length&&!Ke&&(Dt=_e.shift()+He,Ke=!0),qt(ze+=_e.pop(),qe);break;case 23:It();break;case 24:for(;2<_e.length;)E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W+_e.shift(),Ne.curveTo(E,L,G,W,ze,qe);ze+=_e.shift(),qe+=_e.shift(),Ne.lineTo(ze,qe);break;case 25:for(;6<_e.length;)ze+=_e.shift(),qe+=_e.shift(),Ne.lineTo(ze,qe);E=ze+_e.shift(),L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W+_e.shift(),Ne.curveTo(E,L,G,W,ze,qe);break;case 26:for(_e.length%2&&(ze+=_e.shift());0<_e.length;)E=ze,L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G,qe=W+_e.shift(),Ne.curveTo(E,L,G,W,ze,qe);break;case 27:for(_e.length%2&&(qe+=_e.shift());0<_e.length;)E=ze+_e.shift(),L=qe,G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W,Ne.curveTo(E,L,G,W,ze,qe);break;case 28:Ur=cr[Vr],hn=cr[Vr+1],_e.push((Ur<<24|hn<<16)>>16),Vr+=2;break;case 29:Wr=_e.pop()+v.gsubrsBias,(dn=v.gsubrs[Wr])&&Lt(dn);break;case 30:for(;0<_e.length&&(E=ze,L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W+(_e.length===1?_e.shift():0),Ne.curveTo(E,L,G,W,ze,qe),_e.length!==0);)E=ze+_e.shift(),L=qe,G=E+_e.shift(),W=L+_e.shift(),qe=W+_e.shift(),ze=G+(_e.length===1?_e.shift():0),Ne.curveTo(E,L,G,W,ze,qe);break;case 31:for(;0<_e.length&&(E=ze+_e.shift(),L=qe,G=E+_e.shift(),W=L+_e.shift(),qe=W+_e.shift(),ze=G+(_e.length===1?_e.shift():0),Ne.curveTo(E,L,G,W,ze,qe),_e.length!==0);)E=ze,L=qe+_e.shift(),G=E+_e.shift(),W=L+_e.shift(),ze=G+_e.shift(),qe=W+(_e.length===1?_e.shift():0),Ne.curveTo(E,L,G,W,ze,qe);break;default:xn<32?console.log("Glyph "+j.index+": unknown operator "+xn):xn<247?_e.push(xn-139):xn<251?(Ur=cr[Vr],Vr+=1,_e.push(256*(xn-247)+Ur+108)):xn<255?(Ur=cr[Vr],Vr+=1,_e.push(256*-(xn-251)-Ur-108)):(Ur=cr[Vr],hn=cr[Vr+1],rr=cr[Vr+2],wn=cr[Vr+3],Vr+=4,_e.push((Ur<<24|hn<<16|rr<<8|wn)/65536))}}}(k),j.advanceWidth=Dt,Ne}function Or(v,j){var k,E=ie.indexOf(v);return 0<=E&&(k=E),0<=(E=j.indexOf(v))?k=E+ie.length:(k=ie.length+j.length,j.push(v)),k}function On(v,j,k){for(var E={},L=0;L<v.length;L+=1){var G=v[L],W=j[G.name];W===void 0||function se(fe,de){if(fe===de)return 1;if(Array.isArray(fe)&&Array.isArray(de)&&fe.length===de.length){for(var Oe=0;Oe<fe.length;Oe+=1)if(!se(fe[Oe],de[Oe]))return;return 1}}(W,G.value)||(G.type==="SID"&&(W=Or(W,k)),E[G.op]={name:G.name,type:G.type,value:W})}return E}function Zn(v,j){var k=new Ge.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return k.dict=On(Sr,v,j),k}function Oi(v){var j=new Ge.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return j.topDicts=[{name:"topDict_0",type:"TABLE",value:v}],j}function Un(v){for(var j=new Ge.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),k=0;k<v.length;k+=1){var E=v.get(k),L=function(G){for(var W=[],se=G.path,fe=(W.push({name:"width",type:"NUMBER",value:G.advanceWidth}),0),de=0,Oe=0;Oe<se.commands.length;Oe+=1){var He,Ne,_e,ct,Ke=void 0,tt=void 0,ze=se.commands[Oe];(ze=ze.type==="Q"?{type:"C",x:ze.x,y:ze.y,x1:1/3*fe+2/3*ze.x1,y1:1/3*de+2/3*ze.y1,x2:1/3*ze.x+2/3*ze.x1,y2:1/3*ze.y+2/3*ze.y1}:ze).type==="M"?(Ke=Math.round(ze.x-fe),tt=Math.round(ze.y-de),W.push({name:"dx",type:"NUMBER",value:Ke}),W.push({name:"dy",type:"NUMBER",value:tt}),W.push({name:"rmoveto",type:"OP",value:21}),fe=Math.round(ze.x),de=Math.round(ze.y)):ze.type==="L"?(Ke=Math.round(ze.x-fe),tt=Math.round(ze.y-de),W.push({name:"dx",type:"NUMBER",value:Ke}),W.push({name:"dy",type:"NUMBER",value:tt}),W.push({name:"rlineto",type:"OP",value:5}),fe=Math.round(ze.x),de=Math.round(ze.y)):ze.type==="C"&&(He=Math.round(ze.x1-fe),Ne=Math.round(ze.y1-de),_e=Math.round(ze.x2-ze.x1),ct=Math.round(ze.y2-ze.y1),Ke=Math.round(ze.x-ze.x2),tt=Math.round(ze.y-ze.y2),W.push({name:"dx1",type:"NUMBER",value:He}),W.push({name:"dy1",type:"NUMBER",value:Ne}),W.push({name:"dx2",type:"NUMBER",value:_e}),W.push({name:"dy2",type:"NUMBER",value:ct}),W.push({name:"dx",type:"NUMBER",value:Ke}),W.push({name:"dy",type:"NUMBER",value:tt}),W.push({name:"rrcurveto",type:"OP",value:8}),fe=Math.round(ze.x),de=Math.round(ze.y))}return W.push({name:"endchar",type:"OP",value:14}),W}(E);j.charStrings.push({name:E.name,type:"CHARSTRING",value:L})}return j}var Wi={parse:function(v,j,k){k.tables.cff={},se=v,E=j,(L={}).formatMajor=Pe.getCard8(se,E),L.formatMinor=Pe.getCard8(se,E+1),L.size=Pe.getCard8(se,E+2),L.offsetSize=Pe.getCard8(se,E+3),L.startOffset=E,L.endOffset=E+4;var se=Gt(v,L.endOffset,Pe.bytesToString),E=Gt(v,se.endOffset),L=Gt(v,E.endOffset,Pe.bytesToString),se=Gt(v,L.endOffset);if(k.gsubrs=se.objects,k.gsubrsBias=Wt(k.gsubrs),(se=Br(v,j,E.objects,L.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+se.length);if(E=se[0],(k.tables.cff.topDict=E)._privateDict&&(k.defaultWidthX=E._privateDict.defaultWidthX,k.nominalWidthX=E._privateDict.nominalWidthX),E.ros[0]!==void 0&&E.ros[1]!==void 0&&(k.isCIDFont=!0),k.isCIDFont){var se=E.fdArray,G=E.fdSelect;if(se===0||G===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");se=Br(v,j,Gt(v,se+=j).objects,L.objects),E._fdArray=se,E._fdSelect=function(Ne,_e,ct,Ke){var tt,ze=[],qe=new Pe.Parser(Ne,_e);if((Ne=qe.parseCard8())===0)for(var Dt=0;Dt<ct;Dt++){if(Ke<=(tt=qe.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+tt+" (FD count "+Ke+")");ze.push(tt)}else{if(Ne!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ne);var qt,It=qe.parseCard16(),Lt=qe.parseCard16();if(Lt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Lt);for(var cr=0;cr<It;cr++){if(tt=qe.parseCard8(),qt=qe.parseCard16(),Ke<=tt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+tt+" (FD count "+Ke+")");if(ct<qt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+qt);for(;Lt<qt;Lt++)ze.push(tt);Lt=qt}if(qt!==ct)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+qt)}return ze}(v,G+=j,k.numGlyphs,se.length)}var G=j+E.private[1],se=mn(v,G,E.private[0],L.objects),W=(k.defaultWidthX=se.defaultWidthX,k.nominalWidthX=se.nominalWidthX,se.subrs!==0?(G=Gt(v,G+se.subrs),k.subrs=G.objects,k.subrsBias=Wt(k.subrs)):(k.subrs=[],k.subrsBias=0),Gt(v,j+E.charStrings)),se=(k.nGlyphs=W.objects.length,function(Oe,He,Ne,_e){var ct=new Pe.Parser(Oe,He),Ke=(--Ne,[".notdef"]);if((Oe=ct.parseCard8())===0)for(var tt=0;tt<Ne;tt+=1)ze=ct.parseSID(),Ke.push(Xr(_e,ze));else if(Oe===1)for(;Ke.length<=Ne;)for(var ze=ct.parseSID(),qe=ct.parseCard8(),Dt=0;Dt<=qe;Dt+=1)Ke.push(Xr(_e,ze)),ze+=1;else{if(Oe!==2)throw new Error("Unknown charset format "+Oe);for(;Ke.length<=Ne;){ze=ct.parseSID(),qe=ct.parseCard16();for(var qt=0;qt<=qe;qt+=1)Ke.push(Xr(_e,ze)),ze+=1}}return Ke}(v,j+E.charset,k.nGlyphs,L.objects));E.encoding===0?k.cffEncoding=new mt(X,se):E.encoding===1?k.cffEncoding=new mt(ce,se):k.cffEncoding=function(Oe,He,Ne){var _e={},ct=new Pe.Parser(Oe,He);if((Oe=ct.parseCard8())===0)for(var Ke=ct.parseCard8(),tt=0;tt<Ke;tt+=1)_e[qe=ct.parseCard8()]=tt;else{if(Oe!==1)throw new Error("Unknown encoding format "+Oe);for(var ze=ct.parseCard8(),qe=1,Dt=0;Dt<ze;Dt+=1)for(var qt=ct.parseCard8(),It=ct.parseCard8(),Lt=qt;Lt<=qt+It;Lt+=1)_e[Lt]=qe,qe+=1}return new mt(_e,Ne)}(v,j+E.encoding,se),k.encoding=k.encoding||k.cffEncoding,k.glyphs=new At.GlyphSet(k);for(var fe=0;fe<k.nGlyphs;fe+=1){var de=W.objects[fe];k.glyphs.push(fe,At.cffGlyphLoader(k,fe,br,de))}},make:function(v,Oe){for(var k,E=new Ge.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),L=1/Oe.unitsPerEm,L={version:Oe.version,fullName:Oe.fullName,familyName:Oe.familyName,weight:Oe.weightName,fontBBox:Oe.fontBBox||[0,0,0,0],fontMatrix:[L,0,0,L,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},G=[],W=1;W<v.length;W+=1)k=v.get(W),G.push(k.name);var se,fe,de=[],Oe=(E.header=new Ge.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),E.nameIndex=function(Ne){var _e=new Ge.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);_e.names=[];for(var ct=0;ct<Ne.length;ct+=1)_e.names.push({name:"name_"+ct,type:"NAME",value:Ne[ct]});return _e}([Oe.postScriptName]),Zn(L,de)),He=(E.topDictIndex=Oi(Oe),E.globalSubrIndex=new Ge.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),E.charsets=function(Ne,_e){for(var ct=new Ge.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ke=0;Ke<Ne.length;Ke+=1){var tt=Or(Ne[Ke],_e);ct.fields.push({name:"glyph_"+Ke,type:"SID",value:tt})}return ct}(G,de),E.charStringsIndex=Un(v),E.privateDict=(He={},se=de,(fe=new Ge.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=On(lr,He,se),fe),E.stringIndex=function(Ne){var _e=new Ge.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);_e.strings=[];for(var ct=0;ct<Ne.length;ct+=1)_e.strings.push({name:"string_"+ct,type:"STRING",value:Ne[ct]});return _e}(de),E.header.sizeOf()+E.nameIndex.sizeOf()+E.topDictIndex.sizeOf()+E.stringIndex.sizeOf()+E.globalSubrIndex.sizeOf());return L.charset=He,L.encoding=0,L.charStrings=L.charset+E.charsets.sizeOf(),L.private[1]=L.charStrings+E.charStringsIndex.sizeOf(),Oe=Zn(L,de),E.topDictIndex=Oi(Oe),E}},Zi={parse:function(E,j){var k={},E=new Pe.Parser(E,j);return k.version=E.parseVersion(),k.fontRevision=Math.round(1e3*E.parseFixed())/1e3,k.checkSumAdjustment=E.parseULong(),k.magicNumber=E.parseULong(),B.argument(k.magicNumber===1594834165,"Font header has wrong magic number."),k.flags=E.parseUShort(),k.unitsPerEm=E.parseUShort(),k.created=E.parseLongDateTime(),k.modified=E.parseLongDateTime(),k.xMin=E.parseShort(),k.yMin=E.parseShort(),k.xMax=E.parseShort(),k.yMax=E.parseShort(),k.macStyle=E.parseUShort(),k.lowestRecPPEM=E.parseUShort(),k.fontDirectionHint=E.parseShort(),k.indexToLocFormat=E.parseShort(),k.glyphDataFormat=E.parseShort(),k},make:function(v){var j=Math.round(new Date().getTime()/1e3)+2082844800,k=j;return v.createdTimestamp&&(k=v.createdTimestamp+2082844800),new Ge.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:k},{name:"modified",type:"LONGDATETIME",value:j},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],v)}},we={parse:function(E,j){var k={},E=new Pe.Parser(E,j);return k.version=E.parseVersion(),k.ascender=E.parseShort(),k.descender=E.parseShort(),k.lineGap=E.parseShort(),k.advanceWidthMax=E.parseUShort(),k.minLeftSideBearing=E.parseShort(),k.minRightSideBearing=E.parseShort(),k.xMaxExtent=E.parseShort(),k.caretSlopeRise=E.parseShort(),k.caretSlopeRun=E.parseShort(),k.caretOffset=E.parseShort(),E.relativeOffset+=8,k.metricDataFormat=E.parseShort(),k.numberOfHMetrics=E.parseUShort(),k},make:function(v){return new Ge.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],v)}},pt={parse:function(v,j,k,E,L){for(var G,W,se=new Pe.Parser(v,j),fe=0;fe<E;fe+=1){fe<k&&(G=se.parseUShort(),W=se.parseShort());var de=L.get(fe);de.advanceWidth=G,de.leftSideBearing=W}},make:function(v){for(var j=new Ge.Table("hmtx",[]),k=0;k<v.length;k+=1){var L=v.get(k),E=L.advanceWidth||0,L=L.leftSideBearing||0;j.fields.push({name:"advanceWidth_"+k,type:"USHORT",value:E}),j.fields.push({name:"leftSideBearing_"+k,type:"SHORT",value:L})}return j}},xt={make:function(v){for(var j=new Ge.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:v.length}]),k="",E=12+4*v.length,L=0;L<v.length;++L){var G=k.indexOf(v[L]);G<0&&(G=k.length,k+=v[L]),j.fields.push({name:"offset "+L,type:"USHORT",value:E+G}),j.fields.push({name:"length "+L,type:"USHORT",value:v[L].length})}return j.fields.push({name:"stringPool",type:"CHARARRAY",value:k}),j},parse:function(v,j){for(var k=new Pe.Parser(v,j),E=k.parseULong(),L=(B.argument(E===1,"Unsupported ltag table version."),k.skip("uLong",1),k.parseULong()),G=[],W=0;W<L;W++){for(var se="",fe=j+k.parseUShort(),de=k.parseUShort(),Oe=fe;Oe<fe+de;++Oe)se+=String.fromCharCode(v.getInt8(Oe));G.push(se)}return G}},ft={parse:function(E,j){var k={},E=new Pe.Parser(E,j);return k.version=E.parseVersion(),k.numGlyphs=E.parseUShort(),k.version===1&&(k.maxPoints=E.parseUShort(),k.maxContours=E.parseUShort(),k.maxCompositePoints=E.parseUShort(),k.maxCompositeContours=E.parseUShort(),k.maxZones=E.parseUShort(),k.maxTwilightPoints=E.parseUShort(),k.maxStorage=E.parseUShort(),k.maxFunctionDefs=E.parseUShort(),k.maxInstructionDefs=E.parseUShort(),k.maxStackElements=E.parseUShort(),k.maxSizeOfInstructions=E.parseUShort(),k.maxComponentElements=E.parseUShort(),k.maxComponentDepth=E.parseUShort()),k},make:function(v){return new Ge.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:v}])}},sr=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],lt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},fr={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},St={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},ur="utf-16",Tt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},tn={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Yr(v,j,k){switch(v){case 0:return ur;case 1:return tn[k]||Tt[j];case 3:if(j===1||j===10)return ur}}function _r(v){var j,k={};for(j in v)k[v[j]]=parseInt(j);return k}function gr(v,j,k,E,L,G){return new Ge.Record("NameRecord",[{name:"platformID",type:"USHORT",value:v},{name:"encodingID",type:"USHORT",value:j},{name:"languageID",type:"USHORT",value:k},{name:"nameID",type:"USHORT",value:E},{name:"length",type:"USHORT",value:L},{name:"offset",type:"USHORT",value:G}])}function Cn(v,j){if((k=function(G,W){var se=G.length,fe=W.length-se+1;e:for(var de=0;de<fe;de++)for(;de<fe;de++){for(var Oe=0;Oe<se;Oe++)if(W[de+Oe]!==G[Oe])continue e;return de}return-1}(v,j))<0)for(var k=j.length,E=0,L=v.length;E<L;++E)j.push(v[E]);return k}var or={parse:function(v,j,k){for(var E={},L=new Pe.Parser(v,j),j=L.parseUShort(),G=L.parseUShort(),W=L.offset+L.parseUShort(),se=0;se<G;se++){var ct=L.parseUShort(),fe=L.parseUShort(),de=L.parseUShort(),Oe=L.parseUShort(),Oe=sr[Oe]||Oe,He=L.parseUShort(),Ne=L.parseUShort(),_e=function(tt,ze,qe){switch(tt){case 0:if(ze===65535)return"und";if(qe)return qe[ze];break;case 1:return lt[ze];case 3:return St[ze]}}(ct,de,k),ct=Yr(ct,fe,de);ct!==void 0&&_e!==void 0&&(fe=void 0,(fe=ct===ur?q.UTF16(v,W+Ne,He):q.MACSTRING(v,W+Ne,He,ct))&&((de=(de=E[Oe])===void 0?E[Oe]={}:de)[_e]=fe))}return j===1&&L.parseUShort(),E},make:function(v,j){var k,E=[],L={},G=_r(sr);for(k in v){var W=G[k];if(W===void 0&&(W=k),Ne=parseInt(W),isNaN(Ne))throw new Error('Name table entry "'+k+'" does not exist, see nameTableNames for complete list.');L[Ne]=v[k],E.push(Ne)}for(var se=_r(lt),fe=_r(St),de=[],Oe=[],He=0;He<E.length;He++){var Ne,_e,ct=L[Ne=E[He]];for(_e in ct){var Ke=ct[_e],qt=1,tt=se[_e],ze=fr[tt],qe=Yr(qt,ze,tt),qe=re.MACSTRING(Ke,qe),Dt=(qe===void 0&&(qt=0,(tt=j.indexOf(_e))<0&&(tt=j.length,j.push(_e)),ze=4,qe=re.UTF16(Ke)),Cn(qe,Oe)),qt=(de.push(gr(qt,ze,tt,Ne,qe.length,Dt)),fe[_e]);qt!==void 0&&(tt=Cn(ze=re.UTF16(Ke),Oe),de.push(gr(3,1,qt,Ne,ze.length,tt)))}}de.sort(function(cr,Ur){return cr.platformID-Ur.platformID||cr.encodingID-Ur.encodingID||cr.languageID-Ur.languageID||cr.nameID-Ur.nameID});for(var It=new Ge.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:de.length},{name:"stringOffset",type:"USHORT",value:6+12*de.length}]),Lt=0;Lt<de.length;Lt++)It.fields.push({name:"record_"+Lt,type:"RECORD",value:de[Lt]});return It.fields.push({name:"strings",type:"LITERAL",value:Oe}),It}},jn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],zr={parse:function(v,j){var k={},E=new Pe.Parser(v,j);k.version=E.parseUShort(),k.xAvgCharWidth=E.parseShort(),k.usWeightClass=E.parseUShort(),k.usWidthClass=E.parseUShort(),k.fsType=E.parseUShort(),k.ySubscriptXSize=E.parseShort(),k.ySubscriptYSize=E.parseShort(),k.ySubscriptXOffset=E.parseShort(),k.ySubscriptYOffset=E.parseShort(),k.ySuperscriptXSize=E.parseShort(),k.ySuperscriptYSize=E.parseShort(),k.ySuperscriptXOffset=E.parseShort(),k.ySuperscriptYOffset=E.parseShort(),k.yStrikeoutSize=E.parseShort(),k.yStrikeoutPosition=E.parseShort(),k.sFamilyClass=E.parseShort(),k.panose=[];for(var L=0;L<10;L++)k.panose[L]=E.parseByte();return k.ulUnicodeRange1=E.parseULong(),k.ulUnicodeRange2=E.parseULong(),k.ulUnicodeRange3=E.parseULong(),k.ulUnicodeRange4=E.parseULong(),k.achVendID=String.fromCharCode(E.parseByte(),E.parseByte(),E.parseByte(),E.parseByte()),k.fsSelection=E.parseUShort(),k.usFirstCharIndex=E.parseUShort(),k.usLastCharIndex=E.parseUShort(),k.sTypoAscender=E.parseShort(),k.sTypoDescender=E.parseShort(),k.sTypoLineGap=E.parseShort(),k.usWinAscent=E.parseUShort(),k.usWinDescent=E.parseUShort(),1<=k.version&&(k.ulCodePageRange1=E.parseULong(),k.ulCodePageRange2=E.parseULong()),2<=k.version&&(k.sxHeight=E.parseShort(),k.sCapHeight=E.parseShort(),k.usDefaultChar=E.parseUShort(),k.usBreakChar=E.parseUShort(),k.usMaxContent=E.parseUShort()),k},make:function(v){return new Ge.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],v)},unicodeRanges:jn,getUnicodeRange:function(v){for(var j=0;j<jn.length;j+=1){var k=jn[j];if(v>=k.begin&&v<k.end)return j}return-1}},ei={parse:function(v,j){var k={},E=new Pe.Parser(v,j);switch(k.version=E.parseVersion(),k.italicAngle=E.parseFixed(),k.underlinePosition=E.parseShort(),k.underlineThickness=E.parseShort(),k.isFixedPitch=E.parseULong(),k.minMemType42=E.parseULong(),k.maxMemType42=E.parseULong(),k.minMemType1=E.parseULong(),k.maxMemType1=E.parseULong(),k.version){case 1:k.names=ke.slice();break;case 2:k.numberOfGlyphs=E.parseUShort(),k.glyphNameIndex=new Array(k.numberOfGlyphs);for(var L=0;L<k.numberOfGlyphs;L++)k.glyphNameIndex[L]=E.parseUShort();k.names=[];for(var G,W=0;W<k.numberOfGlyphs;W++)k.glyphNameIndex[W]>=ke.length&&(G=E.parseChar(),k.names.push(E.parseString(G)));break;case 2.5:k.numberOfGlyphs=E.parseUShort(),k.offset=new Array(k.numberOfGlyphs);for(var se=0;se<k.numberOfGlyphs;se++)k.offset[se]=E.parseChar()}return k},make:function(){return new Ge.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ti=new Array(9),di=(ti[1]=function(){var v=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(je.coverage),deltaGlyphId:this.parseUShort()}:j===2?{substFormat:2,coverage:this.parsePointer(je.coverage),substitute:this.parseOffset16List()}:void B.assert(!1,"0x"+v.toString(16)+": lookup type 1 format must be 1 or 2.")},ti[2]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),sequences:this.parseListOfLists()}},ti[3]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),alternateSets:this.parseListOfLists()}},ti[4]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB ligature table identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:je.uShort,lookupListIndex:je.uShort});ti[5]=function(){var v,j,k=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:E,coverage:this.parsePointer(je.coverage),ruleSets:this.parseListOfLists(function(){var L=this.parseUShort(),G=this.parseUShort();return{input:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(G,di)}})}:E===2?{substFormat:E,coverage:this.parsePointer(je.coverage),classDef:this.parsePointer(je.classDef),classSets:this.parseListOfLists(function(){var L=this.parseUShort(),G=this.parseUShort();return{classes:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(G,di)}})}:E===3?(v=this.parseUShort(),j=this.parseUShort(),{substFormat:E,coverages:this.parseList(v,je.pointer(je.coverage)),lookupRecords:this.parseRecordList(j,di)}):void B.assert(!1,"0x"+k.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ti[6]=function(){var v=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(je.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(di)}})}:j===2?{substFormat:2,coverage:this.parsePointer(je.coverage),backtrackClassDef:this.parsePointer(je.classDef),inputClassDef:this.parsePointer(je.classDef),lookaheadClassDef:this.parsePointer(je.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(di)}})}:j===3?{substFormat:3,backtrackCoverage:this.parseList(je.pointer(je.coverage)),inputCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),lookupRecords:this.parseRecordList(di)}:void B.assert(!1,"0x"+v.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ti[7]=function(){var v=this.parseUShort(),v=(B.argument(v===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),j=new je(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:v,extension:ti[v].call(j)}},ti[8]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),backtrackCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),substitutes:this.parseUShortList()}};var In=new Array(9);In[1]=function(v){return v.substFormat===1?new Ge.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ge.Coverage(v.coverage)},{name:"deltaGlyphID",type:"USHORT",value:v.deltaGlyphId}]):new Ge.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ge.Coverage(v.coverage)}].concat(Ge.ushortList("substitute",v.substitute)))},In[3]=function(v){return B.assert(v.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ge.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ge.Coverage(v.coverage)}].concat(Ge.tableList("altSet",v.alternateSets,function(j){return new Ge.Table("alternateSetTable",Ge.ushortList("alternate",j))})))},In[4]=function(v){return B.assert(v.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ge.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ge.Coverage(v.coverage)}].concat(Ge.tableList("ligSet",v.ligatureSets,function(j){return new Ge.Table("ligatureSetTable",Ge.tableList("ligature",j,function(k){return new Ge.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:k.ligGlyph}].concat(Ge.ushortList("component",k.components,k.components.length+1)))}))})))};var ds={parse:function(v,j){return j=(v=new je(v,j=j||0)).parseVersion(1),B.argument(j===1||j===1.1,"Unsupported GSUB table version."),j===1?{version:j,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(ti)}:{version:j,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(ti),variations:v.parseFeatureVariationsList()}},make:function(v){return new Ge.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ge.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ge.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ge.LookupList(v.lookups,In)}])}},fs={parse:function(v,j){for(var k=new Pe.Parser(v,j),E=k.parseULong(),L=(B.argument(E===1,"Unsupported META table version."),k.parseULong(),k.parseULong(),k.parseULong()),G={},W=0;W<L;W++){var se=k.parseTag(),de=k.parseULong(),fe=k.parseULong(),de=q.UTF8(v,j+de,fe);G[se]=de}return G},make:function(v){var j,k=Object.keys(v).length,E="",L=16+12*k,G=new Ge.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:L},{name:"numTags",type:"ULONG",value:k}]);for(j in v){var W=E.length;E+=v[j],G.fields.push({name:"tag "+j,type:"TAG",value:j}),G.fields.push({name:"offset "+j,type:"ULONG",value:L+W}),G.fields.push({name:"length "+j,type:"ULONG",value:v[j].length})}return G.fields.push({name:"stringPool",type:"CHARARRAY",value:E}),G}};function ri(v){return Math.log(v)/Math.log(2)|0}function Ir(v){for(;v.length%4!=0;)v.push(0);for(var j=0,k=0;k<v.length;k+=4)j+=(v[k]<<24)+(v[k+1]<<16)+(v[k+2]<<8)+v[k+3];return j%=Math.pow(2,32)}function mr(v,j,k,E){return new Ge.Record("Table Record",[{name:"tag",type:"TAG",value:v!==void 0?v:""},{name:"checkSum",type:"ULONG",value:j!==void 0?j:0},{name:"offset",type:"ULONG",value:k!==void 0?k:0},{name:"length",type:"ULONG",value:E!==void 0?E:0}])}function Er(v){for(var j=new Ge.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),k=(j.tables=v,j.numTables=v.length,Math.pow(2,ri(j.numTables))),E=(j.searchRange=16*k,j.entrySelector=ri(k),j.rangeShift=16*j.numTables-j.searchRange,[]),L=[],G=j.sizeOf()+mr().sizeOf()*j.numTables;G%4!=0;)G+=1,L.push({name:"padding",type:"BYTE",value:0});for(var W=0;W<v.length;W+=1){var se=v[W],fe=(B.argument(se.tableName.length===4,"Table name"+se.tableName+" is invalid."),se.sizeOf()),de=mr(se.tableName,Ir(se.encode()),G,fe);for(E.push({name:de.tag+" Table Record",type:"RECORD",value:de}),L.push({name:se.tableName+" table",type:"RECORD",value:se}),G+=fe,B.argument(!isNaN(G),"Something went wrong calculating the offset.");G%4!=0;)G+=1,L.push({name:"padding",type:"BYTE",value:0})}return E.sort(function(Oe,He){return Oe.value.tag>He.value.tag?1:-1}),j.fields=j.fields.concat(E),j.fields=j.fields.concat(L),j}function Ci(v,j,k){for(var E=0;E<j.length;E+=1){var L=v.charToGlyphIndex(j[E]);if(0<L)return v.glyphs.get(L).getMetrics()}return k}var ba={make:Er,fontToTable:function(v){for(var j,k=[],E=[],L=[],G=[],W=[],se=[],fe=[],de=0,Oe=0,He=0,Ne=0,_e=0,ct=0;ct<v.glyphs.length;ct+=1){var Ke=v.glyphs.get(ct),tt=0|Ke.unicode;if(isNaN(Ke.advanceWidth))throw new Error("Glyph "+Ke.name+" ("+ct+"): advanceWidth is not a number.");(tt<j||j===void 0)&&0<tt&&(j=tt),de<tt&&(de=tt);var tt=zr.getUnicodeRange(tt);if(tt<32)Oe|=1<<tt;else if(tt<64)He|=1<<tt-32;else if(tt<96)Ne|=1<<tt-64;else{if(!(tt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");_e|=1<<tt-96}Ke.name!==".notdef"&&(tt=Ke.getMetrics(),k.push(tt.xMin),E.push(tt.yMin),L.push(tt.xMax),G.push(tt.yMax),se.push(tt.leftSideBearing),fe.push(tt.rightSideBearing),W.push(Ke.advanceWidth))}var ze,qe={xMin:Math.min.apply(null,k),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,G),advanceWidthMax:Math.max.apply(null,W),advanceWidthAvg:function(xn){for(var gs=0,ss=0;ss<xn.length;ss+=1)gs+=xn[ss];return gs/xn.length}(W),minLeftSideBearing:Math.min.apply(null,se),maxLeftSideBearing:Math.max.apply(null,se),minRightSideBearing:Math.min.apply(null,fe)},Dt=(qe.ascender=v.ascender,qe.descender=v.descender,Zi.make({flags:3,unitsPerEm:v.unitsPerEm,xMin:qe.xMin,yMin:qe.yMin,xMax:qe.xMax,yMax:qe.yMax,lowestRecPPEM:3,createdTimestamp:v.createdTimestamp})),qt=we.make({ascender:qe.ascender,descender:qe.descender,advanceWidthMax:qe.advanceWidthMax,minLeftSideBearing:qe.minLeftSideBearing,minRightSideBearing:qe.minRightSideBearing,xMaxExtent:qe.maxLeftSideBearing+(qe.xMax-qe.xMin),numberOfHMetrics:v.glyphs.length}),It=ft.make(v.glyphs.length),Lt=zr.make({xAvgCharWidth:Math.round(qe.advanceWidthAvg),usWeightClass:v.tables.os2.usWeightClass,usWidthClass:v.tables.os2.usWidthClass,usFirstCharIndex:j,usLastCharIndex:de,ulUnicodeRange1:Oe,ulUnicodeRange2:He,ulUnicodeRange3:Ne,ulUnicodeRange4:_e,fsSelection:v.tables.os2.fsSelection,sTypoAscender:qe.ascender,sTypoDescender:qe.descender,sTypoLineGap:0,usWinAscent:qe.yMax,usWinDescent:Math.abs(qe.yMin),ulCodePageRange1:1,sxHeight:Ci(v,"xyvw",{yMax:Math.round(qe.ascender/2)}).yMax,sCapHeight:Ci(v,"HIKLEFJMNTZBDPRAGOQSUVWXY",qe).yMax,usDefaultChar:v.hasChar(" ")?32:0,usBreakChar:v.hasChar(" ")?32:0}),cr=pt.make(v.glyphs),Ur=ee.make(v.glyphs),qr=v.getEnglishName("fontFamily"),Rr=v.getEnglishName("fontSubfamily"),Pr=qr+" "+Rr,hn=(hn=v.getEnglishName("postScriptName"))||qr.replace(/\s/g,"")+"-"+Rr,rr={};for(ze in v.names)rr[ze]=v.names[ze];rr.uniqueID||(rr.uniqueID={en:v.getEnglishName("manufacturer")+":"+Pr}),rr.postScriptName||(rr.postScriptName={en:hn}),rr.preferredFamily||(rr.preferredFamily=v.names.fontFamily),rr.preferredSubfamily||(rr.preferredSubfamily=v.names.fontSubfamily);var Wr=[],wn=or.make(rr,Wr),Wr=0<Wr.length?xt.make(Wr):void 0,dn=ei.make(),Pr=Wi.make(v.glyphs,{version:v.getEnglishName("version"),fullName:Pr,familyName:qr,weightName:Rr,postScriptName:hn,unitsPerEm:v.unitsPerEm,fontBBox:[0,qe.yMin,qe.ascender,qe.advanceWidthMax]}),qr=v.metas&&0<Object.keys(v.metas).length?fs.make(v.metas):void 0,Rr=[Dt,qt,It,Lt,wn,Ur,dn,Pr,cr];Wr&&Rr.push(Wr),v.tables.gsub&&Rr.push(ds.make(v.tables.gsub)),qr&&Rr.push(qr);for(var Vn=Ir((hn=Er(Rr)).encode()),rn=hn.fields,an=!1,Vr=0;Vr<rn.length;Vr+=1)if(rn[Vr].name==="head table"){rn[Vr].value.checkSumAdjustment=2981146554-Vn,an=!0;break}if(an)return hn;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ir};function to(v,j){for(var k=0,E=v.length-1;k<=E;){var L=k+E>>>1,G=v[L].tag;if(G===j)return L;G<j?k=1+L:E=L-1}return-k-1}function Ii(v,j){for(var k=0,E=v.length-1;k<=E;){var L=k+E>>>1,G=v[L];if(G===j)return L;G<j?k=1+L:E=L-1}return-k-1}function Pi(v,j){for(var k=0,E=v.length-1;k<=E;){var L,G=k+E>>>1,W=(L=v[G]).start;if(W===j)return L;W<j?k=1+G:E=G-1}if(0<k)return j>(L=v[k-1]).end?0:L}function Pn(v,j){this.font=v,this.tableName=j}function Ri(v){Pn.call(this,v,"gpos")}function Tn(v){Pn.call(this,v,"gsub")}function ro(v,j,k){for(var E=v.subtables,L=0;L<E.length;L++){var G=E[L];if(G.substFormat===j)return G}if(k)return E.push(k),k}function es(v){for(var j=new ArrayBuffer(v.length),k=new Uint8Array(j),E=0;E<v.length;++E)k[E]=v[E];return j}function ni(v,j){if(!v)throw j}function Ds(v,j,k,E,L){var G=0<(j&E)?(G=v.parseByte(),k+(G=j&L?G:-G)):0<(j&L)?k:k+v.parseShort();return G}function no(v,j,k){var E,L=new Pe.Parser(j,k);if(v.numberOfContours=L.parseShort(),v._xMin=L.parseShort(),v._yMin=L.parseShort(),v._xMax=L.parseShort(),v._yMax=L.parseShort(),0<v.numberOfContours){for(var G=v.endPointIndices=[],W=0;W<v.numberOfContours;W+=1)G.push(L.parseUShort());v.instructionLength=L.parseUShort(),v.instructions=[];for(var se=0;se<v.instructionLength;se+=1)v.instructions.push(L.parseByte());for(var fe=G[G.length-1]+1,de=[],Oe=0;Oe<fe;Oe+=1)if(E=L.parseByte(),de.push(E),0<(8&E))for(var He=L.parseByte(),Ne=0;Ne<He;Ne+=1)de.push(E),Oe+=1;if(B.argument(de.length===fe,"Bad flags."),0<G.length){var _e,ct=[];if(0<fe){for(var Ke=0;Ke<fe;Ke+=1)E=de[Ke],(_e={}).onCurve=!!(1&E),_e.lastPointOfContour=0<=G.indexOf(Ke),ct.push(_e);for(var tt=0,ze=0;ze<fe;ze+=1)E=de[ze],(_e=ct[ze]).x=Ds(L,E,tt,2,16),tt=_e.x;for(var qe=0,Dt=0;Dt<fe;Dt+=1)E=de[Dt],(_e=ct[Dt]).y=Ds(L,E,qe,4,32),qe=_e.y}v.points=ct}else v.points=[]}else if(v.numberOfContours===0)v.points=[];else{v.isComposite=!0,v.points=[],v.components=[];for(var qt=!0;qt;){de=L.parseUShort();var It={glyphIndex:L.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&de)?0<(2&de)?(It.dx=L.parseShort(),It.dy=L.parseShort()):It.matchedPoints=[L.parseUShort(),L.parseUShort()]:0<(2&de)?(It.dx=L.parseChar(),It.dy=L.parseChar()):It.matchedPoints=[L.parseByte(),L.parseByte()],0<(8&de)?It.xScale=It.yScale=L.parseF2Dot14():0<(64&de)?(It.xScale=L.parseF2Dot14(),It.yScale=L.parseF2Dot14()):0<(128&de)&&(It.xScale=L.parseF2Dot14(),It.scale01=L.parseF2Dot14(),It.scale10=L.parseF2Dot14(),It.yScale=L.parseF2Dot14()),v.components.push(It),qt=!!(32&de)}if(256&de){v.instructionLength=L.parseUShort(),v.instructions=[];for(var Lt=0;Lt<v.instructionLength;Lt+=1)v.instructions.push(L.parseByte())}}}function ts(v,j){for(var k=[],E=0;E<v.length;E+=1){var L=v[E],L={x:j.xScale*L.x+j.scale01*L.y+j.dx,y:j.scale10*L.x+j.yScale*L.y+j.dy,onCurve:L.onCurve,lastPointOfContour:L.lastPointOfContour};k.push(L)}return k}function Bo(v){var j=new Y;if(v)for(var k=function(He){for(var Ne=[],_e=[],ct=0;ct<He.length;ct+=1){var Ke=He[ct];_e.push(Ke),Ke.lastPointOfContour&&(Ne.push(_e),_e=[])}return B.argument(_e.length===0,"There are still points left in the current contour."),Ne}(v),E=0;E<k.length;++E){var L,G=k[E],W=G[G.length-1],se=G[0];W.onCurve?j.moveTo(W.x,W.y):se.onCurve?j.moveTo(se.x,se.y):(L={x:.5*(W.x+se.x),y:.5*(W.y+se.y)},j.moveTo(L.x,L.y));for(var fe=0;fe<G.length;++fe){var de,Oe=W,W=se,se=G[(fe+1)%G.length];W.onCurve?j.lineTo(W.x,W.y):(de=se,Oe.onCurve||(W.x,Oe.x,W.y,Oe.y),se.onCurve||(de={x:.5*(W.x+se.x),y:.5*(W.y+se.y)}),j.quadraticCurveTo(W.x,W.y,de.x,de.y))}j.closePath()}return j}function _a(v,j){if(j.isComposite)for(var k=0;k<j.components.length;k+=1){var E=j.components[k],L=v.get(E.glyphIndex);if(L.getPath(),L.points){var G=void 0;if(E.matchedPoints===void 0)G=ts(L.points,E);else{if(E.matchedPoints[0]>j.points.length-1||E.matchedPoints[1]>L.points.length-1)throw Error("Matched points out of range in "+j.name);var W=j.points[E.matchedPoints[0]],se=L.points[E.matchedPoints[1]],E={xScale:E.xScale,scale01:E.scale01,scale10:E.scale10,yScale:E.yScale,dx:0,dy:0},se=ts([se],E)[0];E.dx=W.x-se.x,E.dy=W.y-se.y,G=ts(L.points,E)}j.points=j.points.concat(G)}}return Bo(j.points)}(Ri.prototype=Pn.prototype={searchTag:to,binSearch:Ii,getTable:function(v){var j=this.font.tables[this.tableName];return j=!j&&v?this.font.tables[this.tableName]=this.createDefaultTable():j},getScriptNames:function(){var v=this.getTable();return v?v.scripts.map(function(j){return j.tag}):[]},getDefaultScriptName:function(){var v=this.getTable();if(v){for(var j=!1,k=0;k<v.scripts.length;k++){var E=v.scripts[k].tag;if(E==="DFLT")return E;E==="latn"&&(j=!0)}return j?"latn":void 0}},getScriptTable:function(v,j){var k,E=this.getTable(j);if(E)return k=E.scripts,0<=(E=to(E.scripts,v=v||"DFLT"))?k[E].script:j?(k.splice(-1-E,0,j={tag:v,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),j.script):void 0},getLangSysTable:function(L,j,k){var E,L=this.getScriptTable(L,k);if(L)return j&&j!=="dflt"&&j!=="DFLT"?0<=(E=to(L.langSysRecords,j))?L.langSysRecords[E].langSys:k?(L.langSysRecords.splice(-1-E,0,k={tag:j,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),k.langSys):void 0:L.defaultLangSys},getFeatureTable:function(v,j,k,E){if(v=this.getLangSysTable(v,j,E),v){for(var L,G=v.featureIndexes,W=this.font.tables[this.tableName].features,se=0;se<G.length;se++)if((L=W[G[se]]).tag===k)return L.feature;if(E)return j=W.length,B.assert(j===0||k>=W[j-1].tag,"Features must be added in alphabetical order."),W.push(L={tag:k,feature:{params:0,lookupListIndexes:[]}}),G.push(j),L.feature}},getLookupTables:function(G,j,k,E,L){var G=this.getFeatureTable(G,j,k,L),W=[];if(G){for(var se,fe=G.lookupListIndexes,de=this.font.tables[this.tableName].lookups,Oe=0;Oe<fe.length;Oe++)(se=de[fe[Oe]]).lookupType===E&&W.push(se);if(W.length===0&&L)return j=de.length,de.push(se={lookupType:E,lookupFlag:0,subtables:[],markFilteringSet:void 0}),fe.push(j),[se]}return W},getGlyphClass:function(v,j){switch(v.format){case 1:return v.startGlyph<=j&&j<v.startGlyph+v.classes.length?v.classes[j-v.startGlyph]:0;case 2:var k=Pi(v.ranges,j);return k?k.classId:0}},getCoverageIndex:function(v,j){switch(v.format){case 1:var k=Ii(v.glyphs,j);return 0<=k?k:-1;case 2:return k=Pi(v.ranges,j),k?k.index+j-k.start:-1}},expandCoverage:function(v){if(v.format===1)return v.glyphs;for(var j=[],k=v.ranges,E=0;E<k.length;E++)for(var L=k[E],G=L.start,W=L.end,se=G;se<=W;se++)j.push(se);return j}}).init=function(){var v=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(v)},Ri.prototype.getKerningValue=function(v,j,k){for(var E=0;E<v.length;E++)for(var L=v[E].subtables,G=0;G<L.length;G++){var W=L[G],se=this.getCoverageIndex(W.coverage,j);if(!(se<0))switch(W.posFormat){case 1:for(var fe=W.pairSets[se],de=0;de<fe.length;de++){var Oe=fe[de];if(Oe.secondGlyph===k)return Oe.value1&&Oe.value1.xAdvance||0}break;case 2:var Ne=this.getGlyphClass(W.classDef1,j),He=this.getGlyphClass(W.classDef2,k),Ne=W.classRecords[Ne][He];return Ne.value1&&Ne.value1.xAdvance||0}}return 0},Ri.prototype.getKerningTables=function(v,j){if(this.font.tables.gpos)return this.getLookupTables(v,j,"kern",2)},(Tn.prototype=Pn.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Tn.prototype.getSingle=function(v,j,k){for(var E=[],L=this.getLookupTables(j,k,v,1),G=0;G<L.length;G++)for(var W=L[G].subtables,se=0;se<W.length;se++){var fe=W[se],de=this.expandCoverage(fe.coverage),Oe=void 0;if(fe.substFormat===1)for(var He=fe.deltaGlyphId,Oe=0;Oe<de.length;Oe++){var Ne=de[Oe];E.push({sub:Ne,by:Ne+He})}else{var _e=fe.substitute;for(Oe=0;Oe<de.length;Oe++)E.push({sub:de[Oe],by:_e[Oe]})}}return E},Tn.prototype.getAlternates=function(v,j,k){for(var E=[],L=this.getLookupTables(j,k,v,3),G=0;G<L.length;G++)for(var W=L[G].subtables,se=0;se<W.length;se++)for(var fe=W[se],de=this.expandCoverage(fe.coverage),Oe=fe.alternateSets,He=0;He<de.length;He++)E.push({sub:de[He],by:Oe[He]});return E},Tn.prototype.getLigatures=function(v,j,k){for(var E=[],L=this.getLookupTables(j,k,v,4),G=0;G<L.length;G++)for(var W=L[G].subtables,se=0;se<W.length;se++)for(var fe=W[se],de=this.expandCoverage(fe.coverage),Oe=fe.ligatureSets,He=0;He<de.length;He++)for(var Ne=de[He],_e=Oe[He],ct=0;ct<_e.length;ct++){var Ke=_e[ct];E.push({sub:[Ne].concat(Ke.components),by:Ke.ligGlyph})}return E},Tn.prototype.addSingle=function(v,j,k,E){k=ro(this.getLookupTables(k,E,v,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),B.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format),E=j.sub,v=this.binSearch(k.coverage.glyphs,E),v<0&&(k.coverage.glyphs.splice(v=-1-v,0,E),k.substitute.splice(v,0,0)),k.substitute[v]=j.by},Tn.prototype.addAlternate=function(v,j,k,E){k=ro(this.getLookupTables(k,E,v,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),B.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format),E=j.sub,v=this.binSearch(k.coverage.glyphs,E),v<0&&(k.coverage.glyphs.splice(v=-1-v,0,E),k.alternateSets.splice(v,0,0)),k.alternateSets[v]=j.by},Tn.prototype.addLigature=function(G,fe,se,L){var se=this.getLookupTables(se,L,G,4,!0)[0],L=se.subtables[0],G=(L||(se.subtables[0]=L={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),B.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),fe.sub[0]),W=fe.sub.slice(1),se={ligGlyph:fe.by,components:W},fe=this.binSearch(L.coverage.glyphs,G);if(0<=fe){for(var de=L.ligatureSets[fe],Oe=0;Oe<de.length;Oe++)if(function(He,Ne){var _e=He.length;if(_e===Ne.length){for(var ct=0;ct<_e;ct++)if(He[ct]!==Ne[ct])return;return 1}}(de[Oe].components,W))return;de.push(se)}else L.coverage.glyphs.splice(fe=-1-fe,0,G),L.ligatureSets.splice(fe,0,[se])},Tn.prototype.getFeature=function(v,j,k){if(/ss\d\d/.test(v))return this.getSingle(v,j,k);switch(v){case"aalt":case"salt":return this.getSingle(v,j,k).concat(this.getAlternates(v,j,k));case"dlig":case"liga":case"rlig":return this.getLigatures(v,j,k)}},Tn.prototype.add=function(v,j,k,E){if(/ss\d\d/.test(v))return this.addSingle(v,j,k,E);switch(v){case"aalt":case"salt":return typeof j.by=="number"?this.addSingle(v,j,k,E):this.addAlternate(v,j,k,E);case"dlig":case"liga":case"rlig":return this.addLigature(v,j,k,E)}};var Ls={getPath:Bo,parse:function(v,j,k,E){for(var L=new At.GlyphSet(E),G=0;G<k.length-1;G+=1){var W=k[G];W!==k[G+1]?L.push(G,At.ttfGlyphLoader(E,G,no,v,j+W,_a)):L.push(G,At.glyphLoader(E,G))}return L}};function Di(v){this.font=v,this.getCommands=function(j){return Ls.getPath(j).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function wa(v){return v}function Fo(v){return Math.sign(v)*Math.round(Math.abs(v))}function xa(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function Sa(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function Ca(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function io(v){return Math.sign(v)*Math.floor(Math.abs(v))}function ps(v){var j=this.srPeriod,k=this.srPhase,E=1;return v<0&&(v=-v,E=-1),v+=this.srThreshold-k,v=Math.trunc(v/j)*j,(v+=k)<0?k*E:v*E}var qn={x:1,y:0,axis:"x",distance:function(v,j,k,E){return(k?v.xo:v.x)-(E?j.xo:j.x)},interpolate:function(v,j,k,E){var L,G,W,se,fe,de,Oe;if(!E||E===this)return L=v.xo-j.xo,G=v.xo-k.xo,fe=j.x-j.xo,de=k.x-k.xo,(Oe=(W=Math.abs(L))+(se=Math.abs(G)))===0?void(v.x=v.xo+(fe+de)/2):void(v.x=v.xo+(fe*se+de*W)/Oe);L=E.distance(v,j,!0,!0),G=E.distance(v,k,!0,!0),fe=E.distance(j,j,!1,!0),de=E.distance(k,k,!1,!0),(Oe=(W=Math.abs(L))+(se=Math.abs(G)))===0?qn.setRelative(v,v,(fe+de)/2,E,!0):qn.setRelative(v,v,(fe*se+de*W)/Oe,E,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(v,j,k,E,L){var G,W;E&&E!==this?(G=L?j.xo:j.x,W=L?j.yo:j.y,G+=k*E.x,W+=k*E.y,v.x=G+(v.y-W)/E.normalSlope):v.x=(L?j.xo:j.x)+k},slope:0,touch:function(v){v.xTouched=!0},touched:function(v){return v.xTouched},untouch:function(v){v.xTouched=!1}},fi={x:0,y:1,axis:"y",distance:function(v,j,k,E){return(k?v.yo:v.y)-(E?j.yo:j.y)},interpolate:function(v,j,k,E){var L,G,W,se,fe,de,Oe;if(!E||E===this)return L=v.yo-j.yo,G=v.yo-k.yo,fe=j.y-j.yo,de=k.y-k.yo,(Oe=(W=Math.abs(L))+(se=Math.abs(G)))===0?void(v.y=v.yo+(fe+de)/2):void(v.y=v.yo+(fe*se+de*W)/Oe);L=E.distance(v,j,!0,!0),G=E.distance(v,k,!0,!0),fe=E.distance(j,j,!1,!0),de=E.distance(k,k,!1,!0),(Oe=(W=Math.abs(L))+(se=Math.abs(G)))===0?fi.setRelative(v,v,(fe+de)/2,E,!0):fi.setRelative(v,v,(fe*se+de*W)/Oe,E,!0)},normalSlope:0,setRelative:function(v,j,k,E,L){var G,W;E&&E!==this?(G=L?j.xo:j.x,W=L?j.yo:j.y,G+=k*E.x,W+=k*E.y,v.y=W+E.normalSlope*(v.x-G)):v.y=(L?j.yo:j.y)+k},slope:Number.POSITIVE_INFINITY,touch:function(v){v.yTouched=!0},touched:function(v){return v.yTouched},untouch:function(v){v.yTouched=!1}};function qi(v,j){this.x=v,this.y=j,this.axis=void 0,this.slope=j/v,this.normalSlope=-v/j,Object.freeze(this)}function rs(v,j){var k=Math.sqrt(v*v+j*j);return j/=k,(v/=k)===1&&j===0?qn:v===0&&j===1?fi:new qi(v,j)}function pi(v,j,k,E){this.x=this.xo=Math.round(64*v)/64,this.y=this.yo=Math.round(64*j)/64,this.lastPointOfContour=k,this.onCurve=E,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(qn),Object.freeze(fi),qi.prototype.distance=function(v,j,k,E){return this.x*qn.distance(v,j,k,E)+this.y*fi.distance(v,j,k,E)},qi.prototype.interpolate=function(v,L,G,E){var W=E.distance(v,L,!0,!0),se=E.distance(v,G,!0,!0),L=E.distance(L,L,!1,!0),G=E.distance(G,G,!1,!0),W=Math.abs(W),se=Math.abs(se),fe=W+se;fe===0?this.setRelative(v,v,(L+G)/2,E,!0):this.setRelative(v,v,(L*se+G*W)/fe,E,!0)},qi.prototype.setRelative=function(v,G,fe,de,se){var W=se?G.xo:G.x,se=se?G.yo:G.y,G=W+fe*(de=de||this).x,W=se+fe*de.y,se=de.normalSlope,fe=this.slope,de=v.x,Oe=v.y;v.x=(fe*de-se*G+W-Oe)/(fe-se),v.y=fe*(v.x-de)+Oe},qi.prototype.touch=function(v){v.xTouched=!0,v.yTouched=!0},pi.prototype.nextTouched=function(v){for(var j=this.nextPointOnContour;!v.touched(j)&&j!==this;)j=j.nextPointOnContour;return j},pi.prototype.prevTouched=function(v){for(var j=this.prevPointOnContour;!v.touched(j)&&j!==this;)j=j.prevPointOnContour;return j};var $i=Object.freeze(new pi(0,0)),ja={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function mi(v,j){switch(this.env=v,this.stack=[],this.prog=j,v){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=qn,this.round=Fo}}function Ns(v){for(var j=v.tZone=new Array(v.gZone.length),k=0;k<j.length;k++)j[k]=new pi(0,0)}function ns(v,j){var k,E=v.prog,L=v.ip,G=1;do if((k=E[++L])===88)G++;else if(k===89)G--;else if(k===64)L+=E[L+1]+1;else if(k===65)L+=2*E[L+1]+1;else if(176<=k&&k<=183)L+=k-176+1;else if(184<=k&&k<=191)L+=2*(k-184+1);else if(j&&G===1&&k===27)break;while(0<G);v.ip=L}function so(v,j){c.DEBUG&&console.log(j.step,"SVTCA["+v.axis+"]"),j.fv=j.pv=j.dpv=v}function is(v,j){c.DEBUG&&console.log(j.step,"SPVTCA["+v.axis+"]"),j.pv=j.dpv=v}function Uo(v,j){c.DEBUG&&console.log(j.step,"SFVTCA["+v.axis+"]"),j.fv=v}function Vo(v,j){var k,L=j.stack,E=L.pop(),L=L.pop(),G=j.z2[E],W=j.z1[L];c.DEBUG&&console.log("SPVTL["+v+"]",E,L),E=v?(k=G.y-W.y,W.x-G.x):(k=W.x-G.x,W.y-G.y),j.pv=j.dpv=rs(k,E)}function Go(v,j){var k,L=j.stack,E=L.pop(),L=L.pop(),G=j.z2[E],W=j.z1[L];c.DEBUG&&console.log("SFVTL["+v+"]",E,L),E=v?(k=G.y-W.y,W.x-G.x):(k=W.x-G.x,W.y-G.y),j.fv=rs(k,E)}function T(v){c.DEBUG&&console.log(v.step,"POP[]"),v.stack.pop()}function A(v,j){var k=j.stack.pop(),E=j.z0[k],L=j.fv,G=j.pv,W=(c.DEBUG&&console.log(j.step,"MDAP["+v+"]",k),G.distance(E,$i));v&&(W=j.round(W)),L.setRelative(E,$i,W,G),L.touch(E),j.rp0=j.rp1=k}function N(v,j){var k,E,L,G=j.z2,W=G.length-2;c.DEBUG&&console.log(j.step,"IUP["+v.axis+"]");for(var se=0;se<W;se++)k=G[se],v.touched(k)||(E=k.prevTouched(v))!==k&&(E===(L=k.nextTouched(v))&&v.setRelative(k,k,v.distance(E,E,!1,!0),v,!0),v.interpolate(k,E,L,v))}function V(v,j){for(var k=j.stack,E=v?j.rp1:j.rp2,L=(v?j.z0:j.z1)[E],G=j.fv,W=j.pv,se=j.loop,fe=j.z2;se--;){var de=k.pop(),Oe=fe[de],He=W.distance(L,L,!1,!0);G.setRelative(Oe,Oe,He,W),G.touch(Oe),c.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-se)+": ":"")+"SHP["+(v?"rp1":"rp2")+"]",de)}j.loop=1}function te(v,j){for(var k=j.stack,W=v?j.rp1:j.rp2,E=(v?j.z0:j.z1)[W],L=j.fv,G=j.pv,W=k.pop(),se=j.z2[j.contours[W]],fe=se,de=(c.DEBUG&&console.log(j.step,"SHC["+v+"]",W),G.distance(E,E,!1,!0));fe!==E&&L.setRelative(fe,fe,de,G),(fe=fe.nextPointOnContour)!==se;);}function ne(v,j){var k,E,se=j.stack,L=v?j.rp1:j.rp2,L=(v?j.z0:j.z1)[L],G=j.fv,W=j.pv,se=se.pop();switch(c.DEBUG&&console.log(j.step,"SHZ["+v+"]",se),se){case 0:k=j.tZone;break;case 1:k=j.gZone;break;default:throw new Error("Invalid zone")}for(var fe=W.distance(L,L,!1,!0),de=k.length-2,Oe=0;Oe<de;Oe++)E=k[Oe],G.setRelative(E,E,fe,W)}function ue(v,j){var E=j.stack,k=E.pop()/64,E=E.pop(),L=j.z1[E],G=j.z0[j.rp0],W=j.fv,se=j.pv;W.setRelative(L,G,k,se),W.touch(L),c.DEBUG&&console.log(j.step,"MSIRP["+v+"]",k,E),j.rp1=j.rp0,j.rp2=E,v&&(j.rp0=E)}function Ae(v,j){var k=j.stack,se=k.pop(),k=k.pop(),E=j.z0[k],L=j.fv,G=j.pv,W=j.cvt[se],se=(c.DEBUG&&console.log(j.step,"MIAP["+v+"]",se,"(",W,")",k),G.distance(E,$i));v&&(Math.abs(se-W)<j.cvCutIn&&(se=W),se=j.round(se)),L.setRelative(E,$i,se,G),j.zp0===0&&(E.xo=E.x,E.yo=E.y),L.touch(E),j.rp0=j.rp1=k}function Ce(v,j){var k=j.stack,E=k.pop(),L=j.z2[E];c.DEBUG&&console.log(j.step,"GC["+v+"]",E),k.push(64*j.dpv.distance(L,$i,v,!1))}function Ve(v,j){var E=j.stack,k=E.pop(),E=E.pop(),L=j.z1[k],G=j.z0[E],G=j.dpv.distance(G,L,v,v);c.DEBUG&&console.log(j.step,"MD["+v+"]",k,E,"->",G),j.stack.push(Math.round(64*G))}function et(v,j){var k=j.stack,E=k.pop(),L=j.fv,G=j.pv,W=j.ppem,se=j.deltaBase+16*(v-1),fe=j.deltaShift,de=j.z0;c.DEBUG&&console.log(j.step,"DELTAP["+v+"]",E,k);for(var Oe=0;Oe<E;Oe++){var He=k.pop(),Ne=k.pop();se+((240&Ne)>>4)===W&&(0<=(Ne=(15&Ne)-8)&&Ne++,c.DEBUG&&console.log(j.step,"DELTAPFIX",He,"by",Ne*fe),He=de[He],L.setRelative(He,He,Ne*fe,G))}}function vt(v,j){var k=j.stack,E=k.pop();c.DEBUG&&console.log(j.step,"ROUND[]"),k.push(64*j.round(E/64))}function Qe(v,j){var k=j.stack,E=k.pop(),L=j.ppem,G=j.deltaBase+16*(v-1),W=j.deltaShift;c.DEBUG&&console.log(j.step,"DELTAC["+v+"]",E,k);for(var se=0;se<E;se++){var fe=k.pop(),de=k.pop();G+((240&de)>>4)===L&&(0<=(de=(15&de)-8)&&de++,de=de*W,c.DEBUG&&console.log(j.step,"DELTACFIX",fe,"by",de),j.cvt[fe]+=de)}}function it(v,j){var k,L=j.stack,E=L.pop(),L=L.pop(),G=j.z2[E],W=j.z1[L];c.DEBUG&&console.log(j.step,"SDPVTL["+v+"]",E,L),E=v?(k=G.y-W.y,W.x-G.x):(k=W.x-G.x,W.y-G.y),j.dpv=rs(k,E)}function Rt(v,j){var k=j.stack,E=j.prog,L=j.ip;c.DEBUG&&console.log(j.step,"PUSHB["+v+"]");for(var G=0;G<v;G++)k.push(E[++L]);j.ip=L}function Xt(v,j){var k=j.ip,E=j.prog,L=j.stack;c.DEBUG&&console.log(j.ip,"PUSHW["+v+"]");for(var G=0;G<v;G++){var W=E[++k]<<8|E[++k];32768&W&&(W=-(1+(65535^W))),L.push(W)}j.ip=k}function ut(v,j,k,E,L,G){var W,se,de=G.stack,fe=v&&de.pop(),de=de.pop(),Oe=G.rp0,Oe=G.z0[Oe],He=G.z1[de],Ne=G.minDis,_e=G.fv,ct=G.dpv,Ke=W=ct.distance(He,Oe,!0,!0),tt=0<=Ke?1:-1;Ke=Math.abs(Ke),v&&(se=G.cvt[fe],E&&Math.abs(Ke-se)<G.cvCutIn&&(Ke=se)),k&&Ke<Ne&&(Ke=Ne),E&&(Ke=G.round(Ke)),_e.setRelative(He,Oe,tt*Ke,ct),_e.touch(He),c.DEBUG&&console.log(G.step,(v?"MIRP[":"MDRP[")+(j?"M":"m")+(k?">":"_")+(E?"R":"_")+(L===0?"Gr":L===1?"Bl":L===2?"Wh":"")+"]",v?fe+"("+G.cvt[fe]+","+se+")":"",de,"(d =",W,"->",tt*Ke,")"),G.rp1=G.rp0,G.rp2=de,j&&(G.rp0=de)}Di.prototype.exec=function(v,j){if(typeof j!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var k=this.font,E=this._prepState;if(!E||E.ppem!==j){var L=this._fpgmState;if(!L){mi.prototype=ja,(L=this._fpgmState=new mi("fpgm",k.tables.fpgm)).funcs=[],L.font=k,c.DEBUG&&(console.log("---EXEC FPGM---"),L.step=-1);try{kn(L)}catch(de){return console.log("Hinting error in FPGM:"+de),void(this._errorState=3)}}mi.prototype=L,(E=this._prepState=new mi("prep",k.tables.prep)).ppem=j;var G=k.tables.cvt;if(G)for(var W=E.cvt=new Array(G.length),se=j/k.unitsPerEm,fe=0;fe<G.length;fe++)W[fe]=G[fe]*se;else E.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),E.step=-1);try{kn(E)}catch(de){this._errorState<2&&console.log("Hinting error in PREP:"+de),this._errorState=2}}if(!(1<this._errorState))try{return _n(v,E)}catch(de){this._errorState<1&&(console.log("Hinting error:"+de),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var _n=function(v,j){var k=j.ppem/j.font.unitsPerEm,E=k,L=v.components;if(mi.prototype=j,L){for(var G=j.font,W=[],se=[],fe=0;fe<L.length;fe++){var de=L[fe],Oe=G.glyphs.get(de.glyphIndex),He=new mi("glyf",Oe.instructions);c.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),He.step=-1),gn(Oe,He,k,E);for(var Ne=Math.round(de.dx*k),_e=Math.round(de.dy*E),ct=He.gZone,Ke=He.contours,tt=0;tt<ct.length;tt++){var ze=ct[tt];ze.xTouched=ze.yTouched=!1,ze.xo=ze.x=ze.x+Ne,ze.yo=ze.y=ze.y+_e}var qe=W.length;W.push.apply(W,ct);for(var Dt=0;Dt<Ke.length;Dt++)se.push(Ke[Dt]+qe)}v.instructions&&!He.inhibitGridFit&&((He=new mi("glyf",v.instructions)).gZone=He.z0=He.z1=He.z2=W,He.contours=se,W.push(new pi(0,0),new pi(Math.round(v.advanceWidth*k),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),kn(He),W.length-=2)}else He=new mi("glyf",v.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),gn(v,He,k,E),W=He.gZone;return W},gn=function(v,j,k,E){for(var L,G,W,se=v.points||[],fe=se.length,de=j.gZone=j.z0=j.z1=j.z2=[],Oe=j.contours=[],He=0;He<fe;He++)L=se[He],de[He]=new pi(L.x*k,L.y*E,L.lastPointOfContour,L.onCurve);for(var Ne=0;Ne<fe;Ne++)L=de[Ne],G||(G=L,Oe.push(Ne)),L.lastPointOfContour?((L.nextPointOnContour=G).prevPointOnContour=L,G=void 0):(W=de[Ne+1],(L.nextPointOnContour=W).prevPointOnContour=L);if(!j.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",j.stack);for(var _e=0;_e<fe;_e++)console.log(_e,de[_e].x,de[_e].y)}if(de.push(new pi(0,0),new pi(Math.round(v.advanceWidth*k),0)),kn(j),de.length-=2,c.DEBUG){console.log("FINISHED GLYPH",j.stack);for(var ct=0;ct<fe;ct++)console.log(ct,de[ct].x,de[ct].y)}}},kn=function(v){var j=v.prog;if(j){var k,E=j.length;for(v.ip=0;v.ip<E;v.ip++){if(c.DEBUG&&v.step++,!(k=Nr[j[v.ip]]))throw new Error("unknown instruction: 0x"+Number(j[v.ip]).toString(16));k(v)}}},Nr=[so.bind(void 0,fi),so.bind(void 0,qn),is.bind(void 0,fi),is.bind(void 0,qn),Uo.bind(void 0,fi),Uo.bind(void 0,qn),Vo.bind(void 0,0),Vo.bind(void 0,1),Go.bind(void 0,0),Go.bind(void 0,1),function(v){var j=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"SPVFS[]",j,k),v.pv=v.dpv=rs(k,j)},function(v){var j=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"SPVFS[]",j,k),v.fv=rs(k,j)},function(v){var j=v.stack,k=v.pv;c.DEBUG&&console.log(v.step,"GPV[]"),j.push(16384*k.x),j.push(16384*k.y)},function(v){var j=v.stack,k=v.fv;c.DEBUG&&console.log(v.step,"GFV[]"),j.push(16384*k.x),j.push(16384*k.y)},function(v){v.fv=v.pv,c.DEBUG&&console.log(v.step,"SFVTPV[]")},function(j){var k=(W=j.stack).pop(),E=W.pop(),L=W.pop(),G=W.pop(),W=W.pop(),fe=j.z0,Oe=j.z1,se=fe[k],fe=fe[E],de=Oe[L],Oe=Oe[G],j=j.z2[W],k=(c.DEBUG&&console.log("ISECT[], ",k,E,L,G,W),se.x),E=se.y,L=fe.x,G=fe.y,W=de.x,se=de.y,fe=Oe.x,de=Oe.y,Oe=(k-L)*(se-de)-(E-G)*(W-fe),He=k*G-E*L,Ne=W*de-se*fe;j.x=(He*(W-fe)-Ne*(k-L))/Oe,j.y=(He*(se-de)-Ne*(E-G))/Oe},function(v){v.rp0=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP0[]",v.rp0)},function(v){v.rp1=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP1[]",v.rp1)},function(v){v.rp2=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP2[]",v.rp2)},function(v){var j=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP0[]",j),v.zp0=j){case 0:v.tZone||Ns(v),v.z0=v.tZone;break;case 1:v.z0=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var j=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP1[]",j),v.zp1=j){case 0:v.tZone||Ns(v),v.z1=v.tZone;break;case 1:v.z1=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var j=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP2[]",j),v.zp2=j){case 0:v.tZone||Ns(v),v.z2=v.tZone;break;case 1:v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var j=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZPS[]",j),v.zp0=v.zp1=v.zp2=j){case 0:v.tZone||Ns(v),v.z0=v.z1=v.z2=v.tZone;break;case 1:v.z0=v.z1=v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){v.loop=v.stack.pop(),c.DEBUG&&console.log(v.step,"SLOOP[]",v.loop)},function(v){c.DEBUG&&console.log(v.step,"RTG[]"),v.round=Fo},function(v){c.DEBUG&&console.log(v.step,"RTHG[]"),v.round=Sa},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SMD[]",j),v.minDis=j/64},function(v){c.DEBUG&&console.log(v.step,"ELSE[]"),ns(v,!1)},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"JMPR[]",j),v.ip+=j-1},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SCVTCI[]",j),v.cvCutIn=j/64},void 0,void 0,function(v){var j=v.stack;c.DEBUG&&console.log(v.step,"DUP[]"),j.push(j[j.length-1])},T,function(v){c.DEBUG&&console.log(v.step,"CLEAR[]"),v.stack.length=0},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"SWAP[]"),j.push(k),j.push(E)},function(v){var j=v.stack;c.DEBUG&&console.log(v.step,"DEPTH[]"),j.push(j.length)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"CINDEX[]",k),j.push(j[j.length-k])},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"MINDEX[]",k),j.push(j.splice(j.length-k,1)[0])},void 0,void 0,void 0,function(v){var j=(E=v.stack).pop(),k=E.pop(),E=(c.DEBUG&&console.log(v.step,"LOOPCALL[]",j,k),v.ip),L=v.prog;v.prog=v.funcs[j];for(var G=0;G<k;G++)kn(v),c.DEBUG&&console.log(++v.step,G+1<k?"next loopcall":"done loopcall",G);v.ip=E,v.prog=L},function(v){var j=v.stack.pop(),k=(c.DEBUG&&console.log(v.step,"CALL[]",j),v.ip),E=v.prog;v.prog=v.funcs[j],kn(v),v.ip=k,v.prog=E,c.DEBUG&&console.log(++v.step,"returning from",j)},function(v){if(v.env!=="fpgm")throw new Error("FDEF not allowed here");var E=v.stack,j=v.prog,k=v.ip,E=E.pop(),L=k;for(c.DEBUG&&console.log(v.step,"FDEF[]",E);j[++k]!==45;);v.ip=k,v.funcs[E]=j.slice(L+1,k)},void 0,A.bind(void 0,0),A.bind(void 0,1),N.bind(void 0,fi),N.bind(void 0,qn),V.bind(void 0,0),V.bind(void 0,1),te.bind(void 0,0),te.bind(void 0,1),ne.bind(void 0,0),ne.bind(void 0,1),function(v){for(var j=v.stack,k=v.loop,E=v.fv,L=j.pop()/64,G=v.z2;k--;){var W=j.pop(),se=G[W];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-k)+": ":"")+"SHPIX[]",W,L),E.setRelative(se,se,L),E.touch(se)}v.loop=1},function(v){for(var j=v.stack,k=v.rp1,E=v.rp2,L=v.loop,G=v.z0[k],W=v.z1[E],se=v.fv,fe=v.dpv,de=v.z2;L--;){var Oe=j.pop(),He=de[Oe];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"IP[]",Oe,k,"<->",E),se.interpolate(He,G,W,fe),se.touch(He)}v.loop=1},ue.bind(void 0,0),ue.bind(void 0,1),function(v){for(var j=v.stack,k=v.rp0,E=v.z0[k],L=v.loop,G=v.fv,W=v.pv,se=v.z1;L--;){var fe=j.pop(),de=se[fe];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"ALIGNRP[]",fe),G.setRelative(de,E,0,W),G.touch(de)}v.loop=1},function(v){c.DEBUG&&console.log(v.step,"RTDG[]"),v.round=xa},Ae.bind(void 0,0),Ae.bind(void 0,1),function(v){var j=v.prog,k=v.ip,E=v.stack,L=j[++k];c.DEBUG&&console.log(v.step,"NPUSHB[]",L);for(var G=0;G<L;G++)E.push(j[++k]);v.ip=k},function(v){var j=v.ip,k=v.prog,E=v.stack,L=k[++j];c.DEBUG&&console.log(v.step,"NPUSHW[]",L);for(var G=0;G<L;G++){var W=k[++j]<<8|k[++j];32768&W&&(W=-(1+(65535^W))),E.push(W)}v.ip=j},function(v){var E=v.stack,j=(j=v.store)||(v.store=[]),k=E.pop(),E=E.pop();c.DEBUG&&console.log(v.step,"WS",k,E),j[E]=k},function(L){var j=L.stack,k=L.store,E=j.pop(),L=(c.DEBUG&&console.log(L.step,"RS",E),k&&k[E]||0);j.push(L)},function(v){var j=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"WCVTP",j,k),v.cvt[k]=j/64},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"RCVT",k),j.push(64*v.cvt[k])},Ce.bind(void 0,0),Ce.bind(void 0,1),void 0,Ve.bind(void 0,0),Ve.bind(void 0,1),function(v){c.DEBUG&&console.log(v.step,"MPPEM[]"),v.stack.push(v.ppem)},void 0,function(v){c.DEBUG&&console.log(v.step,"FLIPON[]"),v.autoFlip=!0},void 0,void 0,function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"LT[]",k,E),j.push(E<k?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"LTEQ[]",k,E),j.push(E<=k?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"GT[]",k,E),j.push(k<E?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"GTEQ[]",k,E),j.push(k<=E?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"EQ[]",k,E),j.push(k===E?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"NEQ[]",k,E),j.push(k!==E?1:0)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"ODD[]",k),j.push(Math.trunc(k)%2?1:0)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"EVEN[]",k),j.push(Math.trunc(k)%2?0:1)},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"IF[]",j),j||(ns(v,!0),c.DEBUG&&console.log(v.step,"EIF[]"))},function(v){c.DEBUG&&console.log(v.step,"EIF[]")},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"AND[]",k,E),j.push(k&&E?1:0)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"OR[]",k,E),j.push(k||E?1:0)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"NOT[]",k),j.push(k?0:1)},et.bind(void 0,1),function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SDB[]",j),v.deltaBase=j},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SDS[]",j),v.deltaShift=Math.pow(.5,j)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"ADD[]",k,E),j.push(E+k)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"SUB[]",k,E),j.push(E-k)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"DIV[]",k,E),j.push(64*E/k)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"MUL[]",k,E),j.push(E*k/64)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"ABS[]",k),j.push(Math.abs(k))},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"NEG[]",k),j.push(-k)},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"FLOOR[]",k),j.push(64*Math.floor(k/64))},function(v){var j=v.stack,k=j.pop();c.DEBUG&&console.log(v.step,"CEILING[]",k),j.push(64*Math.ceil(k/64))},vt.bind(void 0,0),vt.bind(void 0,1),vt.bind(void 0,2),vt.bind(void 0,3),void 0,void 0,void 0,void 0,function(v){var j=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"WCVTF[]",j,k),v.cvt[k]=j*v.ppem/v.font.unitsPerEm},et.bind(void 0,2),et.bind(void 0,3),Qe.bind(void 0,1),Qe.bind(void 0,2),Qe.bind(void 0,3),function(v){var j,k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SROUND[]",k),v.round=ps,192&k){case 0:j=.5;break;case 64:j=1;break;case 128:j=2;break;default:throw new Error("invalid SROUND value")}switch(v.srPeriod=j,48&k){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*j;break;case 32:v.srPhase=.5*j;break;case 48:v.srPhase=.75*j;break;default:throw new Error("invalid SROUND value")}v.srThreshold=(k&=15)===0?0:(k/8-.5)*j},function(v){var j,k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"S45ROUND[]",k),v.round=ps,192&k){case 0:j=Math.sqrt(2)/2;break;case 64:j=Math.sqrt(2);break;case 128:j=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(v.srPeriod=j,48&k){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*j;break;case 32:v.srPhase=.5*j;break;case 48:v.srPhase=.75*j;break;default:throw new Error("invalid S45ROUND value")}v.srThreshold=(k&=15)===0?0:(k/8-.5)*j},void 0,void 0,function(v){c.DEBUG&&console.log(v.step,"ROFF[]"),v.round=wa},void 0,function(v){c.DEBUG&&console.log(v.step,"RUTG[]"),v.round=Ca},function(v){c.DEBUG&&console.log(v.step,"RDTG[]"),v.round=io},T,T,void 0,void 0,void 0,void 0,void 0,function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SCANCTRL[]",j)},it.bind(void 0,0),it.bind(void 0,1),function(v){var j=v.stack,k=j.pop(),E=0;c.DEBUG&&console.log(v.step,"GETINFO[]",k),1&k&&(E=35),32&k&&(E|=4096),j.push(E)},void 0,function(v){var j=v.stack,k=j.pop(),E=j.pop(),L=j.pop();c.DEBUG&&console.log(v.step,"ROLL[]"),j.push(E),j.push(k),j.push(L)},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"MAX[]",k,E),j.push(Math.max(E,k))},function(v){var j=v.stack,k=j.pop(),E=j.pop();c.DEBUG&&console.log(v.step,"MIN[]",k,E),j.push(Math.min(E,k))},function(v){var j=v.stack.pop();c.DEBUG&&console.log(v.step,"SCANTYPE[]",j)},function(v){var j=v.stack.pop(),k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"INSTCTRL[]",j,k),j){case 1:return void(v.inhibitGridFit=!!k);case 2:return void(v.ignoreCvt=!!k);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Rt.bind(void 0,1),Rt.bind(void 0,2),Rt.bind(void 0,3),Rt.bind(void 0,4),Rt.bind(void 0,5),Rt.bind(void 0,6),Rt.bind(void 0,7),Rt.bind(void 0,8),Xt.bind(void 0,1),Xt.bind(void 0,2),Xt.bind(void 0,3),Xt.bind(void 0,4),Xt.bind(void 0,5),Xt.bind(void 0,6),Xt.bind(void 0,7),Xt.bind(void 0,8),ut.bind(void 0,0,0,0,0,0),ut.bind(void 0,0,0,0,0,1),ut.bind(void 0,0,0,0,0,2),ut.bind(void 0,0,0,0,0,3),ut.bind(void 0,0,0,0,1,0),ut.bind(void 0,0,0,0,1,1),ut.bind(void 0,0,0,0,1,2),ut.bind(void 0,0,0,0,1,3),ut.bind(void 0,0,0,1,0,0),ut.bind(void 0,0,0,1,0,1),ut.bind(void 0,0,0,1,0,2),ut.bind(void 0,0,0,1,0,3),ut.bind(void 0,0,0,1,1,0),ut.bind(void 0,0,0,1,1,1),ut.bind(void 0,0,0,1,1,2),ut.bind(void 0,0,0,1,1,3),ut.bind(void 0,0,1,0,0,0),ut.bind(void 0,0,1,0,0,1),ut.bind(void 0,0,1,0,0,2),ut.bind(void 0,0,1,0,0,3),ut.bind(void 0,0,1,0,1,0),ut.bind(void 0,0,1,0,1,1),ut.bind(void 0,0,1,0,1,2),ut.bind(void 0,0,1,0,1,3),ut.bind(void 0,0,1,1,0,0),ut.bind(void 0,0,1,1,0,1),ut.bind(void 0,0,1,1,0,2),ut.bind(void 0,0,1,1,0,3),ut.bind(void 0,0,1,1,1,0),ut.bind(void 0,0,1,1,1,1),ut.bind(void 0,0,1,1,1,2),ut.bind(void 0,0,1,1,1,3),ut.bind(void 0,1,0,0,0,0),ut.bind(void 0,1,0,0,0,1),ut.bind(void 0,1,0,0,0,2),ut.bind(void 0,1,0,0,0,3),ut.bind(void 0,1,0,0,1,0),ut.bind(void 0,1,0,0,1,1),ut.bind(void 0,1,0,0,1,2),ut.bind(void 0,1,0,0,1,3),ut.bind(void 0,1,0,1,0,0),ut.bind(void 0,1,0,1,0,1),ut.bind(void 0,1,0,1,0,2),ut.bind(void 0,1,0,1,0,3),ut.bind(void 0,1,0,1,1,0),ut.bind(void 0,1,0,1,1,1),ut.bind(void 0,1,0,1,1,2),ut.bind(void 0,1,0,1,1,3),ut.bind(void 0,1,1,0,0,0),ut.bind(void 0,1,1,0,0,1),ut.bind(void 0,1,1,0,0,2),ut.bind(void 0,1,1,0,0,3),ut.bind(void 0,1,1,0,1,0),ut.bind(void 0,1,1,0,1,1),ut.bind(void 0,1,1,0,1,2),ut.bind(void 0,1,1,0,1,3),ut.bind(void 0,1,1,1,0,0),ut.bind(void 0,1,1,1,0,1),ut.bind(void 0,1,1,1,0,2),ut.bind(void 0,1,1,1,0,3),ut.bind(void 0,1,1,1,1,0),ut.bind(void 0,1,1,1,1,1),ut.bind(void 0,1,1,1,1,2),ut.bind(void 0,1,1,1,1,3)],nr=Array.from||function(v){return v.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function hr(v){(v=v||{}).empty||(ni(v.familyName,"When creating a new Font object, familyName is required."),ni(v.styleName,"When creating a new Font object, styleName is required."),ni(v.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ni(v.ascender,"When creating a new Font object, ascender is required."),ni(v.descender,"When creating a new Font object, descender is required."),ni(v.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:v.familyName||" "},fontSubfamily:{en:v.styleName||" "},fullName:{en:v.fullName||v.familyName+" "+v.styleName},postScriptName:{en:v.postScriptName||(v.familyName+v.styleName).replace(/\s/g,"")},designer:{en:v.designer||" "},designerURL:{en:v.designerURL||" "},manufacturer:{en:v.manufacturer||" "},manufacturerURL:{en:v.manufacturerURL||" "},license:{en:v.license||" "},licenseURL:{en:v.licenseURL||" "},version:{en:v.version||"Version 0.1"},description:{en:v.description||" "},copyright:{en:v.copyright||" "},trademark:{en:v.trademark||" "}},this.unitsPerEm=v.unitsPerEm||1e3,this.ascender=v.ascender,this.descender=v.descender,this.createdTimestamp=v.createdTimestamp,this.tables={os2:{usWeightClass:v.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:v.widthClass||this.usWidthClasses.MEDIUM,fsSelection:v.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new At.GlyphSet(this,v.glyphs||[]),this.encoding=new Re(this),this.position=new Ri(this),this.substitution=new Tn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Di(this):void 0)}})}function Cr(v,j){var k,E=JSON.stringify(v),L=256;for(k in j){var G=parseInt(k);if(G&&!(G<256)){if(JSON.stringify(j[k])===E)return G;L<=G&&(L=G+1)}}return j[L]=v,L}hr.prototype.hasChar=function(v){return this.encoding.charToGlyphIndex(v)!==null},hr.prototype.charToGlyphIndex=function(v){return this.encoding.charToGlyphIndex(v)},hr.prototype.charToGlyph=function(v){return v=this.charToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},hr.prototype.stringToGlyphs=function(v,j){j=j||this.defaultRenderOptions;for(var k=nr(v),E=[],L=0;L<k.length;L+=1){var G=k[L];E.push(this.charToGlyphIndex(G))}var W=E.length;if(j.features){var v=j.script||this.substitution.getDefaultScriptName(),se=[];j.features.liga&&(se=se.concat(this.substitution.getFeature("liga",v,j.language))),j.features.rlig&&(se=se.concat(this.substitution.getFeature("rlig",v,j.language)));for(var fe=0;fe<W;fe+=1)for(var de=0;de<se.length;de++){for(var Oe=se[de],He=Oe.sub,Ne=He.length,_e=0;_e<Ne&&He[_e]===E[fe+_e];)_e++;_e===Ne&&(E.splice(fe,Ne,Oe.by),W=W-Ne+1)}}for(var ct=new Array(W),Ke=this.glyphs.get(0),tt=0;tt<W;tt+=1)ct[tt]=this.glyphs.get(E[tt])||Ke;return ct},hr.prototype.nameToGlyphIndex=function(v){return this.glyphNames.nameToGlyphIndex(v)},hr.prototype.nameToGlyph=function(v){return v=this.nameToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},hr.prototype.glyphIndexToName=function(v){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(v):""},hr.prototype.getKerningValue=function(v,j){v=v.index||v,j=j.index||j;var k=this.position.defaultKerningTables;return k?this.position.getKerningValue(k,v,j):this.kerningPairs[v+","+j]||0},hr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},hr.prototype.forEachGlyph=function(v,j,k,E,L,G){j=j!==void 0?j:0,k=k!==void 0?k:0,L=L||this.defaultRenderOptions;var W,se=1/this.unitsPerEm*(E=E!==void 0?E:72),fe=this.stringToGlyphs(v,L);L.kerning&&(v=L.script||this.position.getDefaultScriptName(),W=this.position.getKerningTables(v,L.language));for(var de=0;de<fe.length;de+=1){var Oe=fe[de];G.call(this,Oe,j,k,E,L),Oe.advanceWidth&&(j+=Oe.advanceWidth*se),L.kerning&&de<fe.length-1&&(j+=(W?this.position.getKerningValue(W,Oe.index,fe[de+1].index):this.getKerningValue(Oe,fe[de+1]))*se),L.letterSpacing?j+=L.letterSpacing*E:L.tracking&&(j+=L.tracking/1e3*E)}return j},hr.prototype.getPath=function(v,j,k,E,L){var G=new Y;return this.forEachGlyph(v,j,k,E,L,function(W,se,fe,de){W=W.getPath(se,fe,de,L,this),G.extend(W)}),G},hr.prototype.getPaths=function(v,j,k,E,L){var G=[];return this.forEachGlyph(v,j,k,E,L,function(W,se,fe,de){W=W.getPath(se,fe,de,L,this),G.push(W)}),G},hr.prototype.getAdvanceWidth=function(v,j,k){return this.forEachGlyph(v,0,0,j,k,function(){})},hr.prototype.draw=function(v,j,k,E,L,G){this.getPath(j,k,E,L,G).draw(v)},hr.prototype.drawPoints=function(v,j,k,E,L,G){this.forEachGlyph(j,k,E,L,G,function(W,se,fe,de){W.drawPoints(v,se,fe,de)})},hr.prototype.drawMetrics=function(v,j,k,E,L,G){this.forEachGlyph(j,k,E,L,G,function(W,se,fe,de){W.drawMetrics(v,se,fe,de)})},hr.prototype.getEnglishName=function(v){if(v=this.names[v],v)return v.en},hr.prototype.validate=function(){var v=this;function j(k){k=v.getEnglishName(k),k&&k.trim().length}j("fontFamily"),j("weightName"),j("manufacturer"),j("copyright"),j("version"),this.unitsPerEm},hr.prototype.toTables=function(){return ba.fontToTable(this)},hr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},hr.prototype.toArrayBuffer=function(){for(var v=this.toTables().encode(),j=new ArrayBuffer(v.length),k=new Uint8Array(j),E=0;E<v.length;E++)k[E]=v[E];return j},hr.prototype.download=function(v){var j=this.getEnglishName("fontFamily"),k=this.getEnglishName("fontSubfamily"),E=(v=v||j.replace(/\s/g,"")+"-"+k+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,E.byteLength,function(L){L.root.getFile(v,{create:!0},function(G){G.createWriter(function(W){var se=new DataView(E),se=new Blob([se],{type:"font/opentype"});W.write(se),W.addEventListener("writeend",function(){location.href=G.toURL()},!1)})})},function(L){throw new Error(L.name+": "+L.message)})):(j=r("fs"),k=function(L){for(var G=new o(L.byteLength),W=new Uint8Array(L),se=0;se<G.length;++se)G[se]=W[se];return G}(E),j.writeFileSync(v,k))},hr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},hr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},hr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var on={make:function(v,j){var k=new Ge.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:v.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:v.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*v.axes.length}]);k.offsetToData=k.sizeOf();for(var E,L,G,W=0;W<v.axes.length;W++)k.fields=k.fields.concat((E=W,L=v.axes[W],G=j,G=Cr(L.name,j),[{name:"tag_"+E,type:"TAG",value:L.tag},{name:"minValue_"+E,type:"FIXED",value:L.minValue<<16},{name:"defaultValue_"+E,type:"FIXED",value:L.defaultValue<<16},{name:"maxValue_"+E,type:"FIXED",value:L.maxValue<<16},{name:"flags_"+E,type:"USHORT",value:0},{name:"nameID_"+E,type:"USHORT",value:G}]));for(var se=0;se<v.instances.length;se++)k.fields=k.fields.concat(function(fe,de,Oe,He){for(var Ne=[{name:"nameID_"+fe,type:"USHORT",value:Cr(de.name,He)},{name:"flags_"+fe,type:"USHORT",value:0}],_e=0;_e<Oe.length;++_e){var ct=Oe[_e].tag;Ne.push({name:"axis_"+fe+" "+ct,type:"FIXED",value:de.coordinates[ct]<<16})}return Ne}(se,v.instances[se],v.axes,j));return k},parse:function(v,j,k){for(var E,L,G,W,se=new Pe.Parser(v,j),fe=se.parseULong(),de=(B.argument(fe===65536,"Unsupported fvar table version."),se.parseOffset16()),Oe=(se.skip("uShort",1),se.parseUShort()),He=se.parseUShort(),Ne=se.parseUShort(),_e=se.parseUShort(),ct=[],Ke=0;Ke<Oe;Ke++)ct.push((E=v,L=j+de+Ke*He,G=k,W={},E=new Pe.Parser(E,L),W.tag=E.parseTag(),W.minValue=E.parseFixed(),W.defaultValue=E.parseFixed(),W.maxValue=E.parseFixed(),E.skip("uShort",1),W.name=G[E.parseUShort()]||{},W));for(var tt=[],ze=j+de+Oe*He,qe=0;qe<Ne;qe++)tt.push(function(Dt,qt,It,Lt){var cr={},Ur=new Pe.Parser(Dt,qt);cr.name=Lt[Ur.parseUShort()]||{},Ur.skip("uShort",1),cr.coordinates={};for(var hn=0;hn<It.length;++hn)cr.coordinates[It[hn].tag]=Ur.parseFixed();return cr}(v,ze+qe*_e,ct,k));return{axes:ct,instances:tt}}},$n=new Array(10);$n[1]=function(){var v=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{posFormat:1,coverage:this.parsePointer(je.coverage),value:this.parseValueRecord()}:j===2?{posFormat:2,coverage:this.parsePointer(je.coverage),values:this.parseValueRecordList()}:void B.assert(!1,"0x"+v.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},$n[2]=function(){var v,j,k,E,G=this.offset+this.relativeOffset,L=this.parseUShort(),G=(B.assert(L===1||L===2,"0x"+G.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(je.coverage)),W=this.parseUShort(),se=this.parseUShort();return L===1?{posFormat:L,coverage:G,valueFormat1:W,valueFormat2:se,pairSets:this.parseList(je.pointer(je.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(W),value2:this.parseValueRecord(se)}})))}:L===2?(v=this.parsePointer(je.classDef),j=this.parsePointer(je.classDef),k=this.parseUShort(),E=this.parseUShort(),{posFormat:L,coverage:G,valueFormat1:W,valueFormat2:se,classDef1:v,classDef2:j,class1Count:k,class2Count:E,classRecords:this.parseList(k,je.list(E,function(){return{value1:this.parseValueRecord(W),value2:this.parseValueRecord(se)}}))}):void 0},$n[3]=function(){return{error:"GPOS Lookup 3 not supported"}},$n[4]=function(){return{error:"GPOS Lookup 4 not supported"}},$n[5]=function(){return{error:"GPOS Lookup 5 not supported"}},$n[6]=function(){return{error:"GPOS Lookup 6 not supported"}},$n[7]=function(){return{error:"GPOS Lookup 7 not supported"}},$n[8]=function(){return{error:"GPOS Lookup 8 not supported"}},$n[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Ta=new Array(10),gi={parse:function(v,j){return j=(v=new je(v,j=j||0)).parseVersion(1),B.argument(j===1||j===1.1,"Unsupported GPOS table version "+j),j===1?{version:j,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList($n)}:{version:j,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList($n),variations:v.parseFeatureVariationsList()}},make:function(v){return new Ge.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ge.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ge.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ge.LookupList(v.lookups,Ta)}])}},Bs={parse:function(v,j){if(v=new Pe.Parser(v,j),(j=v.parseUShort())===0){var k=v,E={},He=(k.skip("uShort"),k.parseUShort()),L=(B.argument(He===0,"Unsupported kern sub-table version."),k.skip("uShort",2),k.parseUShort());k.skip("uShort",3);for(var G=0;G<L;G+=1){var W=k.parseUShort(),se=k.parseUShort(),fe=k.parseShort();E[W+","+se]=fe}return E}if(j!==1)throw new Error("Unsupported kern table version ("+j+").");var de=v,Oe={},He=(de.skip("uShort"),1<de.parseULong()&&console.warn("Only the first kern subtable is supported."),de.skip("uLong"),255&de.parseUShort());if(de.skip("uShort"),He==0){var Ne=de.parseUShort();de.skip("uShort",3);for(var _e=0;_e<Ne;_e+=1){var ct=de.parseUShort(),Ke=de.parseUShort(),tt=de.parseShort();Oe[ct+","+Ke]=tt}}return Oe}},Fs={parse:function(v,j,k,E){for(var L=new Pe.Parser(v,j),G=E?L.parseUShort:L.parseULong,W=[],se=0;se<k+1;se+=1){var fe=G.call(L);E&&(fe*=2),W.push(fe)}return W}};function ii(v,j){r("fs").readFile(v,function(k,E){if(k)return j(k.message);j(null,es(E))})}function ms(v,j){var k=new XMLHttpRequest;k.open("get",v,!0),k.responseType="arraybuffer",k.onload=function(){return k.response?j(null,k.response):j("Font could not be loaded: "+k.statusText)},k.onerror=function(){j("Font could not be loaded")},k.send()}function yi(v,j){for(var k=[],E=12,L=0;L<j;L+=1){var G=Pe.getTag(v,E),W=Pe.getULong(v,E+4),se=Pe.getULong(v,E+8),fe=Pe.getULong(v,E+12);k.push({tag:G,checksum:W,offset:se,length:fe,compression:!1}),E+=16}return k}function Fr(k,j){if(j.compression!=="WOFF")return{data:k,offset:j.offset};var k=new Uint8Array(k.buffer,j.offset+2,j.compressedLength-2),E=new Uint8Array(j.length);if(K(k,E),E.byteLength!==j.length)throw new Error("Decompression error: "+j.tag+" decompressed length doesn't match recorded length");return{data:new DataView(E.buffer,0),offset:0}}function ka(qe){var j,k,E,L,G,W,se,fe,de,Oe,He,Ne,_e,ct,Ke=new hr({empty:!0}),tt=new DataView(qe,0),ze=[],qe=Pe.getTag(tt,0);if(qe===String.fromCharCode(0,1,0,0)||qe==="true"||qe==="typ1")Ke.outlinesFormat="truetype",ze=yi(tt,E=Pe.getUShort(tt,4));else if(qe==="OTTO")Ke.outlinesFormat="cff",ze=yi(tt,E=Pe.getUShort(tt,4));else{if(qe!=="wOFF")throw new Error("Unsupported OpenType signature "+qe);var Dt=Pe.getTag(tt,4);if(Dt===String.fromCharCode(0,1,0,0))Ke.outlinesFormat="truetype";else{if(Dt!=="OTTO")throw new Error("Unsupported OpenType flavor "+qe);Ke.outlinesFormat="cff"}ze=function(qr,Rr){for(var Vn=[],rn=44,an=0;an<Rr;an+=1){var Vr=Pe.getTag(qr,rn),xn=Pe.getULong(qr,rn+4),gs=Pe.getULong(qr,rn+8),ss=Pe.getULong(qr,rn+12),Ea=void 0,Ea=gs<ss&&"WOFF";Vn.push({tag:Vr,offset:xn,compression:Ea,compressedLength:gs,length:ss}),rn+=20}return Vn}(tt,E=Pe.getUShort(tt,12))}for(var qt=0;qt<E;qt+=1){var It=ze[qt],Lt=void 0;switch(It.tag){case"cmap":Lt=Fr(tt,It),Ke.tables.cmap=ee.parse(Lt.data,Lt.offset),Ke.encoding=new $e(Ke.tables.cmap);break;case"cvt ":Lt=Fr(tt,It),ct=new Pe.Parser(Lt.data,Lt.offset),Ke.tables.cvt=ct.parseShortList(It.length/2);break;case"fvar":G=It;break;case"fpgm":Lt=Fr(tt,It),ct=new Pe.Parser(Lt.data,Lt.offset),Ke.tables.fpgm=ct.parseByteList(It.length);break;case"head":Lt=Fr(tt,It),Ke.tables.head=Zi.parse(Lt.data,Lt.offset),Ke.unitsPerEm=Ke.tables.head.unitsPerEm,j=Ke.tables.head.indexToLocFormat;break;case"hhea":Lt=Fr(tt,It),Ke.tables.hhea=we.parse(Lt.data,Lt.offset),Ke.ascender=Ke.tables.hhea.ascender,Ke.descender=Ke.tables.hhea.descender,Ke.numberOfHMetrics=Ke.tables.hhea.numberOfHMetrics;break;case"hmtx":de=It;break;case"ltag":Lt=Fr(tt,It),k=xt.parse(Lt.data,Lt.offset);break;case"maxp":Lt=Fr(tt,It),Ke.tables.maxp=ft.parse(Lt.data,Lt.offset),Ke.numGlyphs=Ke.tables.maxp.numGlyphs;break;case"name":Ne=It;break;case"OS/2":Lt=Fr(tt,It),Ke.tables.os2=zr.parse(Lt.data,Lt.offset);break;case"post":Lt=Fr(tt,It),Ke.tables.post=ei.parse(Lt.data,Lt.offset),Ke.glyphNames=new _t(Ke.tables.post);break;case"prep":Lt=Fr(tt,It),ct=new Pe.Parser(Lt.data,Lt.offset),Ke.tables.prep=ct.parseByteList(It.length);break;case"glyf":W=It;break;case"loca":He=It;break;case"CFF ":L=It;break;case"kern":Oe=It;break;case"GPOS":se=It;break;case"GSUB":fe=It;break;case"meta":_e=It}}if(Dt=Fr(tt,Ne),Ke.tables.name=or.parse(Dt.data,Dt.offset,k),Ke.names=Ke.tables.name,W&&He)qe=j===0,Dt=Fr(tt,He),Dt=Fs.parse(Dt.data,Dt.offset,Ke.numGlyphs,qe),qe=Fr(tt,W),Ke.glyphs=Ls.parse(qe.data,qe.offset,Dt,Ke);else{if(!L)throw new Error("Font doesn't contain TrueType or CFF outlines.");qe=Fr(tt,L),Wi.parse(qe.data,qe.offset,Ke)}for(var Dt=Fr(tt,de),cr=(pt.parse(Dt.data,Dt.offset,Ke.numberOfHMetrics,Ke.numGlyphs,Ke.glyphs),Ke),Ur=cr.tables.cmap.glyphIndexMap,hn=Object.keys(Ur),rr=0;rr<hn.length;rr+=1){var wn,Wr=hn[rr],dn=Ur[Wr];(wn=cr.glyphs.get(dn)).addUnicode(parseInt(Wr))}for(var Pr=0;Pr<cr.glyphs.length;Pr+=1)wn=cr.glyphs.get(Pr),cr.cffEncoding?cr.isCIDFont?wn.name="gid"+Pr:wn.name=cr.cffEncoding.charset[Pr]:cr.glyphNames.names&&(wn.name=cr.glyphNames.glyphIndexToName(Pr));return Oe?(qe=Fr(tt,Oe),Ke.kerningPairs=Bs.parse(qe.data,qe.offset)):Ke.kerningPairs={},se&&(Dt=Fr(tt,se),Ke.tables.gpos=gi.parse(Dt.data,Dt.offset),Ke.position.init()),fe&&(qe=Fr(tt,fe),Ke.tables.gsub=ds.parse(qe.data,qe.offset)),G&&(Dt=Fr(tt,G),Ke.tables.fvar=on.parse(Dt.data,Dt.offset,Ke.names)),_e&&(qe=Fr(tt,_e),Ke.tables.meta=fs.parse(qe.data,qe.offset),Ke.metas=Ke.tables.meta),Ke}c.Font=hr,c.Glyph=Ct,c.Path=Y,c.BoundingBox=$,c._parse=Pe,c.parse=ka,c.load=function(v,j){(typeof window>"u"?ii:ms)(v,function(k,E){if(k)return j(k);var L;try{L=ka(E)}catch(G){return j(G,null)}return j(null,L)})},c.loadSync=function(v){return ka(es(r("fs").readFileSync(v)))},Object.defineProperty(c,"__esModule",{value:!0})},l(typeof a=="object"&&s!==void 0?a:u.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],242:[function(r,s,a){(function(o){function u(p,m){for(var h=0,f=p.length-1;0<=f;f--){var d=p[f];d==="."?p.splice(f,1):d===".."?(p.splice(f,1),h++):h&&(p.splice(f,1),h--)}if(m)for(;h--;)p.unshift("..");return p}function l(p,m){if(p.filter)return p.filter(m);for(var h=[],f=0;f<p.length;f++)m(p[f],f,p)&&h.push(p[f]);return h}a.resolve=function(){for(var p="",m=!1,h=arguments.length-1;-1<=h&&!m;h--){var f=0<=h?arguments[h]:o.cwd();if(typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");f&&(p=f+"/"+p,m=f.charAt(0)==="/")}return(m?"/":"")+(p=u(l(p.split("/"),function(d){return!!d}),!m).join("/"))||"."},a.normalize=function(p){var m=a.isAbsolute(p),h=c(p,-1)==="/";return(p=(p=u(l(p.split("/"),function(f){return!!f}),!m).join("/"))||m?p:".")&&h&&(p+="/"),(m?"/":"")+p},a.isAbsolute=function(p){return p.charAt(0)==="/"},a.join=function(){var p=Array.prototype.slice.call(arguments,0);return a.normalize(l(p,function(m,h){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},a.relative=function(p,m){function h(C){for(var S=0;S<C.length&&C[S]==="";S++);for(var w=C.length-1;0<=w&&C[w]==="";w--);return w<S?[]:C.slice(S,w-S+1)}p=a.resolve(p).substr(1),m=a.resolve(m).substr(1);for(var f=h(p.split("/")),d=h(m.split("/")),g=Math.min(f.length,d.length),y=g,b=0;b<g;b++)if(f[b]!==d[b]){y=b;break}for(var x=[],b=y;b<f.length;b++)x.push("..");return(x=x.concat(d.slice(y))).join("/")},a.sep="/",a.delimiter=":",a.dirname=function(p){if(typeof p!="string"&&(p+=""),p.length===0)return".";for(var m=p.charCodeAt(0)===47,h=-1,f=!0,d=p.length-1;1<=d;--d)if(p.charCodeAt(d)===47){if(!f){h=d;break}}else f=!1;return h===-1?m?"/":".":m&&h===1?"/":p.slice(0,h)},a.basename=function(p,m){return p=function(h){typeof h!="string"&&(h+="");for(var f=0,d=-1,g=!0,y=h.length-1;0<=y;--y)if(h.charCodeAt(y)===47){if(!g){f=y+1;break}}else d===-1&&(g=!1,d=y+1);return d===-1?"":h.slice(f,d)}(p),p=m&&p.substr(-1*m.length)===m?p.substr(0,p.length-m.length):p},a.extname=function(p){typeof p!="string"&&(p+="");for(var m=-1,h=0,f=-1,d=!0,g=0,y=p.length-1;0<=y;--y){var b=p.charCodeAt(y);if(b===47){if(d)continue;h=y+1;break}f===-1&&(d=!1,f=y+1),b===46?m===-1?m=y:g!==1&&(g=1):m!==-1&&(g=-1)}return m===-1||f===-1||g===0||g===1&&m===f-1&&m===h+1?"":p.slice(m,f)};var c="ab".substr(-1)==="b"?function(p,m,h){return p.substr(m,h)}:function(p,m,h){return m<0&&(m=p.length+m),p.substr(m,h)}}).call(this,r("_process"))},{_process:243}],243:[function(r,l,a){var o,u,l=l.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:c}catch{o=c}try{u=typeof clearTimeout=="function"?clearTimeout:p}catch{u=p}function m(S){if(o===setTimeout)return setTimeout(S,0);if((o===c||!o)&&setTimeout)return(o=setTimeout)(S,0);try{return o(S,0)}catch{try{return o.call(null,S,0)}catch{return o.call(this,S,0)}}}var h,f=[],d=!1,g=-1;function y(){d&&h&&(d=!1,h.length?f=h.concat(f):g=-1,f.length&&b())}function b(){if(!d){for(var S=m(y),w=(d=!0,f.length);w;){for(h=f,f=[];++g<w;)h&&h[g].run();g=-1,w=f.length}h=null,d=!1,function(_){if(u===clearTimeout)return clearTimeout(_);if((u===p||!u)&&clearTimeout)return(u=clearTimeout)(_);try{u(_)}catch{try{return u.call(null,_)}catch{return u.call(this,_)}}}(S)}}function x(S,w){this.fun=S,this.array=w}function C(){}l.nextTick=function(S){var w=new Array(arguments.length-1);if(1<arguments.length)for(var _=1;_<arguments.length;_++)w[_-1]=arguments[_];f.push(new x(S,w)),f.length!==1||d||m(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=C,l.addListener=C,l.once=C,l.off=C,l.removeListener=C,l.removeAllListeners=C,l.emit=C,l.prependListener=C,l.prependOnceListener=C,l.listeners=function(S){return[]},l.binding=function(S){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(S){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],244:[function(r,s,a){s=function(o){var u,l=Object.prototype,c=l.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},p=M.iterator||"@@iterator",m=M.asyncIterator||"@@asyncIterator",h=M.toStringTag||"@@toStringTag";function f(Z,q,H,re){var Y,oe,O,B,q=q&&q.prototype instanceof S?q:S,q=Object.create(q.prototype),re=new z(re||[]);return q._invoke=(Y=Z,oe=H,O=re,B=g,function(ae,me){if(B===b)throw new Error("Generator is already running");if(B===x){if(ae==="throw")throw me;return Q()}for(O.method=ae,O.arg=me;;){var ge=O.delegate;if(ge&&(ge=function xe(pe,ve){var Ee=pe.iterator[ve.method];if(Ee===u){if(ve.delegate=null,ve.method==="throw"){if(pe.iterator.return&&(ve.method="return",ve.arg=u,xe(pe,ve),ve.method==="throw"))return C;ve.method="throw",ve.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}if(Ee=d(Ee,pe.iterator,ve.arg),Ee.type==="throw")return ve.method="throw",ve.arg=Ee.arg,ve.delegate=null,C;if(Ee=Ee.arg,!Ee)return ve.method="throw",ve.arg=new TypeError("iterator result is not an object"),ve.delegate=null,C;{if(!Ee.done)return Ee;ve[pe.resultName]=Ee.value,ve.next=pe.nextLoc,ve.method!=="return"&&(ve.method="next",ve.arg=u)}return ve.delegate=null,C}(ge,O),ge)){if(ge===C)continue;return ge}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(B===g)throw B=x,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);if(B=b,ge=d(Y,oe,O),ge.type==="normal"){if(B=O.done?x:y,ge.arg!==C)return{value:ge.arg,done:O.done}}else ge.type==="throw"&&(B=x,O.method="throw",O.arg=ge.arg)}}),q}function d(Z,K,H){try{return{type:"normal",arg:Z.call(K,H)}}catch($){return{type:"throw",arg:$}}}o.wrap=f;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",C={};function S(){}function w(){}function _(){}var M={},I=(M[p]=function(){return this},Object.getPrototypeOf),I=I&&I(I(J([]))),R=(I&&I!==l&&c.call(I,p)&&(M=I),_.prototype=S.prototype=Object.create(M));function P(Z){["next","throw","return"].forEach(function(K){Z[K]=function(H){return this._invoke(K,H)}})}function D(Z){var K;this._invoke=function(H,$){function Y(){return new Promise(function(oe,O){(function B(xe,re,ae,me){var ge,xe=d(Z[xe],Z,re);if(xe.type!=="throw")return(re=(ge=xe.arg).value)&&typeof re=="object"&&c.call(re,"__await")?Promise.resolve(re.__await).then(function(pe){B("next",pe,ae,me)},function(pe){B("throw",pe,ae,me)}):Promise.resolve(re).then(function(pe){ge.value=pe,ae(ge)},function(pe){return B("throw",pe,ae,me)});me(xe.arg)})(H,$,oe,O)})}return K=K?K.then(Y,Y):Y()}}function U(Z){var K={tryLoc:Z[0]};1 in Z&&(K.catchLoc=Z[1]),2 in Z&&(K.finallyLoc=Z[2],K.afterLoc=Z[3]),this.tryEntries.push(K)}function F(Z){var K=Z.completion||{};K.type="normal",delete K.arg,Z.completion=K}function z(Z){this.tryEntries=[{tryLoc:"root"}],Z.forEach(U,this),this.reset(!0)}function J(Z){if(Z){var K,H=Z[p];if(H)return H.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length))return K=-1,(H=function $(){for(;++K<Z.length;)if(c.call(Z,K))return $.value=Z[K],$.done=!1,$;return $.value=u,$.done=!0,$}).next=H}return{next:Q}}function Q(){return{value:u,done:!0}}return(w.prototype=R.constructor=_).constructor=w,_[h]=w.displayName="GeneratorFunction",o.isGeneratorFunction=function(Z){return Z=typeof Z=="function"&&Z.constructor,!!Z&&(Z===w||(Z.displayName||Z.name)==="GeneratorFunction")},o.mark=function(Z){return Object.setPrototypeOf?Object.setPrototypeOf(Z,_):(Z.__proto__=_,h in Z||(Z[h]="GeneratorFunction")),Z.prototype=Object.create(R),Z},o.awrap=function(Z){return{__await:Z}},P(D.prototype),D.prototype[m]=function(){return this},o.AsyncIterator=D,o.async=function(Z,K,H,$){var Y=new D(f(Z,K,H,$));return o.isGeneratorFunction(K)?Y:Y.next().then(function(oe){return oe.done?oe.value:Y.next()})},P(R),R[h]="Generator",R[p]=function(){return this},R.toString=function(){return"[object Generator]"},o.keys=function(Z){var K,H=[];for(K in Z)H.push(K);return H.reverse(),function $(){for(;H.length;){var Y=H.pop();if(Y in Z)return $.value=Y,$.done=!1,$}return $.done=!0,$}},o.values=J,z.prototype={constructor:z,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(F),!Z)for(var K in this)K.charAt(0)==="t"&&c.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=u)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var K=this;function H(q,re){return oe.type="throw",oe.arg=Z,K.next=q,re&&(K.method="next",K.arg=u),!!re}for(var $=this.tryEntries.length-1;0<=$;--$){var Y=this.tryEntries[$],oe=Y.completion;if(Y.tryLoc==="root")return H("end");if(Y.tryLoc<=this.prev){var O=c.call(Y,"catchLoc"),B=c.call(Y,"finallyLoc");if(O&&B){if(this.prev<Y.catchLoc)return H(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return H(Y.finallyLoc)}else if(O){if(this.prev<Y.catchLoc)return H(Y.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return H(Y.finallyLoc)}}}},abrupt:function(Z,K){for(var H=this.tryEntries.length-1;0<=H;--H){var $=this.tryEntries[H];if($.tryLoc<=this.prev&&c.call($,"finallyLoc")&&this.prev<$.finallyLoc){var Y=$;break}}var oe=(Y=Y&&(Z==="break"||Z==="continue")&&Y.tryLoc<=K&&K<=Y.finallyLoc?null:Y)?Y.completion:{};return oe.type=Z,oe.arg=K,Y?(this.method="next",this.next=Y.finallyLoc,C):this.complete(oe)},complete:function(Z,K){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&K&&(this.next=K),C},finish:function(Z){for(var K=this.tryEntries.length-1;0<=K;--K){var H=this.tryEntries[K];if(H.finallyLoc===Z)return this.complete(H.completion,H.afterLoc),F(H),C}},catch:function(Z){for(var K=this.tryEntries.length-1;0<=K;--K){var H,$,Y=this.tryEntries[K];if(Y.tryLoc===Z)return(H=Y.completion).type==="throw"&&($=H.arg,F(Y)),$}throw new Error("illegal catch attempt")},delegateYield:function(Z,K,H){return this.delegate={iterator:J(Z),resultName:K,nextLoc:H},this.method==="next"&&(this.arg=u),C}},o}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=s}catch{Function("r","regeneratorRuntime = r")(s)}},{}],245:[function(r,s,a){(function(o){var u,l,c,p,m,h,f,d,g,y;function b(F){if(typeof F!="string"&&(F=String(F)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(F))throw new TypeError("Invalid character in header field name");return F.toLowerCase()}function x(F){return F=typeof F!="string"?String(F):F}function C(F){var z={next:function(){var J=F.shift();return{done:J===void 0,value:J}}};return l&&(z[Symbol.iterator]=function(){return z}),z}function S(F){this.map={},F instanceof S?F.forEach(function(z,J){this.append(J,z)},this):Array.isArray(F)?F.forEach(function(z){this.append(z[0],z[1])},this):F&&Object.getOwnPropertyNames(F).forEach(function(z){this.append(z,F[z])},this)}function w(F){if(F.bodyUsed)return Promise.reject(new TypeError("Already read"));F.bodyUsed=!0}function _(F){return new Promise(function(z,J){F.onload=function(){z(F.result)},F.onerror=function(){J(F.error)}})}function M(F){var z=new FileReader,J=_(z);return z.readAsArrayBuffer(F),J}function I(F){var z;return F.slice?F.slice(0):((z=new Uint8Array(F.byteLength)).set(new Uint8Array(F)),z.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(F){if(this._bodyInit=F)if(typeof F=="string")this._bodyText=F;else if(c&&Blob.prototype.isPrototypeOf(F))this._bodyBlob=F;else if(p&&FormData.prototype.isPrototypeOf(F))this._bodyFormData=F;else if(u&&URLSearchParams.prototype.isPrototypeOf(F))this._bodyText=F.toString();else if(m&&c&&f(F))this._bodyArrayBuffer=I(F.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(F)&&!d(F))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=I(F)}else this._bodyText="";this.headers.get("content-type")||(typeof F=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(F)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var F=w(this);if(F)return F;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var F,z,J=w(this);if(J)return J;if(this._bodyBlob)return J=this._bodyBlob,F=new FileReader,z=_(F),F.readAsText(J),z;if(this._bodyArrayBuffer)return Promise.resolve(function(Q){for(var Z=new Uint8Array(Q),K=new Array(Z.length),H=0;H<Z.length;H++)K[H]=String.fromCharCode(Z[H]);return K.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(F,z){var J,Q=(z=z||{}).body;if(F instanceof P){if(F.bodyUsed)throw new TypeError("Already read");this.url=F.url,this.credentials=F.credentials,z.headers||(this.headers=new S(F.headers)),this.method=F.method,this.mode=F.mode,Q||F._bodyInit==null||(Q=F._bodyInit,F.bodyUsed=!0)}else this.url=String(F);if(this.credentials=z.credentials||this.credentials||"omit",!z.headers&&this.headers||(this.headers=new S(z.headers)),this.method=(F=z.method||this.method||"GET",J=F.toUpperCase(),-1<g.indexOf(J)?J:F),this.mode=z.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}function D(F){var z=new FormData;return F.trim().split("&").forEach(function(J){var Q;J&&(Q=(J=J.split("=")).shift().replace(/\+/g," "),J=J.join("=").replace(/\+/g," "),z.append(decodeURIComponent(Q),decodeURIComponent(J)))}),z}function U(F,z){z=z||{},this.type="default",this.status=z.status===void 0?200:z.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new S(z.headers),this.url=z.url||"",this._initBody(F)}o.fetch||(u="URLSearchParams"in o,l="Symbol"in o&&"iterator"in Symbol,c="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),p="FormData"in o,(m="ArrayBuffer"in o)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(F){return F&&DataView.prototype.isPrototypeOf(F)},d=ArrayBuffer.isView||function(F){return F&&-1<h.indexOf(Object.prototype.toString.call(F))}),S.prototype.append=function(F,z){F=b(F),z=x(z);var J=this.map[F];this.map[F]=J?J+","+z:z},S.prototype.delete=function(F){delete this.map[b(F)]},S.prototype.get=function(F){return F=b(F),this.has(F)?this.map[F]:null},S.prototype.has=function(F){return this.map.hasOwnProperty(b(F))},S.prototype.set=function(F,z){this.map[b(F)]=x(z)},S.prototype.forEach=function(F,z){for(var J in this.map)this.map.hasOwnProperty(J)&&F.call(z,this.map[J],J,this)},S.prototype.keys=function(){var F=[];return this.forEach(function(z,J){F.push(J)}),C(F)},S.prototype.values=function(){var F=[];return this.forEach(function(z){F.push(z)}),C(F)},S.prototype.entries=function(){var F=[];return this.forEach(function(z,J){F.push([J,z])}),C(F)},l&&(S.prototype[Symbol.iterator]=S.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},R.call(P.prototype),R.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},U.error=function(){var F=new U(null,{status:0,statusText:""});return F.type="error",F},y=[301,302,303,307,308],U.redirect=function(F,z){if(y.indexOf(z)===-1)throw new RangeError("Invalid status code");return new U(null,{status:z,headers:{location:F}})},o.Headers=S,o.Request=P,o.Response=U,o.fetch=function(F,z){return new Promise(function(J,Q){var Z=new P(F,z),K=new XMLHttpRequest;K.onload=function(){var H,$={status:K.status,statusText:K.statusText,headers:($=K.getAllResponseHeaders()||"",H=new S,$.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(O){var O=O.split(":"),B=O.shift().trim();B&&(O=O.join(":").trim(),H.append(B,O))}),H)},Y=($.url="responseURL"in K?K.responseURL:$.headers.get("X-Request-URL"),"response"in K?K.response:K.responseText);J(new U(Y,$))},K.onerror=function(){Q(new TypeError("Network request failed"))},K.ontimeout=function(){Q(new TypeError("Network request failed"))},K.open(Z.method,Z.url,!0),Z.credentials==="include"?K.withCredentials=!0:Z.credentials==="omit"&&(K.withCredentials=!1),"responseType"in K&&c&&(K.responseType="blob"),Z.headers.forEach(function(H,$){K.setRequestHeader($,H)}),K.send(Z._bodyInit===void 0?null:Z._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(r,s,a){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=c(r("../core/main")),l=c(r("../color/color_conversion"));function c(h){return h&&h.__esModule?h:{default:h}}var p=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];u.default.prototype._rgbColorName=function(g){var f,d,g=l.default._rgbaToHSBA(g),y=[(o=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[d=g.length-1]=parseInt(g[d]),g[d]<2.5?g[d]=0:2.5<=g[d]&&g[d]<7.5&&(g[d]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[d]&&(g[d]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[d]?y[0]=10:y[0]=g[d]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)o[x]=Math.round(1e4*o[x])/1e4;for(var C=0;C<p.length;C++){if(p[C].h===o[0]&&p[C].s===o[1]&&p[C].b===o[2]){f=p[C].name;break}f="white"}}else for(var S=0;S<m.length;S++)if(m[S].h===y[0]&&m[S].s===y[1]&&m[S].b===y[2]){f=m[S].name;break}return f},r=u.default,a.default=r},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r},u="_Description",l="_fallbackDesc",c="_fallbackTable",p="_Label",m="_labelDesc",h="_labelTable";function f(d){if(d==="label"||d==="fallback")throw new Error("description should not be LABEL or FALLBACK");return d.endsWith(".")||d.endsWith(";")||d.endsWith(",")||d.endsWith("?")||d.endsWith("!")||(d+="."),d}o.default.prototype.describe=function(d,g){var y;o.default._validateParameters("describe",arguments),typeof d=="string"&&(y=this.canvas.id,d=f(d),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==d&&(this.descriptions.fallback.innerHTML=d):this._describeHTML("fallback",d),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==d&&(this.descriptions.label.innerHTML=d):this._describeHTML("label",d)))},o.default.prototype.describeElement=function(d,g,y){var b,x;o.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof d=="string"&&(b=this.canvas.id,g=f(g),x=function(C){if(C==="label"||C==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return C.endsWith(".")||C.endsWith(";")||C.endsWith(",")?C=C.replace(/.$/,":"):C.endsWith(":")||(C+=":"),C}(d),d=d.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[d]?this.descriptions.fallbackElements[d].innerHTML!==x&&(this.descriptions.fallbackElements[d].innerHTML=x):this._describeElementHTML("fallback",d,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[d]?this.descriptions.labelElements[d].innerHTML!==x&&(this.descriptions.labelElements[d].innerHTML=x):this._describeElementHTML("label",d,x)))},o.default.prototype._describeHTML=function(d,g){var y,b=this.canvas.id;d==="fallback"?(this.dummyDOM.querySelector("#".concat(b+u))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+l,'"></p>')):(y='<div id="'.concat(b).concat(u,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(l)),this.descriptions.fallback.innerHTML=g):d==="label"&&(this.dummyDOM.querySelector("#".concat(b+p))?this.dummyDOM.querySelector("#".concat(b+h))&&this.dummyDOM.querySelector("#".concat(b+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(m,'"></p>')):(y='<div id="'.concat(b).concat(p,'" class="p5Label"><p id="').concat(b).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+m),this.descriptions.label.innerHTML=g)},o.default.prototype._describeElementHTML=function(d,g,y){var b,x=this.canvas.id;d==="fallback"?(this.dummyDOM.querySelector("#".concat(x+u))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+l).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(u,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):d==="label"&&(this.dummyDOM.querySelector("#".concat(x+p))?this.dummyDOM.querySelector("#".concat(x+h))||this.dummyDOM.querySelector("#"+x+m).insertAdjacentHTML("afterend",'<table id="'.concat(x+h,'"></table>')):(b='<div id="'.concat(x).concat(p,'" class="p5Label"><table id="').concat(x).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(d=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+h).appendChild(d),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(o){var u,l,c,p;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(u=this._accessibleOutputs[o],c=function(m,h,f,d){return h="".concat(h," canvas, ").concat(f," by ").concat(d," pixels, contains ").concat(m[0]),h=(m[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(m[1]),h}((l=function(m,h){var f,d="",g="",y=0;for(f in h){var b,x=0;for(b in h[f]){var C='<li id="'.concat(m,"shape").concat(y,'">').concat(h[f][b].color," ").concat(f,",");f==="line"?C+=" location = ".concat(h[f][b].pos,", length = ").concat(h[f][b].length," pixels"):(C+=" location = ".concat(h[f][b].pos),f!=="point"&&(C+=", area = ".concat(h[f][b].area," %")),C+="</li>"),d+=C,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(f,"s"):"".concat(g," ").concat(x," ").concat(f)}return{numShapes:[y,g],details:d}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),p=function(m,h){var f,d,g,y=0,b="",x=Array.apply(null,Array(10)).map(function(){});for(f in x)x[f]=Array.apply(null,Array(10)).map(function(){});for(d in h)for(var C in h[d]){var S=void 0;S=d!=="line"?'<a href="#'.concat(m,"shape").concat(y,'">').concat(h[d][C].color," ").concat(d,"</a>"):'<a href="#'.concat(m,"shape").concat(y,'">').concat(h[d][C].color," ").concat(d," midpoint</a>"),x[h[d][C].loc.locY][h[d][C].loc.locX]?x[h[d][C].loc.locY][h[d][C].loc.locX]=x[h[d][C].loc.locY][h[d][C].loc.locX]+"  "+S:x[h[d][C].loc.locY][h[d][C].loc.locX]=S,y++}for(g in x){var w,_="<tr>";for(w in x[g])_+="<td>",x[g][w]!==void 0&&(_+=x[g][w]),_+="</td>";b=b+_+"</tr>"}return b}(o,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),p!==u.map.innerHTML&&(u.map.innerHTML=p),l.details!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=l.details),this._accessibleOutputs[o]=u)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,p,m){return c[0]<.4*p?c[1]<.4*m?"top left":c[1]>.6*m?"bottom left":"mid left":c[0]>.6*p?c[1]<.4*m?"top right":c[1]>.6*m?"bottom right":"mid right":c[1]<.4*m?"top middle":c[1]>.6*m?"bottom middle":"middle"}function l(c,p,m){return p=Math.floor(c[0]/p*10),c=Math.floor(c[1]/m*10),p===10&&(p-=1),c===10&&(c-=1),{locX:p,locY:c}}o.default.prototype.textOutput=function(c){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(c){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(c,p){var m,h,f,d=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(d).parentNode),"");p==="Fallback"?(m=d+c,this.dummyDOM.querySelector("#".concat(h=d+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(d,"_Description"))?this.dummyDOM.querySelector("#".concat(d,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(d)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):p==="Label"&&(m=d+c+(g=p),this.dummyDOM.querySelector("#".concat(h=d+"accessibleOutput"+p))||(this.dummyDOM.querySelector("#".concat(d,"_Label"))?this.dummyDOM.querySelector("#".concat(d,"_Label")):this.dummyDOM.querySelector("#".concat(d))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[m]={},c==="textOutput"?(g="#".concat(d,"gridOutput").concat(g),f='<div id="'.concat(m,'">Text Output<div id="').concat(m,'Summary" aria-label="text output summary"><p id="').concat(m,'_summary"></p><ul id="').concat(m,'_list"></ul></div><table id="').concat(m,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(h)).innerHTML=f,this._accessibleOutputs[m].list=this.dummyDOM.querySelector("#".concat(m,"_list"))):c==="gridOutput"&&(g="#".concat(d,"textOutput").concat(g),f='<div id="'.concat(m,'">Grid Output<p id="').concat(m,'_summary" aria-label="grid output summary"><table id="').concat(m,'_map" summary="grid output content"></table><ul id="').concat(m,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(h)).innerHTML=f,this._accessibleOutputs[m].map=this.dummyDOM.querySelector("#".concat(m,"_map"))),this._accessibleOutputs[m].shapeDetails=this.dummyDOM.querySelector("#".concat(m,"_shapeDetails")),this._accessibleOutputs[m].summary=this.dummyDOM.querySelector("#".concat(m,"_summary"))},o.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},o.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},o.default.prototype._accsCanvasColors=function(c,p){c==="fill"?this.ingredients.colors.fillRGBA!==p&&(this.ingredients.colors.fillRGBA=p,this.ingredients.colors.fill=this._rgbColorName(p)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==p&&(this.ingredients.colors.strokeRGBA=p,this.ingredients.colors.stroke=this._rgbColorName(p))},o.default.prototype._accsOutput=function(c,p){c==="ellipse"&&p[2]===p[3]?c="circle":c==="rectangle"&&p[2]===p[3]&&(c="square");var m,h,f={},d=!0,g=function(b,x){var C;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(C=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(C=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(C=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(C=(x[0]+x[2])/2,(x[1]+x[3])/2):(C=x[0],x[1]),[C,b]}(c,p);if(c==="line"?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(p[0],p[1],p[2],p[3])),m=u([p[0],[1]],this.width,this.height),h=u([p[2],[3]],this.width,this.height),f.loc=l(g,this.width,this.height),f.pos=m===h?"at ".concat(m):"from ".concat(m," to ").concat(h)):(c==="point"?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=function(b,x,C,S){var w=0;{var _,M,I,R,P,D,U;b==="arc"?(_=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),w=_*x[2]*x[3]/8,x[6]!=="open"&&x[6]!=="chord"||(U=x[0],M=x[1],I=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),R=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),P=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),D=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),U=Math.abs(U*(R-D)+I*(D-M)+P*(M-R))/2,_>Math.PI?w+=U:w-=U)):b==="ellipse"||b==="circle"?w=3.14*x[2]/2*x[3]/2:b==="line"||b==="point"?w=0:b==="quadrilateral"?w=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:b==="rectangle"||b==="square"?w=x[2]*x[3]:b==="triangle"&&(w=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2)}return Math.round(100*w/(C*S))}(c,p,this.width,this.height)),f.pos=u(g,this.width,this.height),f.loc=l(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[f]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(f)&&(d=!1);d===!0&&this.ingredients.shapes[c].push(f)}}else this.ingredients.shapes[c]=[f]},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(o){var u,l,c,p;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(u=this._accessibleOutputs[o],c=function(m,h,f,d){return f="Your output is a, ".concat(f," by ").concat(d," pixels, ").concat(h," canvas containing the following"),f=m===1?"".concat(f," shape:"):"".concat(f," ").concat(m," shapes:"),f}((l=function(m,h){var f,d="",g=0;for(f in h)for(var y in h[f]){var b='<li><a href="#'.concat(m,"shape").concat(g,'">').concat(h[f][y].color," ").concat(f,"</a>");f==="line"?b+=", ".concat(h[f][y].pos,", ").concat(h[f][y].length," pixels long.</li>"):(b+=", at ".concat(h[f][y].pos),f!=="point"&&(b+=", covering ".concat(h[f][y].area,"% of the canvas")),b+=".</li>"),d+=b,g++}return{numShapes:g,listShapes:d}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),p=function(m,h){var f,d="",g=0;for(f in h)for(var y in h[f]){var b='<tr id="'.concat(m,"shape").concat(g,'"><th>').concat(h[f][y].color," ").concat(f,"</th>");f==="line"?b+="<td>location = ".concat(h[f][y].pos,"</td><td>length = ").concat(h[f][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(h[f][y].pos,"</td>"),f!=="point"&&(b+="<td> area = ".concat(h[f][y].area,"%</td>")),b+="</tr>"),d+=b,g++}return d}(o,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),l.listShapes!==u.list.innerHTML&&(u.list.innerHTML=l.listShapes),p!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=p),this._accessibleOutputs[o]=u)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(r,s,a){var o=(o=r("./core/main"))&&o.__esModule?o:{default:o};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=o.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(o){var u=o[0],l=o[1],c=o[2],p=(2-l)*c/2;return p!=0&&(p==1?l=0:p<.5?l/=2-l:l=l*c/(2-2*p)),[u,l,p,o[3]]},r.default.ColorConversion._hsbaToRGBA=function(o){var u,l,c,p,m,h=6*o[0],f=o[1],d=o[2];return f===0?[d,d,d,o[3]]:(l=d*(1-f),c=d*(1-f*(h-(u=Math.floor(h)))),f=d*(1-f*(1+u-h)),h=u===1?(p=c,m=d,l):u===2?(p=l,m=d,f):u===3?(p=l,m=c,d):u===4?(p=f,m=l,d):u===5?(p=d,m=l,c):(p=d,m=f,l),[p,m,h,o[3]])},r.default.ColorConversion._hslaToHSBA=function(o){var u=o[0],l=o[1],c=o[2],p=c<.5?(1+l)*c:c+l-c*l;return[u,l=2*(p-c)/p,p,o[3]]},r.default.ColorConversion._hslaToRGBA=function(o){var u,l=6*o[0],c=o[1],p=o[2];return c===0?[p,p,p,o[3]]:[(u=function(m,h,f){return m<0?m+=6:6<=m&&(m-=6),m<1?h+(f-h)*m:m<3?f:m<4?h+(f-h)*(4-m):h})(2+l,c=2*p-(p=p<.5?(1+c)*p:p+c-p*c),p),u(l,c,p),u(l-2,c,p),o[3]]},r.default.ColorConversion._rgbaToHSBA=function(o){var u,l,c=o[0],p=o[1],m=o[2],h=Math.max(c,p,m),f=h-Math.min(c,p,m);return f==0?l=u=0:(l=f/h,c===h?u=(p-m)/f:p===h?u=2+(m-c)/f:m===h&&(u=4+(c-p)/f),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,h,o[3]]},r.default.ColorConversion._rgbaToHSLA=function(o){var u,l,c=o[0],p=o[1],m=o[2],h=Math.max(c,p,m),d=Math.min(c,p,m),f=h+d,d=h-d;return d==0?l=u=0:(l=f<1?d/f:d/(2-f),c===h?u=(p-m)/d:p===h?u=2+(m-c)/d:m===h&&(u=4+(c-p)/d),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,f/2,o[3]]},r=r.default.ColorConversion,a.default=r},{"../core/main":267}],253:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(h){return l.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},l.default.prototype.blue=function(h){return l.default._validateParameters("blue",arguments),this.color(h)._getBlue()},l.default.prototype.brightness=function(h){return l.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},l.default.prototype.color=function(){var h;return l.default._validateParameters("color",arguments),arguments[0]instanceof l.default.Color?arguments[0]:(h=arguments[0]instanceof Array?arguments[0]:arguments,new l.default.Color(this,h))},l.default.prototype.green=function(h){return l.default._validateParameters("green",arguments),this.color(h)._getGreen()},l.default.prototype.hue=function(h){return l.default._validateParameters("hue",arguments),this.color(h)._getHue()},l.default.prototype.lerpColor=function(h,f,d){l.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,C=this._colorMaxes;if(x===c.RGB)y=h.levels.map(function(S){return S/255}),b=f.levels.map(function(S){return S/255});else if(x===c.HSB)h._getBrightness(),f._getBrightness(),y=h.hsba,b=f.hsba;else{if(x!==c.HSL)throw new Error("".concat(x,"cannot be used for interpolation."));h._getLightness(),f._getLightness(),y=h.hsla,b=f.hsla}return d=Math.max(Math.min(d,1),0),this.lerp===void 0&&(this.lerp=function(S,w,_){return _*(w-S)+S}),h=this.lerp(y[0],b[0],d),f=this.lerp(y[1],b[1],d),g=this.lerp(y[2],b[2],d),y=this.lerp(y[3],b[3],d),h*=C[x][0],f*=C[x][1],g*=C[x][2],y*=C[x][3],this.color(h,f,g,y)},l.default.prototype.lightness=function(h){return l.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},l.default.prototype.red=function(h){return l.default._validateParameters("red",arguments),this.color(h)._getRed()},l.default.prototype.saturation=function(h){return l.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var m=l.default;a.default=m},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(d,s,a){function o(C){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(C)}function u(C){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(C)}d("core-js/modules/es.symbol"),d("core-js/modules/es.symbol.description"),d("core-js/modules/es.symbol.iterator"),d("core-js/modules/es.array.iterator"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.get-own-property-descriptor"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.iterator"),d("core-js/modules/es.string.trim"),d("core-js/modules/es.weak-map"),d("core-js/modules/web.dom-collections.iterator"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(d("../core/main")),c=function(C){if(C&&C.__esModule)return C;if(C===null||u(C)!=="object"&&typeof C!="function")return{default:C};var S=m();if(S&&S.has(C))return S.get(C);var w,_={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in C){var I;Object.prototype.hasOwnProperty.call(C,w)&&((I=M?Object.getOwnPropertyDescriptor(C,w):null)&&(I.get||I.set)?Object.defineProperty(_,w,I):_[w]=C[w])}return _.default=C,S&&S.set(C,_),_}(d("../core/constants")),p=h(d("./color_conversion"));function m(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,m=function(){return C},C)}function h(C){return C&&C.__esModule?C:{default:C}}l.default.Color=function(C,S){if(this._storeModeAndMaxes(C._colorMode,C._colorMaxes),this.mode!==c.RGB&&this.mode!==c.HSL&&this.mode!==c.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=l.default.Color._parseInputs.apply(this,S),this._calculateLevels(),this},l.default.Color.prototype.toString=function(C){var S=this.levels,w=this._array,_=w[3];switch(C){case"#rrggbb":return"#".concat(S[0]<16?"0".concat(S[0].toString(16)):S[0].toString(16),S[1]<16?"0".concat(S[1].toString(16)):S[1].toString(16),S[2]<16?"0".concat(S[2].toString(16)):S[2].toString(16));case"#rrggbbaa":return"#".concat(S[0]<16?"0".concat(S[0].toString(16)):S[0].toString(16),S[1]<16?"0".concat(S[1].toString(16)):S[1].toString(16),S[2]<16?"0".concat(S[2].toString(16)):S[2].toString(16),S[3]<16?"0".concat(S[3].toString(16)):S[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(S[0],", ",S[1],", ",S[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",_,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*_).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",_,")");case"hsla%":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*_).toPrecision(3),"%)");default:return"rgba(".concat(S[0],",",S[1],",",S[2],",",_,")")}},l.default.Color.prototype.setRed=function(C){this._array[0]=C/this.maxes[c.RGB][0],this._calculateLevels()},l.default.Color.prototype.setGreen=function(C){this._array[1]=C/this.maxes[c.RGB][1],this._calculateLevels()},l.default.Color.prototype.setBlue=function(C){this._array[2]=C/this.maxes[c.RGB][2],this._calculateLevels()},l.default.Color.prototype.setAlpha=function(C){this._array[3]=C/this.maxes[this.mode][3],this._calculateLevels()},l.default.Color.prototype._calculateLevels=function(){for(var C=this._array,S=this.levels=new Array(C.length),w=C.length-1;0<=w;--w)S[w]=Math.round(255*C[w]);this.hsla=null,this.hsba=null},l.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},l.default.Color.prototype._storeModeAndMaxes=function(C,S){this.mode=C,this.maxes=S},l.default.Color.prototype._getMode=function(){return this.mode},l.default.Color.prototype._getMaxes=function(){return this.maxes},l.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[c.RGB][2]},l.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]},l.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[c.RGB][1]},l.default.Color.prototype._getHue=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])},l.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]},l.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[c.RGB][0]},l.default.Color.prototype._getSaturation=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])};var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=/\s*/,x=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,y=new RegExp("".concat(g.source,"%")),b={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",x.source,",",x.source,",",x.source,"\\)$"].join(d.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",y.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),RGBA:new RegExp(["^rgba\\(",x.source,",",x.source,",",x.source,",",g.source,"\\)$"].join(d.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",y.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i"),HSL:new RegExp(["^hsl\\(",x.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),HSLA:new RegExp(["^hsla\\(",x.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i"),HSB:new RegExp(["^hsb\\(",x.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),HSBA:new RegExp(["^hsba\\(",x.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i")},x=(l.default.Color._parseInputs=function(C,S,w,_){var M,I=arguments.length,R=this.mode,P=this.maxes[R],D=[];if(3<=I){for(D[0]=C/P[0],D[1]=S/P[1],D[2]=w/P[2],D[3]=typeof _=="number"?_/P[3]:1,M=D.length-1;0<=M;--M){var U=D[M];U<0?D[M]=0:1<U&&(D[M]=1)}return R===c.HSL?p.default._hslaToRGBA(D):R===c.HSB?p.default._hsbaToRGBA(D):D}if(I===1&&typeof C=="string"){if(w=C.trim().toLowerCase(),f[w])return l.default.Color._parseInputs.call(this,f[w]);if(b.HEX3.test(w))return(D=b.HEX3.exec(w).slice(1).map(function(F){return parseInt(F+F,16)/255}))[3]=1,D;if(b.HEX6.test(w))return(D=b.HEX6.exec(w).slice(1).map(function(F){return parseInt(F,16)/255}))[3]=1,D;if(b.HEX4.test(w))return D=b.HEX4.exec(w).slice(1).map(function(F){return parseInt(F+F,16)/255});if(b.HEX8.test(w))return D=b.HEX8.exec(w).slice(1).map(function(F){return parseInt(F,16)/255});if(b.RGB.test(w))return(D=b.RGB.exec(w).slice(1).map(function(F){return F/255}))[3]=1,D;if(b.RGB_PERCENT.test(w))return(D=b.RGB_PERCENT.exec(w).slice(1).map(function(F){return parseFloat(F)/100}))[3]=1,D;if(b.RGBA.test(w))return D=b.RGBA.exec(w).slice(1).map(function(F,z){return z===3?parseFloat(F):F/255});if(b.RGBA_PERCENT.test(w))return D=b.RGBA_PERCENT.exec(w).slice(1).map(function(F,z){return z===3?parseFloat(F):parseFloat(F)/100});if(b.HSL.test(w)?(D=b.HSL.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:parseInt(F,10)/100}))[3]=1:b.HSLA.test(w)&&(D=b.HSLA.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:z===3?parseFloat(F):parseInt(F,10)/100})),(D=D.map(function(F){return Math.max(Math.min(F,1),0)})).length)return p.default._hslaToRGBA(D);if(b.HSB.test(w)?(D=b.HSB.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:parseInt(F,10)/100}))[3]=1:b.HSBA.test(w)&&(D=b.HSBA.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:z===3?parseFloat(F):parseInt(F,10)/100})),D.length){for(M=D.length-1;0<=M;--M)D[M]=Math.max(Math.min(D[M],1),0);return p.default._hsbaToRGBA(D)}D=[1,1,1,1]}else{if(I!==1&&I!==2||typeof C!="number")throw new Error("".concat(arguments,"is not a valid color representation."));D[0]=C/P[2],D[1]=C/P[2],D[2]=C/P[2],D[3]=typeof S=="number"?S/P[3]:1,D=D.map(function(F){return Math.max(Math.min(F,1),0)})}return D},l.default.Color);a.default=x},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Color"),l.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(h,f,d,g,y){return l.default._validateParameters("colorMode",arguments),h!==c.RGB&&h!==c.HSB&&h!==c.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=f,h[1]=f,h[2]=f,h[3]=f):arguments.length===4?(h[0]=f,h[1]=d,h[2]=g):arguments.length===5&&(h[0]=f,h[1]=d,h[2]=g,h[3]=y)),this},l.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.BEZIER=a.QUADRATIC=a.LINEAR=a._CTX_MIDDLE=a._DEFAULT_LEADMULT=a._DEFAULT_TEXT_FILL=a.WORD=a.CHAR=a.BOLDITALIC=a.BOLD=a.ITALIC=a.NORMAL=a.BLUR=a.ERODE=a.DILATE=a.POSTERIZE=a.INVERT=a.OPAQUE=a.GRAY=a.THRESHOLD=a.BURN=a.DODGE=a.SOFT_LIGHT=a.HARD_LIGHT=a.OVERLAY=a.REPLACE=a.SCREEN=a.MULTIPLY=a.EXCLUSION=a.SUBTRACT=a.DIFFERENCE=a.LIGHTEST=a.DARKEST=a.ADD=a.REMOVE=a.BLEND=a.UP_ARROW=a.TAB=a.SHIFT=a.RIGHT_ARROW=a.RETURN=a.OPTION=a.LEFT_ARROW=a.ESCAPE=a.ENTER=a.DOWN_ARROW=a.DELETE=a.CONTROL=a.BACKSPACE=a.ALT=a.AUTO=a.HSL=a.HSB=a.RGB=a.MITER=a.BEVEL=a.ROUND=a.SQUARE=a.PROJECT=a.PIE=a.CHORD=a.OPEN=a.CLOSE=a.TESS=a.QUAD_STRIP=a.QUADS=a.TRIANGLE_STRIP=a.TRIANGLE_FAN=a.TRIANGLES=a.LINE_LOOP=a.LINE_STRIP=a.LINES=a.POINTS=a.BASELINE=a.BOTTOM=a.TOP=a.CENTER=a.LEFT=a.RIGHT=a.RADIUS=a.CORNERS=a.CORNER=a.RAD_TO_DEG=a.DEG_TO_RAD=a.RADIANS=a.DEGREES=a.TWO_PI=a.TAU=a.QUARTER_PI=a.PI=a.HALF_PI=a.WAIT=a.TEXT=a.MOVE=a.HAND=a.CROSS=a.ARROW=a.WEBGL=a.P2D=a.VERSION=void 0,a.COVER=a.CONTAIN=a.FALLBACK=a.LABEL=a.AXES=a.GRID=a._DEFAULT_FILL=a._DEFAULT_STROKE=a.PORTRAIT=a.LANDSCAPE=a.MIRROR=a.CLAMP=a.REPEAT=a.NEAREST=a.IMAGE=a.IMMEDIATE=a.TEXTURE=a.FILL=a.STROKE=a.CURVE=void 0;var o=Math.PI,u=(a.VERSION="1.6.0",a.P2D="p2d",a.WEBGL="webgl",a.ARROW="default",a.CROSS="crosshair",a.HAND="pointer",a.MOVE="move",a.TEXT="text",a.WAIT="wait",o/2),u=(a.HALF_PI=u,o),u=(a.PI=u,o/4),u=(a.QUARTER_PI=u,2*o),u=(a.TAU=u,2*o),u=(a.TWO_PI=u,a.DEGREES="degrees",a.RADIANS="radians",o/180),u=(a.DEG_TO_RAD=u,180/o);a.RAD_TO_DEG=u,a.CORNER="corner",a.CORNERS="corners",a.RADIUS="radius",a.RIGHT="right",a.LEFT="left",a.CENTER="center",a.TOP="top",a.BOTTOM="bottom",a.BASELINE="alphabetic",a.POINTS=0,a.LINES=1,a.LINE_STRIP=3,a.LINE_LOOP=2,a.TRIANGLES=4,a.TRIANGLE_FAN=6,a.TRIANGLE_STRIP=5,a.QUADS="quads",a.QUAD_STRIP="quad_strip",a.TESS="tess",a.CLOSE="close",a.OPEN="open",a.CHORD="chord",a.PIE="pie",a.PROJECT="square",a.SQUARE="butt",a.ROUND="round",a.BEVEL="bevel",a.MITER="miter",a.RGB="rgb",a.HSB="hsb",a.HSL="hsl",a.AUTO="auto",a.ALT=18,a.BACKSPACE=8,a.CONTROL=17,a.DELETE=46,a.DOWN_ARROW=40,a.ENTER=13,a.ESCAPE=27,a.LEFT_ARROW=37,a.OPTION=18,a.RETURN=13,a.RIGHT_ARROW=39,a.SHIFT=16,a.TAB=9,a.UP_ARROW=38,a.BLEND="source-over",a.REMOVE="destination-out",a.ADD="lighter",a.DARKEST="darken",a.LIGHTEST="lighten",a.DIFFERENCE="difference",a.SUBTRACT="subtract",a.EXCLUSION="exclusion",a.MULTIPLY="multiply",a.SCREEN="screen",a.REPLACE="copy",a.OVERLAY="overlay",a.HARD_LIGHT="hard-light",a.SOFT_LIGHT="soft-light",a.DODGE="color-dodge",a.BURN="color-burn",a.THRESHOLD="threshold",a.GRAY="gray",a.OPAQUE="opaque",a.INVERT="invert",a.POSTERIZE="posterize",a.DILATE="dilate",a.ERODE="erode",a.BLUR="blur",a.NORMAL="normal",a.ITALIC="italic",a.BOLD="bold",a.BOLDITALIC="bold italic",a.CHAR="CHAR",a.WORD="WORD",a._DEFAULT_TEXT_FILL="#000000",a._DEFAULT_LEADMULT=1.25,a._CTX_MIDDLE="middle",a.LINEAR="linear",a.QUADRATIC="quadratic",a.BEZIER="bezier",a.CURVE="curve",a.STROKE="stroke",a.FILL="fill",a.TEXTURE="texture",a.IMMEDIATE="immediate",a.IMAGE="image",a.NEAREST="nearest",a.REPEAT="repeat",a.CLAMP="clamp",a.MIRROR="mirror",a.LANDSCAPE="landscape",a.PORTRAIT="portrait",a._DEFAULT_STROKE="#000000",a._DEFAULT_FILL="#FFFFFF",a.GRID="grid",a.AXES="axes",a.LABEL="label",a.FALLBACK="fallback",a.CONTAIN="contain",a.COVER="cover"},{}],257:[function(r,s,a){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function u(g){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(c=r("./main"))&&c.__esModule?c:{default:c},c=function(g){if(g&&g.__esModule)return g;if(g===null||u(g)!=="object"&&typeof g!="function")return{default:g};var y=p();if(y&&y.has(g))return y.get(g);var b,x={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in g){var S;Object.prototype.hasOwnProperty.call(g,b)&&((S=C?Object.getOwnPropertyDescriptor(g,b):null)&&(S.get||S.set)?Object.defineProperty(x,b,S):x[b]=g[b])}return x.default=g,y&&y.set(g,x),x}(r("./constants"));function p(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,p=function(){return g},g)}var m=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],h=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print);function f(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):h()},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(g,y,b){var x,C="auto",S=this._curElement.elt;m.includes(g)?C=g:typeof g=="string"&&(x="",y&&b&&typeof y=="number"&&typeof b=="number"&&(x="".concat(y," ").concat(b)),C=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(x,", auto"):g),S.style.cursor=C},l.default.prototype.frameRate=function(g){return l.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(g){return this.frameRate(g)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=f(),l.default.prototype.windowHeight=d(),l.default.prototype._onresize=function(g){this._setProperty("windowWidth",f()),this._setProperty("windowHeight",d());var y=this._isGlobal?window:this;typeof y.windowResized!="function"||(y=y.windowResized(g))===void 0||y||g.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(g){if(l.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(g){var y;return l.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=g),(y=this).resizeCanvas(this.width,this.height,!0)):y=this._pixelDensity,y},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},l.default.prototype.getURLParams=function(){for(var g,y=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,b={};(g=y.exec(location.search))!=null;)g.index===y.lastIndex&&y.lastIndex++,b[g[1]]=g[2];return b},r=l.default,a.default=r},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(m=r("../main"))&&m.__esModule?m:{default:m};r("../internationalization");function u(h,f){f=f||console.log.bind(console),l||p(),l.some(function(d){var g;if(h.message&&h.message.match("\\W?".concat(d.name,"\\W"))!==null)return g=d.type==="function"?"".concat(d.name,"()"):d.name,f("Did you just try to use p5.js's ".concat(g," ").concat(d.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var l=null,p=null,c=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),p=function(){function h(d){return Object.getOwnPropertyNames(d).filter(function(g){return g[0]!=="_"&&!(g in f)&&(f[g]=!0)}).map(function(g){var y=typeof d[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var f={};(l=[].concat(h(o.default.prototype),h(r("../constants")))).sort(function(d,g){return g.name.length-d.name.length})},m=(o.default.prototype._helpForMisusedAtTopLevelCode=u,document.readyState!=="complete"&&(window.addEventListener("error",u,!1),window.addEventListener("load",function(){window.removeEventListener("error",u,!1)})),o.default);a.default=m},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(o=r("../main"))&&o.__esModule?o:{default:o};r("../internationalization"),o.default._friendlyFileLoadError=function(){},r=o.default,a.default=r},{"../internationalization":265,"../main":267}],260:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=m(r("../main"));r("../internationalization"),p(r("../constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&((y=x?Object.getOwnPropertyDescriptor(f,g):null)&&(y.get||y.set)?Object.defineProperty(b,g,y):b[g]=f[g]);return b.default=f,d&&d.set(f,b),b}function m(f){return f&&f.__esModule?f:{default:f}}l.default._fesCodeReader=function(){};var h=l.default;a.default=h},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function o(){var u=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(p){return p.stacktrace!==void 0||p["opera#sourceloc"]!==void 0?this.parseOpera(p):p.stack&&p.stack.match(l)?this.parseV8OrIE(p):p.stack?this.parseFFOrSafari(p):void 0},extractLocation:function(p){return p.indexOf(":")===-1?[p]:[(p=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(p.replace(/[()]/g,"")))[1],p[2]||void 0,p[3]||void 0]},parseV8OrIE:function(p){return p.stack.split(`
`).filter(function(m){return!!m.match(l)},this).map(function(m){var h=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"("),f=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=f?h.replace(f[0],""):h).split(/\s+/).slice(1),f=this.extractLocation(f?f[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)},parseFFOrSafari:function(p){return p.stack.split(`
`).filter(function(m){return!m.match(c)},this).map(function(m){var h,f;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(f=m.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(m.replace(h,"")))[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)},parseOpera:function(p){return!p.stacktrace||-1<p.message.indexOf(`
`)&&p.message.split(`
`).length>p.stacktrace.split(`
`).length?this.parseOpera9(p):p.stack?this.parseOpera11(p):this.parseOpera10(p)},parseOpera9:function(p){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,h=p.message.split(`
`),f=[],d=2,g=h.length;d<g;d+=2){var y=m.exec(h[d]);y&&f.push({fileName:y[2],lineNumber:y[1],source:h[d]})}return f},parseOpera10:function(p){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=p.stacktrace.split(`
`),f=[],d=0,g=h.length;d<g;d+=2){var y=m.exec(h[d]);y&&f.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:h[d]})}return f},parseOpera11:function(p){return p.stack.split(`
`).filter(function(m){return!!m.match(u)&&!m.match(/^Error created at/)},this).map(function(m){var h,d=m.split("@"),f=this.extractLocation(d.pop()),d=d.shift()||"";return{functionName:d.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=d.match(/\(([^)]*)\)/)?d.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)}}}r.default._getErrorStackParser=function(){return new o},r=r.default,a.default=r},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(u=r("../main"))&&u.__esModule?u:{default:u};(function(p){if(!(p&&p.__esModule)&&!(p===null||c(p)!=="object"&&typeof p!="function")){var m=l();if(m&&m.has(p))return m.get(p);var h,f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var g;Object.prototype.hasOwnProperty.call(p,h)&&((g=d?Object.getOwnPropertyDescriptor(p,h):null)&&(g.get||g.set)?Object.defineProperty(f,h,g):f[h]=p[h])}f.default=p,m&&m.set(p,f)}})(r("../constants")),r("../internationalization");function l(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,l=function(){return p},p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}u.default._validateParameters=u.default._clearValidateParamsCache=function(){},r=u.default,a.default=r},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function u(p){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=function(p){if(p&&p.__esModule)return p;if(p===null||u(p)!=="object"&&typeof p!="function")return{default:p};var m=c();if(m&&m.has(p))return m.get(p);var h,f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var g;Object.prototype.hasOwnProperty.call(p,h)&&((g=d?Object.getOwnPropertyDescriptor(p,h):null)&&(g.get||g.set)?Object.defineProperty(f,h,g):f[h]=p[h])}return f.default=p,m&&m.set(p,f),f}(r("./constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}a.default={modeAdjust:function(p,m,h,f,d){return d===l.CORNER?{x:p,y:m,w:h,h:f}:d===l.CORNERS?{x:p,y:m,w:h-p,h:f-m}:d===l.RADIUS?{x:p-h,y:m-f,w:2*h,h:2*f}:d===l.CENTER?{x:p-.5*h,y:m-.5*f,w:h,h:f}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(r,s,a){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(u=r("../core/main"))&&u.__esModule?u:{default:u};r("./internationalization");var u=Promise.resolve();Promise.all([new Promise(function(l,c){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),u]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.setTranslatorLanguage=a.currentTranslatorLanguage=a.availableTranslatorLanguages=a.initialize=a.translator=void 0;var o,u,l=p(r("i18next")),c=p(r("i18next-browser-languagedetector"));function p(f){return f&&f.__esModule?f:{default:f}}function m(f,d){for(var g=0;g<d.length;g++){var y=d[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}var h=function(){function f(y,b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(y,b)}var d,g;return d=f,(g=[{key:"fetchWithTimeout",value:function(y,b){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(y,b),new Promise(function(C,S){return setTimeout(function(){return S(new Error("timeout"))},x)})])}},{key:"init",value:function(y){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=y,this.options=b}},{key:"read",value:function(y,b,x){var C=this.options.loadPath;y===this.options.fallback?x(null,o[y][b]):u.includes(y)?(C=this.services.interpolator.interpolate(C,{lng:y,ns:b}),this.loadUrl(C,x)):x("Not found",!1)}},{key:"loadUrl",value:function(y,b){this.fetchWithTimeout(y).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(x){return b(null,x)}).catch(b)}}])&&m(d.prototype,g),f}();h.type="backend",a.translator=function(f,d){console.debug("p5.js translator called before translations were loaded"),l.default.t(f,d)},a.initialize=function(){return l.default.use(c.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(f){a.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},a.availableTranslatorLanguages=function(){return l.default.languages},a.currentTranslatorLanguage=function(f){return l.default.language},a.setTranslatorLanguage=function(f){return l.default.changeLanguage(f||void 0,function(d){return console.debug("Translations failed to load (".concat(d,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,a.default=r},{"./main":267}],267:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r("./shim");var l=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f,d){for(var g=0;g<d.length;g++){var y=d[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}var m,h=function(){function f(y,S,x){var C=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(f.prototype._registeredMethods),w=!0,_=!1,M=void 0;try{for(var I,R=S[Symbol.iterator]();!(w=(I=R.next()).done);w=!0){var P=I.value;this._registeredMethods[P]=f.prototype._registeredMethods[P].slice()}}catch(H){_=!0,M=H}finally{try{w||R.return==null||R.return()}finally{if(_)throw M}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){C._userNode&&typeof C._userNode=="string"&&(C._userNode=document.getElementById(C._userNode));var H=C._isGlobal?window:C;if(H.preload){var $,Y=document.getElementById(C._loadingScreenId),oe=(Y||((Y=document.createElement("div")).innerHTML="Loading...",Y.style.position="absolute",Y.id=C._loadingScreenId,(C._userNode||document.body).appendChild(Y)),C._preloadMethods);for($ in oe){oe[$]=oe[$]||f;var O=oe[$];O!==f.prototype&&O!==f||(C._isGlobal&&(window[$]=C._wrapPreload(C,$)),O=C),C._registeredPreloadMethods[$]=O[$],O[$]=C._wrapPreload(O,$)}H.preload(),C._runIfPreloadsAreDone()}else C._setup(),C._recording||C._draw()},this._runIfPreloadsAreDone=function(){var H,$=this._isGlobal?window:this;$._preloadCount===0&&((H=document.getElementById($._loadingScreenId))&&H.parentNode.removeChild(H),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),$._setup(),this._recording||$._draw()))},this._decrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||typeof H.preload!="function"||(H._setProperty("_preloadCount",H._preloadCount-1),H._runIfPreloadsAreDone())},this._wrapPreload=function(H,$){var Y=this;return function(){Y._incrementPreload();for(var oe=arguments.length,O=new Array(oe),B=0;B<oe;B++)O[B]=arguments[B];return Y._registeredPreloadMethods[$].apply(H,O)}},this._incrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||H._setProperty("_preloadCount",H._preloadCount+1)},this._setup=function(){C.createCanvas(C._defaultCanvasSize.width,C._defaultCanvasSize.height,"p2d");var H=C._isGlobal?window:C;if(typeof H.preload=="function")for(var $ in C._preloadMethods)H[$]=C._preloadMethods[$][$],H[$]&&C&&(H[$]=H[$].bind(C));C._millisStart=window.performance.now(),H._preloadDone=!0,typeof H.setup=="function"&&H.setup();var Y=document.getElementsByTagName("canvas"),oe=!0,O=!1,B=void 0;try{for(var q,re=Y[Symbol.iterator]();!(oe=(q=re.next()).done);oe=!0){var ae=q.value;ae.dataset.hidden==="true"&&(ae.style.visibility="",delete ae.dataset.hidden)}}catch(me){O=!0,B=me}finally{try{oe||re.return==null||re.return()}finally{if(O)throw B}}C._lastTargetFrameTime=window.performance.now(),C._lastRealFrameTime=window.performance.now(),C._setupDone=!0,(C._accessibleOutputs.grid||C._accessibleOutputs.text)&&C._updateAccsOutput()},this._draw=function(){var H=window.performance.now(),$=H-C._lastTargetFrameTime,Y=1e3/C._targetFrameRate;(!C._loop||Y-5<=$)&&(C.redraw(),C._frameRate=1e3/(H-C._lastRealFrameTime),C.deltaTime=H-C._lastRealFrameTime,C._setProperty("deltaTime",C.deltaTime),C._lastTargetFrameTime=Math.max(C._lastTargetFrameTime+Y,H),C._lastRealFrameTime=H,C._updateMouseCoords!==void 0&&(C._updateMouseCoords(),C._setProperty("movedX",0),C._setProperty("movedY",0))),C._loop&&(C._requestAnimId=window.requestAnimationFrame(C._draw))},this._setProperty=function(H,$){C[H]=$,C._isGlobal&&(window[H]=$)},this.remove=function(){var H=document.getElementById(C._loadingScreenId);if(H&&(H.parentNode.removeChild(H),C._incrementPreload()),C._curElement){for(var $ in C._loop=!1,C._requestAnimId&&window.cancelAnimationFrame(C._requestAnimId),C._events)window.removeEventListener($,C._events[$]);var Y=!0,H=!1,oe=void 0;try{for(var O,B=C._elements[Symbol.iterator]();!(Y=(O=B.next()).done);Y=!0){var q,re=O.value;for(q in re.elt&&re.elt.parentNode&&re.elt.parentNode.removeChild(re.elt),re._events)re.elt.removeEventListener(q,re._events[q])}}catch(pe){H=!0,oe=pe}finally{try{Y||B.return==null||B.return()}finally{if(H)throw oe}}var ae=C;C._registeredMethods.remove.forEach(function(pe){pe!==void 0&&pe.call(ae)})}if(C._isGlobal){for(var me in f.prototype)try{delete window[me]}catch{window[me]=void 0}for(var ge in C)if(C.hasOwnProperty(ge))try{delete window[ge]}catch{window[ge]=void 0}f.instance=null}},this._registeredMethods.init.forEach(function(H){H!==void 0&&H.call(this)},this),this._setupPromisePreloads();var D,U,F=this._createFriendlyGlobalFunctionBinder();if(y)y(this),f._checkForUserDefinedFunctions(this);else{for(var z in this._isGlobal=!0,f.instance=this,f.prototype)typeof f.prototype[z]=="function"?(D=z.substring(2),this._events.hasOwnProperty(D)||(Math.hasOwnProperty(z)&&Math[z]===f.prototype[z]?F(z,f.prototype[z]):F(z,f.prototype[z].bind(this)))):F(z,f.prototype[z]);for(var J in this)this.hasOwnProperty(J)&&F(J,this[J])}for(U in this._events){var Q=this["_on".concat(U)];Q&&(Q=Q.bind(this),window.addEventListener(U,Q,{passive:!1}),this._events[U]=Q)}function Z(){C._setProperty("focused",!0)}function K(){C._setProperty("focused",!1)}window.addEventListener("focus",Z),window.addEventListener("blur",K),this.registerMethod("remove",function(){window.removeEventListener("focus",Z),window.removeEventListener("blur",K)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var d,g;return d=f,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(y,b){f.prototype._preloadMethods.hasOwnProperty(y)||(f.prototype._preloadMethods[y]=b)}},{key:"registerMethod",value:function(y,b){var x=this||f.prototype;x._registeredMethods.hasOwnProperty(y)||(x._registeredMethods[y]=[]),x._registeredMethods[y].push(b)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=y.globalObject||window;return y.log||console.log.bind(console),function(x,C){f.disableFriendlyErrors,b[x]=C}}}])&&p(d.prototype,g),f}();for(m in h.instance=null,h.disableFriendlyErrors=!1,l)h.prototype[m]=l[m];h.VERSION=l.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},a.default=h},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.Element=function(u,l){this.elt=u,this._pInst=this._pixelsState=l,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)},o.default.Element.prototype.id=function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)},o.default.Element.prototype.mousePressed=function(u){return o.default.Element._adjustListener("mousedown",function(l){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(l),u.call(this,l)},this),this},o.default.Element.prototype.doubleClicked=function(u){return o.default.Element._adjustListener("dblclick",u,this),this},o.default.Element.prototype.mouseWheel=function(u){return o.default.Element._adjustListener("wheel",u,this),this},o.default.Element.prototype.mouseReleased=function(u){return o.default.Element._adjustListener("mouseup",u,this),this},o.default.Element.prototype.mouseClicked=function(u){return o.default.Element._adjustListener("click",u,this),this},o.default.Element.prototype.mouseMoved=function(u){return o.default.Element._adjustListener("mousemove",u,this),this},o.default.Element.prototype.mouseOver=function(u){return o.default.Element._adjustListener("mouseover",u,this),this},o.default.Element.prototype.mouseOut=function(u){return o.default.Element._adjustListener("mouseout",u,this),this},o.default.Element.prototype.touchStarted=function(u){return o.default.Element._adjustListener("touchstart",u,this),this},o.default.Element.prototype.touchMoved=function(u){return o.default.Element._adjustListener("touchmove",u,this),this},o.default.Element.prototype.touchEnded=function(u){return o.default.Element._adjustListener("touchend",u,this),this},o.default.Element.prototype.dragOver=function(u){return o.default.Element._adjustListener("dragover",u,this),this},o.default.Element.prototype.dragLeave=function(u){return o.default.Element._adjustListener("dragleave",u,this),this},o.default.Element._adjustListener=function(u,l,c){return l===!1?o.default.Element._detachListener(u,c):o.default.Element._attachListener(u,l,c),this},o.default.Element._attachListener=function(u,l,c){c._events[u]&&o.default.Element._detachListener(u,c),l=l.bind(c),c.elt.addEventListener(u,l,!1),c._events[u]=l},o.default.Element._detachListener=function(u,l){var c=l._events[u];l.elt.removeEventListener(u,c,!1),l._events[u]=null},o.default.Element.prototype._setProperty=function(u,l){this[u]=l},r=o.default.Element,a.default=r},{"./main":267}],269:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("./main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("./constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.Graphics=function(h,f,b,g){var y,b=b||c.P2D;for(y in this.canvas=document.createElement("canvas"),(g._userNode||document.body).appendChild(this.canvas),l.default.Element.call(this,this.canvas,g),l.default.prototype)this[y]||(typeof l.default.prototype[y]=="function"?this[y]=l.default.prototype[y].bind(this):this[y]=l.default.prototype[y]);return l.default.prototype._initializeInstanceVariables.apply(this),this.width=h,this.height=f,this._pixelDensity=g._pixelDensity,b===c.WEBGL?this._renderer=new l.default.RendererGL(this.canvas,this,!1):this._renderer=new l.default.Renderer2D(this.canvas,this,!1),g._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(h,f),this._renderer._applyDefaults(),this},l.default.Graphics.prototype=Object.create(l.default.Element.prototype),l.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},l.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var h,f=this._pInst._elements.indexOf(this);for(h in f!==-1&&this._pInst._elements.splice(f,1),this._events)this.elt.removeEventListener(h,this._events[h])};var m=l.default.Graphics;a.default=m},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(h=r("./main"))&&h.__esModule?h:{default:h},l=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../core/constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}function m(f){var d=0,g=0;if(f.offsetParent)for(;d+=f.offsetLeft,g+=f.offsetTop,f=f.offsetParent;);else d+=f.offsetLeft,g+=f.offsetTop;return[d,g]}u.default.Renderer=function(f,d,g){u.default.Element.call(this,f,d),this.canvas=f,this._pixelsState=d,g?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=l.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=l.LEFT,this._textBaseline=l.BASELINE,this._textWrap=l.WORD,this._rectMode=l.CORNER,this._ellipseMode=l.CENTER,this._curveTightness=0,this._imageMode=l.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},u.default.Renderer.prototype=Object.create(u.default.Element.prototype),u.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},u.default.Renderer.prototype.pop=function(f){f.properties&&Object.assign(this,f.properties)},u.default.Renderer.prototype.resize=function(f,d){this.width=f,this.height=d,this.elt.width=f*this._pInst._pixelDensity,this.elt.height=d*this._pInst._pixelDensity,this.elt.style.width="".concat(f,"px"),this.elt.style.height="".concat(d,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},u.default.Renderer.prototype.get=function(f,d,g,y){var b=this._pixelsState,x=b._pixelDensity,C=this.canvas;if(f===void 0&&d===void 0)f=d=0,g=b.width,y=b.height;else if(f*=x,d*=x,g===void 0&&y===void 0)return f<0||d<0||f>=C.width||d>=C.height?[0,0,0,0]:this._getPixel(f,d);return b=new u.default.Image(g,y),b.canvas.getContext("2d").drawImage(C,f,d,g*x,y*x,0,0,g,y),b},u.default.Renderer.prototype.textLeading=function(f){return typeof f=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",f),this._pInst):this._textLeading},u.default.Renderer.prototype.textSize=function(f){return typeof f=="number"?(this._setProperty("_textSize",f),this._leadingSet||this._setProperty("_textLeading",f*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},u.default.Renderer.prototype.textStyle=function(f){return f?(f!==l.NORMAL&&f!==l.ITALIC&&f!==l.BOLD&&f!==l.BOLDITALIC||this._setProperty("_textStyle",f),this._applyTextProperties()):this._textStyle},u.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},u.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},u.default.Renderer.prototype.textAlign=function(f,d){return f!==void 0?(this._setProperty("_textAlign",f),d!==void 0&&this._setProperty("_textBaseline",d),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},u.default.Renderer.prototype.textWrap=function(f){return this._setProperty("_textWrap",f),this._textWrap},u.default.Renderer.prototype.text=function(f,d,g,y,b){var x,C,S,w,_=this._pInst,M=this._textWrap,I=Number.MAX_VALUE,R=g;if((this._doFill||this._doStroke)&&f!==void 0){if(x=(f=(f=typeof f!="string"?f.toString():f).replace(/(\t)/g,"  ")).split(`
`),y!==void 0){switch(this._rectMode===l.CENTER&&(d-=y/2),this._textAlign){case l.CENTER:d+=y/2;break;case l.RIGHT:d+=y}if(b!==void 0){this._rectMode===l.CENTER&&(g-=b/2,R-=b/2);var f=g,P=_.textAscent();switch(this._textBaseline){case l.BOTTOM:w=g+b,g=Math.max(w,g),R+=P;break;case l.CENTER:w=g+b/2,g=Math.max(w,g),R+=P/2}I=g+b-P,this._textBaseline===l.CENTER&&(I=f+b-P/2)}else{if(this._textBaseline===l.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===l.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(M===l.WORD){for(var D=[],U=0;U<x.length;U++){for(var F="",z=x[U].split(" "),J=0;J<z.length;J++)C="".concat(F+z[J])+" ",F=y<(S=this.textWidth(C))&&0<F.length?(D.push(F),"".concat(z[J])+" "):C;D.push(F)}var Q=0;this._textBaseline===l.CENTER?Q=(D.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(Q=(D.length-1)*_.textLeading());for(var Z=0;Z<x.length;Z++){F="",z=x[Z].split(" ");for(var K=0;K<z.length;K++)C="".concat(F+z[K])+" ",y<(S=this.textWidth(C))&&0<F.length?(this._renderText(_,F.trim(),d,g-Q,I,R),F="".concat(z[K])+" ",g+=_.textLeading()):F=C;this._renderText(_,F.trim(),d,g-Q,I,R),g+=_.textLeading()}}else{for(var H=[],$=0;$<x.length;$++)for(var Y=x[$].split(F=""),oe=0;oe<Y.length;oe++)C="".concat(F+Y[oe]),(S=this.textWidth(C))<=y?F+=Y[oe]:y<S&&0<F.length&&(H.push(F),F="".concat(Y[oe]));H.push(F);var O=0;this._textBaseline===l.CENTER?O=(H.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(O=(H.length-1)*_.textLeading());for(var B=0;B<x.length;B++){Y=x[B].split(F="");for(var q=0;q<Y.length;q++)C="".concat(F+Y[q]),(S=this.textWidth(C))<=y?F+=Y[q]:y<S&&0<F.length&&(this._renderText(_,F.trim(),d,g-O,I,R),g+=_.textLeading(),F="".concat(Y[q]))}this._renderText(_,F.trim(),d,g-O,I,R),g+=_.textLeading()}}else{var re=0;this._textBaseline===l.CENTER?re=(x.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(re=(x.length-1)*_.textLeading());for(var ae=0;ae<x.length;ae++)this._renderText(_,x[ae],d,g-re,I,R-re),g+=_.textLeading()}return _}},u.default.Renderer.prototype._applyDefaults=function(){return this},u.default.Renderer.prototype._isOpenType=function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return p(f)==="object"&&f.font&&f.font.supported},u.default.Renderer.prototype._updateTextMetrics=function(){var f,d,g,y,b,x;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((f=document.createElement("span")).style.fontFamily=this._textFont,f.style.fontSize="".concat(this._textSize,"px"),f.innerHTML="ABCjgq|",(x=document.createElement("div")).style.display="inline-block",x.style.width="1px",x.style.height="0px",y=((d=document.createElement("div")).appendChild(f),d.appendChild(x),d.style.height="0px",d.style.overflow="hidden",document.body.appendChild(d),x.style.verticalAlign="baseline",m(x)),b=m(f),g=y[1]-b[1],y=(x.style.verticalAlign="bottom",m(x)),b=m(f),x=y[1]-b[1]-g,document.body.removeChild(d),this._setProperty("_textAscent",g),this._setProperty("_textDescent",x)),this};var h=u.default.Renderer;a.default=h},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(h=r("./main"))&&h.__esModule?h:{default:h},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=p();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function p(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,p=function(){return f},f)}r("./p5.Renderer");var m="rgba(0,0,0,0)",h=(l.default.Renderer2D=function(f,d,g){return l.default.Renderer.call(this,f,d,g),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},l.default.Renderer2D.prototype=Object.create(l.default.Renderer.prototype),l.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"},l.default.Renderer2D.prototype.resize=function(f,d){l.default.Renderer.prototype.resize.call(this,f,d),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},l.default.Renderer2D.prototype.background=function(){var f,d;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(f=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(f,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(f=this._getFill(),d=(d=this._pInst).color.apply(d,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(d.levels),d=d.toString(),this._setFill(d),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(f),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},l.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},l.default.Renderer2D.prototype.fill=function(){var f=(f=this._pInst).color.apply(f,arguments);this._setFill(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",f.levels)},l.default.Renderer2D.prototype.stroke=function(){var f=(f=this._pInst).color.apply(f,arguments);this._setStroke(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",f.levels)},l.default.Renderer2D.prototype.erase=function(f,d){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,f=this._pInst.color(255,f).toString(),this.drawingContext.fillStyle=f,this._cachedStrokeStyle=this.drawingContext.strokeStyle,f=this._pInst.color(255,d).toString(),this.drawingContext.strokeStyle=f,d=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=d,this._isErasing=!0)},l.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},l.default.Renderer2D.prototype.image=function(f,d,g,y,b,x,C,S,w){f.gifProperties&&f._animateGif(this._pInst);try{l.default.MediaElement&&f instanceof l.default.MediaElement&&f._ensureCanvas();var _=(_=this._tint&&f.canvas?this._getTintedImageCanvas(f):_)||f.canvas||f.elt,M=1;f.width&&0<f.width&&(M=_.width/f.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(_,M*d,M*g,M*y,M*b,x,C,S,w),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},l.default.Renderer2D.prototype._getTintedImageCanvas=function(f){if(!f.canvas)return f;f.tintCanvas||(f.tintCanvas=document.createElement("canvas")),f.tintCanvas.width!==f.canvas.width&&(f.tintCanvas.width=f.canvas.width),f.tintCanvas.height!==f.canvas.height&&(f.tintCanvas.height=f.canvas.height);var d=f.tintCanvas.getContext("2d");return d.save(),d.clearRect(0,0,f.canvas.width,f.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(d.drawImage(f.canvas,0,0),d.globalCompositeOperation="luminosity",d.drawImage(f.canvas,0,0),d.globalCompositeOperation="color",d.drawImage(f.canvas,0,0),d.globalCompositeOperation="multiply",d.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),d.fillRect(0,0,f.canvas.width,f.canvas.height),d.globalCompositeOperation="destination-in"),d.globalAlpha=this._tint[3]/255,d.drawImage(f.canvas,0,0),d.restore(),f.tintCanvas},l.default.Renderer2D.prototype.blendMode=function(f){if(f===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(f!==c.BLEND&&f!==c.REMOVE&&f!==c.DARKEST&&f!==c.LIGHTEST&&f!==c.DIFFERENCE&&f!==c.MULTIPLY&&f!==c.EXCLUSION&&f!==c.SCREEN&&f!==c.REPLACE&&f!==c.OVERLAY&&f!==c.HARD_LIGHT&&f!==c.SOFT_LIGHT&&f!==c.DODGE&&f!==c.BURN&&f!==c.ADD)throw new Error("Mode ".concat(f," not recognized."));this._cachedBlendMode=f,this.drawingContext.globalCompositeOperation=f}},l.default.Renderer2D.prototype.blend=function(){for(var f=this.drawingContext.globalCompositeOperation,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];var b=g[g.length-1],x=Array.prototype.slice.call(g,0,g.length-1);this.drawingContext.globalCompositeOperation=b,l.default.prototype.copy.apply(this,x),this.drawingContext.globalCompositeOperation=f},l.default.Renderer2D.prototype._getPixel=function(f,d){return f=this.drawingContext.getImageData(f,d,1,1).data,[f[0],f[1],f[2],f[3]]},l.default.Renderer2D.prototype.loadPixels=function(){var f=this._pixelsState,d=f._pixelDensity,g=this.width*d,d=this.height*d,g=this.drawingContext.getImageData(0,0,g,d);f._setProperty("imageData",g),f._setProperty("pixels",g.data)},l.default.Renderer2D.prototype.set=function(f,d,g){f=Math.floor(f),d=Math.floor(d);var y=this._pixelsState;if(g instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(y._pixelDensity,y._pixelDensity),this.drawingContext.clearRect(f,d,g.width,g.height),this.drawingContext.drawImage(g.canvas,f,d),this.drawingContext.restore();else{var b=0,x=0,C=0,S=0,w=4*(d*y._pixelDensity*(this.width*y._pixelDensity)+f*y._pixelDensity);if(y.imageData||y.loadPixels.call(y),typeof g=="number")w<y.pixels.length&&(C=x=b=g,S=255);else if(g instanceof Array){if(g.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");w<y.pixels.length&&(b=g[0],x=g[1],C=g[2],S=g[3])}else g instanceof l.default.Color&&w<y.pixels.length&&(b=g.levels[0],x=g.levels[1],C=g.levels[2],S=g.levels[3]);for(var _=0;_<y._pixelDensity;_++)for(var M=0;M<y._pixelDensity;M++)w=4*((d*y._pixelDensity+M)*this.width*y._pixelDensity+(f*y._pixelDensity+_)),y.pixels[w]=b,y.pixels[w+1]=x,y.pixels[w+2]=C,y.pixels[w+3]=S}},l.default.Renderer2D.prototype.updatePixels=function(f,d,g,y){var b=this._pixelsState,x=b._pixelDensity;f===void 0&&d===void 0&&g===void 0&&y===void 0&&(d=f=0,g=this.width,y=this.height),f*=x,d*=x,g*=x,y*=x,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=b.imageData),this.drawingContext.putImageData(b.imageData,f,d,0,0,g,y)},l.default.Renderer2D.prototype._acuteArcToBezier=function(f,d){var x=d/2,g=Math.cos(x),S=Math.sin(x),y=1/Math.tan(x),x=f+x,b=Math.cos(x),x=Math.sin(x),C=(4-g)/3,S=S+(g-C)*y;return{ax:Math.cos(f).toFixed(7),ay:Math.sin(f).toFixed(7),bx:(C*b+S*x).toFixed(7),by:(C*x-S*b).toFixed(7),cx:(C*b-S*x).toFixed(7),cy:(C*x+S*b).toFixed(7),dx:Math.cos(f+d).toFixed(7),dy:Math.sin(f+d).toFixed(7)}},l.default.Renderer2D.prototype.arc=function(f,d,g,y,b,x,C){var S,w=this.drawingContext,_=g/2,M=y/2,I=[];for(f+=_,d+=M;1e-5<=x-b;)S=Math.min(x-b,c.HALF_PI),I.push(this._acuteArcToBezier(b,S)),b+=S;return this._doFill&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(f+R.ax*_,d+R.ay*M),w.bezierCurveTo(f+R.bx*_,d+R.by*M,f+R.cx*_,d+R.cy*M,f+R.dx*_,d+R.dy*M)}),C!==c.PIE&&C!=null||w.lineTo(f,d),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),I.forEach(function(R,P){P===0&&w.moveTo(f+R.ax*_,d+R.ay*M),w.bezierCurveTo(f+R.bx*_,d+R.by*M,f+R.cx*_,d+R.cy*M,f+R.dx*_,d+R.dy*M)}),C===c.PIE?(w.lineTo(f,d),w.closePath()):C===c.CHORD&&w.closePath(),w.stroke()),this},l.default.Renderer2D.prototype.ellipse=function(I){var d=this.drawingContext,g=this._doFill,y=this._doStroke,b=parseFloat(I[0]),x=parseFloat(I[1]),M=parseFloat(I[2]),I=parseFloat(I[3]);if(g&&!y){if(this._getFill()===m)return this}else if(!g&&y&&this._getStroke()===m)return this;var C=M/2*.5522847498,S=I/2*.5522847498,w=b+M,_=x+I,M=b+M/2,I=x+I/2;d.beginPath(),d.moveTo(b,I),d.bezierCurveTo(b,I-S,M-C,x,M,x),d.bezierCurveTo(M+C,x,w,I-S,w,I),d.bezierCurveTo(w,I+S,M+C,_,M,_),d.bezierCurveTo(M-C,_,b,I+S,b,I),g&&d.fill(),y&&d.stroke()},l.default.Renderer2D.prototype.line=function(f,d,g,y){var b=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(b.beginPath(),b.moveTo(f,d),b.lineTo(g,y),b.stroke()),this},l.default.Renderer2D.prototype.point=function(f,d){var g,y,b=this.drawingContext;return!this._doStroke||this._getStroke()===m?this:(g=this._getStroke(),y=this._getFill(),this._setFill(g),b.beginPath(),b.arc(f,d,b.lineWidth/2,0,c.TWO_PI,!1),b.fill(),void this._setFill(y))},l.default.Renderer2D.prototype.quad=function(f,d,g,y,b,x,C,S){var w=this.drawingContext,_=this._doFill,M=this._doStroke;if(_&&!M){if(this._getFill()===m)return this}else if(!_&&M&&this._getStroke()===m)return this;return w.beginPath(),w.moveTo(f,d),w.lineTo(g,y),w.lineTo(b,x),w.lineTo(C,S),w.closePath(),_&&w.fill(),M&&w.stroke(),this},l.default.Renderer2D.prototype.rect=function(M){var d,g,y=M[0],b=M[1],x=M[2],C=M[3],S=M[4],w=M[5],_=M[6],M=M[7],I=this.drawingContext,R=this._doFill,P=this._doStroke;if(R&&!P){if(this._getFill()===m)return this}else if(!R&&P&&this._getStroke()===m)return this;return I.beginPath(),S===void 0?I.rect(y,b,x,C):(w===void 0&&(w=S),_===void 0&&(_=w),M===void 0&&(M=_),P=(R=Math.abs(x))/2,g=(d=Math.abs(C))/2,d<2*(S=R<2*S?P:S)&&(S=g),d<2*(w=R<2*w?P:w)&&(w=g),d<2*(_=R<2*_?P:_)&&(_=g),d<2*(M=R<2*M?P:M)&&(M=g),I.beginPath(),I.moveTo(y+S,b),I.arcTo(y+x,b,y+x,b+C,w),I.arcTo(y+x,b+C,y,b+C,_),I.arcTo(y,b+C,y,b,M),I.arcTo(y,b,y+x,b,S),I.closePath()),this._doFill&&I.fill(),this._doStroke&&I.stroke(),this},l.default.Renderer2D.prototype.triangle=function(_){var d=this.drawingContext,g=this._doFill,y=this._doStroke,b=_[0],x=_[1],C=_[2],S=_[3],w=_[4],_=_[5];if(g&&!y){if(this._getFill()===m)return this}else if(!g&&y&&this._getStroke()===m)return this;d.beginPath(),d.moveTo(b,x),d.lineTo(C,S),d.lineTo(w,_),d.closePath(),g&&d.fill(),y&&d.stroke()},l.default.Renderer2D.prototype.endShape=function(f,d,g,y,b,x,C){if(d.length!==0&&(this._doStroke||this._doFill)){var S,w,_,M=f===c.CLOSE,I=(M&&!x&&d.push(d[0]),d.length);if(!g||C!==c.POLYGON&&C!==null)if(!y||C!==c.POLYGON&&C!==null)if(!b||C!==c.POLYGON&&C!==null)if(C===c.POINTS)for(w=0;w<I;w++)S=d[w],this._doStroke&&this._pInst.stroke(S[6]),this._pInst.point(S[0],S[1]);else if(C===c.LINES)for(w=0;w+1<I;w+=2)S=d[w],this._doStroke&&this._pInst.stroke(d[w+1][6]),this._pInst.line(S[0],S[1],d[w+1][0],d[w+1][1]);else if(C===c.TRIANGLES)for(w=0;w+2<I;w+=3)S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(d[w+2][0],d[w+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(d[w+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(d[w+2][6]),this.drawingContext.stroke());else if(C===c.TRIANGLE_STRIP)for(w=0;w+1<I;w++)S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(S[0],S[1]),this._doStroke&&this._pInst.stroke(d[w+1][6]),this._doFill&&this._pInst.fill(d[w+1][5]),w+2<I&&(this.drawingContext.lineTo(d[w+2][0],d[w+2][1]),this._doStroke&&this._pInst.stroke(d[w+2][6]),this._doFill&&this._pInst.fill(d[w+2][5])),this._doFillStrokeClose(M);else if(C===c.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),w=2;w<I;w++)S=d[w],this.drawingContext.moveTo(d[0][0],d[0][1]),this.drawingContext.lineTo(d[w-1][0],d[w-1][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[0][0],d[0][1]),w<I-1&&(this._doFill&&S[5]!==d[w+1][5]||this._doStroke&&S[6]!==d[w+1][6])&&(this._doFill&&(this._pInst.fill(S[5]),this.drawingContext.fill(),this._pInst.fill(d[w+1][5])),this._doStroke&&(this._pInst.stroke(S[6]),this.drawingContext.stroke(),this._pInst.stroke(d[w+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(M)}}else if(C===c.QUADS)for(w=0;w+3<I;w+=4){for(S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),_=1;_<4;_++)this.drawingContext.lineTo(d[w+_][0],d[w+_][1]);this.drawingContext.lineTo(S[0],S[1]),this._doFill&&this._pInst.fill(d[w+3][5]),this._doStroke&&this._pInst.stroke(d[w+3][6]),this._doFillStrokeClose(M)}else if(C===c.QUAD_STRIP){if(3<I)for(w=0;w+1<I;w+=2)S=d[w],this.drawingContext.beginPath(),w+3<I?(this.drawingContext.moveTo(d[w+2][0],d[w+2][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(d[w+3][0],d[w+3][1]),this._doFill&&this._pInst.fill(d[w+3][5]),this._doStroke&&this._pInst.stroke(d[w+3][6])):(this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1])),this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[0][0],d[0][1]),w=1;w<I;w++)(S=d[w]).isVert&&(S.moveTo?this.drawingContext.moveTo(S[0],S[1]):this.drawingContext.lineTo(S[0],S[1]));this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),w=0;w<I;w++)d[w].isVert?d[w].moveTo?this.drawingContext.moveTo(d[w][0],d[w][1]):this.drawingContext.lineTo(d[w][0],d[w][1]):this.drawingContext.quadraticCurveTo(d[w][0],d[w][1],d[w][2],d[w][3]);this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),w=0;w<I;w++)d[w].isVert?d[w].moveTo?this.drawingContext.moveTo(d[w][0],d[w][1]):this.drawingContext.lineTo(d[w][0],d[w][1]):this.drawingContext.bezierCurveTo(d[w][0],d[w][1],d[w][2],d[w][3],d[w][4],d[w][5]);this._doFillStrokeClose(M)}else if(3<I){var R=[],P=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[1][0],d[1][1]),w=1;w+2<I;w++)S=d[w],R[0]=[S[0],S[1]],R[1]=[S[0]+(P*d[w+1][0]-P*d[w-1][0])/6,S[1]+(P*d[w+1][1]-P*d[w-1][1])/6],R[2]=[d[w+1][0]+(P*d[w][0]-P*d[w+2][0])/6,d[w+1][1]+(P*d[w][1]-P*d[w+2][1])/6],R[3]=[d[w+1][0],d[w+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);M&&this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this._doFillStrokeClose(M)}x=b=y=g=!1,M&&d.pop()}return this},l.default.Renderer2D.prototype.strokeCap=function(f){return f!==c.ROUND&&f!==c.SQUARE&&f!==c.PROJECT||(this.drawingContext.lineCap=f),this},l.default.Renderer2D.prototype.strokeJoin=function(f){return f!==c.ROUND&&f!==c.BEVEL&&f!==c.MITER||(this.drawingContext.lineJoin=f),this},l.default.Renderer2D.prototype.strokeWeight=function(f){return this.drawingContext.lineWidth=f===void 0||f===0?1e-4:f,this},l.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},l.default.Renderer2D.prototype._setFill=function(f){f!==this._cachedFillStyle&&(this.drawingContext.fillStyle=f,this._cachedFillStyle=f)},l.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},l.default.Renderer2D.prototype._setStroke=function(f){f!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=f,this._cachedStrokeStyle=f)},l.default.Renderer2D.prototype.bezier=function(f,d,g,y,b,x,C,S){return this._pInst.beginShape(),this._pInst.vertex(f,d),this._pInst.bezierVertex(g,y,b,x,C,S),this._pInst.endShape(),this},l.default.Renderer2D.prototype.curve=function(f,d,g,y,b,x,C,S){return this._pInst.beginShape(),this._pInst.curveVertex(f,d),this._pInst.curveVertex(g,y),this._pInst.curveVertex(b,x),this._pInst.curveVertex(C,S),this._pInst.endShape(),this},l.default.Renderer2D.prototype._doFillStrokeClose=function(f){f&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},l.default.Renderer2D.prototype.applyMatrix=function(f,d,g,y,b,x){this.drawingContext.transform(f,d,g,y,b,x)},l.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},l.default.Renderer2D.prototype.rotate=function(f){this.drawingContext.rotate(f)},l.default.Renderer2D.prototype.scale=function(f,d){return this.drawingContext.scale(f,d),this},l.default.Renderer2D.prototype.translate=function(f,d){return f instanceof l.default.Vector&&(d=f.y,f=f.x),this.drawingContext.translate(f,d),this},l.default.Renderer2D.prototype.text=function(f,d,g,C,b){C!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(x=!0,this.drawingContext.textBaseline=c.TOP);var x,C=l.default.Renderer.prototype.text.apply(this,arguments);return x&&(this.drawingContext.textBaseline=c.BASELINE),C},l.default.Renderer2D.prototype._renderText=function(f,d,g,y,b,x){if(!(y<x||b<=y))return f.push(),this._isOpenType()?this._textFont._renderPath(d,g,y,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(d,g,y),this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(d,g,y))),f.pop(),f},l.default.Renderer2D.prototype.textWidth=function(f){return this._isOpenType()?this._textFont._textWidth(f,this._textSize):this.drawingContext.measureText(f).width},l.default.Renderer2D.prototype._applyTextProperties=function(){var f,d=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),f=this._textFont,this._isOpenType()&&(f=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(f||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,d},l.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),l.default.Renderer.prototype.push.apply(this)},l.default.Renderer2D.prototype.pop=function(f){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l.default.Renderer.prototype.pop.call(this,f)},l.default.Renderer2D);a.default=h},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.prototype._promisePreloads=[];function u(){return{}}var l=!(o.default.prototype.registerPromisePreload=function(c){o.default.prototype._promisePreloads.push(c)});o.default.prototype._setupPromisePreloads=function(){var c=!0,p=!1,m=void 0;try{for(var h,f=this._promisePreloads[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value,g=this,y=d.method,b=d.addCallbacks,x=d.legacyPreloadSetup,C=d.target||this,S=C[y].bind(C);if(C===o.default.prototype){if(l)continue;g=null,S=C[y]}C[y]=this._wrapPromisePreload(g,S,b),x&&(C[x.method]=this._legacyPreloadGenerator(g,x,C[y]))}}catch(w){p=!0,m=w}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}l=!0},o.default.prototype._wrapPromisePreload=function(c,p,m){var h=function(){for(var f=this,d=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(m)for(var C=b.length-1;0<=C&&!g&&typeof b[C]=="function";C--)g=d,d=b.pop();var S=Promise.resolve(p.apply(this,b));return d&&S.then(d),g&&S.catch(g),S.then(function(){return f._decrementPreload()}),S};return h=c?h.bind(c):h},o.default.prototype._legacyPreloadGenerator=function(c,f,m){var h=f.createBaseObject||u,f=function(){var d=this,g=(this._incrementPreload(),h.apply(this,arguments));return m.apply(this,arguments).then(function(y){Object.assign(g,y),d._decrementPreload()}),g};return f=c?f.bind(c):f}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(h=r("./main"))&&h.__esModule?h:{default:h},l=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var m="defaultCanvas0",h=(u.default.prototype.createCanvas=function(f,d,C){u.default._validateParameters("createCanvas",arguments);var y,b,x,C=C||l.P2D;if(C===l.WEBGL)(b=document.getElementById(m))&&(b.parentNode.removeChild(b),y=this._renderer,this._elements=this._elements.filter(function(w){return w!==y})),(b=document.createElement("canvas")).id=m,b.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)b=this.canvas;else{b=document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;m="defaultCanvas".concat(S),b.id=m,b.classList.add("p5Canvas")}return this._setupDone||(b.dataset.hidden=!0,b.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(x=document.createElement("main"),document.body.appendChild(x)),document.getElementsByTagName("main")[0])).appendChild(b),C===l.WEBGL?(this._setProperty("_renderer",new u.default.RendererGL(b,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new u.default.Renderer2D(b,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,d),this._renderer._applyDefaults(),this._renderer},u.default.prototype.resizeCanvas=function(f,d,g){if(u.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x={};for(y in this.drawingContext){var C=this.drawingContext[y];p(C)!=="object"&&typeof C!="function"&&(x[y]=C)}for(b in this._renderer.resize(f,d),this.width=f,this.height=d,x)try{this.drawingContext[b]=x[b]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},u.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},u.default.prototype.createGraphics=function(f,d,g){return u.default._validateParameters("createGraphics",arguments),new u.default.Graphics(f,d,g,this)},u.default.prototype.blendMode=function(f){u.default._validateParameters("blendMode",arguments),f===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=l.BLEND),this._renderer.blendMode(f)},u.default);a.default=h},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(r("../main")),c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=m();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../constants")),p=h(r("../helpers"));function m(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,m=function(){return f},f)}function h(f){return f&&f.__esModule?f:{default:f}}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(f,d,g,y,b){var x;return f-=c.TWO_PI*Math.floor(f/c.TWO_PI),d-=c.TWO_PI*Math.floor(d/c.TWO_PI),x=Math.min(Math.abs(f-d),c.TWO_PI-Math.abs(f-d)),b&&(f=f<=c.HALF_PI?Math.atan(g/y*Math.tan(f)):f>c.HALF_PI&&f<=3*c.HALF_PI?Math.atan(g/y*Math.tan(f))+c.PI:Math.atan(g/y*Math.tan(f))+c.TWO_PI,d=d<=c.HALF_PI?Math.atan(g/y*Math.tan(d)):d>c.HALF_PI&&d<=3*c.HALF_PI?Math.atan(g/y*Math.tan(d))+c.PI:Math.atan(g/y*Math.tan(d))+c.TWO_PI),d<f&&(d+=c.TWO_PI),{start:f,stop:d,correspondToSamePoint:x<1e-5}},l.default.prototype.arc=function(f,d,g,y,b,x,C,S){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&b!==x&&(b=this._toRadians(b),x=this._toRadians(x),g=Math.abs(g),y=Math.abs(y),f=p.default.modeAdjust(f,d,g,y,this._renderer._ellipseMode),(d=this._normalizeArcAngles(b,x,f.w,f.h,!0)).correspondToSamePoint?this._renderer.ellipse([f.x,f.y,f.w,f.h,S]):(this._renderer.arc(f.x,f.y,f.w,f.h,d.start,d.stop,C,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[f.x,f.y,f.w,f.h,d.start,d.stop,C]))),this},l.default.prototype.ellipse=function(f,d,g,y,b){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){l.default._validateParameters("circle",arguments);var f=Array.prototype.slice.call(arguments,0,2);return f.push(arguments[2]),f.push(arguments[2]),this._renderEllipse.apply(this,f)},l.default.prototype._renderEllipse=function(f,d,g,y,b){return(this._renderer._doStroke||this._renderer._doFill)&&(g<0&&(g=Math.abs(g)),y===void 0?y=g:y<0&&(y=Math.abs(y)),f=p.default.modeAdjust(f,d,g,y,this._renderer._ellipseMode),this._renderer.ellipse([f.x,f.y,f.w,f.h,b]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[f.x,f.y,f.w,f.h])),this},l.default.prototype.line=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("line",g),this._renderer._doStroke&&(f=this._renderer).line.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},l.default.prototype.point=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((f=this._renderer).point.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},l.default.prototype.quad=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((f=this._renderer).quad.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},l.default.prototype.rect=function(){return l.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},l.default.prototype.square=function(f,d,g,y,b,x,C){return l.default._validateParameters("square",arguments),this._renderRect.call(this,f,d,g,g,y,b,x,C)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var f=p.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),d=[f.x,f.y,f.w,f.h],g=4;g<arguments.length;g++)d[g]=arguments[g];this._renderer.rect(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[f.x,f.y,f.w,f.h])}return this},l.default.prototype.triangle=function(){for(var f=arguments.length,d=new Array(f),g=0;g<f;g++)d[g]=arguments[g];return l.default._validateParameters("triangle",d),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",d),this},r=l.default,a.default=r},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.ellipseMode=function(h){return l.default._validateParameters("ellipseMode",arguments),h!==c.CORNER&&h!==c.CORNERS&&h!==c.RADIUS&&h!==c.CENTER||(this._renderer._ellipseMode=h),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(h){return l.default._validateParameters("rectMode",arguments),h!==c.CORNER&&h!==c.CORNERS&&h!==c.RADIUS&&h!==c.CENTER||(this._renderer._rectMode=h),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(h){return l.default._validateParameters("strokeCap",arguments),h!==c.ROUND&&h!==c.SQUARE&&h!==c.PROJECT||this._renderer.strokeCap(h),this},l.default.prototype.strokeJoin=function(h){return l.default._validateParameters("strokeJoin",arguments),h!==c.ROUND&&h!==c.BEVEL&&h!==c.MITER||this._renderer.strokeJoin(h),this},l.default.prototype.strokeWeight=function(h){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var m=l.default;a.default=m},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(u=r("../main"))&&u.__esModule?u:{default:u};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var l,c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return o.default._validateParameters("bezier",p),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,p),this},o.default.prototype.bezierDetail=function(l){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},o.default.prototype.bezierPoint=function(l,c,p,m,h){o.default._validateParameters("bezierPoint",arguments);var f=1-h;return Math.pow(f,3)*l+3*Math.pow(f,2)*h*c+3*f*Math.pow(h,2)*p+Math.pow(h,3)*m},o.default.prototype.bezierTangent=function(l,c,p,m,h){o.default._validateParameters("bezierTangent",arguments);var f=1-h;return 3*m*Math.pow(h,2)-3*p*Math.pow(h,2)+6*p*f*h-6*c*f*h+3*c*Math.pow(f,2)-3*l*Math.pow(f,2)},o.default.prototype.curve=function(){for(var l,c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return o.default._validateParameters("curve",p),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,p),this},o.default.prototype.curveDetail=function(l){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},o.default.prototype.curveTightness=function(l){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},o.default.prototype.curvePoint=function(l,c,p,m,h){o.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,d=h*h*h,g=h*h;return l*((f-1)/2*d+(1-f)*g+(f-1)/2*h)+c*((f+3)/2*d+(-5-f)/2*g+1)+p*((-3-f)/2*d+(f+2)*g+(1-f)/2*h)+m*((1-f)/2*d+(f-1)/2*g)},o.default.prototype.curveTangent=function(l,c,p,m,g){o.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,d=g*g*3,g=2*g;return l*((f-1)/2*d+(1-f)*g+(f-1)/2)+c*((f+3)/2*d+(-5-f)/2*g)+p*((-3-f)/2*d+(f+2)*g+(1-f)/2)+m*((1-f)/2*d+(f-1)/2*g)};var u=o.default;a.default=u},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(r,s,a){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}function u(S){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(C=r("../main"))&&C.__esModule?C:{default:C},c=function(S){if(S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var w=p();if(w&&w.has(S))return w.get(S);var _,M={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in S){var R;Object.prototype.hasOwnProperty.call(S,_)&&((R=I?Object.getOwnPropertyDescriptor(S,_):null)&&(R.get||R.set)?Object.defineProperty(M,_,R):M[_]=S[_])}return M.default=S,w&&w.set(S,M),M}(r("../constants"));function p(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,p=function(){return S},S)}var m=null,h=[],f=[],d=!1,g=!1,y=!1,b=!1,x=!0,C=(l.default.prototype.beginContour=function(){return f=[],b=!0,this},l.default.prototype.beginShape=function(S){var w;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(m=S===c.POINTS||S===c.LINES||S===c.TRIANGLES||S===c.TRIANGLE_FAN||S===c.TRIANGLE_STRIP||S===c.QUADS||S===c.QUAD_STRIP?S:null,h=[],f=[]),this},l.default.prototype.bezierVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];if(l.default._validateParameters("bezierVertex",_),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,_);else if(h.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{d=!0;for(var I=[],R=0;R<_.length;R++)I[R]=_[R];I.isVert=!1,(b?f:h).push(I)}return this},l.default.prototype.curveVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];return l.default._validateParameters("curveVertex",_),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,_):(g=!0,this.vertex(_[0],_[1])),this},l.default.prototype.endContour=function(){var S=f[0].slice();S.isVert=f[0].isVert,S.moveTo=!1,f.push(S),x&&(h.push(h[0]),x=!1);for(var w=0;w<f.length;w++)h.push(f[w]);return this},l.default.prototype.endShape=function(S){if(l.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(S,g,d,y,b,m);else{if(h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=S===c.CLOSE;w&&!b&&h.push(h[0]),this._renderer.endShape(S,h,g,d,y,b,m),x=!(b=y=d=g=!1),w&&h.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];if(l.default._validateParameters("quadraticVertex",_),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,_);else{if(this._contourInited)return(S={}).x=_[0],S.y=_[1],S.x3=_[2],S.y3=_[3],S.type=c.QUADRATIC,this._contourVertices.push(S),this;if(0<h.length){y=!0;for(var I=[],R=0;R<_.length;R++)I[R]=_[R];I.isVert=!1,(b?f:h).push(I)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(S,w,_,M,I){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=S,R[1]=w,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),_&&(R.moveTo=_),(b?(f.length===0&&(R.moveTo=!0),f):h).push(R)),this},l.default.prototype.normal=function(S,w,_){var M;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(M=this._renderer).normal.apply(M,arguments),this},l.default);a.default=C},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(r,s,a){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function u(m){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(m)}var l,c,p;r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m,h){window.setTimeout(m,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(l=Object.keys,r=Object.defineProperty,c=typeof Symbol=="function"&&u(Symbol())==="symbol",p=Object.prototype.propertyIsEnumerable,r(Object,"assign",{value:function(m,h){if(m==null)throw new TypeError("target must be an object");for(var f,d,g,y=Object(m),b=1;b<arguments.length;++b)for(f=Object(arguments[b]),g=l(f),c&&Object.getOwnPropertySymbols&&g.push.apply(g,Object.getOwnPropertySymbols(f).filter(function(x){return function(C){return p.call(x,C)}}(f))),d=0;d<g.length;++d)y[g[d]]=f[g[d]];return y},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(r,s,a){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var u=parseInt(o),l=((isNaN(u)||u<1)&&(u=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var c=function(m){m.call(l)},p=0;p<u;p++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),l._registeredMethods.pre.forEach(c),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}l._registeredMethods.post.forEach(c)}}}},r=r.default,a.default=r},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};function u(l){return function(c){if(Array.isArray(c)){for(var p=0,m=new Array(c.length);p<c.length;p++)m[p]=c[p];return m}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var l=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,u(arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(l,c){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),c),this},o.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},o.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},o.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},o.default.prototype.scale=function(l,c,p){var m;return o.default._validateParameters("scale",arguments),l instanceof o.default.Vector?(l=(m=l).x,c=m.y,p=m.z):l instanceof Array&&(l=(m=l)[0],c=m[1],p=m[2]||1),isNaN(c)?c=p=l:isNaN(p)&&(p=1),this._renderer.scale.call(this._renderer,l,c,p),this},o.default.prototype.shearX=function(l){return o.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},o.default.prototype.shearY=function(l){return o.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},o.default.prototype.translate=function(l,c,p){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,c,p):this._renderer.translate(l,c),this},r=o.default,a.default=r},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(p){return function(m){if(Array.isArray(m)){for(var h=0,f=new Array(m.length);h<m.length;h++)f[h]=m[h];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}u.default.prototype.storeItem=function(p,m){typeof p!="string"&&console.log("The argument that you passed to storeItem() - ".concat(p," is not a string.")),p.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(p," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=c(m);switch(h){case"number":case"boolean":m=m.toString();break;case"object":m instanceof u.default.Color?h="p5.Color":m instanceof u.default.Vector&&(h="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(p,m),p="".concat(p,"p5TypeID"),localStorage.setItem(p,h)},u.default.prototype.getItem=function(p){var m=localStorage.getItem(p),h=localStorage.getItem("".concat(p,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(p,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(h){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,l(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,l(m))}return m},u.default.prototype.clearStorage=function(){localStorage.clear()},u.default.prototype.removeItem=function(p){typeof p!="string"&&console.log("The argument that you passed to removeItem() - ".concat(p," is not a string.")),localStorage.removeItem(p),localStorage.removeItem("".concat(p,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.createStringDict=function(u,l){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(u,l)},o.default.prototype.createNumberDict=function(u,l){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(u,l)},o.default.TypedDict=function(u,l){return u instanceof Object?this.data=u:(this.data={},this.data[u]=l),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(u){return this.data.hasOwnProperty(u)},o.default.TypedDict.prototype.get=function(u){if(this.data.hasOwnProperty(u))return this.data[u];console.log("".concat(u," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(u,l){this._validate(l)?this.data[u]=l:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(u){for(var l in u)this.set(l,u[l])},o.default.TypedDict.prototype.create=function(u,l){u instanceof Object&&l===void 0?this._addObj(u):u!==void 0?this.set(u,l):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(u){if(!this.data.hasOwnProperty(u))throw new Error("".concat(u," does not exist in this Dictionary"));delete this.data[u]},o.default.TypedDict.prototype.print=function(){for(var u in this.data)console.log("key:".concat(u," value:").concat(this.data[u]))},o.default.TypedDict.prototype.saveTable=function(u){var l,c="";for(l in this.data)c+="".concat(l,",").concat(this.data[l],`
`);var p=new Blob([c],{type:"text/csv"});o.default.prototype.downloadFile(p,u||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(u,l){o.default.prototype.saveJSON(this.data,u,l)},o.default.TypedDict.prototype._validate=function(u){return!0},o.default.StringDict=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(u){return typeof u=="string"},o.default.NumberDict=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(u){return typeof u=="number"},o.default.NumberDict.prototype.add=function(u,l){this.data.hasOwnProperty(u)?this.data[u]+=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(u,l){this.add(u,-l)},o.default.NumberDict.prototype.mult=function(u,l){this.data.hasOwnProperty(u)?this.data[u]*=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(u,l){this.data.hasOwnProperty(u)?this.data[u]/=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var l,c=this.data[Object.keys(this.data)[0]];for(l in this.data)this.data[l]*u<c*u&&(c=this.data[l]);return c},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var l=Object.keys(this.data)[0],c=1;c<Object.keys(this.data).length;c++)Object.keys(this.data)[c]*u<l*u&&(l=Object.keys(this.data)[c]);return l},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},r=o.default.TypedDict,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(h){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}function c(h,f,d){return(f._userNode||document.body).appendChild(h),d=new(d?u.default.MediaElement:u.default.Element)(h,f),f._elements.push(d),d}function p(h,x,d,g){var y=document.createElement(x),b=(typeof(d=d||"")=="string"&&(d=[d]),!0),x=!1,C=void 0;try{for(var S,w=d[Symbol.iterator]();!(b=(S=w.next()).done);b=!0){var _=S.value,M=document.createElement("source");M.setAttribute("src",_),y.appendChild(M)}}catch(R){x=!0,C=R}finally{try{b||w.return==null||w.return()}finally{if(x)throw C}}typeof g=="function"&&y.addEventListener("canplaythrough",function R(){g(),y.removeEventListener("canplaythrough",R)});var I=c(y,h,!0);return I.loadedmetadata=!1,y.addEventListener("loadedmetadata",function(){I.width=y.videoWidth,I.height=y.videoHeight,I.elt.width===0&&(I.elt.width=y.videoWidth),I.elt.height===0&&(I.elt.height=y.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}u.default.prototype.select=function(h,f){return u.default._validateParameters("select",arguments),f=this._getContainer(f).querySelector(h),f?this._wrapElement(f):null},u.default.prototype.selectAll=function(h,f){u.default._validateParameters("selectAll",arguments);var d=[],g=this._getContainer(f).querySelectorAll(h);if(g)for(var y=0;y<g.length;y++){var b=this._wrapElement(g[y]);d.push(b)}return d},u.default.prototype._getContainer=function(h){var f=document;return typeof h=="string"?f=document.querySelector(h)||document:h instanceof u.default.Element?f=h.elt:h instanceof HTMLElement&&(f=h),f},u.default.prototype._wrapElement=function(h){var f,d=Array.prototype.slice.call(h.children);return h.tagName==="INPUT"&&h.type==="checkbox"?((f=new u.default.Element(h,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},f):h.tagName==="VIDEO"||h.tagName==="AUDIO"?new u.default.MediaElement(h,this):h.tagName==="SELECT"?this.createSelect(new u.default.Element(h,this)):0<d.length&&d.every(function(g){return g.tagName==="INPUT"||g.tagName==="LABEL"})?this.createRadio(new u.default.Element(h,this)):new u.default.Element(h,this)},u.default.prototype.removeElements=function(h){u.default._validateParameters("removeElements",arguments),this._elements.filter(function(f){return!(f.elt instanceof HTMLCanvasElement)}).map(function(f){return f.remove()})},u.default.Element.prototype.changed=function(h){return u.default.Element._adjustListener("change",h,this),this},u.default.Element.prototype.input=function(h){return u.default.Element._adjustListener("input",h,this),this},u.default.prototype.createDiv=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("div");return f.innerHTML=h,c(f,this)},u.default.prototype.createP=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("p");return f.innerHTML=h,c(f,this)},u.default.prototype.createSpan=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("span");return f.innerHTML=h,c(f,this)},u.default.prototype.createImg=function(){u.default._validateParameters("createImg",arguments);var h,f=document.createElement("img"),d=arguments;return 1<d.length&&typeof d[1]=="string"&&(f.alt=d[1]),2<d.length&&typeof d[2]=="string"&&(f.crossOrigin=d[2]),f.src=d[0],h=c(f,this),f.addEventListener("load",function(){h.width=f.offsetWidth||f.width,h.height=f.offsetHeight||f.height;var g=d[d.length-1];typeof g=="function"&&g(h)}),h},u.default.prototype.createA=function(h,f,d){u.default._validateParameters("createA",arguments);var g=document.createElement("a");return g.href=h,g.innerHTML=f,d&&(g.target=d),c(g,this)},u.default.prototype.createSlider=function(h,f,d,g){u.default._validateParameters("createSlider",arguments);var y=document.createElement("input");return y.type="range",y.min=h,y.max=f,g===0?y.step=1e-18:g&&(y.step=g),typeof d=="number"&&(y.value=d),c(y,this)},u.default.prototype.createButton=function(h,f){u.default._validateParameters("createButton",arguments);var d=document.createElement("button");return d.innerHTML=h,f&&(d.value=f),c(d,this)},u.default.prototype.createCheckbox=function(){u.default._validateParameters("createCheckbox",arguments);var h=document.createElement("div"),f=document.createElement("input"),d=(f.type="checkbox",document.createElement("label")),g=(d.appendChild(f),h.appendChild(d),c(h,this));return g.checked=function(){var y=g.elt.firstElementChild.getElementsByTagName("input")[0];if(y){if(arguments.length===0)return y.checked;y.checked=!!arguments[0]}return g},this.value=function(y){return g.value=y,this},arguments[0]&&(g.value(arguments[0]),(h=document.createElement("span")).innerHTML=arguments[0],d.appendChild(h)),arguments[1]&&(f.checked=!0),g},u.default.prototype.createSelect=function(){u.default._validateParameters("createSelect",arguments);var h,f,d=arguments[0];return d instanceof u.default.Element&&d.elt instanceof HTMLSelectElement?this.elt=(h=d).elt:d instanceof HTMLSelectElement?(h=c(d,this),this.elt=d):(f=document.createElement("select"),d&&typeof d=="boolean"&&f.setAttribute("multiple","true"),h=c(f,this),this.elt=f),h.option=function(g,y){var b;if(g!==void 0){for(var x,C=0;C<this.elt.length;C+=1)if(this.elt[C].textContent===g){b=C;break}b!==void 0?y===!1?this.elt.remove(b):this.elt[b].value=y:((x=document.createElement("option")).textContent=g,x.value=y===void 0?g:y,this.elt.appendChild(x),this._pInst._elements.push(x))}},h.selected=function(g){if(g!==void 0){for(var y=0;y<this.elt.length;y+=1)this.elt[y].value.toString()===g.toString()&&(this.elt.selectedIndex=y);return this}if(this.elt.getAttribute("multiple")){var b=[],x=!0,C=!1,S=void 0;try{for(var w,_=this.elt.selectedOptions[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var M=w.value;b.push(M.value)}}catch(I){C=!0,S=I}finally{try{x||_.return==null||_.return()}finally{if(C)throw S}}return b}return this.elt.value},h.disable=function(g){if(typeof g=="string")for(var y=0;y<this.elt.length;y++)this.elt[y].value.toString()===g&&(this.elt[y].disabled=!0,this.elt[y].selected=!1);else this.elt.disabled=!0;return this},h},u.default.prototype.createRadio=function(){function h(x){return x instanceof HTMLInputElement&&x.type==="radio"}function f(x){return x instanceof HTMLLabelElement}var d,g,y,b=arguments[0];return b instanceof u.default.Element&&(b.elt instanceof HTMLDivElement||b.elt instanceof HTMLSpanElement)?(d=b,this.elt=b.elt):b instanceof HTMLDivElement||b instanceof HTMLSpanElement?(d=c(b,this),g=this.elt=b,typeof arguments[1]=="string"&&(y=arguments[1])):(typeof b=="string"&&(y=b),g=document.createElement("div"),d=c(g,this),this.elt=g),d._name=y||"radioOption",d._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(x){return h(x)||f(x)&&h(x.firstElementChild)}).map(function(x){return h(x)?x:x.firstElementChild})},d.option=function(x,C){var S,w,_,M=!0,I=!1,R=void 0;try{for(var P,D=d._getOptionsArray()[Symbol.iterator]();!(M=(P=D.next()).done);M=!0){var U=P.value;if(U.value===x){S=U;break}}}catch(F){I=!0,R=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw R}}return S===void 0&&((S=document.createElement("input")).setAttribute("type","radio"),S.setAttribute("value",x)),S.setAttribute("name",d._name),f(S.parentElement)?w=S.parentElement:(w=document.createElement("label")).insertAdjacentElement("afterbegin",S),w.lastElementChild instanceof HTMLSpanElement?_=w.lastElementChild:(_=document.createElement("span"),S.insertAdjacentElement("afterend",_)),_.innerHTML=C===void 0?x:C,this.elt.appendChild(w),S},d.remove=function(x){var C=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(C=(_=M.next()).done);C=!0){var I=_.value;if(I.value===x)return void(f(I.parentElement)?I.parentElement:I).remove()}}catch(R){S=!0,w=R}finally{try{C||M.return==null||M.return()}finally{if(S)throw w}}},d.value=function(){var x="",C=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(C=(_=M.next()).done);C=!0){var I=_.value;if(I.checked){x=I.value;break}}}catch(R){S=!0,w=R}finally{try{C||M.return==null||M.return()}finally{if(S)throw w}}return x},d.selected=function(x){var C=null;if(x===void 0){var S=!0,w=!1,_=void 0;try{for(var M,I=d._getOptionsArray()[Symbol.iterator]();!(S=(M=I.next()).done);S=!0){var R=M.value;if(R.checked){C=R;break}}}catch(z){w=!0,_=z}finally{try{S||I.return==null||I.return()}finally{if(w)throw _}}}else{d._getOptionsArray().forEach(function(Q){Q.checked=!1,Q.removeAttribute("checked")});var P=!0,w=!1,_=void 0;try{for(var D,U=d._getOptionsArray()[Symbol.iterator]();!(P=(D=U.next()).done);P=!0){var F=D.value;F.value===x&&(F.setAttribute("checked",!0),F.checked=!0,C=F)}}catch(Q){w=!0,_=Q}finally{try{P||U.return==null||U.return()}finally{if(w)throw _}}}return C},d.disable=function(){var x=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],C=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(C=(_=M.next()).done);C=!0)_.value.setAttribute("disabled",x)}catch(I){S=!0,w=I}finally{try{C||M.return==null||M.return()}finally{if(S)throw w}}},d},u.default.prototype.createColorPicker=function(h){u.default._validateParameters("createColorPicker",arguments);var f=document.createElement("input");return f.type="color",h?h instanceof u.default.Color?f.value=h.toString("#rrggbb"):(u.default.prototype._colorMode="rgb",u.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},f.value=u.default.prototype.color(h).toString("#rrggbb")):f.value="#000000",(f=c(f,this)).color=function(){return h&&(h.mode&&(u.default.prototype._colorMode=h.mode),h.maxes&&(u.default.prototype._colorMaxes=h.maxes)),u.default.prototype.color(this.elt.value)},f},u.default.prototype.createInput=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",d=(u.default._validateParameters("createInput",arguments),document.createElement("input"));return d.setAttribute("value",h),d.setAttribute("type",f),c(d,this)},u.default.prototype.createFileInput=function(h){var f,d=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(u.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(f=document.createElement("input")).setAttribute("type","file"),d&&f.setAttribute("multiple",!0),f.addEventListener("change",function(g){var y=!0,b=!1,x=void 0;try{for(var C,S=g.target.files[Symbol.iterator]();!(y=(C=S.next()).done);y=!0){var w=C.value;u.default.File._load(w,h)}}catch(_){b=!0,x=_}finally{try{y||S.return==null||S.return()}finally{if(b)throw x}}},!1),c(f,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},u.default.prototype.createVideo=function(h,f){return u.default._validateParameters("createVideo",arguments),p(this,"video",h,f)},u.default.prototype.createAudio=function(h,f){return u.default._validateParameters("createAudio",arguments),p(this,"audio",h,f)},u.default.prototype.VIDEO="video",u.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(h){var f=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return f?new Promise(function(d,g){f.call(navigator,h,d,g)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),u.default.prototype.createCapture=function(){if(u.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var h,f=!0,d=!0,g=!0,y=!1,b=void 0;try{for(var x,C=arguments[Symbol.iterator]();!(g=(x=C.next()).done);g=!0){var S=x.value;S===u.default.prototype.VIDEO?d=!1:S===u.default.prototype.AUDIO?f=!1:l(S)==="object"?w=S:typeof S=="function"&&(h=S)}}catch(I){y=!0,b=I}finally{try{g||C.return==null||C.return()}finally{if(y)throw b}}var w=w||{video:f,audio:d},_=document.createElement("video"),M=(_.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(w).then(function(I){try{"srcObject"in _?_.srcObject=I:_.src=window.URL.createObjectURL(I)}catch{_.src=I}},console.log),c(_,this,!0));return M.loadedmetadata=!1,_.addEventListener("loadedmetadata",function(){_.play(),_.width?(M.width=_.width,M.height=_.height):(M.width=M.elt.width=_.videoWidth,M.height=M.elt.height=_.videoHeight),M.loadedmetadata=!0,h&&h(_.srcObject)}),M},u.default.prototype.createElement=function(h,f){return u.default._validateParameters("createElement",arguments),h=document.createElement(h),f!==void 0&&(h.innerHTML=f),c(h,this)},u.default.Element.prototype.addClass=function(h){return this.elt.className?this.hasClass(h)||(this.elt.className=this.elt.className+" "+h):this.elt.className=h,this},u.default.Element.prototype.removeClass=function(h){return this.elt.classList.remove(h),this},u.default.Element.prototype.hasClass=function(h){return this.elt.classList.contains(h)},u.default.Element.prototype.toggleClass=function(h){return this.elt.classList.contains(h)?this.elt.classList.remove(h):this.elt.classList.add(h),this},u.default.Element.prototype.child=function(h){return h===void 0?this.elt.childNodes:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof u.default.Element&&(h=h.elt),h instanceof HTMLElement&&this.elt.appendChild(h),this)},u.default.Element.prototype.center=function(h){var f=this.elt.style.display,d=this.elt.style.display==="none",g=this.parent().style.display==="none",y={x:this.elt.offsetLeft,y:this.elt.offsetTop},b=(d&&this.show(),g&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),x=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return h==="both"||h===void 0?this.position(b/2+this.parent().offsetLeft,x/2+this.parent().offsetTop):h==="horizontal"?this.position(b/2+this.parent().offsetLeft,y.y):h==="vertical"&&this.position(y.x,x/2+this.parent().offsetTop),this.style("display",f),d&&this.hide(),g&&this.parent().hide(),this},u.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},u.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},u.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var h="";return this.elt.style.transform&&(h=(h=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=h,this},u.default.Element.prototype._rotate=function(){var h="";return this.elt.style.transform&&(h=(h=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=h,this},u.default.Element.prototype.style=function(h,f){if((f=f instanceof u.default.Color?"rgba("+f.levels[0]+","+f.levels[1]+","+f.levels[2]+","+f.levels[3]/255+")":f)===void 0){if(h.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(h);for(var d=h.split(";"),g=0;g<d.length;g++){var y=d[g].split(":");y[0]&&y[1]&&(this.elt.style[y[0].trim()]=y[1].trim())}}else this.elt.style[h]=f,h!=="width"&&h!=="height"&&h!=="left"&&h!=="top"||(f=window.getComputedStyle(this.elt).getPropertyValue(h).replace(/[^\d.]/g,""),this[h]=Math.round(parseFloat(f,10)));return this},u.default.Element.prototype.attribute=function(h,f){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return f===void 0?this.elt.getAttribute(h):(this.elt.setAttribute(h,f),this);if(f===void 0)return this.elt.firstChild.getAttribute(h);for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].setAttribute(h,f)},u.default.Element.prototype.removeAttribute=function(h){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var f=0;f<this.elt.childNodes.length;f++)this.elt.childNodes[f].removeAttribute(h);return this.elt.removeAttribute(h),this},u.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},u.default.Element.prototype.show=function(){return this.elt.style.display="block",this},u.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},u.default.Element.prototype.size=function(h,f){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var d=h,g=f,y=u.default.prototype.AUTO;if(d!==y||g!==y){if(d===y?d=f*this.width/this.height:g===y&&(g=h*this.height/this.width),this.elt instanceof HTMLCanvasElement){var b,x={},C=this.elt.getContext("2d");for(b in C)x[b]=C[b];for(b in this.elt.setAttribute("width",d*this._pInst._pixelDensity),this.elt.setAttribute("height",g*this._pInst._pixelDensity),this.elt.style.width=d+"px",this.elt.style.height=g+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),x)this.elt.getContext("2d")[b]=x[b]}else this.elt.style.width=d+"px",this.elt.style.height=g+"px",this.elt.width=d,this.elt.height=g;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},u.default.Element.prototype.remove=function(){this instanceof u.default.MediaElement&&(this.stop(),(f=this.elt.srcObject)!==null&&f.getTracks().forEach(function(d){d.stop()}));var h,f=this._pInst._elements.indexOf(this);for(h in f!==-1&&this._pInst._elements.splice(f,1),this._events)this.elt.removeEventListener(h,this._events[h]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},u.default.Element.prototype.drop=function(h,f){var d;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",d=function(g){g.preventDefault()}),this.elt.addEventListener("dragleave",d)),u.default.Element._attachListener("drop",function(g){g.preventDefault(),typeof f=="function"&&f.call(this,g);for(var y=g.dataTransfer.files,b=0;b<y.length;b++){var x=y[b];u.default.File._load(x,h)}},this)):console.log("The File APIs are not fully supported in this browser."),this},u.default.MediaElement=function(h,f){u.default.Element.call(this,h,f);var d=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(d,"src",{get:function(){var g=d.elt.children[0].src,y=d.elt.src===window.location.href?"":d.elt.src;return g===window.location.href?y:g},set:function(g){for(var y=0;y<d.elt.children.length;y++)d.elt.removeChild(d.elt.children[y]);var b=document.createElement("source");b.src=g,h.appendChild(b),d.elt.src=g,d.modified=!0}}),d._onended=function(){},d.elt.onended=function(){d._onended(d)}},u.default.MediaElement.prototype=Object.create(u.default.Element.prototype),u.default.MediaElement.prototype.play=function(){var h;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(h=this.elt.play())&&h.catch&&h.catch(function(f){f.name==="NotAllowedError"?console.error(f):console.error("Media play method encountered an unexpected error",f)}),this},u.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},u.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},u.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},u.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},u.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var h=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(h)},{passive:!0,once:!0})},u.default.MediaElement.prototype.autoplay=function(h){var f=this,d=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",h),h&&!d&&(h=function(){return f._setupAutoplayFailDetection()},this.elt.readyState===4?h():this.elt.addEventListener("canplay",h,{passive:!0,once:!0})),this},u.default.MediaElement.prototype.volume=function(h){if(h===void 0)return this.elt.volume;this.elt.volume=h},u.default.MediaElement.prototype.speed=function(h){if(h===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=h:this.presetPlaybackRate=h},u.default.MediaElement.prototype.time=function(h){return h===void 0?this.elt.currentTime:(this.elt.currentTime=h,this)},u.default.MediaElement.prototype.duration=function(){return this.elt.duration},u.default.MediaElement.prototype.pixels=[],u.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},u.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),u.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},u.default.MediaElement.prototype.updatePixels=function(h,f,d,g){return this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.updatePixels.call(this,h,f,d,g)),this.setModified(!0),this},u.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),u.default.Renderer2D.prototype.get.apply(this,arguments)},u.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),u.default.Renderer2D.prototype._getPixel.apply(this,arguments)},u.default.MediaElement.prototype.set=function(h,f,d){this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.set.call(this,h,f,d),this.setModified(!0))},u.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),u.default.prototype.copy.apply(this,arguments)},u.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),u.default.Image.prototype.mask.apply(this,arguments)},u.default.MediaElement.prototype.isModified=function(){return this._modified},u.default.MediaElement.prototype.setModified=function(h){this._modified=h},u.default.MediaElement.prototype.onended=function(h){return this._onended=h,this},u.default.MediaElement.prototype.connect=function(h){var f,d;if(typeof u.default.prototype.getAudioContext=="function")f=u.default.prototype.getAudioContext(),d=u.default.soundOut.input;else try{d=(f=h.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=f.createMediaElementSource(this.elt),this.audioSourceNode.connect(d)),h?h.input?this.audioSourceNode.connect(h.input):this.audioSourceNode.connect(h):this.audioSourceNode.connect(d)},u.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},u.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},u.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function m(h,f,d,g){this.callback=h,this.time=f,this.id=d,this.val=g}u.default.MediaElement.prototype.addCue=function(h,y,d){var g=this._cueIDCounter++,y=new m(y,h,g,d);return this._cues.push(y),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),g},u.default.MediaElement.prototype.removeCue=function(h){for(var f=0;f<this._cues.length;f++)this._cues[f].id===h&&(console.log(h),this._cues.splice(f,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},u.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},u.default.MediaElement.prototype._onTimeUpdate=function(){for(var h=this.time(),f=0;f<this._cues.length;f++){var d=this._cues[f].time,g=this._cues[f].val;this._prevTime<d&&d<=h&&this._cues[f].callback(g)}this._prevTime=h},u.default.File=function(h,f){this.file=h,this._pInst=f,f=h.type.split("/"),this.type=f[0],this.subtype=f[1],this.name=h.name,this.size=h.size,this.data=void 0},u.default.File._createLoader=function(h,f){var d=new FileReader;return d.onload=function(g){var y,b=new u.default.File(h);b.file.type==="application/json"?b.data=JSON.parse(g.target.result):b.file.type==="text/xml"?(y=new DOMParser().parseFromString(g.target.result,"text/xml"),b.data=new u.default.XML(y.documentElement)):b.data=g.target.result,f(b)},d},u.default.File._load=function(h,f){var d;/^text\//.test(h.type)||h.type==="application/json"?u.default.File._createLoader(h,f).readAsText(h):/^(video|audio)\//.test(h.type)?((d=new u.default.File(h)).data=URL.createObjectURL(h),f(d)):u.default.File._createLoader(h,f).readAsDataURL(h)},r=u.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(r,s,a){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}function u(S){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(C=r("../core/main"))&&C.__esModule?C:{default:C},c=function(S){if(S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var w=p();if(w&&w.has(S))return w.get(S);var _,M={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in S){var R;Object.prototype.hasOwnProperty.call(S,_)&&((R=I?Object.getOwnPropertyDescriptor(S,_):null)&&(R.get||R.set)?Object.defineProperty(M,_,R):M[_]=S[_])}return M.default=S,w&&w.set(S,M),M}(r("../core/constants"));function p(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,p=function(){return S},S)}l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var m=l.default.prototype.pRotationZ=0,h=0,f=0,d="clockwise",g="clockwise",y="clockwise",b=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),x=30,C=(l.default.prototype.setMoveThreshold=function(S){l.default._validateParameters("setMoveThreshold",arguments),b=S},l.default.prototype.setShakeThreshold=function(S){l.default._validateParameters("setShakeThreshold",arguments),x=S},l.default.prototype._ondeviceorientation=function(S){this._updatePRotations(),this._angleMode===c.radians&&(S.beta=S.beta*(_PI/180),S.gamma=S.gamma*(_PI/180),S.alpha=S.alpha*(_PI/180)),this._setProperty("rotationX",S.beta),this._setProperty("rotationY",S.gamma),this._setProperty("rotationZ",S.alpha),this._handleMotion()},l.default.prototype._ondevicemotion=function(S){this._updatePAccelerations(),this._setProperty("accelerationX",2*S.acceleration.x),this._setProperty("accelerationY",2*S.acceleration.y),this._setProperty("accelerationZ",2*S.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var S,w,_,M,I,R=this._isGlobal?window:this;typeof R.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>b||Math.abs(this.accelerationY-this.pAccelerationY)>b||Math.abs(this.accelerationZ-this.pAccelerationZ)>b)&&R.deviceMoved(),typeof R.deviceTurned=="function"&&(w=this.rotationX+180,S=this.pRotationX+180,_=m+180,0<w-S&&w-S<270||w-S<-270?d="clockwise":(w-S<0||270<w-S)&&(d="counter-clockwise"),d!==this.pRotateDirectionX&&(_=w),90<Math.abs(w-_)&&Math.abs(w-_)<270&&(_=w,this._setProperty("turnAxis","X"),R.deviceTurned()),this.pRotateDirectionX=d,m=_-180,S=this.rotationY+180,w=this.pRotationY+180,_=h+180,0<S-w&&S-w<270||S-w<-270?g="clockwise":(S-w<0||270<S-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(_=S),90<Math.abs(S-_)&&Math.abs(S-_)<270&&(_=S,this._setProperty("turnAxis","Y"),R.deviceTurned()),this.pRotateDirectionY=g,h=_-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?y="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(y="counter-clockwise"),y!==this.pRotateDirectionZ&&(f=this.rotationZ),90<Math.abs(this.rotationZ-f)&&Math.abs(this.rotationZ-f)<270&&(f=this.rotationZ,this._setProperty("turnAxis","Z"),R.deviceTurned()),this.pRotateDirectionZ=y,this._setProperty("turnAxis",void 0)),typeof R.deviceShaken=="function"&&(this.pAccelerationX!==null&&(M=Math.abs(this.accelerationX-this.pAccelerationX),I=Math.abs(this.accelerationY-this.pAccelerationY)),x<M+I&&R.deviceShaken())},l.default);a.default=C},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(u){var l;this._downKeys[u.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",u.which),this._downKeys[u.which]=!0,this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||u.charCode||l.keyPressed(u)===!1&&u.preventDefault())},o.default.prototype._onkeyup=function(u){this._downKeys[u.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),this._setProperty("keyCode",u.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(u)===!1&&u.preventDefault()},o.default.prototype._onkeypress=function(u){var l;u.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",u.which),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(u)===!1&&u.preventDefault())},o.default.prototype._onblur=function(u){this._downKeys={}},o.default.prototype.keyIsDown=function(u){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[u]||!1},o.default.prototype._areDownKeys=function(){for(var u in this._downKeys)if(this._downKeys.hasOwnProperty(u)&&this._downKeys[u]===!0)return!0;return!1},r=o.default,a.default=r},{"../core/main":267}],286:[function(r,s,a){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function u(m){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var h=p();if(h&&h.has(m))return h.get(m);var f,d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in m){var y;Object.prototype.hasOwnProperty.call(m,f)&&((y=g?Object.getOwnPropertyDescriptor(m,f):null)&&(y.get||y.set)?Object.defineProperty(d,f,y):d[f]=m[f])}return d.default=m,h&&h.set(m,d),d}(r("../core/constants"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(m){var h,f,d,g,y;this._curElement!==null&&(!m.touches||0<m.touches.length)&&(h=this._curElement.elt,f=this.width,d=this.height,(g=m)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=h.getBoundingClientRect(),f=h.scrollWidth/f||1,h=h.scrollHeight/d||1,d={x:(g.clientX-y.left)/f,y:(g.clientY-y.top)/h,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",m.movementX),this._setProperty("movedY",m.movementY),this._setProperty("mouseX",d.x),this._setProperty("mouseY",d.y),this._setProperty("winMouseX",d.winX),this._setProperty("winMouseY",d.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(m){m.button===1?this._setProperty("mouseButton",c.CENTER):m.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},l.default.prototype._onmousemove=function(m){var h=this._isGlobal?window:this;this._updateNextMouseCoords(m),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(m)===!1&&m.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(m)===!1&&m.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(m)===!1&&m.preventDefault()},l.default.prototype._onmousedown=function(m){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(m),this._updateNextMouseCoords(m),typeof h.mousePressed=="function"?h.mousePressed(m)===!1&&m.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof h.touchStarted=="function"&&h.touchStarted(m)===!1&&m.preventDefault()},l.default.prototype._onmouseup=function(m){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof h.mouseReleased=="function"?h.mouseReleased(m)===!1&&m.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(m)===!1&&m.preventDefault()},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(m){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(m)===!1&&m.preventDefault()},l.default.prototype._ondblclick=function(m){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(m)===!1&&m.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(m){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",m.deltaY),typeof h.mouseWheel=="function"&&(m.delta=m.deltaY,h.mouseWheel(m)===!1&&m.preventDefault())},l.default.prototype.requestPointerLock=function(){var m=this._curElement.elt;return m.requestPointerLock=m.requestPointerLock||m.mozRequestPointerLock,m.requestPointerLock?(m.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,a.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var u=[],l=0;l<o.touches.length;l++)u[l]=function(y,g,b,h){var f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=h.touches[f]||h.changedTouches[f];return{x:(b.clientX-d.left)/g,y:(b.clientY-d.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,o,l);this._setProperty("touches",u)}},r.default.prototype._ontouchstart=function(o){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof u.touchStarted=="function"?u.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof u.mousePressed=="function"&&u.mousePressed(o)===!1&&o.preventDefault()},r.default.prototype._ontouchmove=function(o){var u=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof u.touchMoved=="function"?u.touchMoved(o)===!1&&o.preventDefault():typeof u.mouseDragged=="function"&&u.mouseDragged(o)===!1&&o.preventDefault()},r.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var u=this._isGlobal?window:this;typeof u.touchEnded=="function"?u.touchEnded(o)===!1&&o.preventDefault():typeof u.mouseReleased=="function"&&u.mouseReleased(o)===!1&&o.preventDefault()},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(r,s,a){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,l,c,p={};function m(h,f){for(var d,g,y,b,x,C,S,w,_,M,I=p._toPixels(h),R=h.width,P=h.height,D=R*P,U=new Int32Array(D),F=0;F<D;F++)U[F]=p._getARGB(I,F);var z,J,Q,Z=new Int32Array(D),K=new Int32Array(D),H=new Int32Array(D),$=new Int32Array(D),Y=0,oe=3.5*f|0;if(o!==(oe=oe<1?1:oe<248?oe:248)){u=1+(o=oe)<<1,l=new Int32Array(u),c=new Array(u);for(var O,B,q=0;q<u;q++)c[q]=new Int32Array(256);for(var re=1,ae=oe-1;re<oe;re++){l[oe+re]=l[ae]=B=ae*ae;for(var me=c[oe+re],ge=c[ae--],xe=0;xe<256;xe++)me[xe]=ge[xe]=B*xe}O=l[oe]=oe*oe,me=c[oe];for(var pe=0;pe<256;pe++)me[pe]=O*pe}for(J=0;J<P;J++){for(z=0;z<R;z++){if(b=y=g=x=d=0,(C=z-o)<0)M=-C,C=0;else{if(R<=C)break;M=0}for(Q=M;Q<u&&!(R<=C);Q++){var ve,Ee=U[C+Y];x+=(ve=c[Q])[(-16777216&Ee)>>>24],g+=ve[(16711680&Ee)>>16],y+=ve[(65280&Ee)>>8],b+=ve[255&Ee],d+=l[Q],C++}Z[S=Y+z]=x/d,K[S]=g/d,H[S]=y/d,$[S]=b/d}Y+=R}for(_=(w=-o)*R,J=Y=0;J<P;J++){for(z=0;z<R;z++){if(w<(b=y=g=x=d=0))M=S=-w,C=z;else{if(P<=w)break;M=0,S=w,C=z+_}for(Q=M;Q<u&&!(P<=S);Q++)x+=(ve=c[Q])[Z[C]],g+=ve[K[C]],y+=ve[H[C]],b+=ve[$[C]],d+=l[Q],S++,C+=R;U[z+Y]=x/d<<24|g/d<<16|y/d<<8|b/d}Y+=R,_+=R,w++}p._setPixels(I,U)}p._toPixels=function(h){var f,d;return h instanceof ImageData?h.data:h.getContext("2d")?h.getContext("2d").getImageData(0,0,h.width,h.height).data:h.getContext("webgl")?(d=(f=h.getContext("webgl")).drawingBufferWidth*f.drawingBufferHeight*4,d=new Uint8Array(d),f.readPixels(0,0,h.width,h.height,f.RGBA,f.UNSIGNED_BYTE,d),d):void 0},p._getARGB=function(h,f){return f*=4,h[3+f]<<24&4278190080|h[f]<<16&16711680|h[1+f]<<8&65280|255&h[2+f]},p._setPixels=function(h,f){for(var d,g=0,y=h.length;g<y;g++)h[0+(d=4*g)]=(16711680&f[g])>>>16,h[1+d]=(65280&f[g])>>>8,h[2+d]=255&f[g],h[3+d]=(4278190080&f[g])>>>24},p._toImageData=function(h){return h instanceof ImageData?h:h.getContext("2d").getImageData(0,0,h.width,h.height)},p._createImageData=function(h,f){return p._tmpCanvas=document.createElement("canvas"),p._tmpCtx=p._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(h,f)},p.apply=function(h,b,d){var g=h.getContext("2d"),y=g.getImageData(0,0,h.width,h.height),b=b(y,d);b instanceof ImageData?g.putImageData(b,0,0,0,0,h.width,h.height):g.putImageData(y,0,0,0,0,h.width,h.height)},p.threshold=function(h,f){for(var d=p._toPixels(h),g=(f===void 0&&(f=.5),Math.floor(255*f)),y=0;y<d.length;y+=4){var b=void 0,b=g<=.2126*d[y]+.7152*d[y+1]+.0722*d[y+2]?255:0;d[y]=d[y+1]=d[y+2]=b}},p.gray=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4){var g=f[d],y=f[d+1],b=f[d+2];f[d]=f[d+1]=f[d+2]=.2126*g+.7152*y+.0722*b}},p.opaque=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4)f[d+3]=255;return f},p.invert=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4)f[d]=255-f[d],f[d+1]=255-f[d+1],f[d+2]=255-f[d+2]},p.posterize=function(h,f){var d=p._toPixels(h);if(f<2||255<f)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var g=f-1,y=0;y<d.length;y+=4){var b=d[y],x=d[y+1],C=d[y+2];d[y]=255*(b*f>>8)/g,d[y+1]=255*(x*f>>8)/g,d[y+2]=255*(C*f>>8)/g}},p.dilate=function(h){for(var f,d,g,y,b,x,C,S,w,_=p._toPixels(h),M=0,I=_.length?_.length/4:0,R=new Int32Array(I);M<I;)for(d=(f=M)+h.width;M<d;)y=g=p._getARGB(_,M),(w=M-1)<f&&(w=M),d<=(S=M+1)&&(S=M),(b=M-h.width)<0&&(b=0),I<=(x=M+h.width)&&(x=M),b=p._getARGB(_,b),w=p._getARGB(_,w),x=p._getARGB(_,x),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(C=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(g=w,y=C),y<(C=77*((w=p._getARGB(_,S))>>16&255)+151*(w>>8&255)+28*(255&w))&&(g=w,y=C),y<(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(g=b,y=S),y<(w=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(g=x,y=w),R[M++]=g;p._setPixels(_,R)},p.erode=function(h){for(var f,d,g,y,b,x,C,S,w,_=p._toPixels(h),M=0,I=_.length?_.length/4:0,R=new Int32Array(I);M<I;)for(d=(f=M)+h.width;M<d;)y=g=p._getARGB(_,M),(w=M-1)<f&&(w=M),d<=(S=M+1)&&(S=M),(b=M-h.width)<0&&(b=0),I<=(x=M+h.width)&&(x=M),b=p._getARGB(_,b),w=p._getARGB(_,w),x=p._getARGB(_,x),(C=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(g=w,y=C),(C=77*((w=p._getARGB(_,S))>>16&255)+151*(w>>8&255)+28*(255&w))<y&&(g=w,y=C),(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<y&&(g=b,y=S),(w=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<y&&(g=x,y=w),R[M++]=g;p._setPixels(_,R)},p.blur=function(h,f){m(h,f)},a.default=p},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("omggif"));function l(p){return p&&p.__esModule?p:{default:p}}function c(p){return function(m){if(Array.isArray(m)){for(var h=0,f=new Array(m.length);h<m.length;h++)f[h]=m[h];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(p,m){return o.default._validateParameters("createImage",arguments),new o.default.Image(p,m)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var p,m,h,f,d=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(p=arguments[0],d.shift()):arguments[0]instanceof o.default.Element?(p=arguments[0].elt,d.shift()):p=this._curElement&&this._curElement.elt,1<=d.length&&(m=d[0]),h=(h=2<=d.length?d[1]:h)||o.default.prototype._checkFileExtension(m,h)[1]||"png"){default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}p.toBlob(function(g){o.default.prototype.downloadFile(g,m,h)},f)},o.default.prototype.encodeAndDownloadGif=function(p,m){for(var h=p.gifProperties,f=h.loopLimit,d=(f===1?f=null:f===null&&(f=0),new Uint8Array(p.width*p.height*h.numFrames)),g=[],y={},b=0;b<h.numFrames;b++){for(var x=new Set,C=h.frames[b].image.data,S=C.length,w=new Uint32Array(p.width*p.height),_=0,M=0;_<S;_+=4,M++){var I=C[_+0]<<16|C[_+1]<<8|C[_+2]<<0;x.add(I),w[M]=I}var R=c(x).sort().toString();y[R]===void 0?y[R]={freq:1,frames:[b]}:(y[R].freq+=1,y[R].frames.push(b)),g.push(w)}for(var U=[],P=Object.keys(y).sort(function(O,B){return y[B].freq-y[O].freq}),D=P[0].split(",").map(function(O){return parseInt(O)}),U=U.concat(y[D].frames),F=new Set(D),z=1;z<P.length;z++){var J=P[z].split(",").map(function(O){return parseInt(O)}).filter(function(O){return!F.has(O)});if(D.length+J.length<=256){for(var Q=0;Q<J.length;Q++)D.push(J[Q]),F.add(J[Q]);U=U.concat(y[P[z]].frames)}}U=new Set(U);for(var Z={},K=0;K<D.length;K++)Z[D[K]]||(Z[D[K]]=K);for(var H=1;H<D.length;)H<<=1;D.length=H;for(var f={loop:f,palette:new Uint32Array(D)},$=new u.default.GifWriter(d,p.width,p.height,f),Y={},oe=0;oe<h.numFrames;oe++)(function(B){for(var q=!U.has(B),re=q?[]:D,ae=new Uint8Array(p.width*p.height),me={},ge=new Set,xe=0;xe<g[B].length;xe++){var pe=g[B][xe];q?(me[pe]===void 0&&(me[pe]=re.length,re.push(pe)),ae[xe]=me[pe]):ae[xe]=Z[pe],0<B&&g[B-1][xe]!==pe&&ge.add(pe)}var ve={},Ee=re.filter(function(Ie){return!ge.has(Ie)});if(0<Ee.length){var Ee=Ee[0],le=(q?me:Z)[Ee];if(0<B){for(var Se=0;Se<g[B].length;Se++)g[B-1][Se]===g[B][Se]&&(ae[Se]=le);ve.transparent=le,Y.frameOpts.disposal=1}}if(ve.delay=h.frames[B].delay/10,q){for(var be=1;be<re.length;)be<<=1;re.length=be,ve.palette=new Uint32Array(re)}0<B&&$.addFrame(0,0,p.width,p.height,Y.pixelPaletteIndex,Y.frameOpts),Y={pixelPaletteIndex:ae,frameOpts:ve}})(oe);Y.frameOpts.disposal=1,$.addFrame(0,0,p.width,p.height,Y.pixelPaletteIndex,Y.frameOpts),f=new Blob([d.slice(0,$.end())],{type:"image/gif"}),o.default.prototype.downloadFile(f,m,"gif")},o.default.prototype.saveFrames=function(p,m,h,g,d){o.default._validateParameters("saveFrames",arguments),h=o.default.prototype.constrain(h=h||3,0,15),h*=1e3;var g=o.default.prototype.constrain(g||15,0,22),y=0,b=o.default.prototype._makeFrame,x=this._curElement.elt,C=[],S=setInterval(function(){C.push(b(p+y,m,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(S),d)d(C);else{var w=!0,_=!1,M=void 0;try{for(var I,R=C[Symbol.iterator]();!(w=(I=R.next()).done);w=!0){var P=I.value;o.default.prototype.downloadFile(P.imageData,P.filename,P.ext)}}catch(D){_=!0,M=D}finally{try{w||R.return==null||R.return()}finally{if(_)throw M}}}C=[]},.01+h)},o.default.prototype._makeFrame=function(p,m,d){var f,d=this?this._curElement.elt:d;if(m)switch(m.toLowerCase()){case"png":f="image/png";break;case"jpeg":case"jpg":f="image/jpeg";break;default:f="image/png"}else m="png",f="image/png";var d=(d=d.toDataURL(f)).replace(f,"image/octet-stream"),g={};return g.imageData=d,g.filename=p,g.ext=m,g},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(r,s,a){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(x)}function u(x){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(C){return o(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":o(C)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r("regenerator-runtime/runtime");var l=d(r("../core/main")),c=d(r("../core/helpers")),p=function(x){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var C=f();if(C&&C.has(x))return C.get(x);var S,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var M;Object.prototype.hasOwnProperty.call(x,S)&&((M=_?Object.getOwnPropertyDescriptor(x,S):null)&&(M.get||M.set)?Object.defineProperty(w,S,M):w[S]=x[S])}return w.default=x,C&&C.set(x,w),w}(r("../core/constants")),m=d(r("omggif")),h=r("gifenc");function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x){return x&&x.__esModule?x:{default:x}}function g(x,C,S,w,_,M,I){try{var R=x[M](I),P=R.value}catch(D){return void S(D)}R.done?C(P):Promise.resolve(P).then(w,_)}function y(x,C,S,w,_,M,I,R,P,D,U){var F,z,J,Q,Z,K,H,$,Y;return x===p.COVER&&(F=C,J=S,H=M,$=I,K=R,Y=P,z=D,Q=U,Z=Math.max(H/z,$/Q),H/=Z,$/=Z,Z=K,K=Y,F===p.CENTER?Z+=(z-H)/2:F===p.RIGHT&&(Z+=z-H),J===p.CENTER?K+=(Q-$)/2:J===p.BOTTOM&&(K+=Q-$),R=(Y={x:Z,y:K,w:H,h:$}).x,P=Y.y,D=Y.w,U=Y.h),x===p.CONTAIN&&(F=C,z=S,J=w,Q=_,Z=M,K=I,H=D,$=U,Y=Math.max(H/Z,$/K),H/=Y,$/=Y,Y=J,J=Q,F===p.CENTER?Y+=(Z-H)/2:F===p.RIGHT&&(Y+=Z-H),z===p.CENTER?J+=(K-$)/2:z===p.BOTTOM&&(J+=K-$),w=(x={x:Y,y:J,w:H,h:$}).x,_=x.y,M=x.w,I=x.h),{sx:R,sy:P,sw:D,sh:U,dx:w,dy:_,dw:M,dh:I}}function b(x,C){return 0<x&&x<C?x:C}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(x,C,S){l.default._validateParameters("loadImage",arguments);var w=new l.default.Image(1,1,this),_=this,M=new Request(x,{method:"GET",mode:"cors"});return fetch(x,M).then(function(I){var R,P=I.headers.get("content-type");P===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),P&&P.includes("image/gif")?I.arrayBuffer().then(function(D){if(D){var D=new Uint8Array(D),U=w,F=C,z=S,J=function(q){_._decrementPreload()}.bind(_),Q=new m.default.GifReader(D),Z=(U.width=U.canvas.width=Q.width,U.height=U.canvas.height=Q.height,[]),K=Q.numFrames(),H=new Uint8ClampedArray(U.width*U.height*4);if(1<K){for(var $=0;$<K;$++){var Y=Q.frameInfo($),oe=U.drawingContext.getImageData(0,0,U.width,U.height),O=(H=oe.data.slice(),function(q,re){try{re.decodeAndBlitFrameRGBA(q,H)}catch(ae){l.default._friendlyFileLoadError(8,U.src),typeof z=="function"?z(ae):console.error(ae)}}($,Q),new ImageData(H,U.width,U.height)),O=(U.drawingContext.putImageData(O,0,0),Y.delay);O===0&&(O=10),Z.push({image:U.drawingContext.getImageData(0,0,U.width,U.height),delay:10*O}),Y.disposal===2?U.drawingContext.clearRect(Y.x,Y.y,Y.width,Y.height):Y.disposal===3&&U.drawingContext.putImageData(oe,0,0,Y.x,Y.y,Y.width,Y.height)}D=Q.loopCount(),D===null?D=1:D===0&&(D=null),U.drawingContext.putImageData(Z[0].image,0,0),U.gifProperties={displayIndex:0,loopLimit:D,loopCount:0,frames:Z,numFrames:K,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof F=="function"&&F(U),J()}},function(D){typeof S=="function"?(S(D),_._decrementPreload()):console.error(D)}):((R=new Image).onload=function(){w.width=w.canvas.width=R.width,w.height=w.canvas.height=R.height,w.drawingContext.drawImage(R,0,0),w.modified=!0,typeof C=="function"&&C(w),_._decrementPreload()},R.onerror=function(D){l.default._friendlyFileLoadError(0,R.src),typeof S=="function"?(S(D),_._decrementPreload()):console.error(D)},x.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=x),w.modified=!0}).catch(function(I){l.default._friendlyFileLoadError(0,x),typeof S=="function"?(S(I),_._decrementPreload()):console.error(I)}),w},l.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function S(w,_){var M,I,R,P,D,U,F,z,J,Q,Z,K,H,$,Y,oe,O,B,q,re,ae,me,ge,xe=arguments;return regeneratorRuntime.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(M=2<xe.length&&xe[2]!==void 0?xe[2]:{delay:0,units:"seconds"},typeof w!="string")throw TypeError("fileName parameter must be a string");pe.next=3;break;case 3:if(typeof _!="number")throw TypeError("Duration parameter must be a number");pe.next=5;break;case 5:if(I=M&&M.delay||0,R=M&&M.units||"seconds",typeof I!="number")throw TypeError("Delay parameter must be a number");pe.next=9;break;case 9:if(R!=="seconds"&&R!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');pe.next=11;break;case 11:this._recording=!0,F=this._targetFrameRate,P=(P=1/(F=F!==1/0&&F!==void 0&&F!==0?F:60)*1e3)<20?20:P,U=(D=R==="seconds"?_*F:_)+(F=R==="seconds"?I*F:I),F=F,this.frameCount=F,z=this._pixelDensity,this.pixelDensity(1),J=[],Q="p5.gif.progressBar",document.getElementById(Q)!==null&&document.getElementById(Q).remove(),(Q=this.createP("")).id("progressBar"),Q.style("font-size","16px"),Q.style("font-family","Montserrat"),Q.style("background-color","#ffffffa0"),Q.style("padding","8px"),Q.style("border-radius","10px"),Q.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(K=document.getElementById("defaultCanvas0").getContext("webgl"),Z=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4)),this.noLoop();case 36:if(F<U)return this.redraw(),ae=void 0,ae=this.drawingContext instanceof WebGLRenderingContext?(Z=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4),K.readPixels(0,0,K.drawingBufferWidth,K.drawingBufferHeight,K.RGBA,K.UNSIGNED_BYTE,Z),function(ve){for(var Ee=parseInt(height/2),le=4*width,Se=new Uint8Array(4*width),be=0;be<Ee;++be){var Ie=be*le,Me=(height-be-1)*le;Se.set(ve.subarray(Ie,Ie+le)),ve.copyWithin(Ie,Me,Me+le),ve.set(Se,Me)}return ve}(Z)):this.drawingContext.getImageData(0,0,this.width,this.height).data,J.push(ae),F++,Q.html("Saved frame <b>"+J.length.toString()+"</b> out of "+D.toString()),pe.next=45,new Promise(function(ve){return setTimeout(ve,0)});pe.next=47;break;case 45:pe.next=36;break;case 47:Q.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(z),H=(0,h.GIFEncoder)(),$=function(ve){for(var Ee=new Uint8Array(ve.length*ve[0].length),le=0;le<ve.length;le++)Ee.set(ve[le],le*ve[0].length);var Se=(0,h.quantize)(Ee,256,{format:"rgba4444",oneBitAlpha:!0});return Se.length===256?Se[Se.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Se.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Se}(J),Y={},oe=function(ve){for(var Ee=ve.length/4,le=new Uint8Array(Ee),Se=0;Se<Ee;Se++){var be=ve[4*Se]<<24|ve[4*Se+1]<<16|ve[4*Se+2]<<8|ve[4*Se+3];Y[be]===void 0&&(Y[be]=(0,h.nearestColorIndex)($,ve.slice(4*Se,4*(Se+1)))),le[Se]=Y[be]}return le},O=$.length-1,B=[],q=0;case 57:if(!(q<J.length)){pe.next=68;break}if(re=oe(J[q]),ae=re.slice(),q===0)H.writeFrame(re,this.width,this.height,{palette:$,delay:P,dispose:1});else{for(me=0;me<re.length;me++)re[me]===B[me]&&(re[me]=O);H.writeFrame(re,this.width,this.height,{delay:P,transparent:!0,transparentIndex:O,dispose:1})}return B=ae,Q.html("Rendered frame <b>"+q.toString()+"</b> out of "+D.toString()),pe.next=65,new Promise(function(ve){return setTimeout(ve,0)});case 65:q++,pe.next=57;break;case 68:H.finish(),ge=H.bytesView(),ge=new Blob([ge],{type:"image/gif"}),J=[],this._recording=!1,this.loop(),Q.html("Done. Downloading your gif!ð¸"),l.default.prototype.downloadFile(ge,w,"gif");case 77:case"end":return pe.stop()}},S,this)});var x,C=function(){var S=this,w=arguments;return new Promise(function(_,M){var I=x.apply(S,w);function R(D){g(I,_,M,R,P,"next",D)}function P(D){g(I,_,M,R,P,"throw",D)}R(void 0)})};return function(S,w){return C.apply(this,arguments)}}(),l.default.prototype.image=function(x,C,S,w,Q,Z,K,H,Y,D,U,F){l.default._validateParameters("image",arguments);var $=x.width,z=x.height,J=(F=F||p.CENTER,U=U||p.CENTER,x.elt&&x.elt.videoWidth&&!x.canvas&&($=x.elt.videoWidth,z=x.elt.videoHeight),w||$),Q=Q||z,Z=Z||0,K=K||0,H=b(H||$,$),$=b(Y||z,z),Y=1;x.elt&&!x.canvas&&x.elt.style.width&&(Y=x.elt.videoWidth&&!w?x.elt.videoWidth:x.elt.width,Y/=parseInt(x.elt.style.width,10)),Z*=Y,K*=Y,$*=Y,H*=Y,z=y(D,U,F,(z=c.default.modeAdjust(C,S,J,Q,this._renderer._imageMode)).x,z.y,z.w,z.h,Z,K,H,$),this._renderer.image(x,z.sx,z.sy,z.sw,z.sh,z.dx,z.dy,z.dw,z.dh)},l.default.prototype.tint=function(){for(var x=arguments.length,C=new Array(x),S=0;S<x;S++)C[S]=arguments[S];l.default._validateParameters("tint",C);var w=this.color.apply(this,C);this._renderer._tint=w.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(x){l.default._validateParameters("imageMode",arguments),x!==p.CORNER&&x!==p.CORNERS&&x!==p.CENTER||(this._renderer._imageMode=x)},r=l.default,a.default=r},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}o.default.Image=function(c,p){this.width=c,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},o.default.Image.prototype._animateGif=function(h){var p,m=this.gifProperties,h=h._lastFrameTime;m.lastChangeTime===0&&(m.lastChangeTime=h),m.playing&&(m.timeDisplayed=h-m.lastChangeTime,p=m.frames[m.displayIndex].delay,m.timeDisplayed>=p&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=h,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(h=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[h].image,0,0),m.displayIndex=h,this.setModified(!0))))},o.default.Image.prototype._setProperty=function(c,p){this[c]=p,this.setModified(!0)},o.default.Image.prototype.loadPixels=function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},o.default.Image.prototype.updatePixels=function(c,p,m,h){o.default.Renderer2D.prototype.updatePixels.call(this,c,p,m,h),this.setModified(!0)},o.default.Image.prototype.get=function(c,p,m,h){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.Image.prototype._getPixel=o.default.Renderer2D.prototype._getPixel,o.default.Image.prototype.set=function(c,p,m){o.default.Renderer2D.prototype.set.call(this,c,p,m),this.setModified(!0)},o.default.Image.prototype.resize=function(c,p){c===0&&p===0?(c=this.canvas.width,p=this.canvas.height):c===0?c=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*c/this.canvas.width),c=Math.floor(c),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=c,m.height=p,this.gifProperties)for(var h=this.gifProperties,f=0;f<h.numFrames;f++){for(var d=this.drawingContext.createImageData(c,p),g=(S=S=C=x=b=void 0,h.frames[f].image),y=d,b=0,x=0;x<y.height;x++)for(var C=0;C<y.width;C++){var S=Math.floor(C*g.width/y.width),S=4*(Math.floor(x*g.height/y.height)*g.width+S);y.data[b++]=g.data[S++],y.data[b++]=g.data[S++],y.data[b++]=g.data[S++],y.data[b++]=g.data[+S]}h.frames[f].image=d}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=c,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,c,p,0,0,c,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},o.default.Image.prototype.copy=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default.prototype.copy.apply(this,p)},o.default.Image.prototype.mask=function(c){var p=this.drawingContext.globalCompositeOperation,m=1,h=[c=c===void 0?this:c,0,0,(m=c instanceof o.default.Renderer?c._pInst._pixelDensity:m)*c.width,m*c.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var f=0;f<this.gifProperties.frames.length;f++)this.drawingContext.putImageData(this.gifProperties.frames[f].image,0,0),o.default.Image.prototype.copy.apply(this,h),this.gifProperties.frames[f].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else o.default.Image.prototype.copy.apply(this,h);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)},o.default.Image.prototype.filter=function(c,p){u.default.apply(this.canvas,u.default[c],p),this.setModified(!0)},o.default.Image.prototype.blend=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,p),this.setModified(!0)},o.default.Image.prototype.setModified=function(c){this._modified=c},o.default.Image.prototype.isModified=function(){return this._modified},o.default.Image.prototype.save=function(c,p){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,c):o.default.prototype.saveCanvas(this.canvas,c,p)},o.default.Image.prototype.reset=function(){var c;this.gifProperties&&((c=this.gifProperties).playing=!0,c.timeSinceStart=0,c.timeDisplayed=0,c.lastChangeTime=0,c.loopCount=0,c.displayIndex=0,this.drawingContext.putImageData(c.frames[0].image,0,0))},o.default.Image.prototype.getCurrentFrame=function(){var c;if(this.gifProperties)return(c=this.gifProperties).displayIndex%c.numFrames},o.default.Image.prototype.setFrame=function(c){var p;this.gifProperties&&(c<(p=this.gifProperties).numFrames&&0<=c?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=c,this.drawingContext.putImageData(p.frames[c].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},o.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},o.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},o.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},o.default.Image.prototype.delay=function(c,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=c;else{var h=!0,p=!1,f=void 0;try{for(var d,g=m.frames[Symbol.iterator]();!(h=(d=g.next()).done);h=!0)d.value.delay=c}catch(b){p=!0,f=b}finally{try{h||g.return==null||g.return()}finally{if(p)throw f}}}}},r=o.default.Image,a.default=r},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}r("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var c,p=arguments.length,m=new Array(p),h=0;h<p;h++)m[h]=arguments[h];o.default._validateParameters("blend",m),this._renderer?(c=this._renderer).blend.apply(c,m):o.default.Renderer2D.prototype.blend.apply(this,m)},o.default.prototype.copy=function(){for(var c,p,m,h,f,d,g,y,b,x=arguments.length,C=new Array(x),S=0;S<x;S++)C[S]=arguments[S];if(o.default._validateParameters("copy",C),C.length===9)c=C[0],p=C[1],m=C[2],h=C[3],f=C[4],d=C[5],g=C[6],y=C[7],b=C[8];else{if(C.length!==8)throw new Error("Signature not supported");c=this,p=C[0],m=C[1],h=C[2],f=C[3],d=C[4],g=C[5],y=C[6],b=C[7]}o.default.prototype._copyHelper(this,c,p,m,h,f,d,g,y,b)},o.default.prototype._copyHelper=function(c,p,m,h,f,d,g,y,b,x){p.loadPixels();var C=p.canvas.width/p.width,S=0,w=0;p._renderer&&p._renderer.isP3D&&(S=p.width/2,w=p.height/2),c._renderer&&c._renderer.isP3D?o.default.RendererGL.prototype.image.call(c._renderer,p,m+S,h+w,f,d,g,y,b,x):c.drawingContext.drawImage(p.canvas,C*(m+S),C*(h+w),C*f,C*d,g,y,b,x)},o.default.prototype.filter=function(c,p){o.default._validateParameters("filter",arguments),this.canvas!==void 0?u.default.apply(this.canvas,u.default[c],p):u.default.apply(this.elt,u.default[c],p)},o.default.prototype.get=function(c,p,m,h){var f;return o.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},o.default.prototype.loadPixels=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default._validateParameters("loadPixels",p),this._renderer.loadPixels()},o.default.prototype.set=function(c,p,m){this._renderer.set(c,p,m)},o.default.prototype.updatePixels=function(c,p,m,h){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,p,m,h)},r=o.default,a.default=r},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=p(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),p(r("fetch-jsonp"))),c=p(r("file-saver"));function p(d){return d&&d.__esModule?d:{default:d}}function m(d){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}function h(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(d,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(d=d||"untitled")&&d.includes(".")&&(y=d.split(".").pop()),g&&y!==g&&(y=g,d="".concat(d,".").concat(y)),[d,y]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),u.default.prototype.loadJSON=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];u.default._validateParameters("loadJSON",g);for(var b,x,C,S=g[0],w={},_="json",M=1;M<g.length;M++){var I=g[M];typeof I=="string"?I!=="jsonp"&&I!=="json"||(_=I):typeof I=="function"?b?x=I:b=I:m(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(_="jsonp",C=I)}var R=this;return this.httpDo(S,"GET",C,_,function(P){for(var D in P)w[D]=P[D];b!==void 0&&b(P),R._decrementPreload()},function(P){if(u.default._friendlyFileLoadError(5,S),!x)throw P;x(P)}),w},u.default.prototype.loadStrings=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];u.default._validateParameters("loadStrings",g);for(var b,x,C=[],S=1;S<g.length;S++){var w=g[S];typeof w=="function"&&(b===void 0?b=w:x===void 0&&(x=w))}var _=this;return u.default.prototype.httpDo.call(this,g[0],"GET","text",function(M){for(var I=M.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,P=I.length;R<P;R+=32768)Array.prototype.push.apply(C,I.slice(R,Math.min(R+32768,P)));b!==void 0&&b(C),_._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(3,M),!x)throw M;x(M)}),C},u.default.prototype.loadTable=function(d){var g,y,b,x=!1,C=d.substring(d.lastIndexOf(".")+1,d.length);C==="csv"?b=",":C==="ssv"?b=";":C==="tsv"&&(b="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?g===void 0?g=arguments[S]:y===void 0&&(y=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(x=!0),arguments[S]==="csv"?b=",":arguments[S]==="ssv"?b=";":arguments[S]==="tsv"&&(b="	"));var w=new u.default.Table,_=this;return this.httpDo(d,"GET","table",function(M){for(var I,R,P={},D=0,U=[],F=0,z=null,J=function(){P.currentState=D,P.token=""},Q=function(){z.push(P.token),J()},Z=function(){P.currentState=4,U.push(z),z=null};;){if((I=M[F++])==null){if(P.escaped)throw new Error("Unclosed quote in file.");if(z){Q(),Z();break}}if(z===null&&(P.escaped=!1,z=[],J()),P.currentState===D){if(I==='"'){P.escaped=!0,P.currentState=1;continue}P.currentState=1}if(P.currentState===1&&P.escaped)if(I==='"')M[F]==='"'?(P.token+='"',F++):(P.escaped=!1,P.currentState=2);else{if(I==="\r")continue;P.token+=I}else I==="\r"?(M[F]===`
`&&F++,Q(),Z()):I===`
`?(Q(),Z()):I===b?Q():P.currentState===1&&(P.token+=I)}if(x)w.columns=U.shift();else for(var K=0;K<U[0].length;K++)w.columns[K]="null";for(var H=0;H<U.length;H++)(U[H].length!==1||U[H][0]!=="undefined"&&U[H][0]!=="")&&((R=new u.default.TableRow).arr=U[H],R.obj=function($,Y){var oe={};if((Y=Y||[])===void 0)for(var O=0;O<$.length;O++)Y[O.toString()]=O;for(var B=0;B<Y.length;B++){var q=Y[B],re=$[B];oe[q]=re}return oe}(U[H],w.columns),w.addRow(R));typeof g=="function"&&g(w),_._decrementPreload()},function(M){u.default._friendlyFileLoadError(2,d),y?y(M):console.error(M)}),w},u.default.prototype.loadXML=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];for(var b,x,C=new u.default.XML,S=1;S<g.length;S++){var w=g[S];typeof w=="function"&&(b===void 0?b=w:x===void 0&&(x=w))}var _=this;return this.httpDo(g[0],"GET","xml",function(M){for(var I in M)C[I]=M[I];b!==void 0&&b(C),_._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(1,M),!x)throw M;x(M)}),C},u.default.prototype.loadBytes=function(d,g,y){var b={},x=this;return this.httpDo(d,"GET","arrayBuffer",function(C){b.bytes=new Uint8Array(C),typeof g=="function"&&g(b),x._decrementPreload()},function(C){if(u.default._friendlyFileLoadError(6,d),!y)throw C;y(C)}),b},u.default.prototype.httpGet=function(){u.default._validateParameters("httpGet",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"GET"),u.default.prototype.httpDo.apply(this,d)},u.default.prototype.httpPost=function(){u.default._validateParameters("httpPost",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"POST"),u.default.prototype.httpDo.apply(this,d)},u.default.prototype.httpDo=function(){for(var d,g,y,b={},x=0,C="text/plain",S=arguments.length-1;0<S&&typeof(S<0||arguments.length<=S?void 0:arguments[S])=="function";S--)x++;var w=arguments.length-x,_=arguments.length<=0?void 0:arguments[0];if(w==2&&typeof _=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")U=new Request(_,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var M,I="GET",R=1;R<arguments.length;R++){var P=R<0||arguments.length<=R?void 0:arguments[R];if(typeof P=="string")P==="GET"||P==="POST"||P==="PUT"||P==="DELETE"?I=P:P==="json"||P==="jsonp"||P==="binary"||P==="arrayBuffer"||P==="xml"||P==="text"||P==="table"?d=P:M=P;else if(typeof P=="number")M=P.toString();else if(m(P)==="object")if(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))for(var D in P)b[D]=P[D];else C=P instanceof u.default.XML?(M=P.serialize(),"application/xml"):(M=JSON.stringify(P),"application/json");else typeof P=="function"&&(g?y=P:g=P)}var w=I==="GET"?new Headers:new Headers({"Content-Type":C}),U=new Request(_,{method:I,mode:"cors",body:M,headers:w})}return(w=(w=(d=d||(_.includes("json")?"json":_.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(_,b):fetch(U)).then(function(F){if(!F.ok)throw(z=new Error(F.body)).status=F.status,z.ok=!1,z;var z=0;switch((z=d!=="jsonp"?F.headers.get("content-length"):z)&&64e6<z&&u.default._friendlyFileLoadError(7,_),d){case"json":case"jsonp":return F.json();case"binary":return F.blob();case"arrayBuffer":return F.arrayBuffer();case"xml":return F.text().then(function(J){return J=new DOMParser().parseFromString(J,"text/xml"),new u.default.XML(J.documentElement)});default:return F.text()}})).then(g||function(){}),w.catch(y||console.error),w},window.URL=window.URL||window.webkitURL,u.default.prototype._pWriters=[],u.default.prototype.createWriter=function(d,g){var y,b;for(b in u.default.prototype._pWriters)if(u.default.prototype._pWriters[b].name===d)return y=new u.default.PrintWriter(d+this.millis(),g),u.default.prototype._pWriters.push(y),y;return y=new u.default.PrintWriter(d,g),u.default.prototype._pWriters.push(y),y},u.default.PrintWriter=function(d,g){var y=this;this.name=d,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),u.default.prototype.writeFile(x,d,g),u.default.prototype._pWriters)u.default.prototype._pWriters[b].name===this.name&&u.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},u.default.prototype.save=function(d,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)u.default.prototype.saveCanvas(x);else if(b[0]instanceof u.default.Renderer||b[0]instanceof u.default.Graphics)u.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")u.default.prototype.saveCanvas(x,b[0]);else switch(f(b[1],b[2])[1]){case"json":return void u.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void u.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?u.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof u.default.Table?u.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof u.default.Image?u.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof u.default.SoundFile&&u.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},u.default.prototype.saveJSON=function(d,g,y){u.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(d):JSON.stringify(d,void 0,2),this.saveStrings(y.split(`
`),g,"json")},u.default.prototype.saveJSONObject=u.default.prototype.saveJSON,u.default.prototype.saveJSONArray=u.default.prototype.saveJSON,u.default.prototype.saveStrings=function(d,g,y,b){u.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),C=0;C<d.length;C++)b?x.write(d[C]+`\r
`):x.write(d[C]+`
`);x.close(),x.clear()},u.default.prototype.saveTable=function(d,g,y){u.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),C=d.columns,S=b==="tsv"?"	":",";if(b!=="html"){if(C[0]!=="0"){for(var w=0;w<C.length;w++)w<C.length-1?x.write(C[w]+S):x.write(C[w]);x.write(`
`)}for(var _=0;_<d.rows.length;_++){for(var M=void 0,M=0;M<d.rows[_].arr.length;M++)M<d.rows[_].arr.length-1?b==="csv"&&String(d.rows[_].arr[M]).includes(",")?x.write('"'+d.rows[_].arr[M]+'"'+S):x.write(d.rows[_].arr[M]+S):b==="csv"&&String(d.rows[_].arr[M]).includes(",")?x.write('"'+d.rows[_].arr[M]+'"'):x.write(d.rows[_].arr[M]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),C[0]!=="0"){x.print("    <tr>");for(var I=0;I<C.length;I++){var R=h(C[I]);x.print("      <td>".concat(R)),x.print("      </td>")}x.print("    </tr>")}for(var P=0;P<d.rows.length;P++){x.print("    <tr>");for(var D=0;D<d.columns.length;D++){var U=h(d.rows[P].getString(D));x.print("      <td>".concat(U)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},u.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(u.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));u.default.prototype.downloadFile(x,g,y)},u.default.prototype.downloadFile=function(d,x,C){var b,x=f(x,C),C=x[0];d instanceof Blob?c.default.saveAs(d,C):((b=document.createElement("a")).href=d,b.download=C,b.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},b.style.display="none",document.body.appendChild(b),u.default.prototype._isSafari()&&(d=(d=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(d)),b.click())},u.default.prototype._checkFileExtension=f,u.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},r=u.default,a.default=r},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Table=function(u){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(u){if(u=u||new o.default.TableRow,u.arr===void 0||u.obj===void 0)throw new Error("invalid TableRow: ".concat(u));return(u.table=this).rows.push(u),u},o.default.Table.prototype.removeRow=function(u){this.rows[u].table=null,u=this.rows.splice(u+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(u)},o.default.Table.prototype.getRow=function(u){return this.rows[u]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(u,l){if(typeof l=="string"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[l]===u)return this.rows[c]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[l]===u)return this.rows[p];return null},o.default.Table.prototype.findRows=function(u,l){var c=[];if(typeof l=="string")for(var p=0;p<this.rows.length;p++)this.rows[p].obj[l]===u&&c.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[l]===u&&c.push(this.rows[m]);return c},o.default.Table.prototype.matchRow=function(u,l){if(typeof l=="number"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[l].match(u))return this.rows[c]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[l].match(u))return this.rows[p];return null},o.default.Table.prototype.matchRows=function(u,l){var c=[];if(typeof l=="number")for(var p=0;p<this.rows.length;p++)this.rows[p].arr[l].match(u)&&c.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[l].match(u)&&c.push(this.rows[m]);return c},o.default.Table.prototype.getColumn=function(u){var l=[];if(typeof u=="string")for(var c=0;c<this.rows.length;c++)l.push(this.rows[c].obj[u]);else for(var p=0;p<this.rows.length;p++)l.push(this.rows[p].arr[u]);return l},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(u){this.columns.push(u||null)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(u,l){for(var c=[],p=0;p<u.length;p++)c.push(u.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(c.join("|"),"g");if(l===void 0)for(var h=0;h<this.columns.length;h++)for(var f=0;f<this.rows.length;f++){var d=(d=this.rows[f].arr[h]).replace(m,"");this.rows[f].arr[h]=d,this.rows[f].obj[this.columns[h]]=d}else if(typeof l=="string")for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].obj[l]).replace(m,""),b=(this.rows[g].obj[l]=y,this.columns.indexOf(l));this.rows[g].arr[b]=y}else for(var x=0;x<this.rows.length;x++){var C=(C=this.rows[x].arr[l]).replace(m,"");this.rows[x].arr[l]=C,this.rows[x].obj[this.columns[l]]=C}},o.default.Table.prototype.trim=function(u){var l=new RegExp(" ","g");if(u===void 0)for(var c=0;c<this.columns.length;c++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[c]).replace(l,"");this.rows[p].arr[c]=m,this.rows[p].obj[this.columns[c]]=m}else if(typeof u=="string")for(var h=0;h<this.rows.length;h++){var f=(f=this.rows[h].obj[u]).replace(l,""),d=(this.rows[h].obj[u]=f,this.columns.indexOf(u));this.rows[h].arr[d]=f}else for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[u]).replace(l,"");this.rows[g].arr[u]=y,this.rows[g].obj[this.columns[u]]=y}},o.default.Table.prototype.removeColumn=function(p){typeof p=="string"?c=this.columns.indexOf(l=p):l=this.columns[c=p];var l,c,p=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var h=this.rows[m].arr,f=h.splice(c+1,h.length);h.pop(),this.rows[m].arr=h.concat(f),delete this.rows[m].obj[l]}},o.default.Table.prototype.set=function(u,l,c){this.rows[u].set(l,c)},o.default.Table.prototype.setNum=function(u,l,c){this.rows[u].setNum(l,c)},o.default.Table.prototype.setString=function(u,l,c){this.rows[u].setString(l,c)},o.default.Table.prototype.get=function(u,l){return this.rows[u].get(l)},o.default.Table.prototype.getNum=function(u,l){return this.rows[u].getNum(l)},o.default.Table.prototype.getString=function(u,l){return this.rows[u].getString(l)},o.default.Table.prototype.getObject=function(u){for(var l,c={},p=0;p<this.rows.length;p++)if(l=this.rows[p].obj,typeof u=="string"){if(!(0<=this.columns.indexOf(u)))throw new Error('This table has no column named "'.concat(u,'"'));c[l[u]]=l}else c[p]=this.rows[p].obj;return c},o.default.Table.prototype.getArray=function(){for(var u=[],l=0;l<this.rows.length;l++)u.push(this.rows[l].arr);return u},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(r,s,a){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.TableRow=function(o,u){var l=[],c={};o&&(l=o.split(u=u||","));for(var p=0;p<l.length;p++){var m=p,h=l[p];c[m]=h}this.arr=l,this.obj=c,this.table=null},r.default.TableRow.prototype.set=function(o,u){if(typeof o=="string"){var l=this.table.columns.indexOf(o);if(!(0<=l))throw new Error('This table has no column named "'.concat(o,'"'));this.obj[o]=u,this.arr[l]=u}else{if(!(o<this.table.columns.length))throw new Error("Column #".concat(o," is out of the range of this table"));this.arr[o]=u,l=this.table.columns[o],this.obj[l]=u}},r.default.TableRow.prototype.setNum=function(o,u){u=parseFloat(u),this.set(o,u)},r.default.TableRow.prototype.setString=function(o,u){u=u.toString(),this.set(o,u)},r.default.TableRow.prototype.get=function(o){return(typeof o=="string"?this.obj:this.arr)[o]},r.default.TableRow.prototype.getNum=function(o){var u=parseFloat(typeof o=="string"?this.obj[o]:this.arr[o]);if(u.toString()==="NaN")throw"Error: ".concat(this.obj[o]," is NaN (Not a Number)");return u},r.default.TableRow.prototype.getString=function(o){return(typeof o=="string"?this.obj:this.arr)[o].toString()},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l){for(var c=[],p=0;p<l.length;p++)c.push(new o.default.XML(l[p]));return c}o.default.XML=function(l){l?this.DOM=l:(l=document.implementation.createDocument(null,"doc"),this.DOM=l.createElement("root"))},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(l){var c=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(l);m.innerHTML=c;for(var h=0;h<p.length;h++)m.setAttribute(p[h].nodeName,p.nodeValue);this.DOM=m},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var l=[],c=0;c<this.DOM.childNodes.length;c++)l.push(this.DOM.childNodes[c].nodeName);return l},o.default.XML.prototype.getChildren=function(l){return u(l?this.DOM.getElementsByTagName(l):this.DOM.children)},o.default.XML.prototype.getChild=function(l){if(typeof l!="string")return new o.default.XML(this.DOM.children[l]);var c=!0,p=!1,m=void 0;try{for(var h,f=this.DOM.children[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;if(d.tagName===l)return new o.default.XML(d)}}catch(g){p=!0,m=g}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}},o.default.XML.prototype.addChild=function(l){l instanceof o.default.XML&&this.DOM.appendChild(l.DOM)},o.default.XML.prototype.removeChild=function(l){var c=-1;if(typeof l=="string"){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===l){c=p;break}}else c=l;c!==-1&&this.DOM.removeChild(this.DOM.children[c])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var l=[],c=!0,p=!1,m=void 0;try{for(var h,f=this.DOM.attributes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;l.push(d.nodeName)}}catch(g){p=!0,m=g}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}return l},o.default.XML.prototype.hasAttribute=function(l){var c={},p=!0,m=!1,h=void 0;try{for(var f,d=this.DOM.attributes[Symbol.iterator]();!(p=(f=d.next()).done);p=!0){var g=f.value;c[g.nodeName]=g.nodeValue}}catch(y){m=!0,h=y}finally{try{p||d.return==null||d.return()}finally{if(m)throw h}}return!!c[l]},o.default.XML.prototype.getNum=function(l,c){var p={},m=!0,h=!1,f=void 0;try{for(var d,g=this.DOM.attributes[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var y=d.value;p[y.nodeName]=y.nodeValue}}catch(b){h=!0,f=b}finally{try{m||g.return==null||g.return()}finally{if(h)throw f}}return Number(p[l])||c||0},o.default.XML.prototype.getString=function(l,c){var p={},m=!0,h=!1,f=void 0;try{for(var d,g=this.DOM.attributes[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var y=d.value;p[y.nodeName]=y.nodeValue}}catch(b){h=!0,f=b}finally{try{m||g.return==null||g.return()}finally{if(h)throw f}}return p[l]?String(p[l]):c||null},o.default.XML.prototype.setAttribute=function(l,c){this.DOM.setAttribute(l,c)},o.default.XML.prototype.getContent=function(l){var c=this.DOM.textContent;return(c=c.replace(/\s\s+/g,","))||l||null},o.default.XML.prototype.setContent=function(l){this.DOM.children.length||(this.DOM.textContent=l)},o.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var l=arguments.length,c=[],p=0,m=0;m<l;m++){var h=arguments[m];if((h=+h)===1/0||h===-1/0)return 1/0;p<(h=Math.abs(h))&&(p=h),c[m]=h}p===0&&(p=1);for(var b=0,y=0,f=0;f<l;f++)var d=c[f]/p,d=d*d-y,g=b+d,y=g-b-d,b=g;return Math.sqrt(b)*p}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(l,c,p){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(l,p),c)},o.default.prototype.dist=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("dist",c),c.length===4?u(c[2]-c[0],c[3]-c[1]):c.length===6?u(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(l,c,p){return o.default._validateParameters("lerp",arguments),p*(c-l)+l},o.default.prototype.log=Math.log,o.default.prototype.mag=function(l,c){return o.default._validateParameters("mag",arguments),u(l,c)},o.default.prototype.map=function(l,c,p,m,h,f){return o.default._validateParameters("map",arguments),l=(l-c)/(p-c)*(h-m)+m,f?m<h?this.constrain(l,m,h):this.constrain(l,h,m):l},o.default.prototype.max=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]instanceof Array?Math.max.apply(null,c[0]):Math.max.apply(null,c)},o.default.prototype.min=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]instanceof Array?Math.min.apply(null,c[0]):Math.min.apply(null,c)},o.default.prototype.norm=function(l,c,p){return o.default._validateParameters("norm",arguments),this.map(l,c,p,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(l,c){return c?(c=Math.pow(10,c),Math.round(l*c)/c):Math.round(l)},o.default.prototype.sq=function(l){return l*l},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(m){o.default._validateParameters("fract",arguments);var c,p=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,p=1),String(m).includes(".")&&!String(m).includes("e")?(c=String(m),c=Number("0"+c.slice(c.indexOf("."))),Math.abs(p-c)):m<1?Math.abs(p-m):0)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,p,m){return(u=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,f,d){var g=[null];return g.push.apply(g,f),f=new(Function.bind.apply(h,g)),d&&l(f,d.prototype),f}).apply(null,arguments)}function l(c,p){return(l=Object.setPrototypeOf||function(m,h){return m.__proto__=h,m})(c,p)}o.default.prototype.createVector=function(c,p,m){return this instanceof o.default?u(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(c,p,m)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(m,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,m=(m=m("../core/main"))&&m.__esModule?m:{default:m};function o(h){return .5*(1-Math.cos(h*Math.PI))}var u,l=4095,c=4,p=.5,m=(m.default.prototype.noise=function(h){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(u==null){u=new Array(4096);for(var g=0;g<4096;g++)u[g]=Math.random()}h<0&&(h=-h),f<0&&(f=-f),d<0&&(d=-d);for(var y,b,x=Math.floor(h),C=Math.floor(f),S=Math.floor(d),w=h-x,_=f-C,M=d-S,I=0,R=.5,P=0;P<c;P++){var D=x+(C<<4)+(S<<8),U=o(w),F=o(_),z=u[D&l];z+=U*(u[D+1&l]-z),y=u[D+16&l],z+=F*((y+=U*(u[D+16+1&l]-y))-z),y=u[(D+=256)&l],y+=U*(u[D+1&l]-y),b=u[D+16&l],y+=F*((b+=U*(u[D+16+1&l]-b))-y),I+=(z+=o(M)*(y-z))*R,R*=p,x<<=1,C<<=1,S<<=1,1<=(w*=2)&&(x++,w--),1<=(_*=2)&&(C++,_--),1<=(M*=2)&&(S++,M--)}return I},m.default.prototype.noiseDetail=function(h,f){0<h&&(c=h),0<f&&(p=f)},m.default.prototype.noiseSeed=function(h){g=4294967296;var f,d,g,y={setSeed:function(x){d=f=(x??Math.random()*g)>>>0},getSeed:function(){return f},rand:function(){return(d=(1664525*d+1013904223)%g)/g}};y.setSeed(h),u=new Array(4096);for(var b=0;b<4096;b++)u[b]=y.rand()},m.default);a.default=m},{"../core/main":267}],300:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=function(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=p();if(g&&g.has(d))return g.get(d);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var C;Object.prototype.hasOwnProperty.call(d,y)&&((C=x?Object.getOwnPropertyDescriptor(d,y):null)&&(C.get||C.set)?Object.defineProperty(b,y,C):b[y]=d[y])}return b.default=d,g&&g.set(d,b),b}(r("../core/constants"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}l.default.Vector=function(){var d,g,y={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],d=arguments[2]||0,g=arguments[3]||0,arguments[4]||0):(d=arguments[0]||0,g=arguments[1]||0,arguments[2]||0);this.x=d,this.y=g,this.z=y},l.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},l.default.Vector.prototype.set=function(d,g,y){return d instanceof l.default.Vector?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0):d instanceof Array?(this.x=d[0]||0,this.y=d[1]||0,this.z=d[2]||0):(this.x=d||0,this.y=g||0,this.z=y||0),this},l.default.Vector.prototype.copy=function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)},l.default.Vector.prototype.add=function(d,g,y){return d instanceof l.default.Vector?(this.x+=d.x||0,this.y+=d.y||0,this.z+=d.z||0):d instanceof Array?(this.x+=d[0]||0,this.y+=d[1]||0,this.z+=d[2]||0):(this.x+=d||0,this.y+=g||0,this.z+=y||0),this};function m(d,g){return d!==0&&(this.x=this.x%d),g!==0&&(this.y=this.y%g),this}function h(d,g,y){return d!==0&&(this.x=this.x%d),g!==0&&(this.y=this.y%g),y!==0&&(this.z=this.z%y),this}l.default.Vector.prototype.rem=function(d,g,y){var b;if(d instanceof l.default.Vector){if(Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z))return x=parseFloat(d.x),C=parseFloat(d.y),b=parseFloat(d.z),h.call(this,x,C,b)}else if(d instanceof Array){if(d.every(function(S){return Number.isFinite(S)}))return d.length===2?m.call(this,d[0],d[1]):d.length===3?h.call(this,d[0],d[1],d[2]):void 0}else if(arguments.length===1){if(Number.isFinite(d)&&d!==0)return this.x=this.x%d,this.y=this.y%d,this.z=this.z%d,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);if(x.every(function(S){return Number.isFinite(S)})&&x.length===2)return m.call(this,x[0],x[1])}else if(arguments.length===3){var C=Array.prototype.slice.call(arguments);if(C.every(function(S){return Number.isFinite(S)})&&C.length===3)return h.call(this,C[0],C[1],C[2])}},l.default.Vector.prototype.sub=function(d,g,y){return d instanceof l.default.Vector?(this.x-=d.x||0,this.y-=d.y||0,this.z-=d.z||0):d instanceof Array?(this.x-=d[0]||0,this.y-=d[1]||0,this.z-=d[2]||0):(this.x-=d||0,this.y-=g||0,this.z-=y||0),this},l.default.Vector.prototype.mult=function(d,g,y){var b;return d instanceof l.default.Vector?Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z)&&typeof d.x=="number"&&typeof d.y=="number"&&typeof d.z=="number"?(this.x*=d.x,this.y*=d.y,this.z*=d.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):d instanceof Array?d.every(function(x){return Number.isFinite(x)})&&d.every(function(x){return typeof x=="number"})?d.length===1?(this.x*=d[0],this.y*=d[0],this.z*=d[0]):d.length===2?(this.x*=d[0],this.y*=d[1]):d.length===3&&(this.x*=d[0],this.y*=d[1],this.z*=d[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(b=Array.prototype.slice.call(arguments)).every(function(x){return Number.isFinite(x)})&&b.every(function(x){return typeof x=="number"})?(arguments.length===1&&(this.x*=d,this.y*=d,this.z*=d),arguments.length===2&&(this.x*=d,this.y*=g),arguments.length===3&&(this.x*=d,this.y*=g,this.z*=y)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},l.default.Vector.prototype.div=function(d,g,y){if(d instanceof l.default.Vector)if(Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z)&&typeof d.x=="number"&&typeof d.y=="number"&&typeof d.z=="number"){var b=d.z===0&&this.z===0;if(d.x===0||d.y===0||!b&&d.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=d.x,this.y/=d.y,b||(this.z/=d.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(d instanceof Array)if(d.every(function(x){return Number.isFinite(x)})&&d.every(function(x){return typeof x=="number"})){if(d.some(function(x){return x===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;d.length===1?(this.x/=d[0],this.y/=d[0],this.z/=d[0]):d.length===2?(this.x/=d[0],this.y/=d[1]):d.length===3&&(this.x/=d[0],this.y/=d[1],this.z/=d[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(b=Array.prototype.slice.call(arguments),b.every(function(x){return Number.isFinite(x)})&&b.every(function(x){return typeof x=="number"})){if(b.some(function(x){return x===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=d,this.y/=d,this.z/=d),arguments.length===2&&(this.x/=d,this.y/=g),arguments.length===3&&(this.x/=d,this.y/=g,this.z/=y)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},l.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},l.default.Vector.prototype.magSq=function(){var d=this.x,g=this.y,y=this.z;return d*d+g*g+y*y},l.default.Vector.prototype.dot=function(d,g,y){return d instanceof l.default.Vector?this.dot(d.x,d.y,d.z):this.x*(d||0)+this.y*(g||0)+this.z*(y||0)},l.default.Vector.prototype.cross=function(b){var g=this.y*b.z-this.z*b.y,y=this.z*b.x-this.x*b.z,b=this.x*b.y-this.y*b.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,g,y,b):new l.default.Vector(g,y,b)},l.default.Vector.prototype.dist=function(d){return d.copy().sub(this).mag()},l.default.Vector.prototype.normalize=function(){var d=this.mag();return d!==0&&this.mult(1/d),this},l.default.Vector.prototype.limit=function(d){var g=this.magSq();return d*d<g&&this.div(Math.sqrt(g)).mult(d),this},l.default.Vector.prototype.setMag=function(d){return this.normalize().mult(d)},l.default.Vector.prototype.heading=function(){var d=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(d):d},l.default.Vector.prototype.setHeading=function(d){this.isPInst&&(d=this._toRadians(d));var g=this.mag();return this.x=g*Math.cos(d),this.y=g*Math.sin(d),this},l.default.Vector.prototype.rotate=function(g){var g=this.heading()+g,y=(this.isPInst&&(g=this._toRadians(g)),this.mag());return this.x=Math.cos(g)*y,this.y=Math.sin(g)*y,this},l.default.Vector.prototype.angleBetween=function(d){var g=this.dot(d)/(this.mag()*d.mag()),g=Math.acos(Math.min(1,Math.max(-1,g)));return g*=Math.sign(this.cross(d).z||1),g=this.isPInst?this._fromRadians(g):g},l.default.Vector.prototype.lerp=function(d,g,y,b){return d instanceof l.default.Vector?this.lerp(d.x,d.y,d.z,g):(this.x+=(d-this.x)*b||0,this.y+=(g-this.y)*b||0,this.z+=(y-this.z)*b||0,this)},l.default.Vector.prototype.reflect=function(d){return d.normalize(),this.sub(d.mult(2*this.dot(d)))},l.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},l.default.Vector.prototype.equals=function(C,g,y){var b,x,C=C instanceof l.default.Vector?(b=C.x||0,x=C.y||0,C.z||0):C instanceof Array?(b=C[0]||0,x=C[1]||0,C[2]||0):(b=C||0,x=g||0,y||0);return this.x===b&&this.y===x&&this.z===C},l.default.Vector.fromAngle=function(d,g){return new l.default.Vector((g=g===void 0?1:g)*Math.cos(d),g*Math.sin(d),0)},l.default.Vector.fromAngles=function(S,x,y){y===void 0&&(y=1);var b=Math.cos(x),x=Math.sin(x),C=Math.cos(S),S=Math.sin(S);return new l.default.Vector(y*S*x,-y*C,y*S*b)},l.default.Vector.random2D=function(){return this.fromAngle(Math.random()*c.TWO_PI)},l.default.Vector.random3D=function(){var d=Math.random()*c.TWO_PI,g=2*Math.random()-1,b=Math.sqrt(1-g*g),y=b*Math.cos(d),b=b*Math.sin(d);return new l.default.Vector(y,b,g)},l.default.Vector.copy=function(d){return d.copy(d)},l.default.Vector.add=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),y.add(g),y},l.default.Vector.rem=function(d,g){if(d instanceof l.default.Vector&&g instanceof l.default.Vector)return(d=d.copy()).rem(g),d},l.default.Vector.sub=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),y.sub(g),y},l.default.Vector.mult=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),y.mult(g),y},l.default.Vector.rotate=function(d,g,y){return arguments.length===2?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),y.set(d)),y.rotate(g),y},l.default.Vector.div=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),y.div(g),y},l.default.Vector.dot=function(d,g){return d.dot(g)},l.default.Vector.cross=function(d,g){return d.cross(g)},l.default.Vector.dist=function(d,g){return d.dist(g)},l.default.Vector.lerp=function(d,g,y,b){return b?b.set(d):(b=d.copy(),arguments.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),b.lerp(g,y),b},l.default.Vector.mag=function(d){return d.mag()},l.default.Vector.magSq=function(d){return d.magSq()},l.default.Vector.normalize=function(d,g){return arguments.length<2?g=d.copy():(g instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),g.set(d)),g.normalize()},l.default.Vector.limit=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),y.set(d)),y.limit(g)},l.default.Vector.setMag=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),y.set(d)),y.setMag(g)},l.default.Vector.heading=function(d){return d.heading()},l.default.Vector.angleBetween=function(d,g){return d.angleBetween(g)},l.default.Vector.reflect=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),y.set(d)),y.reflect(g)},l.default.Vector.array=function(d){return d.array()},l.default.Vector.equals=function(d,g){var y;return d instanceof l.default.Vector?y=d:d instanceof Array?y=new l.default.Vector().set(d):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),y.equals(g)};var f=l.default.Vector;a.default=f},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(p,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(p=p("../core/main"))&&p.__esModule?p:{default:p},u="_lcg_random_state",l=4294967296,c=0,p=(o.default.prototype._lcg=function(m){return this[m]=(1664525*this[m]+1013904223)%l,this[m]/l},o.default.prototype._lcgSetSeed=function(m,h){this[m]=(h??Math.random()*l)>>>0},o.default.prototype.randomSeed=function(m){this._lcgSetSeed(u,m),this._gaussian_previous=!1},o.default.prototype.random=function(m,h){var f,d;return o.default._validateParameters("random",arguments),f=this[u]!=null?this._lcg(u):Math.random(),m===void 0?f:h===void 0?m instanceof Array?m[Math.floor(f*m.length)]:f*m:(h<m&&(d=m,m=h,h=d),f*(h-m)+m)},o.default.prototype.randomGaussian=function(m){var h,f,d,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=c,this._gaussian_previous=!1;else{for(;1<=(g=(f=this.random(2)-1)*f+(d=this.random(2)-1)*d););h=f*(g=Math.sqrt(-2*Math.log(g)/g)),c=d*g,this._gaussian_previous=!0}return h*y+(m||0)},o.default);a.default=p},{"../core/main":267}],302:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype._angleMode=c.RADIANS,l.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},l.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},l.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},l.default.prototype.atan2=function(h,f){return this._fromRadians(Math.atan2(h,f))},l.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},l.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},l.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},l.default.prototype.degrees=function(h){return h*c.RAD_TO_DEG},l.default.prototype.radians=function(h){return h*c.DEG_TO_RAD},l.default.prototype.angleMode=function(h){if(l.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==c.DEGREES&&h!==c.RADIANS||(this._angleMode=h)},l.default.prototype._toRadians=function(h){return this._angleMode===c.DEGREES?h*c.DEG_TO_RAD:h},l.default.prototype._toDegrees=function(h){return this._angleMode===c.RADIANS?h*c.RAD_TO_DEG:h},l.default.prototype._fromRadians=function(h){return this._angleMode===c.DEGREES?h*c.RAD_TO_DEG:h};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.textAlign=function(u,l){var c;return o.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},o.default.prototype.textLeading=function(u){var l;return o.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},o.default.prototype.textSize=function(u){var l;return o.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},o.default.prototype.textStyle=function(u){var l;return o.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},o.default.prototype.textWidth=function(){for(var u,l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]+="",o.default._validateParameters("textWidth",c),c[0].length===0?0:(u=this._renderer).textWidth.apply(u,c)},o.default.prototype.textAscent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return o.default._validateParameters("textAscent",l),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return o.default._validateParameters("textDescent",l),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(u){if(u!=="WORD"&&u!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(u)},r=o.default,a.default=r},{"../core/main":267}],304:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=h(r("../core/constants")),p=h(r("opentype.js"));function m(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,m=function(){return d},d)}function h(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=m();if(g&&g.has(d))return g.get(d);var y,b,x={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d)Object.prototype.hasOwnProperty.call(d,y)&&((b=C?Object.getOwnPropertyDescriptor(d,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=d[y]);return x.default=d,g&&g.set(d,x),x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(d,g,y){l.default._validateParameters("loadFont",arguments);var b=new l.default.Font(this),x=this;return p.load(d,function(w,_){if(w)return l.default._friendlyFileLoadError(4,d),y!==void 0?y(w):void console.error(w,d);b.font=_,g!==void 0&&g(b),x._decrementPreload();var w=d.split("\\").pop().split("/").pop(),_=w.lastIndexOf("."),M=_<1?null:w.slice(_+1);["ttf","otf","woff","woff2"].includes(M)&&(M=w.slice(0,_!==-1?_:0),(w=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(M,`;
src: url(`).concat(d,`);
}
`))),document.head.appendChild(w))}),b},l.default.prototype.text=function(d,g,y,b,x){var C;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(C=this._renderer).text.apply(C,arguments):this},l.default.prototype.textFont=function(d,g){if(l.default._validateParameters("textFont",arguments),arguments.length){if(d)return this._renderer._setProperty("_textFont",d),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=l.default;a.default=f},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(r,s,a){function o(M){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(M)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(u=r("../core/main"))&&u.__esModule?u:{default:u},l=function(M){if(M&&M.__esModule)return M;if(M===null||p(M)!=="object"&&typeof M!="function")return{default:M};var I=c();if(I&&I.has(M))return I.get(M);var R,P={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in M){var U;Object.prototype.hasOwnProperty.call(M,R)&&((U=D?Object.getOwnPropertyDescriptor(M,R):null)&&(U.get||U.set)?Object.defineProperty(P,R,U):P[R]=M[R])}return P.default=M,I&&I.set(M,P),P}(r("../core/constants"));function c(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,c=function(){return M},M)}function p(M){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(I){return o(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":o(I)})(M)}function m(M,I){var R=M.length;return M[I<0?I%R+R:I%R]}function h(M,I,R,P){var D,U,F;return P?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),U=h.tmpPoint1,F=h.tmpPoint2,U.x=I.x-M.x,U.y=I.y-M.y,F.x=R.x-I.x,F.y=R.y-I.y,D=U.x*F.x+U.y*F.y,U=Math.sqrt(U.x*U.x+U.y*U.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(D/(U*F))<P):(I[0]-M[0])*(R[1]-M[1])-(R[0]-M[0])*(I[1]-M[1])==0}function f(O,q,B,re,ae,U,F,z,J){var Q=1-J,K=Math.pow(Q,3),H=Math.pow(Q,2),oe=J*J,$=oe*J,Z=K*O+3*H*J*B+3*Q*J*J*ae+$*F,K=K*q+3*H*J*re+3*Q*J*J*U+$*z,H=O+2*J*(B-O)+oe*(ae-2*B+O),$=q+2*J*(re-q)+oe*(U-2*re+q),Y=B+2*J*(ae-B)+oe*(F-2*ae+B),oe=re+2*J*(U-re)+oe*(z-2*U+re),O=Q*O+J*B,B=Q*q+J*re,q=Q*ae+J*F,re=Q*U+J*z,ae=90-180*Math.atan2(H-Y,$-oe)/Math.PI;return(Y<H||$<oe)&&(ae+=180),{x:Z,y:K,m:{x:H,y:$},n:{x:Y,y:oe},start:{x:O,y:B},end:{x:q,y:re},alpha:ae}}function d(M,I,R,P,D,U,F,z,J){return J==null?w(M,I,R,P,D,U,F,z):f(M,I,R,P,D,U,F,z,function(Q,Z,K,H,$,Y,oe,O,B){if(!(B<0||w(Q,Z,K,H,$,Y,oe,O)<B)){var q,re=.5,ae=1-re;for(q=w(Q,Z,K,H,$,Y,oe,O,ae);.01<Math.abs(q-B);)q=w(Q,Z,K,H,$,Y,oe,O,ae+=(q<B?1:-1)*(re/=2));return ae}}(M,I,R,P,D,U,F,z,J))}function g(M,I,R){for(var P,D,U,F,z,J=0,Q=0,Z=(M=function(K,H){function $(Ie,Me,Ye){var Be,rt;if(!Ie)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Ie[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Ie[0]){case"M":Me.X=Ie[1],Me.Y=Ie[2];break;case"A":Ie=["C"].concat(b.apply(0,[Me.x,Me.y].concat(Ie.slice(1))));break;case"S":rt=Ye==="C"||Ye==="S"?(Be=2*Me.x-Me.bx,2*Me.y-Me.by):(Be=Me.x,Me.y),Ie=["C",Be,rt].concat(Ie.slice(1));break;case"T":Ye==="Q"||Ye==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Ie=["C"].concat(S(Me.x,Me.y,Me.qx,Me.qy,Ie[1],Ie[2]));break;case"Q":Me.qx=Ie[1],Me.qy=Ie[2],Ie=["C"].concat(S(Me.x,Me.y,Ie[1],Ie[2],Ie[3],Ie[4]));break;case"L":Ie=["C"].concat(C(Me.x,Me.y,Ie[1],Ie[2]));break;case"H":Ie=["C"].concat(C(Me.x,Me.y,Ie[1],Me.y));break;case"V":Ie=["C"].concat(C(Me.x,Me.y,Me.x,Ie[1]));break;case"Z":Ie=["C"].concat(C(Me.x,Me.y,Me.X,Me.Y))}return Ie}function Y(Ie,Me){if(7<Ie[Me].length){Ie[Me].shift();for(var Ye=Ie[Me];Ye.length;)me[Me]="A",q&&(ge[Me]="A"),Ie.splice(Me++,0,["C"].concat(Ye.splice(0,6)));Ie.splice(Me,1),O=Math.max(B.length,q&&q.length||0)}}function oe(Ie,Me,Ye,Be,rt){Ie&&Me&&Ie[rt][0]==="M"&&Me[rt][0]!=="M"&&(Me.splice(rt,0,["M",Be.x,Be.y]),Ye.bx=0,Ye.by=0,Ye.x=Ie[rt][1],Ye.y=Ie[rt][2],O=Math.max(B.length,q&&q.length||0))}var O,B=y(K),q=H&&y(H),re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=[],ge=[],xe="",pe="";O=Math.max(B.length,q&&q.length||0);for(var ve=0;ve<O;ve++){(xe=B[ve]?B[ve][0]:xe)!=="C"&&(me[ve]=xe,ve&&(pe=me[ve-1])),B[ve]=$(B[ve],re,pe),me[ve]!=="A"&&xe==="C"&&(me[ve]="C"),Y(B,ve),q&&((xe=q[ve]?q[ve][0]:xe)!=="C"&&(ge[ve]=xe,ve&&(pe=ge[ve-1])),q[ve]=$(q[ve],ae,pe),ge[ve]!=="A"&&xe==="C"&&(ge[ve]="C"),Y(q,ve)),oe(B,q,re,ae,ve),oe(q,B,ae,re,ve);var Ee=B[ve],le=q&&q[ve],Se=Ee.length,be=q&&le.length;re.x=Ee[Se-2],re.y=Ee[Se-1],re.bx=parseFloat(Ee[Se-4])||re.x,re.by=parseFloat(Ee[Se-3])||re.y,ae.bx=q&&(parseFloat(le[be-4])||ae.x),ae.by=q&&(parseFloat(le[be-3])||ae.y),ae.x=q&&le[be-2],ae.y=q&&le[be-1]}return q?[B,q]:B}(M)).length;Q<Z;Q++){if((U=M[Q])[0]==="M")P=+U[1],D=+U[2];else{if(I<J+(F=d(P,D,U[1],U[2],U[3],U[4],U[5],U[6]))&&!R)return{x:(z=d(P,D,U[1],U[2],U[3],U[4],U[5],U[6],I-J)).x,y:z.y,alpha:z.alpha};J+=F,P=+U[5],D=+U[6]}U.shift()}return z=(z=R?J:f(P,D,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha?{x:z.x,y:z.y,alpha:z.alpha}:z}function y(M){var I=[],R=0,P=0,D=0,U=0,F=0;if(M){M[0][0]==="M"&&(D=R=+M[0][1],U=P=+M[0][2],F++,I[0]=["M",R,P]);for(var z,J,Q=M.length===3&&M[0][0]==="M"&&M[1][0].toUpperCase()==="R"&&M[2][0].toUpperCase()==="Z",Z=F,K=M.length;Z<K;Z++){if(I.push(z=[]),(J=M[Z])[0]!==String.prototype.toUpperCase.call(J[0]))switch(z[0]=String.prototype.toUpperCase.call(J[0]),z[0]){case"A":z[1]=J[1],z[2]=J[2],z[3]=J[3],z[4]=J[4],z[5]=J[5],z[6]=+(J[6]+R),z[7]=+(J[7]+P);break;case"V":z[1]=+J[1]+P;break;case"H":z[1]=+J[1]+R;break;case"R":for(var H,$=2,Y=(H=[R,P].concat(J.slice(1))).length;$<Y;$++)H[$]=+H[$]+R,H[++$]=+H[$]+P;I.pop(),I=I.concat(x(H,Q));break;case"M":D=+J[1]+R,U=+J[2]+P;break;default:for(var oe=1,O=J.length;oe<O;oe++)z[oe]=+J[oe]+(oe%2?R:P)}else if(J[0]==="R")H=[R,P].concat(J.slice(1)),I.pop(),I=I.concat(x(H,Q)),z=["R"].concat(J.slice(-2));else for(var B=0,q=J.length;B<q;B++)z[B]=J[B];switch(z[0]){case"Z":R=D,P=U;break;case"H":R=z[1];break;case"V":P=z[1];break;case"M":D=z[z.length-2],U=z[z.length-1];break;default:R=z[z.length-2],P=z[z.length-1]}}}return I}function b(M,I,R,P,q,me,re,z,J,Q){function Z(be,Ie,Me){return{x:be*Math.cos(Me)-Ie*Math.sin(Me),y:be*Math.sin(Me)+Ie*Math.cos(Me)}}var K,O=Math.PI,B=120*O/180,H=O/180*(+q||0),$=[],Y=(Q?(ve=Q[0],K=Q[1],xe=Q[2],pe=Q[3]):(M=(ae=Z(M,I,-H)).x,I=ae.y,1<(Y=(oe=(M-(z=(ae=Z(z,J,-H)).x))/2)*oe/(R*R)+(ae=(I-(J=ae.y))/2)*ae/(P*P))&&(R*=Y=Math.sqrt(Y),P*=Y),Y=R*R,ge=P*P,xe=(me=(me===re?-1:1)*Math.sqrt(Math.abs((Y*ge-Y*ae*ae-ge*oe*oe)/(Y*ae*ae+ge*oe*oe))))*R*ae/P+(M+z)/2,pe=me*-P*oe/R+(I+J)/2,ve=Math.asin(((I-pe)/P).toFixed(9)),K=Math.asin(((J-pe)/P).toFixed(9)),(ve=M<xe?O-ve:ve)<0&&(ve=2*O+ve),(K=z<xe?O-K:K)<0&&(K=2*O+K),re&&K<ve&&(ve-=2*O),!re&&ve<K&&(K-=2*O)),K-ve),oe=(Math.abs(Y)>B&&(ge=K,ae=z,me=J,K=ve+B*(re&&ve<K?1:-1),$=b(z=xe+R*Math.cos(K),J=pe+P*Math.sin(K),R,P,q,0,re,ae,me,[K,ge,xe,pe])),Y=K-ve,Math.cos(ve)),O=Math.sin(ve),B=Math.cos(K),q=Math.sin(K),re=Math.tan(Y/4),ae=4/3*R*re,me=4/3*P*re,ge=[M,I],xe=[M+ae*O,I-me*oe],pe=[z+ae*q,J-me*B],ve=[z,J];if(xe[0]=2*ge[0]-xe[0],xe[1]=2*ge[1]-xe[1],Q)return[xe,pe,ve].concat($);for(var Ee=[],le=0,Se=($=[xe,pe,ve].concat($).join().split(",")).length;le<Se;le++)Ee[le]=le%2?Z($[le-1],$[le],H).y:Z($[le],$[le+1],H).x;return Ee}function x(M,I){for(var R=[],P=0,D=M.length;P<D-2*!I;P+=2){var U=[{x:+M[P-2],y:+M[P-1]},{x:+M[P],y:+M[P+1]},{x:+M[P+2],y:+M[P+3]},{x:+M[P+4],y:+M[P+5]}];I?P?D-4===P?U[3]={x:+M[0],y:+M[1]}:D-2===P&&(U[2]={x:+M[0],y:+M[1]},U[3]={x:+M[2],y:+M[3]}):U[0]={x:+M[D-2],y:+M[D-1]}:D-4===P?U[3]=U[2]:P||(U[0]={x:+M[P],y:+M[P+1]}),R.push(["C",(-U[0].x+6*U[1].x+U[2].x)/6,(-U[0].y+6*U[1].y+U[2].y)/6,(U[1].x+6*U[2].x-U[3].x)/6,(U[1].y+6*U[2].y-U[3].y)/6,U[2].x,U[2].y])}return R}function C(M,I,R,P){return[M,I,R,P,R,P]}function S(M,I,R,P,D,U){return[1/3*M+2/3*R,1/3*I+2/3*P,1/3*D+2/3*R,1/3*U+2/3*P,D,U]}function w(M,I,R,P,D,U,F,z,J){for(var Q=(J=1<(J=J??1)?1:J<0?0:J)/2,Z=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],K=0,H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],$=0;$<12;$++){var oe=Q*Z[$]+Q,Y=_(oe,M,R,D,F),oe=_(oe,I,P,U,z);K+=H[$]*Math.sqrt(Y*Y+oe*oe)}return Q*K}function _(M,I,R,P,D){return M*(M*(-3*I+9*R-9*P+3*D)+6*I-12*R+6*P)-3*I+3*R}u.default.Font=function(M){this.parent=M,this.cache={},this.font=void 0},u.default.Font.prototype.textBounds=function(M){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,F=3<arguments.length?arguments[3]:void 0,P=4<arguments.length?arguments[4]:void 0,D=P&&P.renderer&&P.renderer._pInst||this.parent,U=D._renderer.drawingContext,F=(U.textAlign||l.LEFT,U.textBaseline||l.BASELINE,F||D._renderer._textSize);if(!B){for(var z=[],J=[],Q=[],Z=(Q[0]=[],[]),K=this._scale(F),H=D._renderer.textLeading(),$=0,Y=(this.font.forEachGlyph(M,I,R,F,P,function(ae,me,ge,xe){var pe=ae.getMetrics();ae.index===0||ae.index===10?Q[$+=1]=[]:(Q[$].push(me+pe.xMin*K),Q[$].push(me+pe.xMax*K),Z.push(ge+$*H+-pe.yMin*K),Z.push(ge+$*H+-pe.yMax*K))}),0<Q[$].length&&(z[$]=Math.min.apply(null,Q[$]),J[$]=Math.max.apply(null,Q[$])),0),oe=0;oe<=$;oe++){z[oe]=Math.min.apply(null,Q[oe]),J[oe]=Math.max.apply(null,Q[oe]);var O=J[oe]-z[oe];Y<O&&(Y=O)}var U=Math.min.apply(null,z),B={x:U,y:R=Math.min.apply(null,Z),h:Math.max.apply(null,Z)-R,w:Y,advance:U-I},F=this._handleAlignment(D._renderer,M,B.x,B.y,B.w+B.advance);B.x=F.x,B.y=F.y}return B},u.default.Font.prototype.textToPoints=function(M,I,R,P,D){var U=0,F=[],z=this._getGlyphs(M);P=P||this.parent._renderer._textSize;for(var J,Q=0;Q<z.length;Q++){if(!(z[J=Q].name&&z[J].name==="space"||M.length===z.length&&M[J]===" "))for(var Z=function(Y){for(var oe,O=[],B=0;B<Y.length;B++)Y[B].type==="M"&&(oe&&O.push(oe),oe=[]),oe.push(function(q){var re=[q.type];return q.type==="M"||q.type==="L"?re.push(q.x,q.y):q.type==="C"?re.push(q.x1,q.y1,q.x2,q.y2,q.x,q.y):q.type==="Q"&&re.push(q.x1,q.y1,q.x,q.y),re}(Y[B]));return O.push(oe),O}(z[Q].getPath(I,R,P).commands),K=0;K<Z.length;K++)for(var H=function(Y,oe){for(var oe=function(me,ge){if(p(me)!=="object")me=ge;else for(var xe in ge)me[xe]===void 0&&(me[xe]=ge[xe]);return me}(oe,{sampleFactor:.1,simplifyThreshold:0}),O=g(Y,0,1),B=O/(O*oe.sampleFactor),q=[],re=0;re<O;re+=B)q.push(g(Y,re));return oe.simplifyThreshold&&function(ae){for(var me=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ge=0,xe=ae.length-1;3<ae.length&&0<=xe;--xe)h(m(ae,xe-1),m(ae,xe),m(ae,xe+1),me)&&(ae.splice(xe%ae.length,1),ge++)}(q,oe.simplifyThreshold),q}(Z[K],D),$=0;$<H.length;$++)H[$].x+=U,F.push(H[$]);U+=z[Q].advanceWidth*this._scale(P)}return F},u.default.Font.prototype._getGlyphs=function(M){return this.font.stringToGlyphs(M)},u.default.Font.prototype._getPath=function(M,U,R,P){var D=(P&&P.renderer&&P.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(D,M,U,R);return this.font.getPath(M,U.x,U.y,D._textSize,P)},u.default.Font.prototype._getPathData=function(M,I,R,P){var D=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,R,P):p(I)==="object"&&(P=I),P&&typeof P.decimals=="number"&&(D=P.decimals),M.toPathData(D)},u.default.Font.prototype._getSVG=function(M,I,R,P){var D=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,R,P):p(I)==="object"&&(P=I),P&&(typeof P.decimals=="number"&&(D=P.decimals),typeof P.strokeWidth=="number"&&(M.strokeWidth=P.strokeWidth),P.fill!==void 0&&(M.fill=P.fill),P.stroke!==void 0&&(M.stroke=P.stroke)),M.toSVG(D)},u.default.Font.prototype._renderPath=function(F,J,Q,P){var D=P&&P.renderer||this.parent._renderer,U=D.drawingContext,F=(p(F)==="object"&&F.commands?F:this._getPath(F,J,Q,P)).commands,z=(U.beginPath(),!0),J=!1,Q=void 0;try{for(var Z,K=F[Symbol.iterator]();!(z=(Z=K.next()).done);z=!0){var H=Z.value;H.type==="M"?U.moveTo(H.x,H.y):H.type==="L"?U.lineTo(H.x,H.y):H.type==="C"?U.bezierCurveTo(H.x1,H.y1,H.x2,H.y2,H.x,H.y):H.type==="Q"?U.quadraticCurveTo(H.x1,H.y1,H.x,H.y):H.type==="Z"&&U.closePath()}}catch($){J=!0,Q=$}finally{try{z||K.return==null||K.return()}finally{if(J)throw Q}}return D._doStroke&&D._strokeSet&&U.stroke(),D._doFill&&(D._fillSet||D._setFill(l._DEFAULT_TEXT_FILL),U.fill()),this},u.default.Font.prototype._textWidth=function(M,I){return this.font.getAdvanceWidth(M,I)},u.default.Font.prototype._textAscent=function(M){return this.font.ascender*this._scale(M)},u.default.Font.prototype._textDescent=function(M){return-this.font.descender*this._scale(M)},u.default.Font.prototype._scale=function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)},u.default.Font.prototype._handleAlignment=function(M,I,R,P,D){var U=M._textSize;switch(D===void 0&&(D=this._textWidth(I,U)),M._textAlign){case l.CENTER:R-=D/2;break;case l.RIGHT:R-=D}switch(M._textBaseline){case l.TOP:P+=this._textAscent(U);break;case l.CENTER:P+=this._textAscent(U)/2;break;case l.BOTTOM:P-=this._textDescent(U)}return{x:R,y:P}},r=u.default,a.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(o,u){return o.push(u),o},r.default.prototype.arrayCopy=function(o,u,l,c,p){var m,h;o=p!==void 0?(h=Math.min(p,o.length),m=c,o.slice(u,h+u)):(h=l!==void 0?(h=l,Math.min(h,o.length)):o.length,l=u,o.slice(m=0,h)),Array.prototype.splice.apply(l,[m,h].concat(o))},r.default.prototype.concat=function(o,u){return o.concat(u)},r.default.prototype.reverse=function(o){return o.reverse()},r.default.prototype.shorten=function(o){return o.pop(),o},r.default.prototype.shuffle=function(o,u){for(var l,c,p=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),m=(o=u||p?o:o.slice()).length;1<m;)l=this.random(0,1)*m|0,c=o[--m],o[m]=o[l],o[l]=c;return o},r.default.prototype.sort=function(o,c){var l=c?o.slice(0,Math.min(c,o.length)):o,c=c?o.slice(Math.min(c,o.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(p,m){return p-m})).concat(c)},r.default.prototype.splice=function(o,u,l){return Array.prototype.splice.apply(o,[l,0].concat(u)),o},r.default.prototype.subset=function(o,u,l){return l!==void 0?o.slice(u,u+l):o.slice(u,o.length)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(r,s,a){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.float=function(u){return u instanceof Array?u.map(parseFloat):parseFloat(u)},o.default.prototype.int=function(u){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return u===1/0||u==="Infinity"?1/0:u===-1/0||u==="-Infinity"?-1/0:typeof u=="string"?parseInt(u,l):typeof u=="number"?0|u:typeof u=="boolean"?u?1:0:u instanceof Array?u.map(function(c){return o.default.prototype.int(c,l)}):void 0},o.default.prototype.str=function(u){return u instanceof Array?u.map(o.default.prototype.str):String(u)},o.default.prototype.boolean=function(u){return typeof u=="number"?u!==0:typeof u=="string"?u.toLowerCase()==="true":typeof u=="boolean"?u:u instanceof Array?u.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(u){return u=o.default.prototype.int(u,10),typeof u=="number"?(u+128)%256-128:u instanceof Array?u.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(u){return typeof u!="number"||isNaN(u)?u instanceof Array?u.map(o.default.prototype.char):typeof u=="string"?o.default.prototype.char(parseInt(u,10)):void 0:String.fromCharCode(u)},o.default.prototype.unchar=function(u){return typeof u=="string"&&u.length===1?u.charCodeAt(0):u instanceof Array?u.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(u,l){if(l=l??8,u instanceof Array)return u.map(function(p){return o.default.prototype.hex(p,l)});if(u===1/0||u===-1/0)return(u===1/0?"F":"0").repeat(l);if(typeof u=="number"){u<0&&(u=4294967295+u+1);for(var c=Number(u).toString(16).toUpperCase();c.length<l;)c="0".concat(c);return c=c.length>=l?c.substring(c.length-l,c.length):c}},o.default.prototype.unhex=function(u){return u instanceof Array?u.map(o.default.prototype.unhex):parseInt("0x".concat(u),16)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(m=r("../core/main"))&&m.__esModule?m:{default:m};function u(y,f,d){var g=y<0,y=g?y.toString().substring(1):y.toString(),b=y.indexOf("."),x=b!==-1?y.substring(0,b):y,C=b!==-1?y.substring(b+1):"",S=g?"-":"";if(d!==void 0){g="",(b!==-1||0<d-C.length)&&(g="."),C.length>d&&(C=C.substring(0,d));for(var w=0;w<f-x.length;w++)S+="0";for(var S=(S+=x)+g+C,_=0;_<d-C.length;_++)S+="0";return S}for(var M=0;M<Math.max(f-x.length,0);M++)S+="0";return S+=y}function l(y,f){var d=(y=y.toString()).indexOf("."),g=d!==-1?y.substring(d):"",y=(y=d!==-1?y.substring(0,d):y).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(f===0)g="";else if(f!==void 0)if(f>g.length)for(var b=f-(g+=d===-1?".":"").length+1,x=0;x<b;x++)g+="0";else g=g.substring(0,f+1);return y+g}function c(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function p(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.join=function(h,f){return o.default._validateParameters("join",arguments),h.join(f)},o.default.prototype.match=function(h,f){return o.default._validateParameters("match",arguments),h.match(f)},o.default.prototype.matchAll=function(h,f){o.default._validateParameters("matchAll",arguments);for(var d=new RegExp(f,"g"),g=d.exec(h),y=[];g!==null;)y.push(g),g=d.exec(h);return y},o.default.prototype.nf=function(h,f,d){return o.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(g){return u(g,f,d)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):u(h,f,d)},o.default.prototype.nfc=function(h,f){return o.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(d){return l(d,f)}):l(h,f)},o.default.prototype.nfp=function(){for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];o.default._validateParameters("nfp",f);var g=o.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(c):c(g)},o.default.prototype.nfs=function(){for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];o.default._validateParameters("nfs",f);var g=o.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(p):p(g)},o.default.prototype.split=function(h,f){return o.default._validateParameters("split",arguments),h.split(f)},o.default.prototype.splitTokens=function(h,f){var d,g;return o.default._validateParameters("splitTokens",arguments),g=f!==void 0?(g=/\]/g.exec(f=f),(d=/\[/g.exec(f))&&g?(f=f.slice(0,g.index)+f.slice(g.index+1),d=/\[/g.exec(f),f=f.slice(0,d.index)+f.slice(d.index+1),new RegExp("[\\[".concat(f,"\\]]"),"g")):g?(f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[".concat(f,"\\]]"),"g")):d?(f=f.slice(0,d.index)+f.slice(d.index+1),new RegExp("[".concat(f,"\\[]"),"g")):new RegExp("[".concat(f,"]"),"g")):/\s/g,h.split(g).filter(function(y){return y})},o.default.prototype.trim=function(h){return o.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var m=o.default;a.default=m},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,a.default=r},{"../core/main":267}],310:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=(r("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=p();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../core/constants")));function p(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,p=function(){return f},f)}l.default.prototype.plane=function(f,d,g,y){this._assert3d("plane"),l.default._validateParameters("plane",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1);var b,x="plane|".concat(g=g===void 0?1:g,"|").concat(y);return this._renderer.geometryInHash(x)||((b=new l.default.Geometry(g,y,function(){for(var C,S,w=0;w<=this.detailY;w++)for(var _=w/this.detailY,M=0;M<=this.detailX;M++)C=M/this.detailX,S=new l.default.Vector(C-.5,_-.5,0),this.vertices.push(S),this.uvs.push(C,_)})).computeFaces().computeNormals(),g<=1&&y<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,b)),this._renderer.drawBuffersScaled(x,f,d,1),this},l.default.prototype.box=function(f,d,g,y,b){this._assert3d("box"),l.default._validateParameters("box",arguments),f===void 0&&(f=50),d===void 0&&(d=f),g===void 0&&(g=d);var x,C=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,C=(b===void 0&&(b=C?1:4),"box|".concat(y=y===void 0?C?1:4:y,"|").concat(b));return this._renderer.geometryInHash(C)||((x=new l.default.Geometry(y,b,function(){var S=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var w=0;w<S.length;w++){for(var _=S[w],M=4*w,I=0;I<4;I++){var R=_[I],R=new l.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(R),this.uvs.push(1&I,(2&I)/2)}this.faces.push([M,1+M,2+M]),this.faces.push([2+M,1+M,3+M])}})).computeNormals(),y<=4&&b<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(C,x)),this._renderer.drawBuffersScaled(C,f,d,g),this},l.default.prototype.sphere=function(f,d,g){return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(f=f===void 0?50:f,f,f,d=d===void 0?24:d,g=g===void 0?16:g),this};function m(f,d,g,y,b,x,C){f=f<=0?1:f,d=d<0?0:d,g=g<=0?f:g,y=y<3?3:y;for(var S,w,_=(x=x===void 0||x)?-2:0,M=(b=b<1?1:b)+((C=C===void 0?d!==0:C)?2:0),I=Math.atan2(f-d,g),R=Math.sin(I),P=Math.cos(I),D=_;D<=M;++D){var U=D/b,F=g*U,z=void 0,z=D<0?(U=F=0,f):b<D?(F=g,U=1,d):f+(d-f)*U;for(D!==-2&&D!==b+2||(z=0),F-=g/2,S=0;S<y;++S){var J=S/(y-1),Z=2*Math.PI*J,Q=Math.sin(Z),Z=Math.cos(Z),K=(this.vertices.push(new l.default.Vector(Q*z,F,Z*z)),void 0),K=D<0?new l.default.Vector(0,-1,0):b<D&&d?new l.default.Vector(0,1,0):new l.default.Vector(Q*P,R,Z*P);this.vertexNormals.push(K),this.uvs.push(J,U)}}var H=0;if(x){for(w=0;w<y;++w)this.faces.push([H+w,H+y+(w+1)%y,H+y+w]);H+=2*y}for(D=0;D<b;++D){for(S=0;S<y;++S){var $=(S+1)%y;this.faces.push([H+S,H+$,H+y+$]),this.faces.push([H+S,H+y+$,H+y+S])}H+=y}if(C)for(H+=y,S=0;S<y;++S)this.faces.push([H+S,H+(S+1)%y,H+y])}l.default.prototype.cylinder=function(f,d,g,y,b,x){this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1),x===void 0&&(x=!0),b===void 0&&(b=!0);var C,S="cylinder|".concat(g=g===void 0?24:g,"|").concat(y,"|").concat(b,"|").concat(x);return this._renderer.geometryInHash(S)||(C=new l.default.Geometry(g,y),m.call(C,1,1,1,g,y,b,x),g<=24&&y<=16?C._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,C)),this._renderer.drawBuffersScaled(S,f,d,f),this},l.default.prototype.cone=function(f,d,g,y,b){this._assert3d("cone"),l.default._validateParameters("cone",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1),b===void 0&&(b=!0);var x,C="cone|".concat(g=g===void 0?24:g,"|").concat(y,"|").concat(b);return this._renderer.geometryInHash(C)||(x=new l.default.Geometry(g,y),m.call(x,1,0,1,g,y,b,!1),g<=24&&y<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(C,x)),this._renderer.drawBuffersScaled(C,f,d,f),this},l.default.prototype.ellipsoid=function(f,d,g,y,b){this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),f===void 0&&(f=50),d===void 0&&(d=f),g===void 0&&(g=f),b===void 0&&(b=16);var x,C="ellipsoid|".concat(y=y===void 0?24:y,"|").concat(b);return this._renderer.geometryInHash(C)||((x=new l.default.Geometry(y,b,function(){for(var S=0;S<=this.detailY;S++)for(var w=S/this.detailY,_=Math.PI*w-Math.PI/2,M=Math.cos(_),I=Math.sin(_),R=0;R<=this.detailX;R++){var P=R/this.detailX,U=2*Math.PI*P,D=Math.cos(U),U=Math.sin(U),U=new l.default.Vector(M*U,I,M*D);this.vertices.push(U),this.vertexNormals.push(U),this.uvs.push(P,w)}})).computeFaces(),y<=24&&b<=24?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(C,x)),this._renderer.drawBuffersScaled(C,f,d,g),this},l.default.prototype.torus=function(f,C,g,y){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),f===void 0)f=50;else if(!f)return;if(C===void 0)C=10;else if(!C)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(C/f).toPrecision(4),C="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(C)||((b=new l.default.Geometry(g,y,function(){for(var S=0;S<=this.detailY;S++)for(var w=S/this.detailY,_=2*Math.PI*w,M=Math.cos(_),I=Math.sin(_),R=1+x*M,P=0;P<=this.detailX;P++){var D=P/this.detailX,U=2*Math.PI*D,z=Math.cos(U),U=Math.sin(U),F=new l.default.Vector(R*z,R*U,x*I),z=new l.default.Vector(M*z,M*U,I);this.vertices.push(F),this.vertexNormals.push(z),this.uvs.push(D,w)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(C,b)),this._renderer.drawBuffersScaled(C,f,f,f),this},l.default.RendererGL.prototype.point=function(f,d,g){var y=[];return y.push(new l.default.Vector(f,d,g=g===void 0?0:g)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(C){var d=C[0],g=C[1],y=C[2],b=C[3],x=C[4],C=C[5],S=(this.geometryInHash("tri")||((S=new l.default.Geometry(1,1,function(){var _=[];_.push(new l.default.Vector(0,0,0)),_.push(new l.default.Vector(1,0,0)),_.push(new l.default.Vector(0,1,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=_,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._makeTriangleEdges()._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uMVMatrix.copy());try{var w=new l.default.Matrix([y-d,b-g,0,0,x-d,C-g,0,0,0,0,1,0,d,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=w,this.drawBuffers("tri")}finally{this.uMVMatrix=S}return this},l.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,c.TWO_PI,c.OPEN,f[4])},l.default.RendererGL.prototype.arc=function(f){var d,g=arguments[1],y=arguments[2],b=arguments[3],x=arguments[4],C=arguments[5],S=arguments[6],w=arguments[7]||25,_=(Math.abs(C-x)>=c.TWO_PI?"".concat(M="ellipse","|"):"".concat(M="arc","|").concat(x,"|").concat(C,"|").concat(S,"|")).concat(w,"|"),M=(this.geometryInHash(_)||((d=new l.default.Geometry(w,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==C.toFixed(10)){S!==c.PIE&&S!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var I=0;I<=w;I++){var P=(C-x)*(I/w)+x,R=.5+Math.cos(P)/2,P=.5+Math.sin(P)/2;this.vertices.push(new l.default.Vector(R,P,0)),this.uvs.push([R,P]),I<w-1&&(this.faces.push([0,I+1,I+2]),this.strokeIndices.push([I+1,I+2]))}switch(S){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),w<=50?d._makeTriangleEdges()._edgesToVertices(d):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(M," with more than 50 detail")),this.createBuffers(_,d)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([f,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(_)}finally{this.uMVMatrix=M}return this},l.default.RendererGL.prototype.rect=function(f){var d=f[0],g=f[1],y=f[2],b=f[3];if(f[4]===void 0){var S=this._pInst._glAttributes.perPixelLighting,x=f[4]||(S?1:24),C=f[5]||(S?1:16),S="rect|".concat(x,"|").concat(C),w=(this.geometryInHash(S)||((w=new l.default.Geometry(x,C,function(){for(var K=0;K<=this.detailY;K++)for(var H=K/this.detailY,$=0;$<=this.detailX;$++){var Y=$/this.detailX,oe=new l.default.Vector(Y,H,0);this.vertices.push(oe),this.uvs.push(Y,H)}0<x&&0<C&&(this.strokeIndices=[[0,x],[x,(x+1)*(C+1)-1],[(x+1)*(C+1)-1,(x+1)*C],[(x+1)*C,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(S,w)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([d,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=w}}else{var S=f[4],w=f[5]===void 0?S:f[5],_=f[6]===void 0?w:f[6],f=f[7]===void 0?_:f[7],U=y,M=b,P=((U+=d)<d&&(P=d,d=U,U=P),(M+=g)<g&&(P=g,g=M,M=P),Math.min((U-d)/2,(M-g)/2)),I=(P<S&&(S=P),P<w&&(w=P),P<_&&(_=P),P<f&&(f=P),d),R=g,P=U,d=M,D=(this.beginShape(),w!==0?(this.vertex(P-w,R),this.quadraticVertex(P,R,P,R+w)):this.vertex(P,R),_!==0?(this.vertex(P,d-_),this.quadraticVertex(P,d,P-_,d)):this.vertex(P,d),f!==0?(this.vertex(I+f,d),this.quadraticVertex(I,d,I,d-f)):this.vertex(I,d),S!==0?(this.vertex(I,R+S),this.quadraticVertex(I,R,I+S,R)):this.vertex(I,R),!(this.immediateMode.geometry.uvs.length=0)),g=!1,U=void 0;try{for(var F,z=this.immediateMode.geometry.vertices[Symbol.iterator]();!(D=(F=z.next()).done);D=!0){var J=F.value,Q=(J.x-I)/y,Z=(J.y-R)/b;this.immediateMode.geometry.uvs.push(Q,Z)}}catch(O){g=!0,U=O}finally{try{D||z.return==null||z.return()}finally{if(g)throw U}}this.endShape(c.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(f,d,g,y,b,x,C,S,w,_,M,I,R,P){R===void 0&&(R=2),P===void 0&&(P=2);var D="quad|".concat(f,"|").concat(d,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(C,"|").concat(S,"|").concat(w,"|").concat(_,"|").concat(M,"|").concat(I,"|").concat(R,"|").concat(P);if(!this.geometryInHash(D)){var U=new l.default.Geometry(R,P,function(){for(var K=1/(this.detailX-1),H=1/(this.detailY-1),$=0;$<this.detailY;$++)for(var Y=0;Y<this.detailX;Y++){var oe=Y*K,O=$*H;this.vertices.push(new l.default.Vector((1-oe)*((1-O)*f+O*_)+oe*((1-O)*y+O*C),(1-oe)*((1-O)*d+O*M)+oe*((1-O)*b+O*S),(1-oe)*((1-O)*g+O*I)+oe*((1-O)*x+O*w))),this.uvs.push([oe,O])}});U.faces=[];for(var F=0;F<P-1;F++)for(var z=0;z<R-1;z++){var J=z+F*R,Q=z+1+(F+1)*R,Z=z+(F+1)*R;U.faces.push([J,z+1+F*R,Q]),U.faces.push([J,Q,Z])}U.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(D,U)}return this.drawBuffers(D),this},l.default.RendererGL.prototype.bezier=function(f,d,g,y,b,x,C,S,w,_,M,I){arguments.length===8&&(M=S,_=C,S=x,C=b,b=y,y=g,g=x=w=I=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=R;P++){var D=Math.pow(1-P/R,3),U=P/R*3*Math.pow(1-P/R,2),F=3*Math.pow(P/R,2)*(1-P/R),z=Math.pow(P/R,3);this.vertex(f*D+y*U+C*F+_*z,d*D+b*U+S*F+M*z,g*D+x*U+w*F+I*z)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(f,d,g,y,b,x,C,S,w,_,M,I){arguments.length===8&&(_=C,M=S,C=b,S=y,b=y=g,g=x=w=I=0);var R=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=R;P++){var D=.5*Math.pow(P/R,3),U=.5*Math.pow(P/R,2),F=P/R*.5;this.vertex(D*(3*y-f-3*C+_)+U*(2*f-5*y+4*C-_)+F*(-f+C)+2*y*.5,D*(3*b-d-3*S+M)+U*(2*d-5*b+4*S-M)+F*(-d+S)+2*b*.5,D*(3*x-g-3*w+I)+U*(2*g-5*x+4*w-I)+F*(-g+w)+2*x*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var f,d,g,y,b,x,C=[],S=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var _=1/this._lutBezierDetail,M=0,I=1,R=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(x);break}M+=_,I-=_,++R}}for(var P=this._lookUpTableBezier.length,D=[],U=0;U<4;U++)D.push([]);D[0]=this.immediateMode.geometry.vertexColors.slice(-4),D[3]=this.curFillColor.slice();var F=[];for(U=0;U<4;U++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[3]=this.curStrokeColor.slice(),w===6){this.isBezier=!0;var C=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],z=Math.hypot(C[0]-C[1],S[0]-S[1]),Q=Math.hypot(C[1]-C[2],S[1]-S[2]),J=Math.hypot(C[2]-C[3],S[2]-S[3]),Q=z+Q+J;for(z/=Q,J/=Q,b=0;b<4;b++)D[1].push(D[0][b]*(1-z)+D[3][b]*z),D[2].push(D[0][b]*J+D[3][b]*(1-J)),F[1].push(F[0][b]*(1-z)+F[3][b]*z),F[2].push(F[0][b]*J+F[3][b]*(1-J));for(y=0;y<P;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=0;U<4;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][U]*F[U][b];f+=C[U]*this._lookUpTableBezier[y][U],d+=S[U]*this._lookUpTableBezier[y][U]}this.vertex(f,d)}this.curFillColor=D[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){this.isBezier=!0,C=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Z=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],K=Math.hypot(C[0]-C[1],S[0]-S[1],Z[0]-Z[1]),Q=Math.hypot(C[1]-C[2],S[1]-S[2],Z[1]-Z[2]),H=Math.hypot(C[2]-C[3],S[2]-S[3],Z[2]-Z[3]),w=K+Q+H;for(K/=w,H/=w,b=0;b<4;b++)D[1].push(D[0][b]*(1-K)+D[3][b]*K),D[2].push(D[0][b]*H+D[3][b]*(1-H)),F[1].push(F[0][b]*(1-K)+F[3][b]*K),F[2].push(F[0][b]*H+F[3][b]*(1-H));for(y=0;y<P;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=g=0;U<4;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][U]*F[U][b];f+=C[U]*this._lookUpTableBezier[y][U],d+=S[U]*this._lookUpTableBezier[y][U],g+=Z[U]*this._lookUpTableBezier[y][U]}this.vertex(f,d,g)}this.curFillColor=D[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var f,d,g,y,b,x,C=[],S=[],w=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var _=1/this._lutQuadraticDetail,M=0,I=1,R=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(x);break}M+=_,I-=_,++R}}for(var P=this._lookUpTableQuadratic.length,D=[],U=0;U<3;U++)D.push([]);D[0]=this.immediateMode.geometry.vertexColors.slice(-4),D[2]=this.curFillColor.slice();var F=[];for(U=0;U<3;U++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[2]=this.curStrokeColor.slice(),w===4){this.isQuadratic=!0;var C=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],z=Math.hypot(C[0]-C[1],S[0]-S[1]);for(z/=z+Math.hypot(C[1]-C[2],S[1]-S[2]),b=0;b<4;b++)D[1].push(D[0][b]*(1-z)+D[2][b]*z),F[1].push(F[0][b]*(1-z)+F[2][b]*z);for(y=0;y<P;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=0;U<3;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][U]*F[U][b];f+=C[U]*this._lookUpTableQuadratic[y][U],d+=S[U]*this._lookUpTableQuadratic[y][U]}this.vertex(f,d)}this.curFillColor=D[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){this.isQuadratic=!0,C=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var J=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],Q=Math.hypot(C[0]-C[1],S[0]-S[1],J[0]-J[1]);for(Q/=Q+Math.hypot(C[1]-C[2],S[1]-S[2],J[1]-J[2]),b=0;b<4;b++)D[1].push(D[0][b]*(1-Q)+D[2][b]*Q),F[1].push(F[0][b]*(1-Q)+F[2][b]*Q);for(y=0;y<P;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=g=0;U<3;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][U]*F[U][b];f+=C[U]*this._lookUpTableQuadratic[y][U],d+=S[U]*this._lookUpTableQuadratic[y][U],g+=J[U]*this._lookUpTableQuadratic[y][U]}this.vertex(f,d,g)}this.curFillColor=D[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var f,d,g,y,b,x,C=[],S=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var _=1/this._lutBezierDetail,M=0,I=1,R=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(x);break}M+=_,I-=_,++R}}var P=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,C=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<P;b++)d=C[0]*this._lookUpTableBezier[b][0]+C[1]*this._lookUpTableBezier[b][1]+C[2]*this._lookUpTableBezier[b][2]+C[3]*this._lookUpTableBezier[b][3],g=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],this.vertex(d,g);for(b=0;b<w;b++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,C=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<P;b++)d=C[0]*this._lookUpTableBezier[b][0]+C[1]*this._lookUpTableBezier[b][1]+C[2]*this._lookUpTableBezier[b][2]+C[3]*this._lookUpTableBezier[b][3],g=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],y=f[0]*this._lookUpTableBezier[b][0]+f[1]*this._lookUpTableBezier[b][1]+f[2]*this._lookUpTableBezier[b][2]+f[3]*this._lookUpTableBezier[b][3],this.vertex(d,g,y);for(b=0;b<w;b++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(f,I,g,R,b,x,C,S,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(c.NORMAL);var _=0,M=(I<=f.width&&(_=I/f.width),1),I=(I+R<=f.width&&(M=(I+R)/f.width),0),R=(g<=f.height&&(I=g/f.height),1);g+b<=f.height&&(R=(g+b)/f.height),this.beginShape(),this.vertex(x,C,0,_,I),this.vertex(x+S,C,0,M,I),this.vertex(x+S,C+w,0,M,R),this.vertex(x,C+w,0,_,R),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var h=l.default;a.default=h},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.orbitControl=function(h,f,d){var g,y;if(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return g=this._renderer._curCamera,h===void 0&&(h=1),f===void 0&&(f=h),d===void 0&&(d=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),y=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,d*y):this._renderer._curCamera._orbit(0,0,-d*y)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(d=-h*(this.mouseX-this.pmouseX)/y,y=f*(this.mouseY-this.pmouseY)/y,this._renderer._curCamera._orbit(d,y,0)):this.mouseButton===this.RIGHT&&(d=g._getLocalAxes(),(y=Math.sqrt(d.x[0]*d.x[0]+d.x[2]*d.x[2]))!==0&&(d.x[0]/=y,d.x[2]/=y),(y=Math.sqrt(d.y[0]*d.y[0]+d.y[2]*d.y[2]))!==0&&(d.y[0]/=y,d.y[2]/=y),y=-1*h*(this.mouseX-this.pmouseX),h=-1*f*(this.mouseY-this.pmouseY),g.setPosition(g.eyeX+y*d.x[0]+h*d.z[0],g.eyeY,g.eyeZ+y*d.x[2]+h*d.z[2]))),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];l.default._validateParameters("debugMode",f);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);f[0]===c.GRID?this.registerMethod("post",this._grid.call(this,f[1],f[2],f[3],f[4],f[5])):f[0]===c.AXES?this.registerMethod("post",this._axesIcon.call(this,f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid.call(this,f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon.call(this,f[5],f[6],f[7],f[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},l.default.prototype._grid=function(h,f,d,g,y){h===void 0&&(h=this.width/2),f===void 0&&(f=Math.round(h/30)<4?4:Math.round(h/30)),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=h/f,x=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var C=0;C<=f;C++)this.beginShape(this.LINES),this.vertex(-x+d,g,C*b-x+y),this.vertex(x+d,g,C*b-x+y),this.endShape();for(var S=0;S<=f;S++)this.beginShape(this.LINES),this.vertex(S*b-x+d,g,-x+y),this.vertex(S*b-x+d,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(h,f,d,g){return h===void 0&&(h=40<this.width/20?this.width/20:40),f===void 0&&(f=-this.width/4),d===void 0&&(d=f),g===void 0&&(g=f),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f+h,d,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f,d+h,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f,d,g+h),this.endShape(),this.pop()}};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.ambientLight=function(h,f,d,g){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var y=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(y._array[0],y._array[1],y._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(h,f,d){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var g=this.color.apply(this,arguments);return this._renderer.specularColors=[g._array[0],g._array[1],g._array[2]],this},l.default.prototype.directionalLight=function(h,w,S,g,y,b){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),h=h instanceof l.default.Color?h:this.color(h,w,S);var x,C,w=arguments[arguments.length-1],S=typeof w=="number"?(x=arguments[arguments.length-3],C=arguments[arguments.length-2],arguments[arguments.length-1]):(x=w.x,C=w.y,w.z),w=Math.sqrt(x*x+C*C+S*S);return this._renderer.directionalLightDirections.push(x/w,C/w,S/w),this._renderer.directionalLightDiffuseColors.push(h._array[0],h._array[1],h._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(h,S,w,g,y,b){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),h=h instanceof l.default.Color?h:this.color(h,S,w);var x,C,S=arguments[arguments.length-1],w=typeof S=="number"?(x=arguments[arguments.length-3],C=arguments[arguments.length-2],arguments[arguments.length-1]):(x=S.x,C=S.y,S.z);return this._renderer.pointLightPositions.push(x,C,w),this._renderer.pointLightDiffuseColors.push(h._array[0],h._array[1],h._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.lights=function(){var h;return this._assert3d("lights"),this._colorMode===c.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(h=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,h),this.directionalLight(0,0,h,0,0,-1)),this},l.default.prototype.lightFalloff=function(h,f,d){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),h<0&&(h=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),h===0&&f===0&&d===0&&(h=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=h,this._renderer.linearAttenuation=f,this._renderer.quadraticAttenuation=d,this},l.default.prototype.spotLight=function(h,f,d,g,y,b,x,C,S,w,_){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var M,I,R,P=arguments.length;switch(P){case 11:case 10:M=this.color(h,f,d),I=new l.default.Vector(g,y,b),R=new l.default.Vector(x,C,S);break;case 9:h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),R=new l.default.Vector(y,b,x),w=C,_=S):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,R=new l.default.Vector(y,b,x),w=C,_=S):x instanceof l.default.Vector?(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),R=x,w=C,_=S):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),R=new l.default.Vector(x,C,S));break;case 8:w=(R=h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),new l.default.Vector(y,b,x)):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,new l.default.Vector(y,b,x)):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),x),C);break;case 7:h instanceof l.default.Color&&f instanceof l.default.Vector?(M=h,I=f,R=new l.default.Vector(d,g,y),w=b,_=x):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),R=y,w=b,_=x):g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,R=y,w=b,_=x):R=h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),new l.default.Vector(y,b,x)):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,new l.default.Vector(y,b,x)):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),x);break;case 6:g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,R=y,w=b):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),R=y,w=b):h instanceof l.default.Color&&f instanceof l.default.Vector&&(M=h,I=f,R=new l.default.Vector(d,g,y),w=b);break;case 5:h instanceof l.default.Color&&f instanceof l.default.Vector&&d instanceof l.default.Vector?(M=h,I=f,R=d,w=g,_=y):g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,R=y):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),R=y):h instanceof l.default.Color&&f instanceof l.default.Vector&&(M=h,I=f,R=new l.default.Vector(d,g,y));break;case 4:M=h,I=f,R=d,w=g;break;case 3:M=h,I=f,R=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(P<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(M._array[0],M._array[1],M._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(I.x,I.y,I.z),R.normalize(),this._renderer.spotLightDirections.push(R.x,R.y,R.z),w===void 0&&(w=Math.PI/3),_!==void 0&&_<1?(_=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):_===void 0&&(_=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(_),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){return this._assert3d("noLights"),l.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(u=r("../core/main"))&&u.__esModule?u:{default:u};r("./p5.Geometry"),o.default.prototype.loadModel=function(l){o.default._validateParameters("loadModel",arguments);var c,p,m,h=l.slice(-4),f=(typeof arguments[1]=="boolean"?(c=arguments[1],p=arguments[2],m=arguments[3],arguments[4]!==void 0&&(h=arguments[4])):(c=!1,p=arguments[1],m=arguments[2],arguments[3]!==void 0&&(h=arguments[3])),new o.default.Geometry),d=(f.gid="".concat(l,"|").concat(c),this);return h.match(/\.stl$/i)?this.httpDo(l,"GET","arrayBuffer",function(g){(function(y,b){if(function(x){for(var C=new DataView(x),S=[115,111,108,105,100],w=0;w<5;w++)if(function(_,M,I){for(var R=0,P=_.length;R<P;R++)if(_[R]!==M.getUint8(I+R,!1))return;return 1}(S,C,w))return;return 1}(b))(function(x,C){for(var S,w,_,M,I,R,P,D=new DataView(C),U=D.getUint32(80,!0),F=!1,z=0;z<70;z++)D.getUint32(z,!1)===1129270351&&D.getUint8(z+4)===82&&D.getUint8(z+5)===61&&(F=!0,M=[],I=D.getUint8(z+6)/255,R=D.getUint8(z+7)/255,P=D.getUint8(z+8)/255);for(var J=0;J<U;J++){for(var Q,Z=84+50*J,K=D.getFloat32(Z,!0),H=D.getFloat32(4+Z,!0),$=D.getFloat32(8+Z,!0),Y=(F&&(Q=D.getUint16(48+Z,!0),_=32768&Q?(S=I,w=R,P):(S=(31&Q)/31,w=(Q>>5&31)/31,(Q>>10&31)/31)),new o.default.Vector(K,H,$)),oe=1;oe<=3;oe++){var O=Z+12*oe,O=new o.default.Vector(D.getFloat32(O,!0),D.getFloat32(4+O,!0),D.getFloat32(8+O,!0));x.vertices.push(O),x.vertexNormals.push(Y),F&&M.push(S,w,_)}x.faces.push([3*J,3*J+1,3*J+2]),x.uvs.push([0,0],[0,0],[0,0])}})(y,b);else{if(b=new DataView(b),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");b=new TextDecoder("utf-8").decode(b).split(`
`),function(x,C){for(var S,w,_="",M=[],I=0;I<C.length;++I){for(var R=C[I].trim(),P=R.split(" "),D=0;D<P.length;++D)P[D]===""&&P.splice(D,1);if(P.length!==0)switch(_){case"":if(P[0]!=="solid")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "solid"'));_="solid";break;case"solid":if(P[0]!=="facet"||P[1]!=="normal")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "facet normal"'));S=new o.default.Vector(parseFloat(P[2]),parseFloat(P[3]),parseFloat(P[4])),x.vertexNormals.push(S,S,S),_="facet normal";break;case"facet normal":if(P[0]!=="outer"||P[1]!=="loop")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "outer loop"'));_="vertex";break;case"vertex":if(P[0]==="vertex")w=new o.default.Vector(parseFloat(P[1]),parseFloat(P[2]),parseFloat(P[3])),x.vertices.push(w),x.uvs.push([0,0]),M.push(x.vertices.indexOf(w));else{if(P[0]!=="endloop")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "vertex" or "endloop"'));x.faces.push(M),M=[],_="endloop"}break;case"endloop":if(P[0]!=="endfacet")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "endfacet"'));_="endfacet";break;case"endfacet":if(P[0]!=="endsolid"){if(P[0]!=="facet"||P[1]!=="normal")return console.error(R),console.error('Invalid state "'.concat(P[0],'", should be "endsolid" or "facet normal"'));S=new o.default.Vector(parseFloat(P[2]),parseFloat(P[3]),parseFloat(P[4])),x.vertexNormals.push(S,S,S),_="facet normal"}break;default:console.error('Invalid state "'.concat(_,'"'))}}}(y,b)}})(f,g),c&&f.normalize(),d._decrementPreload(),typeof p=="function"&&p(f)},m):h.match(/\.obj$/i)?this.loadStrings(l,function(g){for(var y=f,b=g,x={v:[],vt:[],vn:[]},C={},S=0;S<b.length;++S){var w=b[S].trim().split(/\b\s+/);if(0<w.length){if(w[0]==="v"||w[0]==="vn"){var _=new o.default.Vector(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));x[w[0]].push(_)}else if(w[0]==="vt")_=[parseFloat(w[1]),1-parseFloat(w[2])],x[w[0]].push(_);else if(w[0]==="f")for(var M=3;M<w.length;++M){for(var I=[],R=[1,M-1,M],P=0;P<R.length;++P){var D=w[R[P]],U=0;if(C[D]!==void 0)U=C[D];else{for(var F=D.split("/"),z=0;z<F.length;z++)F[z]=parseInt(F[z])-1;U=C[D]=y.vertices.length,y.vertices.push(x.v[F[0]].copy()),x.vt[F[1]]?y.uvs.push(x.vt[F[1]].slice()):y.uvs.push([0,0]),x.vn[F[2]]&&y.vertexNormals.push(x.vn[F[2]].copy())}I.push(U)}I[0]!==I[1]&&I[0]!==I[2]&&I[1]!==I[2]&&y.faces.push(I)}}}y.vertexNormals.length===0&&y.computeNormals(),c&&f.normalize(),d._decrementPreload(),typeof p=="function"&&p(f)},m):(o.default._friendlyFileLoadError(3,l),m?m():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),f},o.default.prototype.model=function(l){this._assert3d("model"),o.default._validateParameters("model",arguments),0<l.vertices.length&&(this._renderer.geometryInHash(l.gid)||(l._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(l.gid,l)),this._renderer.drawBuffers(l.gid))};var u=o.default;a.default=u},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.join"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Texture"),l.default.prototype.loadShader=function(h,f,d,g){l.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),d&&d(b)}var b=new l.default.Shader,x=this,C=!1,S=!1;return this.loadStrings(h,function(w){b._vertSrc=w.join(`
`),S=!0,C&&y()},g),this.loadStrings(f,function(w){b._fragSrc=w.join(`
`),C=!0,S&&y()},g),b},l.default.prototype.createShader=function(h,f){return this._assert3d("createShader"),l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,h,f)},l.default.prototype.shader=function(h){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),h._renderer===void 0&&(h._renderer=this._renderer),h.init(),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(h){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(h){h!==c.IMAGE&&h!==c.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},l.default.prototype.textureWrap=function(h){for(var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,d=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=f,this._renderer.textures),g=0;g<d.length;g++)d[g].setWrapMode(h,f)},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];return l.default._validateParameters("normalMaterial",f),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(h,f,d){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var g=l.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(h,f,d,g){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.specularMaterial=function(h,f,d,g){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.shininess=function(h){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},l.default.RendererGL.prototype._applyColorBlend=function(h){var f=this.GL,d=this.drawMode===c.TEXTURE,d=this.userFillShader||this.userStrokeShader||this.userPointShader||d||this.curBlendMode!==c.BLEND||h[h.length-1]<1||this._isErasing;return d!==this._isBlending&&(d||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?f.enable(f.BLEND):f.disable(f.BLEND),f.depthMask(!0),this._isBlending=d),this._applyBlendMode(),h},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case c.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case c.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case c.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case c.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case c.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.camera=function(){var u;this._assert3d("camera");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("camera",c),(u=this._renderer._curCamera).camera.apply(u,c),this},o.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("perspective",c),(u=this._renderer._curCamera).perspective.apply(u,c),this},o.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("ortho",c),(u=this._renderer._curCamera).ortho.apply(u,c),this},o.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("frustum",c),(u=this._renderer._curCamera).frustum.apply(u,c),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new o.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},o.default.Camera=function(u){this._renderer=u,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(m,l,c,p){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),l===void 0&&(l=this.defaultAspectRatio),c===void 0&&(c=this.defaultCameraNear),p===void 0&&(p=this.defaultCameraFar),c<=1e-4&&(c=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<c&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=l,this.cameraNear=c,this.cameraFar=p,this.projMatrix=o.default.Matrix.identity();var m=1/Math.tan(this.cameraFOV/2),h=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/l,0,0,0,0,-m,0,0,0,0,(p+c)*h,-1,0,0,2*p*c*h,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(C,x,c,p,m,h){C===void 0&&(C=-this._renderer.width/2),x===void 0&&(x=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),m===void 0&&(m=0);var S=x-C,f=(p=p===void 0?+this._renderer.height/2:p)-c,d=(h=h===void 0?Math.max(this._renderer.width,this._renderer.height):h)-m,g=2/S,y=2/f,b=-2/d,x=-(x+C)/S,C=-(p+c)/f,S=-(h+m)/d;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-y,0,0,0,0,b,0,x,C,S,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(C,x,c,p,m,h){C===void 0&&(C=-this._renderer.width/2),x===void 0&&(x=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),m===void 0&&(m=0);var S=x-C,f=(p=p===void 0?+this._renderer.height/2:p)-c,d=(h=h===void 0?Math.max(this._renderer.width,this._renderer.height):h)-m,g=2*m/S,y=2*m/f,b=-2*h*m/d,x=(x+C)/S,C=(p+c)/f,S=-(h+m)/d;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,y,0,0,x,C,S,-1,0,0,b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(g,l,c,p){var m=this.centerX,h=this.centerY,f=this.centerZ,d=(m-=this.eyeX,h-=this.eyeY,f-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),g=(d.rotate(this._renderer._pInst._toRadians(g),l,c,p),[m*d.mat4[0]+h*d.mat4[4]+f*d.mat4[8],m*d.mat4[1]+h*d.mat4[5]+f*d.mat4[9],m*d.mat4[2]+h*d.mat4[6]+f*d.mat4[10]]);g[0]+=this.eyeX,g[1]+=this.eyeY,g[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,g[0],g[1],g[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(u){var l=this._getLocalAxes();this._rotateView(u,l.y[0],l.y[1],l.y[2])},o.default.Camera.prototype.tilt=function(u){var l=this._getLocalAxes();this._rotateView(u,l.x[0],l.x[1],l.x[2])},o.default.Camera.prototype.lookAt=function(u,l,c){this.camera(this.eyeX,this.eyeY,this.eyeZ,u,l,c,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(u,l,c,p,m,h,f,d,g){return u===void 0&&(u=this.defaultEyeX,l=this.defaultEyeY,c=this.defaultEyeZ,p=u,m=l,d=1,g=f=h=0),this.eyeX=u,this.eyeY=l,this.eyeZ=c,p!==void 0&&(this.centerX=p,this.centerY=m,this.centerZ=h),f!==void 0&&(this.upX=f,this.upY=d,this.upZ=g),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),m=-u,this.cameraMatrix.translate([m,-l,-c]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(p,m,c){var h=this._getLocalAxes(),p=[h.x[0]*p,h.x[1]*p,h.x[2]*p],m=[h.y[0]*m,h.y[1]*m,h.y[2]*m],h=[h.z[0]*c,h.z[1]*c,h.z[2]*c];this.camera(this.eyeX+p[0]+m[0]+h[0],this.eyeY+p[1]+m[1]+h[1],this.eyeZ+p[2]+m[2]+h[2],this.centerX+p[0]+m[0]+h[0],this.centerY+p[1]+m[1]+h[1],this.centerZ+p[2]+m[2]+h[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.setPosition=function(u,l,c){var p=u-this.eyeX,m=l-this.eyeY,h=c-this.eyeZ;this.camera(u,l,c,this.centerX+p,this.centerY+m,this.centerZ+h,this.upX,this.upY,this.upZ)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var u=new o.default.Camera(this._renderer);return u.cameraFOV=this.cameraFOV,u.aspectRatio=this.aspectRatio,u.eyeX=this.eyeX,u.eyeY=this.eyeY,u.eyeZ=this.eyeZ,u.centerX=this.centerX,u.centerY=this.centerY,u.centerZ=this.centerZ,u.cameraNear=this.cameraNear,u.cameraFar=this.cameraFar,u.cameraType=this.cameraType,u.cameraMatrix=this.cameraMatrix.copy(),u.projMatrix=this.projMatrix.copy(),u},o.default.Camera.prototype._getLocalAxes=function(){var u=this.eyeX-this.centerX,l=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,f=Math.sqrt(u*u+l*l+c*c),f=(f!==0&&(u/=f,l/=f,c/=f),this.upX),p=(d=this.upY)*c-(g=this.upZ)*l,m=-f*c+g*u,h=f*l-d*u,f=l*h-c*m,d=-u*h+c*p,g=u*m-l*p,y=Math.sqrt(p*p+m*m+h*h),y=(y!==0&&(p/=y,m/=y,h/=y),Math.sqrt(f*f+d*d+g*g));return y!==0&&(f/=y,d/=y,g/=y),{x:[p,m,h],y:[f,d,g],z:[u,l,c]}},o.default.Camera.prototype._orbit=function(d,g,y){var m=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,p=Math.sqrt(m*m+f*f+h*h),m=Math.atan2(m,h),h=Math.acos(Math.max(-1,Math.min(1,f/p))),f=0<this.upY?1:-1,d=(m+=f*d,((h+=f*g)<=0||h>=Math.PI)&&(f*=-1),(p+=y)<0&&(p=.1),Math.sin(h)*p*Math.sin(m)),g=Math.cos(h)*p,y=Math.sin(h)*p*Math.cos(m);this.camera(d+this.centerX,g+this.centerY,y+this.centerZ,this.centerX,this.centerY,this.centerZ,0,f,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix.mat4[0],u.projMatrix.mat4[1],u.projMatrix.mat4[2],u.projMatrix.mat4[3],u.projMatrix.mat4[4],u.projMatrix.mat4[5],u.projMatrix.mat4[6],u.projMatrix.mat4[7],u.projMatrix.mat4[8],u.projMatrix.mat4[9],u.projMatrix.mat4[10],u.projMatrix.mat4[11],u.projMatrix.mat4[12],u.projMatrix.mat4[13],u.projMatrix.mat4[14],u.projMatrix.mat4[15])},r=o.default.Camera,a.default=r},{"../core/main":267}],316:[function(r,s,a){r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Geometry=function(u,l,c){return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=u!==void 0?u:1,this.detailY=l!==void 0?l:1,this.dirtyFlags={},c instanceof Function&&c.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var u,l,c,p=this.detailX+1,m=0;m<this.detailY;m++)for(var h=0;h<this.detailX;h++)l=(m+1)*p+h+1,this.faces.push([m*p+h,u=m*p+h+1,c=(m+1)*p+h]),this.faces.push([c,u,l]);return this},o.default.Geometry.prototype._getFaceNormal=function(l){var l=this.faces[l],c=this.vertices[l[0]],m=this.vertices[l[1]],l=this.vertices[l[2]],m=o.default.Vector.sub(m,c),l=o.default.Vector.sub(l,c),c=o.default.Vector.cross(m,l),p=o.default.Vector.mag(c),m=p/(o.default.Vector.mag(m)*o.default.Vector.mag(l));return m===0||isNaN(m)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),c):(1<m&&(m=1),c.mult(Math.asin(m)/p))},o.default.Geometry.prototype.computeNormals=function(){for(var u=this.vertexNormals,l=this.vertices,c=this.faces,p=u.length=0;p<l.length;++p)u.push(new o.default.Vector);for(var m=0;m<c.length;++m)for(var h=c[m],f=this._getFaceNormal(m),d=0;d<3;++d)u[h[d]].add(f);for(p=0;p<l.length;++p)u[p].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var u=0;u<=this.detailY;u++){var l=this.detailX+1,c=o.default.Vector.add(this.vertexNormals[u*l],this.vertexNormals[u*l+this.detailX]),c=o.default.Vector.div(c,2);this.vertexNormals[u*l]=c,this.vertexNormals[u*l+this.detailX]=c}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var u=new o.default.Vector(0,0,0),l=0;l<this.detailX;l++)u.add(this.vertexNormals[l]);for(var u=o.default.Vector.div(u,this.detailX),c=0;c<this.detailX;c++)this.vertexNormals[c]=u;u=new o.default.Vector(0,0,0);for(var p=this.vertices.length-1;p>this.vertices.length-1-this.detailX;p--)u.add(this.vertexNormals[p]);u=o.default.Vector.div(u,this.detailX);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)this.vertexNormals[m]=u;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var u=0,l=this.strokeIndices.length;u<l;u++)this.edges.push(this.strokeIndices[u]);else for(var c=0;c<this.faces.length;c++)this.edges.push([this.faces[c][0],this.faces[c][1]]),this.edges.push([this.faces[c][1],this.faces[c][2]]),this.edges.push([this.faces[c][2],this.faces[c][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var u,l=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],c=!1,p=0;p<this.edges.length;p++){var m=this.edges[p-1],h=this.edges[p],f=this.vertices[h[0]],d=this.vertices[h[1]],g=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*h[0],4*(h[0]+1)):[0,0,0,0],y=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*h[1],4*(h[1]+1)):[0,0,0,0],b=d.copy().sub(f).normalize(),x=0<b.magSq();x&&this._addSegment(f,d,g,y,b),0<p&&m[1]===h[0]?(u&&x&&b.dot(u)<1-1e-8&&this._addJoin(f,u,b,g),!x||c||l||(this._addCap(f,b.copy().mult(-1),g),c=!0)):(c=!1,x&&(!l||0<p)&&(this._addCap(f,b.copy().mult(-1),g),c=!0),u&&(!l||p<this.edges.length-1)&&(this._addCap(this.vertices[m[1]],u,g),u=void 0)),p===this.edges.length-1&&(l?this._addJoin(d,b,this.vertices[this.edges[0][1]].copy().sub(d).normalize(),y):this._addCap(d,b,y)),x&&(u=b)}return this},o.default.Geometry.prototype._addSegment=function(h,f,c,p,m){var h=h.array(),f=f.array(),d=m.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var g=0,y=[this.lineTangentsIn,this.lineTangentsOut];g<y.length;g++)y[g].push(d,d,d,d,d,d);return this.lineVertices.push(h,h,f,f,h,f),this.lineVertexColors.push(c,c,p,p,c,p),this},o.default.Geometry.prototype._addCap=function(u,l,c){for(var p=u.array(),m=l.array(),h=[0,0,0],f=0;f<6;f++)this.lineVertices.push(p),this.lineTangentsIn.push(m),this.lineTangentsOut.push(h),this.lineVertexColors.push(c);return this.lineSides.push(-1,-2,2,2,1,-1),this},o.default.Geometry.prototype._addJoin=function(u,l,c,p){for(var m=u.array(),h=l.array(),f=c.array(),d=0;d<12;d++)this.lineVertices.push(m),this.lineTangentsIn.push(h),this.lineTangentsOut.push(f),this.lineVertexColors.push(p);for(var g=0,y=[-1,1];g<y.length;g++){var b=y[g];this.lineSides.push(b,2*b,3*b,b,3*b,0)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var u=this.vertices[0].copy(),l=this.vertices[0].copy(),c=0;c<this.vertices.length;c++)u.x=Math.max(u.x,this.vertices[c].x),l.x=Math.min(l.x,this.vertices[c].x),u.y=Math.max(u.y,this.vertices[c].y),l.y=Math.min(l.y,this.vertices[c].y),u.z=Math.max(u.z,this.vertices[c].z),l.z=Math.min(l.z,this.vertices[c].z);for(var p=o.default.Vector.lerp(u,l,.5),m=o.default.Vector.sub(u,l),h=200/Math.max(Math.max(m.x,m.y),m.z),f=0;f<this.vertices.length;f++)this.vertices[f].sub(p),this.vertices[f].mult(h)}return this},r=o.default.Geometry,a.default=r},{"../core/main":267,"core-js/modules/es.array.slice":162,"core-js/modules/es.string.sub":192}],317:[function(c,s,a){c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(c=c("../core/main"))&&c.__esModule?c:{default:c},u=Array,l=function(p){return p instanceof Array},c=(typeof Float32Array<"u"&&(u=Float32Array,l=function(p){return p instanceof Array||p instanceof Float32Array}),o.default.Matrix=function(){for(var p=new Array(arguments.length),m=0;m<p.length;++m)p[m]=arguments[m];return p.length&&p[p.length-1]instanceof o.default&&(this.p5=p[p.length-1]),p[0]==="mat3"?this.mat3=Array.isArray(p[1])?p[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(p[0])?p[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(p){return p instanceof o.default.Matrix?this.mat4=p.mat4:l(p)?this.mat4=p:arguments.length===16&&(this.mat4[0]=p,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var p=new o.default.Matrix(this.p5);return p.mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15],p},o.default.Matrix.identity=function(p){return new o.default.Matrix(p)},o.default.Matrix.prototype.transpose=function(p){var m,h,f,d,g,y;return p instanceof o.default.Matrix?(m=p.mat4[1],h=p.mat4[2],f=p.mat4[3],d=p.mat4[6],g=p.mat4[7],y=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=m,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=h,this.mat4[9]=d,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=f,this.mat4[13]=g,this.mat4[14]=y,this.mat4[15]=p.mat4[15]):l(p)&&(m=p[1],h=p[2],f=p[3],d=p[6],g=p[7],y=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=m,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=h,this.mat4[9]=d,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=f,this.mat4[13]=g,this.mat4[14]=y,this.mat4[15]=p[15]),this},o.default.Matrix.prototype.invert=function(D){D instanceof o.default.Matrix?(m=D.mat4[0],h=D.mat4[1],f=D.mat4[2],d=D.mat4[3],g=D.mat4[4],y=D.mat4[5],b=D.mat4[6],x=D.mat4[7],C=D.mat4[8],S=D.mat4[9],w=D.mat4[10],_=D.mat4[11],M=D.mat4[12],I=D.mat4[13],R=D.mat4[14],P=D.mat4[15]):l(D)&&(m=D[0],h=D[1],f=D[2],d=D[3],g=D[4],y=D[5],b=D[6],x=D[7],C=D[8],S=D[9],w=D[10],_=D[11],M=D[12],I=D[13],R=D[14],P=D[15]);var m,h,f,d,g,y,b,x,C,S,w,_,M,I,R,P,D=m*y-h*g,U=m*b-f*g,F=m*x-d*g,z=h*b-f*y,J=h*x-d*y,Q=f*x-d*b,Z=C*I-S*M,K=C*R-w*M,H=C*P-_*M,$=S*R-w*I,Y=S*P-_*I,oe=w*P-_*R,O=D*oe-U*Y+F*$+z*H-J*K+Q*Z;return O?(this.mat4[0]=(y*oe-b*Y+x*$)*(O=1/O),this.mat4[1]=(f*Y-h*oe-d*$)*O,this.mat4[2]=(I*Q-R*J+P*z)*O,this.mat4[3]=(w*J-S*Q-_*z)*O,this.mat4[4]=(b*H-g*oe-x*K)*O,this.mat4[5]=(m*oe-f*H+d*K)*O,this.mat4[6]=(R*F-M*Q-P*U)*O,this.mat4[7]=(C*Q-w*F+_*U)*O,this.mat4[8]=(g*Y-y*H+x*Z)*O,this.mat4[9]=(h*H-m*Y-d*Z)*O,this.mat4[10]=(M*J-I*F+P*D)*O,this.mat4[11]=(S*F-C*J-_*D)*O,this.mat4[12]=(y*K-g*$-b*Z)*O,this.mat4[13]=(m*$-h*K+f*Z)*O,this.mat4[14]=(I*U-M*z-R*D)*O,this.mat4[15]=(C*z-S*U+w*D)*O,this):null},o.default.Matrix.prototype.invert3x3=function(){var p=this.mat3[0],m=this.mat3[1],h=this.mat3[2],f=this.mat3[3],d=this.mat3[4],g=this.mat3[5],y=this.mat3[6],b=this.mat3[7],x=this.mat3[8],C=x*d-g*b,S=-x*f+g*y,w=b*f-d*y,_=p*C+m*S+h*w;return _?(this.mat3[0]=C*(_=1/_),this.mat3[1]=(-x*m+h*b)*_,this.mat3[2]=(g*m-h*d)*_,this.mat3[3]=S*_,this.mat3[4]=(x*p-h*y)*_,this.mat3[5]=(-g*p+h*f)*_,this.mat3[6]=w*_,this.mat3[7]=(-b*p+m*y)*_,this.mat3[8]=(d*p-m*f)*_,this):null},o.default.Matrix.prototype.transpose3x3=function(p){var m=p[1],h=p[2],f=p[5];return this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=m,this.mat3[5]=p[7],this.mat3[6]=h,this.mat3[7]=f,this},o.default.Matrix.prototype.inverseTranspose=function(p){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=p.mat4[0],this.mat3[1]=p.mat4[1],this.mat3[2]=p.mat4[2],this.mat3[3]=p.mat4[4],this.mat3[4]=p.mat4[5],this.mat3[5]=p.mat4[6],this.mat3[6]=p.mat4[8],this.mat3[7]=p.mat4[9],this.mat3[8]=p.mat4[10]),p=this.invert3x3(),p)p.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this},o.default.Matrix.prototype.determinant=function(){var p=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],m=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],h=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],f=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],d=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],g=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],y=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],b=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],x=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],C=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],S=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return p*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-m*S+h*C+f*x-d*b+g*y},o.default.Matrix.prototype.mult=function(h){var m;if(h===this||h===this.mat4)m=this.copy().mat4;else if(h instanceof o.default.Matrix)m=h.mat4;else if(l(h))m=h;else{if(arguments.length!==16)return;m=arguments}var h=this.mat4[0],f=this.mat4[1],d=this.mat4[2],g=this.mat4[3];return this.mat4[0]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[1]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[2]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[3]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[4],f=this.mat4[5],d=this.mat4[6],g=this.mat4[7],this.mat4[4]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[5]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[6]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[7]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[8],f=this.mat4[9],d=this.mat4[10],g=this.mat4[11],this.mat4[8]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[9]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[10]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[11]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[12],f=this.mat4[13],d=this.mat4[14],g=this.mat4[15],this.mat4[12]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[13]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[14]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[15]=h*m[3]+f*m[7]+d*m[11]+g*m[15],this},o.default.Matrix.prototype.apply=function(h){var m;if(h===this||h===this.mat4)m=this.copy().mat4;else if(h instanceof o.default.Matrix)m=h.mat4;else if(l(h))m=h;else{if(arguments.length!==16)return;m=arguments}var h=this.mat4,f=h[0],d=h[4],g=h[8],y=h[12],f=(h[0]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[4]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[8]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[12]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[1]),d=h[5],g=h[9],y=h[13],f=(h[1]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[5]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[9]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[13]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[2]),d=h[6],g=h[10],y=h[14],f=(h[2]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[6]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[10]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[14]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[3]),d=h[7],g=h[11],y=h[15];return h[3]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[7]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[11]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[15]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,this},o.default.Matrix.prototype.scale=function(p,m,h){return p instanceof o.default.Vector?(m=p.y,h=p.z,p=p.x):p instanceof Array&&(m=p[1],h=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=h,this.mat4[9]*=h,this.mat4[10]*=h,this.mat4[11]*=h,this},o.default.Matrix.prototype.rotate=function(D,Y,$,f){Y instanceof o.default.Vector?($=Y.y,f=Y.z,Y=Y.x):Y instanceof Array&&($=Y[1],f=Y[2],Y=Y[0]);var d=Math.sqrt(Y*Y+$*$+f*f),d=(Y*=1/d,$*=1/d,f*=1/d,this.mat4[0]),g=this.mat4[1],y=this.mat4[2],b=this.mat4[3],x=this.mat4[4],C=this.mat4[5],S=this.mat4[6],w=this.mat4[7],_=this.mat4[8],M=this.mat4[9],I=this.mat4[10],R=this.mat4[11],P=Math.sin(D),D=Math.cos(D),U=1-D,F=Y*Y*U+D,z=$*Y*U+f*P,J=f*Y*U-$*P,Q=Y*$*U-f*P,Z=$*$*U+D,K=f*$*U+Y*P,H=Y*f*U+$*P,$=$*f*U-Y*P,Y=f*f*U+D;return this.mat4[0]=d*F+x*z+_*J,this.mat4[1]=g*F+C*z+M*J,this.mat4[2]=y*F+S*z+I*J,this.mat4[3]=b*F+w*z+R*J,this.mat4[4]=d*Q+x*Z+_*K,this.mat4[5]=g*Q+C*Z+M*K,this.mat4[6]=y*Q+S*Z+I*K,this.mat4[7]=b*Q+w*Z+R*K,this.mat4[8]=d*H+x*$+_*Y,this.mat4[9]=g*H+C*$+M*Y,this.mat4[10]=y*H+S*$+I*Y,this.mat4[11]=b*H+w*$+R*Y,this},o.default.Matrix.prototype.translate=function(f){var m=f[0],h=f[1],f=f[2]||0;this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*h+this.mat4[8]*f,this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*h+this.mat4[9]*f,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*h+this.mat4[10]*f,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*h+this.mat4[11]*f},o.default.Matrix.prototype.rotateX=function(p){this.rotate(p,1,0,0)},o.default.Matrix.prototype.rotateY=function(p){this.rotate(p,0,1,0)},o.default.Matrix.prototype.rotateZ=function(p){this.rotate(p,0,0,1)},o.default.Matrix.prototype.perspective=function(d,m,h,f){var d=1/Math.tan(d/2),g=1/(h-f);return this.mat4[0]=d/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=d,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(f+h)*g,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*f*h*g,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(p,m,h,f,d,g){var y=1/(p-m),b=1/(h-f),x=1/(d-g);return this.mat4[0]=-2*y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*b,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*x,this.mat4[11]=0,this.mat4[12]=(p+m)*y,this.mat4[13]=(f+h)*b,this.mat4[14]=(g+d)*x,this.mat4[15]=1,this},o.default.Matrix);a.default=c},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(r,s,a){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.RenderBuffer=function(o,u,l,c,p,m){this.size=o,this.src=u,this.dst=l,this.attr=c,this._renderer=p,this.map=m},r.default.RenderBuffer.prototype._prepareBuffer=function(o,u){var l,c,p,f=u.attributes,m=this._renderer.GL,h=o.model||o,f=f[this.attr];f&&(l=o[this.dst],0<(c=h[this.src]).length?((p=!l)&&(o[this.dst]=l=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,l),!p&&h.dirtyFlags[this.src]===!1||(p=(o=this.map)?o(c):c,this._renderer._bindBuffer(l,m.ARRAY_BUFFER,p),h.dirtyFlags[this.src]=!1),u.enableAttrib(f,this.size)):(o=f.location)!==-1&&this._renderer.registerEnabled[o]&&(m.disableVertexAttribArray(o),this._renderer.registerEnabled[o]=!1))},r=r.default.RenderBuffer,a.default=r},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=function(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=p();if(g&&g.has(d))return g.get(d);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var C;Object.prototype.hasOwnProperty.call(d,y)&&((C=x?Object.getOwnPropertyDescriptor(d,y):null)&&(C.get||C.set)?Object.defineProperty(b,y,C):b[y]=d[y])}return b.default=d,g&&g.set(d,b),b}(r("../core/constants"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}function m(d){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(d)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(d){return this.immediateMode.shapeMode=d!==void 0?d:c.TESS,this.immediateMode.geometry.reset(),this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(l.default.RendererGL.prototype.vertex=function(d,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in h){var b=h[y],y=this.immediateMode.geometry[y];y.push.apply(y,m(y.slice(y.length-3*b,y.length-2*b)).concat(m(y.slice(y.length-b,y.length))))}var x,C,S=x=C=0,w=(arguments.length===3?S=arguments[2]:arguments.length===4?(x=arguments[2],C=arguments[3]):arguments.length===5&&(S=arguments[2],x=arguments[3],C=arguments[4]),new l.default.Vector(d,g,S)),w=(this.immediateMode.geometry.vertices.push(w),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),w=(this.immediateMode.geometry.vertexColors.push(w[0],w[1],w[2],w[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(w[0],w[1],w[2],w[3]),this.textureMode===c.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,C/=this._tex.height):!this.isProcessingVertices&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,C),this.immediateMode._bezierVertex[0]=d,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=d,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=S,this},l.default.RendererGL.prototype.normal=function(d,g,y){return d instanceof l.default.Vector?this._currentNormal=d:this._currentNormal=new l.default.Vector(d,g,y),this},l.default.RendererGL.prototype.endShape=function(d,g,y,b,x,C){return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(d){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,d=d===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,d),this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(d,g,y){var b=[],x=0;switch(d){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length-1;x++)b.push([x,x+1])}return y&&b.push([g.length-1,0]),b},l.default.RendererGL.prototype._tesselateShape=function(){for(var d=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(S,w){return[S.x,S.y,S.z,d.immediateMode.geometry.uvs[2*w],d.immediateMode.geometry.uvs[2*w+1],d.immediateMode.geometry.vertexColors[4*w],d.immediateMode.geometry.vertexColors[4*w+1],d.immediateMode.geometry.vertexColors[4*w+2],d.immediateMode.geometry.vertexColors[4*w+3],d.immediateMode.geometry.vertexNormals[w].x,d.immediateMode.geometry.vertexNormals[w].y,d.immediateMode.geometry.vertexNormals[w].z]}))]),y=this._triangulate(g),b=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),x=0,C=y.length;x<C;x+=l.default.RendererGL.prototype.tessyVertexSize)b.push.apply(b,m(y.slice(x+5,x+9))),this.normal.apply(this,m(y.slice(x+9,x+12))),this.vertex.apply(this,m(y.slice(x,x+5)));this.immediateMode.geometry.vertexColors=b},l.default.RendererGL.prototype._drawImmediateFill=function(){var d=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var C,S=this.immediateMode.buffers.fill[Symbol.iterator]();!(y=(C=S.next()).done);y=!0)C.value._prepareBuffer(this.immediateMode.geometry,g)}catch(w){b=!0,x=w}finally{try{y||S.return==null||S.return()}finally{if(b)throw x}}this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),d.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),g.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var d=this.GL,g=d.isEnabled(d.CULL_FACE),y=(d.disable(d.CULL_FACE),this._getImmediateStrokeShader()),b=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(y),!0),x=!1,C=void 0;try{for(var S,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(b=(S=w.next()).done);b=!0)S.value._prepareBuffer(this.immediateMode.geometry,y)}catch(_){x=!0,C=_}finally{try{b||w.return==null||w.return()}finally{if(x)throw C}}this._applyColorBlend(this.curStrokeColor),d.drawArrays(d.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),g&&d.enable(d.CULL_FACE),y.unbindShader()},l.default.RendererGL);a.default=f},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(l=r("../core/main"))&&l.__esModule?l:{default:l};r("./p5.RendererGL"),r("./p5.RenderBuffer");var u=0,l=(o.default.RendererGL.prototype._initBufferDefaults=function(c){var p;return this._freeBuffers(c),1e3<++u&&(p=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[p],u--),this.retainedMode.geometry[c]={}},o.default.RendererGL.prototype._freeBuffers=function(c){var p,m=this.retainedMode.geometry[c];function h(f){var d=!0,g=!1,y=void 0;try{for(var b,x=f[Symbol.iterator]();!(d=(b=x.next()).done);d=!0){var C=b.value;m[C.dst]&&(p.deleteBuffer(m[C.dst]),m[C.dst]=null)}}catch(S){g=!0,y=S}finally{try{d||x.return==null||x.return()}finally{if(g)throw y}}}m&&(delete this.retainedMode.geometry[c],u--,p=this.GL,m.indexBuffer&&p.deleteBuffer(m.indexBuffer),h(this.retainedMode.buffers.stroke),h(this.retainedMode.buffers.fill))},o.default.RendererGL.prototype.createBuffers=function(g,p){var m,h,f,d=this.GL,g=this._initBufferDefaults(g),y=(g.model=p,g.indexBuffer);return p.faces.length?(y=y||(g.indexBuffer=d.createBuffer()),f=(h=(m=o.default.RendererGL.prototype._flatten(p.faces)).some(function(b){return 65535<b}))?Uint32Array:Uint16Array,this._bindBuffer(y,d.ELEMENT_ARRAY_BUFFER,m,f),g.indexBufferType=h?d.UNSIGNED_INT:d.UNSIGNED_SHORT,g.vertexCount=3*p.faces.length):(y&&(d.deleteBuffer(y),g.indexBuffer=null),g.vertexCount=p.vertices?p.vertices.length:0),g.lineVertexCount=p.lineVertices?p.lineVertices.length:0,g},o.default.RendererGL.prototype.drawBuffers=function(c){var p=this.GL,m=this.retainedMode.geometry[c];if(this._doStroke&&0<m.lineVertexCount){var h=p.isEnabled(p.CULL_FACE),f=(p.disable(p.CULL_FACE),this._getRetainedStrokeShader()),d=(this._useLineColor=0<m.model.vertexStrokeColors.length,this._setStrokeUniforms(f),!0),g=!1,y=void 0;try{for(var b,x=this.retainedMode.buffers.stroke[Symbol.iterator]();!(d=(b=x.next()).done);d=!0)b.value._prepareBuffer(m,f)}catch(M){g=!0,y=M}finally{try{d||x.return==null||x.return()}finally{if(g)throw y}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,c),h&&p.enable(p.CULL_FACE),f.unbindShader()}if(this._doFill){this._useVertexColor=0<m.model.vertexColors.length;var C=this._getRetainedFillShader(),S=(this._setFillUniforms(C),!0),g=!1,y=void 0;try{for(var w,_=this.retainedMode.buffers.fill[Symbol.iterator]();!(S=(w=_.next()).done);S=!0)w.value._prepareBuffer(m,C)}catch(R){g=!0,y=R}finally{try{S||_.return==null||_.return()}finally{if(g)throw y}}m.indexBuffer&&this._bindBuffer(m.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,c),C.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(c,p,m,h){var f=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,m,h),this.drawBuffers(c)}finally{this.uMVMatrix=f}},o.default.RendererGL.prototype._drawArrays=function(c,p){return this.GL.drawArrays(c,0,this.retainedMode.geometry[p].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(c,m){var m=this.retainedMode.geometry[m],h=this.GL;if(m.indexBuffer){if(m.indexBufferType===h.UNSIGNED_INT&&!h.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");h.drawElements(h.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else h.drawArrays(c||h.TRIANGLES,0,m.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(c,p){var m=this.GL,h=this._getImmediatePointShader();this._setPointUniforms(h),this._bindBuffer(p,m.ARRAY_BUFFER,this._vToNArray(c),Float32Array,m.STATIC_DRAW),h.enableAttrib(h.attributes.aPosition,3),m.drawArrays(m.Points,0,c.length),h.unbindShader()},o.default.RendererGL);a.default=l},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(S,s,a){function o(w){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function u(w){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(w)}S("core-js/modules/es.symbol"),S("core-js/modules/es.symbol.description"),S("core-js/modules/es.symbol.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.filter"),S("core-js/modules/es.array.from"),S("core-js/modules/es.array.includes"),S("core-js/modules/es.array.iterator"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.object.assign"),S("core-js/modules/es.object.get-own-property-descriptor"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.regexp.to-string"),S("core-js/modules/es.string.includes"),S("core-js/modules/es.string.iterator"),S("core-js/modules/es.typed-array.float32-array"),S("core-js/modules/es.typed-array.float64-array"),S("core-js/modules/es.typed-array.int16-array"),S("core-js/modules/es.typed-array.uint8-array"),S("core-js/modules/es.typed-array.uint16-array"),S("core-js/modules/es.typed-array.uint32-array"),S("core-js/modules/es.typed-array.copy-within"),S("core-js/modules/es.typed-array.every"),S("core-js/modules/es.typed-array.fill"),S("core-js/modules/es.typed-array.filter"),S("core-js/modules/es.typed-array.find"),S("core-js/modules/es.typed-array.find-index"),S("core-js/modules/es.typed-array.for-each"),S("core-js/modules/es.typed-array.includes"),S("core-js/modules/es.typed-array.index-of"),S("core-js/modules/es.typed-array.iterator"),S("core-js/modules/es.typed-array.join"),S("core-js/modules/es.typed-array.last-index-of"),S("core-js/modules/es.typed-array.map"),S("core-js/modules/es.typed-array.reduce"),S("core-js/modules/es.typed-array.reduce-right"),S("core-js/modules/es.typed-array.reverse"),S("core-js/modules/es.typed-array.set"),S("core-js/modules/es.typed-array.slice"),S("core-js/modules/es.typed-array.some"),S("core-js/modules/es.typed-array.sort"),S("core-js/modules/es.typed-array.subarray"),S("core-js/modules/es.typed-array.to-locale-string"),S("core-js/modules/es.typed-array.to-string"),S("core-js/modules/es.weak-map"),S("core-js/modules/web.dom-collections.iterator"),S("core-js/modules/es.symbol"),S("core-js/modules/es.symbol.description"),S("core-js/modules/es.symbol.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.filter"),S("core-js/modules/es.array.from"),S("core-js/modules/es.array.includes"),S("core-js/modules/es.array.iterator"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.object.assign"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.regexp.to-string"),S("core-js/modules/es.string.includes"),S("core-js/modules/es.string.iterator"),S("core-js/modules/es.typed-array.float32-array"),S("core-js/modules/es.typed-array.float64-array"),S("core-js/modules/es.typed-array.int16-array"),S("core-js/modules/es.typed-array.uint8-array"),S("core-js/modules/es.typed-array.uint16-array"),S("core-js/modules/es.typed-array.uint32-array"),S("core-js/modules/es.typed-array.copy-within"),S("core-js/modules/es.typed-array.every"),S("core-js/modules/es.typed-array.fill"),S("core-js/modules/es.typed-array.filter"),S("core-js/modules/es.typed-array.find"),S("core-js/modules/es.typed-array.find-index"),S("core-js/modules/es.typed-array.for-each"),S("core-js/modules/es.typed-array.includes"),S("core-js/modules/es.typed-array.index-of"),S("core-js/modules/es.typed-array.iterator"),S("core-js/modules/es.typed-array.join"),S("core-js/modules/es.typed-array.last-index-of"),S("core-js/modules/es.typed-array.map"),S("core-js/modules/es.typed-array.reduce"),S("core-js/modules/es.typed-array.reduce-right"),S("core-js/modules/es.typed-array.reverse"),S("core-js/modules/es.typed-array.set"),S("core-js/modules/es.typed-array.slice"),S("core-js/modules/es.typed-array.some"),S("core-js/modules/es.typed-array.sort"),S("core-js/modules/es.typed-array.subarray"),S("core-js/modules/es.typed-array.to-locale-string"),S("core-js/modules/es.typed-array.to-string"),S("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(S("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||u(w)!=="object"&&typeof w!="function")return{default:w};var _=m();if(_&&_.has(w))return _.get(w);var M,I={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in w){var P;Object.prototype.hasOwnProperty.call(w,M)&&((P=R?Object.getOwnPropertyDescriptor(w,M):null)&&(P.get||P.set)?Object.defineProperty(I,M,P):I[M]=w[M])}return I.default=w,_&&_.set(w,I),I}(S("../core/constants")),p=h(S("libtess"));S("./p5.Shader"),S("./p5.Camera"),S("../core/p5.Renderer"),S("./p5.Matrix"),S("path");function m(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,m=function(){return w},w)}function h(w){return w&&w.__esModule?w:{default:w}}function f(w){return function(_){if(Array.isArray(_)){for(var M=0,I=new Array(_.length);M<_.length;M++)I[M]=_[M];return I}}(w)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(w,_){x+="#define STROKE_CAP_".concat(w," ").concat(_,`
`),y[c[w]]=_}function g(w,_){x+="#define STROKE_JOIN_".concat(w," ").concat(_,`
`),b[c[w]]=_}var y={},b={},x="",S=(d("ROUND",0),d("PROJECT",1),d("SQUARE",2),g("ROUND",0),g("MITER",1),g("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),C={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:S+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;
    gl_FragColor = vec4(gl_FragColor.rgb * vDiffuseColor + vSpecularColor, 1.) * baseColor.a;
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:S+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, 1.) * baseColor.a;
}
`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec2 pixelScale = vec2(
    1. / uModelViewMatrix[0][0],
    1. / uModelViewMatrix[1][1]
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  gl_FragColor *= saturate(max(antialias, cover));
}
`,lineVert:x+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:x+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`},S=(l.default.RendererGL=function(w,_,M,I){return l.default.Renderer.call(this,w,_,M),this._setAttributeDefaults(_),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=c.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[1,1,1,1],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=c.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._useLineColor=!1,this._useVertexColor=!1,this.registerEnabled=[],this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new l.default.Matrix,this.uPMatrix=new l.default.Matrix,this.uNMatrix=new l.default.Matrix("mat3"),this._currentNormal=new l.default.Vector(0,0,1),this._curCamera=new l.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new l.default.Geometry,shapeMode:c.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.curStrokeCap=c.ROUND,this.curStrokeJoin=c.ROUND,this.textures=[],this.textureMode=c.IMAGE,this.textureWrapX=c.CLAMP,this.textureWrapY=c.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this.isProcessingVertices=!1,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},l.default.RendererGL.prototype=Object.create(l.default.Renderer.prototype),l.default.RendererGL.prototype._setAttributeDefaults=function(w){var _={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0};w._glAttributes===null?w._glAttributes=_:w._glAttributes=Object.assign(_,w._glAttributes)},l.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var w=this.drawingContext;w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.viewport(0,0,w.drawingBufferWidth,w.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},l.default.RendererGL.prototype._resetContext=function(w,_){var M,I=this.width,R=this.height,D=this.canvas.id,P=this._pInst instanceof l.default.Graphics,D=(P?((M=this._pInst).canvas.parentNode.removeChild(M.canvas),M.canvas=document.createElement("canvas"),(M._pInst._userNode||document.body).appendChild(M.canvas),l.default.Element.call(M,M.canvas,M._pInst),M.width=I,M.height=R):((M=this.canvas)&&M.parentNode.removeChild(M),(M=document.createElement("canvas")).id=D,(this._pInst._userNode||document.body).appendChild(M),this._pInst.canvas=M,this.canvas=M),new l.default.RendererGL(this._pInst.canvas,this._pInst,!P));this._pInst._setProperty("_renderer",D),D.resize(I,R),D._applyDefaults(),P||this._pInst._elements.push(D),typeof _=="function"&&setTimeout(function(){_.apply(window._renderer,w)},0)},l.default.prototype.setAttributes=function(w,_){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var M=!0;if(_!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[w]!==_&&(this._glAttributes[w]=_,M=!1)):w instanceof Object&&this._glAttributes!==w&&(this._glAttributes=w,M=!1),this._renderer.isP3D&&!M){if(!this._setupDone){for(var I in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(I))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.background=function(){var I=(I=this._pInst).color.apply(I,arguments),w=I.levels[0]/255,_=I.levels[1]/255,M=I.levels[2]/255,I=I.levels[3]/255;this.clear(w,_,M,I)},l.default.RendererGL.prototype.fill=function(w,_,M,I){var R=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=R._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null},l.default.RendererGL.prototype.stroke=function(w,_,M,I){var R=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=R._array},l.default.RendererGL.prototype.strokeCap=function(w){this.curStrokeCap=w},l.default.RendererGL.prototype.strokeJoin=function(w){this.curStrokeJoin=w},l.default.RendererGL.prototype.filter=function(w){console.error("filter() does not work in WEBGL mode")},l.default.RendererGL.prototype.blendMode=function(w){w===c.DARKEST||w===c.LIGHTEST||w===c.ADD||w===c.BLEND||w===c.SUBTRACT||w===c.SCREEN||w===c.EXCLUSION||w===c.REPLACE||w===c.MULTIPLY||w===c.REMOVE?this.curBlendMode=w:w!==c.BURN&&w!==c.OVERLAY&&w!==c.HARD_LIGHT&&w!==c.SOFT_LIGHT&&w!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},l.default.RendererGL.prototype.erase=function(w,_){this._isErasing||(this._applyBlendMode(c.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,w/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,_/255])},l.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},l.default.RendererGL.prototype.strokeWeight=function(w){this.curStrokeWeight!==w&&(this.pointSize=w,this.curStrokeWeight=w)},l.default.RendererGL.prototype._getPixel=function(w,_){var M=new Uint8Array(4);return this.drawingContext.readPixels(w,_,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,M),[M[0],M[1],M[2],M[3]]},l.default.RendererGL.prototype.loadPixels=function(){var w,_=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(_=_.pixels,w=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,_ instanceof Uint8Array&&_.length===w||(_=new Uint8Array(w),this._pixelsState._setProperty("pixels",_)),w=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*w,this.height*w,this.GL.RGBA,this.GL.UNSIGNED_BYTE,_))},l.default.RendererGL.prototype.geometryInHash=function(w){return this.retainedMode.geometry[w]!==void 0},l.default.RendererGL.prototype.resize=function(w,_){l.default.Renderer.prototype.resize.call(this,w,_),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),w=this._pixelsState,w.pixels!==void 0&&w._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},l.default.RendererGL.prototype.clear=function(){var w=(arguments.length<=0?void 0:arguments[0])||0,_=(arguments.length<=1?void 0:arguments[1])||0,M=(arguments.length<=2?void 0:arguments[2])||0,I=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(w*I,_*I,M*I,I),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.applyMatrix=function(w,_,M,I,R,P){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([w,_,0,0,M,I,0,0,0,0,1,0,R,P,0,1])},l.default.RendererGL.prototype.translate=function(w,_,M){return w instanceof l.default.Vector&&(M=w.z,_=w.y,w=w.x),this.uMVMatrix.translate([w,_,M]),this},l.default.RendererGL.prototype.scale=function(w,_,M){return this.uMVMatrix.scale(w,_,M),this},l.default.RendererGL.prototype.rotate=function(w,_){return _===void 0?this.rotateZ(w):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},l.default.RendererGL.prototype.rotateX=function(w){return this.rotate(w,1,0,0),this},l.default.RendererGL.prototype.rotateY=function(w){return this.rotate(w,0,1,0),this},l.default.RendererGL.prototype.rotateZ=function(w){return this.rotate(w,0,0,1),this},l.default.RendererGL.prototype.push=function(){var w=l.default.Renderer.prototype.push.apply(this),_=w.properties;return _.uMVMatrix=this.uMVMatrix.copy(),_.uPMatrix=this.uPMatrix.copy(),_._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),_.ambientLightColors=this.ambientLightColors.slice(),_.specularColors=this.specularColors.slice(),_.directionalLightDirections=this.directionalLightDirections.slice(),_.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),_.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),_.pointLightPositions=this.pointLightPositions.slice(),_.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),_.pointLightSpecularColors=this.pointLightSpecularColors.slice(),_.spotLightPositions=this.spotLightPositions.slice(),_.spotLightDirections=this.spotLightDirections.slice(),_.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),_.spotLightSpecularColors=this.spotLightSpecularColors.slice(),_.spotLightAngle=this.spotLightAngle.slice(),_.spotLightConc=this.spotLightConc.slice(),_.userFillShader=this.userFillShader,_.userStrokeShader=this.userStrokeShader,_.userPointShader=this.userPointShader,_.pointSize=this.pointSize,_.curStrokeWeight=this.curStrokeWeight,_.curStrokeColor=this.curStrokeColor,_.curFillColor=this.curFillColor,_.curAmbientColor=this.curAmbientColor,_.curSpecularColor=this.curSpecularColor,_.curEmissiveColor=this.curEmissiveColor,_._useSpecularMaterial=this._useSpecularMaterial,_._useEmissiveMaterial=this._useEmissiveMaterial,_._useShininess=this._useShininess,_.constantAttenuation=this.constantAttenuation,_.linearAttenuation=this.linearAttenuation,_.quadraticAttenuation=this.quadraticAttenuation,_._enableLighting=this._enableLighting,_._useNormalMaterial=this._useNormalMaterial,_._tex=this._tex,_.drawMode=this.drawMode,_._currentNormal=this._currentNormal,_.curBlendMode=this.curBlendMode,w},l.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this},l.default.RendererGL.prototype._getImmediateStrokeShader=function(){var w=this.userStrokeShader;return w&&w.isStrokeShader()?w:this._getLineShader()},l.default.RendererGL.prototype._getRetainedStrokeShader=l.default.RendererGL.prototype._getImmediateStrokeShader,l.default.RendererGL.prototype._getImmediateFillShader=function(){var w=this.userFillShader;if(this._useNormalMaterial&&(!w||!w.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!w||!w.isLightShader())return this._getLightShader()}else if(this._tex){if(!w||!w.isTextureShader())return this._getLightShader()}else if(!w)return this._getImmediateModeShader();return w},l.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var w=this.userFillShader;if(this._enableLighting){if(!w||!w.isLightShader())return this._getLightShader()}else if(this._tex){if(!w||!w.isTextureShader())return this._getLightShader()}else if(!w)return this._getColorShader();return w},l.default.RendererGL.prototype._getImmediatePointShader=function(){var w=this.userPointShader;return w&&w.isPointShader()?w:this._getPointShader()},l.default.RendererGL.prototype._getRetainedLineShader=l.default.RendererGL.prototype._getImmediateLineShader,l.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,C.phongVert,C.phongFrag):this._defaultLightShader=new l.default.Shader(this,C.lightVert,C.lightTextureFrag)),this._defaultLightShader},l.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,C.immediateVert,C.vertexColorFrag)),this._defaultImmediateModeShader},l.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,C.normalVert,C.normalFrag)),this._defaultNormalShader},l.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,C.normalVert,C.basicFrag)),this._defaultColorShader},l.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,C.pointVert,C.pointFrag)),this._defaultPointShader},l.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,C.lineVert,C.lineFrag)),this._defaultLineShader},l.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,C.fontVert,C.fontFrag)),this._defaultFontShader},l.default.RendererGL.prototype._getEmptyTexture=function(){var w;return this._emptyTexture||((w=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,w)),this._emptyTexture},l.default.RendererGL.prototype.getTexture=function(w){var _=this.textures,M=!0,I=!1,R=void 0;try{for(var P,D=_[Symbol.iterator]();!(M=(P=D.next()).done);M=!0){var U=P.value;if(U.src===w)return U}}catch(F){I=!0,R=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw R}}return I=new l.default.Texture(this,w),_.push(I),I},l.default.RendererGL.prototype._setStrokeUniforms=function(w){w.bindShader(),w.setUniform("uUseLineColor",this._useLineColor),w.setUniform("uMaterialColor",this.curStrokeColor),w.setUniform("uStrokeWeight",this.curStrokeWeight),w.setUniform("uStrokeCap",y[this.curStrokeCap]),w.setUniform("uStrokeJoin",b[this.curStrokeJoin])},l.default.RendererGL.prototype._setFillUniforms=function(w){w.bindShader(),w.setUniform("uUseVertexColor",this._useVertexColor),w.setUniform("uMaterialColor",this.curFillColor),w.setUniform("isTexture",!!this._tex),this._tex&&w.setUniform("uSampler",this._tex),w.setUniform("uTint",this._tint),w.setUniform("uAmbientMatColor",this.curAmbientColor),w.setUniform("uSpecularMatColor",this.curSpecularColor),w.setUniform("uEmissiveMatColor",this.curEmissiveColor),w.setUniform("uSpecular",this._useSpecularMaterial),w.setUniform("uEmissive",this._useEmissiveMaterial),w.setUniform("uShininess",this._useShininess),w.setUniform("uUseLighting",this._enableLighting);var _=this.pointLightDiffuseColors.length/3,_=(w.setUniform("uPointLightCount",_),w.setUniform("uPointLightLocation",this.pointLightPositions),w.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),w.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),_=(w.setUniform("uDirectionalLightCount",_),w.setUniform("uLightingDirection",this.directionalLightDirections),w.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),w.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),_=(w.setUniform("uAmbientLightCount",_),w.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);w.setUniform("uSpotLightCount",_),w.setUniform("uSpotLightAngle",this.spotLightAngle),w.setUniform("uSpotLightConc",this.spotLightConc),w.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),w.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),w.setUniform("uSpotLightLocation",this.spotLightPositions),w.setUniform("uSpotLightDirection",this.spotLightDirections),w.setUniform("uConstantAttenuation",this.constantAttenuation),w.setUniform("uLinearAttenuation",this.linearAttenuation),w.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),w.bindTextures()},l.default.RendererGL.prototype._setPointUniforms=function(w){w.bindShader(),w.setUniform("uMaterialColor",this.curStrokeColor),w.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},l.default.RendererGL.prototype._bindBuffer=function(w,_,M,I,R){_=_||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(_,w),M!==void 0&&(w=new(I||Float32Array)(M),this.GL.bufferData(_,w,R||this.GL.STATIC_DRAW))},l.default.RendererGL.prototype._arraysEqual=function(w,_){var M=w.length;if(M!==_.length)return!1;for(var I=0;I<M;I++)if(w[I]!==_[I])return!1;return!0},l.default.RendererGL.prototype._isTypedArray=function(w){return w instanceof Uint32Array},l.default.RendererGL.prototype._flatten=function(w){if(w.length===0)return[];var _;if(2e4<w.length){for(var M=Object.prototype.toString,I=[],R=w.slice(),P=R.pop();M.call(P)==="[object Array]"?R.push.apply(R,f(P)):I.push(P),R.length&&(P=R.pop())!==void 0;);return I.reverse(),I}return(_=[]).concat.apply(_,f(w))},l.default.RendererGL.prototype._vToNArray=function(w){var _=[],M=!0,I=!1,R=void 0;try{for(var P,D=w[Symbol.iterator]();!(M=(P=D.next()).done);M=!0){var U=P.value;_.push(U.x,U.y,U.z)}}catch(F){I=!0,R=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw R}}return _},l.default.prototype._assert3d=function(w){if(!this._renderer.isP3D)throw new Error("".concat(w,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,l.default.RendererGL.prototype._initTessy=function(){var w=new p.default.GluTesselator;return w.gluTessCallback(p.default.gluEnum.GLU_TESS_VERTEX_DATA,function(_,M){for(var I=0;I<_.length;I++)M[M.length]=_[I]}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_BEGIN,function(_){_!==p.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(_))}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_ERROR,function(_){console.log("error callback"),console.log("error number: ".concat(_))}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_COMBINE,function(_,M,I){for(var R=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),P=0;P<I.length;P++)for(var D=0;D<R.length;D++)I[P]!==0&&M[P]&&(R[D]+=M[P][D]*I[P]);return R}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_EDGE_FLAG,function(_){}),w},l.default.RendererGL.prototype._triangulate=function(w){var _=w[0]?w[0][2]:void 0,M=!0,I=!0,R=!1,P=void 0;try{for(var D,U=w[Symbol.iterator]();!(I=(D=U.next()).done);I=!0)for(var F=D.value,z=0;z<F.length;z+=l.default.RendererGL.prototype.tessyVertexSize)if(F[z+2]!==_){M=!1;break}}catch(H){R=!0,P=H}finally{try{I||U.return==null||U.return()}finally{if(R)throw P}}M?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),R=[],this._tessy.gluTessBeginPolygon(R);for(var J=0;J<w.length;J++){this._tessy.gluTessBeginContour();for(var Q=w[J],Z=0;Z<Q.length;Z+=l.default.RendererGL.prototype.tessyVertexSize){var K=Q.slice(Z,Z+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(K,K)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),R},l.default.RendererGL.prototype._bezierCoefficients=function(w){var _=w*w,M=1-w,I=M*M;return[I*M,3*I*w,3*M*_,_*w]},l.default.RendererGL.prototype._quadraticCoefficients=function(w){var _=1-w;return[_*_,2*_*w,w*w]},l.default.RendererGL.prototype._bezierToCatmull=function(w){return[w[1],w[1]+(w[2]-w[0])/this._curveTightness,w[2]-(w[3]-w[1])/this._curveTightness,w[2]]},l.default.RendererGL);a.default=S},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Shader=function(u,l,c){this._renderer=u,this._vertSrc=l,this._fragSrc=c,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(this._glProgram===0){var u=this._renderer.GL;if(this._vertShader=u.createShader(u.VERTEX_SHADER),u.shaderSource(this._vertShader,this._vertSrc),u.compileShader(this._vertShader),!u.getShaderParameter(this._vertShader,u.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(u.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(this._fragShader,this._fragSrc),u.compileShader(this._fragShader),!u.getShaderParameter(this._fragShader,u.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(u.getShaderInfoLog(this._fragShader))),null;this._glProgram=u.createProgram(),u.attachShader(this._glProgram,this._vertShader),u.attachShader(this._glProgram,this._fragShader),u.linkProgram(this._glProgram),u.getProgramParameter(this._glProgram,u.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(u.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var u=this._renderer.GL,l=u.getProgramParameter(this._glProgram,u.ACTIVE_ATTRIBUTES),c=0;c<l;++c){var p=u.getActiveAttrib(this._glProgram,c),m=p.name,h=u.getAttribLocation(this._glProgram,m),f={};f.name=m,f.location=h,f.index=c,f.type=p.type,f.size=p.size,this.attributes[m]=f}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var u=this._renderer.GL,l=u.getProgramParameter(this._glProgram,u.ACTIVE_UNIFORMS),c=0,p=0;p<l;++p){var m=u.getActiveUniform(this._glProgram,p),h={},f=(h.location=u.getUniformLocation(this._glProgram,m.name),h.size=m.size,m.name);1<m.size&&(f=f.substring(0,f.indexOf("[0]"))),h.name=f,h.type=m.type,h._cachedData=void 0,h.type===u.SAMPLER_2D&&(h.samplerIndex=c,c++,this.samplers.push(h)),h.isArray=1<m.size||h.type===u.FLOAT_MAT3||h.type===u.FLOAT_MAT4||h.type===u.FLOAT_VEC2||h.type===u.FLOAT_VEC3||h.type===u.FLOAT_VEC4||h.type===u.INT_VEC2||h.type===u.INT_VEC4||h.type===u.INT_VEC3,this.uniforms[f]=h}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var u=this._renderer.GL,l=!0,c=!1,p=void 0;try{for(var m,h=this.samplers[Symbol.iterator]();!(l=(m=h.next()).done);l=!0){var f=m.value,d=f.texture;d===void 0&&(d=this._renderer._getEmptyTexture()),u.activeTexture(u.TEXTURE0+f.samplerIndex),d.bindTexture(),d.update(),u.uniform1i(f.location,f.samplerIndex)}}catch(g){c=!0,p=g}finally{try{l||h.return==null||h.return()}finally{if(c)throw p}}},o.default.Shader.prototype.updateTextures=function(){var u=!0,l=!1,c=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var h=p.value.texture;h&&h.update()}}catch(f){l=!0,c=f}finally{try{u||m.return==null||m.return()}finally{if(l)throw c}}},o.default.Shader.prototype.unbindTextures=function(){var u=!0,l=!1,c=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var h=p.value;this.setUniform(h.name,this._renderer._getEmptyTexture())}}catch(f){l=!0,c=f}finally{try{u||m.return==null||m.return()}finally{if(l)throw c}}},o.default.Shader.prototype._setMatrixUniforms=function(){var u=this._renderer._curCamera.cameraMatrix,l=this._renderer.uPMatrix,c=this._renderer.uMVMatrix,p=c.copy();p.mult(l),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",u.mat4),this.setUniform("uProjectionMatrix",l.mat4),this.setUniform("uModelViewMatrix",c.mat4),this.setUniform("uModelViewProjectionMatrix",p.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var u=this._renderer.GL;return this._renderer._curShader!==this&&(u.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(u,l){var c=this.uniforms[u];if(c){var p=this._renderer.GL;if(c.isArray){if(c._cachedData&&this._renderer._arraysEqual(c._cachedData,l))return;c._cachedData=l.slice(0)}else{if(c._cachedData&&c._cachedData===l)return;Array.isArray(l)?c._cachedData=l.slice(0):c._cachedData=l}var m=c.location;switch(this.useProgram(),c.type){case p.BOOL:l===!0?p.uniform1i(m,1):p.uniform1i(m,0);break;case p.INT:1<c.size?l.length&&p.uniform1iv(m,l):p.uniform1i(m,l);break;case p.FLOAT:1<c.size?l.length&&p.uniform1fv(m,l):p.uniform1f(m,l);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(m,!1,l);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(m,!1,l);break;case p.FLOAT_VEC2:1<c.size?l.length&&p.uniform2fv(m,l):p.uniform2f(m,l[0],l[1]);break;case p.FLOAT_VEC3:1<c.size?l.length&&p.uniform3fv(m,l):p.uniform3f(m,l[0],l[1],l[2]);break;case p.FLOAT_VEC4:1<c.size?l.length&&p.uniform4fv(m,l):p.uniform4f(m,l[0],l[1],l[2],l[3]);break;case p.INT_VEC2:1<c.size?l.length&&p.uniform2iv(m,l):p.uniform2i(m,l[0],l[1]);break;case p.INT_VEC3:1<c.size?l.length&&p.uniform3iv(m,l):p.uniform3i(m,l[0],l[1],l[2]);break;case p.INT_VEC4:1<c.size?l.length&&p.uniform4iv(m,l):p.uniform4i(m,l[0],l[1],l[2],l[3]);break;case p.SAMPLER_2D:p.activeTexture(p.TEXTURE0+c.samplerIndex),c.texture=l instanceof o.default.Texture?l:this._renderer.getTexture(l),p.uniform1i(m,c.samplerIndex),c.texture.src.gifProperties&&c.texture.src._animateGif(this._renderer._pInst)}return this}},o.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},o.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},o.default.Shader.prototype.enableAttrib=function(u,l,c,p,m,h){var f;return u&&(u=u.location)!==-1&&(f=this._renderer.GL,this._renderer.registerEnabled[u]||(f.enableVertexAttribArray(u),this._renderer.registerEnabled[u]=!0),this._renderer.GL.vertexAttribPointer(u,l,c||f.FLOAT,p||!1,m||0,h||0)),this},r=o.default.Shader,a.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.Texture=function(h,f,d){return this._renderer=h,h=this._renderer.GL,(d=d||{}).dataType===h.FLOAT&&(h.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),h.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=f,this.glTex=void 0,this.glTarget=h.TEXTURE_2D,this.glFormat=d.format||h.RGBA,this.mipmaps=!1,this.glMinFilter=d.minFilter||h.LINEAR,this.glMagFilter=d.magFilter||h.LINEAR,this.glWrapS=d.wrapS||h.CLAMP_TO_EDGE,this.glWrapT=d.wrapT||h.CLAMP_TO_EDGE,this.glDataType=d.dataType||h.UNSIGNED_BYTE,this.isSrcMediaElement=l.default.MediaElement!==void 0&&f instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&f instanceof l.default.Element&&!(f instanceof l.default.Graphics)&&!(f instanceof l.default.Renderer),this.isSrcP5Image=f instanceof l.default.Image,this.isSrcP5Graphics=f instanceof l.default.Graphics,this.isSrcP5Renderer=f instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&f instanceof ImageData,d=this._getTextureDataFromSource(),this.width=d.width,this.height=d.height,this.init(d),this},l.default.Texture.prototype._getTextureDataFromSource=function(){var h;return this.isSrcP5Image?h=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?h=this.src.elt:this.isImageData&&(h=this.src),h},l.default.Texture.prototype.init=function(h){var f,d=this._renderer.GL;this.glTex=d.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this.glMagFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(f=new Uint8Array([1,1,1,1]),d.texImage2D(this.glTarget,0,d.RGBA,1,1,0,this.glFormat,this.glDataType,f)):d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,h)},l.default.Texture.prototype.update=function(){var h,f,d,g=this.src;return g.width!==0&&g.height!==0&&(h=this._getTextureDataFromSource(),f=!1,d=this._renderer.GL,h.width!==this.width||h.height!==this.height?(f=!0,this.width=h.width,this.height=h.height,this.isSrcP5Image?g.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&g.setModified(!0)):this.isSrcP5Image?g.isModified()&&g.setModified(!(f=!0)):this.isSrcMediaElement?g.isModified()?g.setModified(!(f=!0)):g.loadedmetadata&&this._videoPrevUpdateTime!==g.time()&&(this._videoPrevUpdateTime=g.time(),f=!0):this.isImageData?g._dirty&&(f=!(g._dirty=!1)):f=!0,f&&(this.bindTexture(),d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,h)),f)},l.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},l.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},l.default.Texture.prototype.setInterpolation=function(h,f){var d=this._renderer.GL;h===c.NEAREST?this.glMinFilter=d.NEAREST:this.glMinFilter=d.LINEAR,f===c.NEAREST?this.glMagFilter=d.NEAREST:this.glMagFilter=d.LINEAR,this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.glMinFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},l.default.Texture.prototype.setWrapMode=function(h,f){function d(x){return(x&x-1)==0}var g=this._renderer.GL,b=this._getTextureDataFromSource(),b=b.naturalWidth&&b.naturalHeight?(y=b.naturalWidth,b.naturalHeight):(y=this.width,this.height),y=d(y),b=d(b);h===c.REPEAT?y&&b?this.glWrapS=g.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=g.CLAMP_TO_EDGE):h===c.MIRROR?y&&b?this.glWrapS=g.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=g.CLAMP_TO_EDGE):this.glWrapS=g.CLAMP_TO_EDGE,f===c.REPEAT?y&&b?this.glWrapT=g.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=g.CLAMP_TO_EDGE):f===c.MIRROR?y&&b?this.glWrapT=g.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=g.CLAMP_TO_EDGE):this.glWrapT=g.CLAMP_TO_EDGE,this.bindTexture(),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,this.glWrapS),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var m=l.default.Texture;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(r,s,a){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function u(y){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,c=(l=r("../core/main"))&&l.__esModule?l:{default:l},p=function(y){if(y&&y.__esModule)return y;if(y===null||u(y)!=="object"&&typeof y!="function")return{default:y};var b=m();if(b&&b.has(y))return b.get(y);var x,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var w;Object.prototype.hasOwnProperty.call(y,x)&&((w=S?Object.getOwnPropertyDescriptor(y,x):null)&&(w.get||w.set)?Object.defineProperty(C,x,w):C[x]=y[x])}return C.default=y,b&&b.set(y,C),C}(r("../core/constants"));function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(y){return this._isOpenType()?this._textFont._textWidth(y,this._textSize):0};function h(y,b){this.width=y,this.height=b,this.infos=[],this.findImage=function(x){var C,S,w=this.width*this.height;if(w<x)throw new Error("font is too complex to render in 3D");for(var _=this.infos.length-1;0<=_;--_){var M=this.infos[_];if(M.index+x<w){S=(C=M).imageData;break}}if(!C){try{S=new ImageData(this.width,this.height)}catch{var I=document.getElementsByTagName("canvas")[0],R=!I,P=(I||((I=document.createElement("canvas")).style.display="none",document.body.appendChild(I)),I.getContext("2d"));P&&(S=P.createImageData(this.width,this.height)),R&&document.body.removeChild(I)}this.infos.push(C={index:0,imageData:S})}return P=C.index,C.index+=x,S._dirty=!0,{imageData:S,index:P}}}function f(_,b,x,C,S){var w=_.imageData.data,_=4*_.index++;w[_++]=b,w[_++]=x,w[_++]=C,w[+_]=S}function d(y){this.font=y,this.strokeImageInfos=new h(64,64),this.colDimImageInfos=new h(64,64),this.rowDimImageInfos=new h(64,64),this.colCellImageInfos=new h(64,64),this.rowCellImageInfos=new h(64,64),this.glyphInfos={},this.getGlyphInfo=function(b){var x=this.glyphInfos[b.index];if(!x){var C=b.getBoundingBox(),S=C.x1,w=C.y1,_=C.x2-S,M=C.y2-w,I=b.path.commands;if(_==0||M==0||!I.length)return this.glyphInfos[b.index]={};for(var R,P,D,U,F=[],z=[],J=[],Q=8;0<=Q;--Q)J.push([]);for(Q=8;0<=Q;--Q)z.push([]);var Z=!0,K=!1,H=void 0;try{for(var $,Y=I[Symbol.iterator]();!(Z=($=Y.next()).done);Z=!0){var oe=$.value,O=(oe.x-S)/_,B=(oe.y-w)/M;if(!Ye(R,P,O,B)){switch(oe.type){case"M":D=O,U=B;break;case"L":Me(R,P,O,B);break;case"Q":var q=(oe.x1-S)/_,re=(oe.y1-w)/M;Se([R,O,q],[P,B,re],{x:R,y:P,cx:q,cy:re});break;case"Z":Ye(R,P,D,U)?F.push({x:R,y:P}):(Me(R,P,D,U),F.push({x:D,y:U}));break;case"C":for(var ae=function(Xe,X,ce,Fe,Ue,nt,st,je){var Xe=new Ie(new c.default.Vector(Xe,X),new c.default.Vector(ce,Fe),new c.default.Vector(Ue,nt),new c.default.Vector(st,je)).splitInflections(),Pe=[],ee=30/g,ie=!0,X=!1,ce=void 0;try{for(var ke,Re=Xe[Symbol.iterator]();!(ie=(ke=Re.next()).done);ie=!0){for(var $e=ke.value,mt=[],_t=void 0;!(.125<=(_t=ee/$e.quadError()));){var wt=Math.pow(_t,.3333333333333333),Ct=$e.split(wt),zt=$e.split(1-wt/(1-wt));Pe.push(Ct),mt.push($e),$e=zt}_t<1&&Pe.push($e.split(.5)),Pe.push($e),Array.prototype.push.apply(Pe,mt.reverse())}}catch(Pt){X=!0,ce=Pt}finally{try{ie||Re.return==null||Re.return()}finally{if(X)throw ce}}return Pe}(R,P,(oe.x1-S)/_,(oe.y1-w)/M,(oe.x2-S)/_,(oe.y2-w)/M,O,B),me=0;me<ae.length;me++){var ge=ae[me].toQuadratic();Se([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(oe.type))}R=O,P=B}}}catch(rt){K=!0,H=rt}finally{try{Z||Y.return==null||Y.return()}finally{if(K)throw H}}for(var xe=F.length,pe=this.strokeImageInfos.findImage(xe),ve=pe.index,Ee=0;Ee<xe;++Ee){var le=F[Ee];f(pe,be(le.x),be(le.y),be(le.cx),be(le.cy))}(x=this.glyphInfos[b.index]={glyph:b,uGlyphRect:[C.x1,-C.y1,C.x2,-C.y2],strokeImageInfo:pe,strokes:F,colInfo:Be(J,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Be(z,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[x.colInfo.dimOffset,x.rowInfo.dimOffset]}return x;function Se(rt,Ge,ye){var Fe=F.length;function Ue(Pe,ee,ie){for(var X=Pe.length;0<X--;){var ce=Pe[X];ce<ee&&(ee=ce),ie<ce&&(ie=ce)}return{min:ee,max:ie}}F.push(ye);for(var ye=Ue(rt,1,0),rt=Math.max(Math.floor(9*ye.min-.5),0),nt=Math.min(Math.ceil(9*ye.max+.5),9),st=rt;st<nt;++st)J[st].push(Fe);for(var ye=Ue(Ge,1,0),rt=Math.max(Math.floor(9*ye.min-.5),0),je=Math.min(Math.ceil(9*ye.max+.5),9),Xe=rt;Xe<je;++Xe)z[Xe].push(Fe)}function be(rt){return(rt=(ye=255)*rt)<(Ge=0)?Ge:ye<rt?ye:rt;var Ge,ye}function Ie(rt,Ge,ye,Fe){this.p0=rt,this.c0=Ge,this.c1=ye,this.p1=Fe,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Xe){var nt=c.default.Vector.lerp(this.p0,this.c0,Xe),je=c.default.Vector.lerp(this.c0,this.c1,Xe),st=c.default.Vector.lerp(nt,je,Xe),je=(this.c1=c.default.Vector.lerp(this.c1,this.p1,Xe),this.c0=c.default.Vector.lerp(je,this.c1,Xe),c.default.Vector.lerp(st,this.c0,Xe)),Xe=new Ie(this.p0,nt,st,je);return this.p0=je,Xe},this.splitInflections=function(){var Ue=c.default.Vector.sub(this.c0,this.p0),nt=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),Ue),st=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),Ue),c.default.Vector.mult(nt,2)),je=[],Xe=nt.x*st.y-nt.y*st.x;return Xe!==0&&0<=(Ue=(st=Ue.x*st.y-Ue.y*st.x)*st-4*Xe*(Ue.x*nt.y-Ue.y*nt.x))&&(Xe<0&&(Xe=-Xe,st=-st),Ue=(-st+(nt=Math.sqrt(Ue)))/(2*Xe),0<(st=(-st-nt)/(2*Xe))&&st<1&&(je.push(this.split(st)),Ue=1-(1-Ue)/(1-st)),0<Ue&&Ue<1&&je.push(this.split(Ue))),je.push(this),je}}function Me(rt,Ge,ye,Fe){Se([rt,ye],[Ge,Fe],{x:rt,y:Ge,cx:(rt+ye)/2,cy:(Ge+Fe)/2})}function Ye(rt,Ge,ye,Fe){return Math.abs(ye-rt)<1e-5&&Math.abs(Fe-Ge)<1e-5}function Be(rt,Ge,ye){for(var Fe=rt.length,Ue=Ge.findImage(Fe),Ge=Ue.index,nt=0,st=0;st<Fe;++st)nt+=rt[st].length;for(var je=ye.findImage(nt),Xe=0;Xe<Fe;++Xe){var Pe=rt[Xe],ee=Pe.length,ie=je.index;f(Ue,ie>>7,127&ie,ee>>7,127&ee);for(var X=0;X<ee;++X){var ce=Pe[X]+ve;f(je,ce>>7,127&ce,0,0)}}return{cellImageInfo:je,dimOffset:Ge,dimImageInfo:Ue}}}}var g=Math.sqrt(3);c.default.RendererGL.prototype._renderText=function(y,b,x,C,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=C)&&this._doFill){if(this._isOpenType()){y.push();var S=this._doStroke,w=this.drawMode,_=(this._doStroke=!1,this.drawMode=p.TEXTURE,this._textFont.font),M=(M=this._textFont._fontInfo)||(this._textFont._fontInfo=new d(_)),x=this._textFont._handleAlignment(this,b,x,C),C=this._textSize/_.unitsPerEm,I=(this.translate(x.x,x.y,0),this.scale(C,C,1),this.GL),x=!this._defaultFontShader,R=this._getFontShader(),P=(R.init(),R.bindShader(),x&&(R.setUniform("uGridImageSize",[64,64]),R.setUniform("uCellsImageSize",[64,64]),R.setUniform("uStrokeImageSize",[64,64]),R.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),D=(P||((C=this._textGeom=new c.default.Geometry(1,1,function(){for(var ge=0;ge<=1;ge++)for(var xe=0;xe<=1;xe++)this.vertices.push(new c.default.Vector(xe,ge,0)),this.uvs.push(xe,ge)})).computeFaces().computeNormals(),P=this.createBuffers("glyph",C)),!0),x=!1,C=void 0;try{for(var U,F=this.retainedMode.buffers.text[Symbol.iterator]();!(D=(U=F.next()).done);D=!0)U.value._prepareBuffer(P,R)}catch(ge){x=!0,C=ge}finally{try{D||F.return==null||F.return()}finally{if(x)throw C}}this._bindBuffer(P.indexBuffer,I.ELEMENT_ARRAY_BUFFER),R.setUniform("uMaterialColor",this.curFillColor);try{var z=0,J=null,Q=_.stringToGlyphs(b),Z=!0,K=!1,H=void 0;try{for(var $,Y=Q[Symbol.iterator]();!(Z=($=Y.next()).done);Z=!0){var oe,O,B=$.value,q=(J&&(z+=_.getKerningValue(J,B)),M.getGlyphInfo(B));q.uGlyphRect&&(oe=q.rowInfo,O=q.colInfo,R.setUniform("uSamplerStrokes",q.strokeImageInfo.imageData),R.setUniform("uSamplerRowStrokes",oe.cellImageInfo.imageData),R.setUniform("uSamplerRows",oe.dimImageInfo.imageData),R.setUniform("uSamplerColStrokes",O.cellImageInfo.imageData),R.setUniform("uSamplerCols",O.dimImageInfo.imageData),R.setUniform("uGridOffset",q.uGridOffset),R.setUniform("uGlyphRect",q.uGlyphRect),R.setUniform("uGlyphOffset",z),R.bindTextures(),I.drawElements(I.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),z+=B.advanceWidth,J=B}}catch(ge){K=!0,H=ge}finally{try{Z||Y.return==null||Y.return()}finally{if(K)throw H}}}finally{R.unbindShader(),this._doStroke=S,this.drawMode=w,y.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return y}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(xx);const Sx=_x(Ud);class Lr{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,n,r){let s=[];return this.decompose(0,t,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(n,this.length,s,1),xs.from(s,this.length-(n-t)+r.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,n=this.length){let r=[];return this.decompose(t,n,r,0),xs.from(r,n-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let n=this.scanIdentical(t,1),r=this.length-this.scanIdentical(t,-1),s=new Rl(this),a=new Rl(t);for(let o=n,u=n;;){if(s.next(o),a.next(o),o=0,s.lineBreak!=a.lineBreak||s.done!=a.done||s.value!=a.value)return!1;if(u+=s.value.length,s.done||u>=r)return!0}}iter(t=1){return new Rl(this,t)}iterRange(t,n=this.length){return new U0(this,t,n)}iterLines(t,n){let r;if(t==null)r=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(t).from;r=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new V0(r)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Lr.empty:t.length<=32?new Sn(t):xs.from(Sn.split(t,[]))}}class Sn extends Lr{constructor(t,n=Cx(t)){super(),this.text=t,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(t,n,r,s){for(let a=0;;a++){let o=this.text[a],u=s+o.length;if((n?r:u)>=t)return new jx(s,u,r,o);s=u+1,r++}}decompose(t,n,r,s){let a=t<=0&&n>=this.length?this:new Sn(Im(this.text,t,n),Math.min(n,this.length)-Math.max(0,t));if(s&1){let o=r.pop(),u=ac(a.text,o.text.slice(),0,a.length);if(u.length<=32)r.push(new Sn(u,o.length+a.length));else{let l=u.length>>1;r.push(new Sn(u.slice(0,l)),new Sn(u.slice(l)))}}else r.push(a)}replace(t,n,r){if(!(r instanceof Sn))return super.replace(t,n,r);let s=ac(this.text,ac(r.text,Im(this.text,0,t)),n),a=this.length+r.length-(n-t);return s.length<=32?new Sn(s,a):xs.from(Sn.split(s,[]),a)}sliceString(t,n=this.length,r=`
`){let s="";for(let a=0,o=0;a<=n&&o<this.text.length;o++){let u=this.text[o],l=a+u.length;a>t&&o&&(s+=r),t<l&&n>a&&(s+=u.slice(Math.max(0,t-a),n-a)),a=l+1}return s}flatten(t){for(let n of this.text)t.push(n)}scanIdentical(){return 0}static split(t,n){let r=[],s=-1;for(let a of t)r.push(a),s+=a.length+1,r.length==32&&(n.push(new Sn(r,s)),r=[],s=-1);return s>-1&&n.push(new Sn(r,s)),n}}class xs extends Lr{constructor(t,n){super(),this.children=t,this.length=n,this.lines=0;for(let r of t)this.lines+=r.lines}lineInner(t,n,r,s){for(let a=0;;a++){let o=this.children[a],u=s+o.length,l=r+o.lines-1;if((n?l:u)>=t)return o.lineInner(t,n,r,s);s=u+1,r=l+1}}decompose(t,n,r,s){for(let a=0,o=0;o<=n&&a<this.children.length;a++){let u=this.children[a],l=o+u.length;if(t<=l&&n>=o){let c=s&((o<=t?1:0)|(l>=n?2:0));o>=t&&l<=n&&!c?r.push(u):u.decompose(t-o,n-o,r,c)}o=l+1}}replace(t,n,r){if(r.lines<this.lines)for(let s=0,a=0;s<this.children.length;s++){let o=this.children[s],u=a+o.length;if(t>=a&&n<=u){let l=o.replace(t-a,n-a,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let p=this.children.slice();return p[s]=l,new xs(p,this.length-(n-t)+r.length)}return super.replace(a,u,l)}a=u+1}return super.replace(t,n,r)}sliceString(t,n=this.length,r=`
`){let s="";for(let a=0,o=0;a<this.children.length&&o<=n;a++){let u=this.children[a],l=o+u.length;o>t&&a&&(s+=r),t<l&&n>o&&(s+=u.sliceString(t-o,n-o,r)),o=l+1}return s}flatten(t){for(let n of this.children)n.flatten(t)}scanIdentical(t,n){if(!(t instanceof xs))return 0;let r=0,[s,a,o,u]=n>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;s+=n,a+=n){if(s==o||a==u)return r;let l=this.children[s],c=t.children[a];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(t,n=t.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let f of t)r+=f.lines;if(r<32){let f=[];for(let d of t)d.flatten(f);return new Sn(f,n)}let s=Math.max(32,r>>5),a=s<<1,o=s>>1,u=[],l=0,c=-1,p=[];function m(f){let d;if(f.lines>a&&f instanceof xs)for(let g of f.children)m(g);else f.lines>o&&(l>o||!l)?(h(),u.push(f)):f instanceof Sn&&l&&(d=p[p.length-1])instanceof Sn&&f.lines+d.lines<=32?(l+=f.lines,c+=f.length+1,p[p.length-1]=new Sn(d.text.concat(f.text),d.length+1+f.length)):(l+f.lines>s&&h(),l+=f.lines,c+=f.length+1,p.push(f))}function h(){l!=0&&(u.push(p.length==1?p[0]:xs.from(p,c)),c=-1,l=p.length=0)}for(let f of t)m(f);return h(),u.length==1?u[0]:new xs(u,n)}}Lr.empty=new Sn([""],0);function Cx(i){let t=-1;for(let n of i)t+=n.length+1;return t}function ac(i,t,n=0,r=1e9){for(let s=0,a=0,o=!0;a<i.length&&s<=r;a++){let u=i[a],l=s+u.length;l>=n&&(l>r&&(u=u.slice(0,r-s)),s<n&&(u=u.slice(n-s)),o?(t[t.length-1]+=u,o=!1):t.push(u)),s=l+1}return t}function Im(i,t,n){return ac(i,[""],t,n)}class Rl{constructor(t,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[n>0?1:(t instanceof Sn?t.text.length:t.children.length)<<1]}nextInner(t,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],a=this.offsets[r],o=a>>1,u=s instanceof Sn?s.text.length:s.children.length;if(o==(n>0?u:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(n>0?0:1)){if(this.offsets[r]+=n,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(s instanceof Sn){let l=s.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,t))return this.value=t==0?l:n>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=s.children[o+(n<0?-1:0)];t>l.length?(t-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Sn?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class U0{constructor(t,n,r){this.value="",this.done=!1,this.cursor=new Rl(t,n>r?-1:1),this.pos=n>r?t.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(t,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;t>r&&(t=r),r-=t;let{value:s}=this.cursor.next(t);return this.pos+=(s.length+t)*n,this.value=s.length<=r?s:n<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class V0{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:n,lineBreak:r,value:s}=this.inner.next(t);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Lr.prototype[Symbol.iterator]=function(){return this.iter()},Rl.prototype[Symbol.iterator]=U0.prototype[Symbol.iterator]=V0.prototype[Symbol.iterator]=function(){return this});class jx{constructor(t,n,r,s){this.from=t,this.to=n,this.number=r,this.text=s}get length(){return this.to-this.from}}let Fa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<Fa.length;i++)Fa[i]+=Fa[i-1];function Tx(i){for(let t=1;t<Fa.length;t+=2)if(Fa[t]>i)return Fa[t-1]<=i;return!1}function Pm(i){return i>=127462&&i<=127487}const Rm=8205;function _i(i,t,n=!0,r=!0){return(n?G0:kx)(i,t,r)}function G0(i,t,n){if(t==i.length)return t;t&&H0(i.charCodeAt(t))&&z0(i.charCodeAt(t-1))&&t--;let r=Yn(i,t);for(t+=Yi(r);t<i.length;){let s=Yn(i,t);if(r==Rm||s==Rm||n&&Tx(s))t+=Yi(s),r=s;else if(Pm(s)){let a=0,o=t-2;for(;o>=0&&Pm(Yn(i,o));)a++,o-=2;if(a%2==0)break;t+=2}else break}return t}function kx(i,t,n){for(;t>0;){let r=G0(i,t-2,n);if(r<t)return r;t--}return 0}function H0(i){return i>=56320&&i<57344}function z0(i){return i>=55296&&i<56320}function Yn(i,t){let n=i.charCodeAt(t);if(!z0(n)||t+1==i.length)return n;let r=i.charCodeAt(t+1);return H0(r)?(n-55296<<10)+(r-56320)+65536:n}function Qf(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Yi(i){return i<65536?1:2}const Vd=/\r\n?|\n/;var bi=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(bi||(bi={}));class js{constructor(t){this.sections=t}get length(){let t=0;for(let n=0;n<this.sections.length;n+=2)t+=this.sections[n];return t}get newLength(){let t=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];t+=r<0?this.sections[n]:r}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let n=0,r=0,s=0;n<this.sections.length;){let a=this.sections[n++],o=this.sections[n++];o<0?(t(r,s,a),s+=a):s+=o,r+=a}}iterChangedRanges(t,n=!1){Gd(this,t,n)}get invertedDesc(){let t=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];s<0?t.push(r,s):t.push(s,r)}return new js(t)}composeDesc(t){return this.empty?t:t.empty?this:W0(this,t)}mapDesc(t,n=!1){return t.empty?this:Hd(this,t,n)}mapPos(t,n=-1,r=bi.Simple){let s=0,a=0;for(let o=0;o<this.sections.length;){let u=this.sections[o++],l=this.sections[o++],c=s+u;if(l<0){if(c>t)return a+(t-s);a+=u}else{if(r!=bi.Simple&&c>=t&&(r==bi.TrackDel&&s<t&&c>t||r==bi.TrackBefore&&s<t||r==bi.TrackAfter&&c>t))return null;if(c>t||c==t&&n<0&&!u)return t==s||n<0?a:a+l;a+=l}s=c}if(t>s)throw new RangeError(`Position ${t} is out of range for changeset of length ${s}`);return a}touchesRange(t,n=t){for(let r=0,s=0;r<this.sections.length&&s<=n;){let a=this.sections[r++],o=this.sections[r++],u=s+a;if(o>=0&&s<=n&&u>=t)return s<t&&u>n?"cover":!0;s=u}return!1}toString(){let t="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];t+=(t?" ":"")+r+(s>=0?":"+s:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new js(t)}static create(t){return new js(t)}}class Dn extends js{constructor(t,n){super(t),this.inserted=n}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Gd(this,(n,r,s,a,o)=>t=t.replace(s,s+(r-n),o),!1),t}mapDesc(t,n=!1){return Hd(this,t,n,!0)}invert(t){let n=this.sections.slice(),r=[];for(let s=0,a=0;s<n.length;s+=2){let o=n[s],u=n[s+1];if(u>=0){n[s]=u,n[s+1]=o;let l=s>>1;for(;r.length<l;)r.push(Lr.empty);r.push(o?t.slice(a,a+o):Lr.empty)}a+=o}return new Dn(n,r)}compose(t){return this.empty?t:t.empty?this:W0(this,t,!0)}map(t,n=!1){return t.empty?this:Hd(this,t,n,!0)}iterChanges(t,n=!1){Gd(this,t,n)}get desc(){return js.create(this.sections)}filter(t){let n=[],r=[],s=[],a=new Hl(this);e:for(let o=0,u=0;;){let l=o==t.length?1e9:t[o++];for(;u<l||u==l&&a.len==0;){if(a.done)break e;let p=Math.min(a.len,l-u);oi(s,p,-1);let m=a.ins==-1?-1:a.off==0?a.ins:0;oi(n,p,m),m>0&&po(r,n,a.text),a.forward(p),u+=p}let c=t[o++];for(;u<c;){if(a.done)break e;let p=Math.min(a.len,c-u);oi(n,p,-1),oi(s,p,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(p),u+=p}}return{changes:new Dn(n,r),filtered:js.create(s)}}toJSON(){let t=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],s=this.sections[n+1];s<0?t.push(r):s==0?t.push([r]):t.push([r].concat(this.inserted[n>>1].toJSON()))}return t}static of(t,n,r){let s=[],a=[],o=0,u=null;function l(p=!1){if(!p&&!s.length)return;o<n&&oi(s,n-o,-1);let m=new Dn(s,a);u=u?u.compose(m.map(u)):m,s=[],a=[],o=0}function c(p){if(Array.isArray(p))for(let m of p)c(m);else if(p instanceof Dn){if(p.length!=n)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${n})`);l(),u=u?u.compose(p.map(u)):p}else{let{from:m,to:h=m,insert:f}=p;if(m>h||m<0||h>n)throw new RangeError(`Invalid change range ${m} to ${h} (in doc of length ${n})`);let d=f?typeof f=="string"?Lr.of(f.split(r||Vd)):f:Lr.empty,g=d.length;if(m==h&&g==0)return;m<o&&l(),m>o&&oi(s,m-o,-1),oi(s,h-m,g),po(a,s,d),o=h}}return c(t),l(!u),u}static empty(t){return new Dn(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")n.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,u)=>u&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)n.push(a[0],0);else{for(;r.length<s;)r.push(Lr.empty);r[s]=Lr.of(a.slice(1)),n.push(a[0],r[s].length)}}}return new Dn(n,r)}static createSet(t,n){return new Dn(t,n)}}function oi(i,t,n,r=!1){if(t==0&&n<=0)return;let s=i.length-2;s>=0&&n<=0&&n==i[s+1]?i[s]+=t:t==0&&i[s]==0?i[s+1]+=n:r?(i[s]+=t,i[s+1]+=n):i.push(t,n)}function po(i,t,n){if(n.length==0)return;let r=t.length-2>>1;if(r<i.length)i[i.length-1]=i[i.length-1].append(n);else{for(;i.length<r;)i.push(Lr.empty);i.push(n)}}function Gd(i,t,n){let r=i.inserted;for(let s=0,a=0,o=0;o<i.sections.length;){let u=i.sections[o++],l=i.sections[o++];if(l<0)s+=u,a+=u;else{let c=s,p=a,m=Lr.empty;for(;c+=u,p+=l,l&&r&&(m=m.append(r[o-2>>1])),!(n||o==i.sections.length||i.sections[o+1]<0);)u=i.sections[o++],l=i.sections[o++];t(s,c,a,p,m),s=c,a=p}}}function Hd(i,t,n,r=!1){let s=[],a=r?[]:null,o=new Hl(i),u=new Hl(t);for(let l=-1;;)if(o.ins==-1&&u.ins==-1){let c=Math.min(o.len,u.len);oi(s,c,-1),o.forward(c),u.forward(c)}else if(u.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(u.len<o.len||u.len==o.len&&!n))){let c=u.len;for(oi(s,u.ins,-1);c;){let p=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=p&&(oi(s,0,o.ins),a&&po(a,s,o.text),l=o.i),o.forward(p),c-=p}u.next()}else if(o.ins>=0){let c=0,p=o.len;for(;p;)if(u.ins==-1){let m=Math.min(p,u.len);c+=m,p-=m,u.forward(m)}else if(u.ins==0&&u.len<p)p-=u.len,u.next();else break;oi(s,c,l<o.i?o.ins:0),a&&l<o.i&&po(a,s,o.text),l=o.i,o.forward(o.len-p)}else{if(o.done&&u.done)return a?Dn.createSet(s,a):js.create(s);throw new Error("Mismatched change set lengths")}}function W0(i,t,n=!1){let r=[],s=n?[]:null,a=new Hl(i),o=new Hl(t);for(let u=!1;;){if(a.done&&o.done)return s?Dn.createSet(r,s):js.create(r);if(a.ins==0)oi(r,a.len,0,u),a.next();else if(o.len==0&&!o.done)oi(r,0,o.ins,u),s&&po(s,r,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),c=r.length;if(a.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;oi(r,l,p,u),s&&p&&po(s,r,o.text)}else o.ins==-1?(oi(r,a.off?0:a.len,l,u),s&&po(s,r,a.textBit(l))):(oi(r,a.off?0:a.len,o.off?0:o.ins,u),s&&!o.off&&po(s,r,o.text));u=(a.ins>l||o.ins>=0&&o.len>l)&&(u||r.length>c),a.forward2(l),o.forward(l)}}}}class Hl{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length?Lr.empty:t[n]}textBit(t){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!t?Lr.empty:n[r].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Xo{constructor(t,n,r){this.from=t,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,n=-1){let r,s;return this.empty?r=s=t.mapPos(this.from,n):(r=t.mapPos(this.from,1),s=t.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Xo(r,s,this.flags)}extend(t,n=t){if(t<=this.anchor&&n>=this.anchor)return yt.range(t,n);let r=Math.abs(t-this.anchor)>Math.abs(n-this.anchor)?t:n;return yt.range(this.anchor,r)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return yt.range(t.anchor,t.head)}static create(t,n,r){return new Xo(t,n,r)}}class yt{constructor(t,n){this.ranges=t,this.mainIndex=n}map(t,n=-1){return t.empty?this:yt.create(this.ranges.map(r=>r.map(t,n)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new yt([this.main],0)}addRange(t,n=!0){return yt.create([t].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(t,n=this.mainIndex){let r=this.ranges.slice();return r[n]=t,yt.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new yt(t.ranges.map(n=>Xo.fromJSON(n)),t.main)}static single(t,n=t){return new yt([yt.range(t,n)],0)}static create(t,n=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<t.length;s++){let a=t[s];if(a.empty?a.from<=r:a.from<r)return yt.normalized(t.slice(),n);r=a.to}return new yt(t,n)}static cursor(t,n=0,r,s){return Xo.create(t,t,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(s??33554431)<<5)}static range(t,n,r,s){let a=(r??33554431)<<5|(s==null?3:Math.min(2,s));return n<t?Xo.create(n,t,24|a):Xo.create(t,n,(n>t?4:0)|a)}static normalized(t,n=0){let r=t[n];t.sort((s,a)=>s.from-a.from),n=t.indexOf(r);for(let s=1;s<t.length;s++){let a=t[s],o=t[s-1];if(a.empty?a.from<=o.to:a.from<o.to){let u=o.from,l=Math.max(a.to,o.to);s<=n&&n--,t.splice(--s,2,a.anchor>a.head?yt.range(l,u):yt.range(u,l))}}return new yt(t,n)}}function q0(i,t){for(let n of i.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Zf=0;class Vt{constructor(t,n,r,s,a){this.combine=t,this.compareInput=n,this.compare=r,this.isStatic=s,this.id=Zf++,this.default=t([]),this.extensions=typeof a=="function"?a(this):a}static define(t={}){return new Vt(t.combine||(n=>n),t.compareInput||((n,r)=>n===r),t.compare||(t.combine?(n,r)=>n===r:ep),!!t.static,t.enables)}of(t){return new lc([],this,0,t)}compute(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lc(t,this,1,n)}computeN(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lc(t,this,2,n)}from(t,n){return n||(n=r=>r),this.compute([t],r=>n(r.field(t)))}}function ep(i,t){return i==t||i.length==t.length&&i.every((n,r)=>n===t[r])}class lc{constructor(t,n,r,s){this.dependencies=t,this.facet=n,this.type=r,this.value=s,this.id=Zf++}dynamicSlot(t){var n;let r=this.value,s=this.facet.compareInput,a=this.id,o=t[a]>>1,u=this.type==2,l=!1,c=!1,p=[];for(let m of this.dependencies)m=="doc"?l=!0:m=="selection"?c=!0:((n=t[m.id])!==null&&n!==void 0?n:1)&1||p.push(t[m.id]);return{create(m){return m.values[o]=r(m),1},update(m,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||zd(m,p)){let f=r(m);if(u?!Dm(f,m.values[o],s):!s(f,m.values[o]))return m.values[o]=f,1}return 0},reconfigure:(m,h)=>{let f,d=h.config.address[a];if(d!=null){let g=wc(h,d);if(this.dependencies.every(y=>y instanceof Vt?h.facet(y)===m.facet(y):y instanceof Qn?h.field(y,!1)==m.field(y,!1):!0)||(u?Dm(f=r(m),g,s):s(f=r(m),g)))return m.values[o]=g,0}else f=r(m);return m.values[o]=f,1}}}}function Dm(i,t,n){if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(!n(i[r],t[r]))return!1;return!0}function zd(i,t){let n=!1;for(let r of t)Dl(i,r)&1&&(n=!0);return n}function Ex(i,t,n){let r=n.map(l=>i[l.id]),s=n.map(l=>l.type),a=r.filter(l=>!(l&1)),o=i[t.id]>>1;function u(l){let c=[];for(let p=0;p<r.length;p++){let m=wc(l,r[p]);if(s[p]==2)for(let h of m)c.push(h);else c.push(m)}return t.combine(c)}return{create(l){for(let c of r)Dl(l,c);return l.values[o]=u(l),1},update(l,c){if(!zd(l,a))return 0;let p=u(l);return t.compare(p,l.values[o])?0:(l.values[o]=p,1)},reconfigure(l,c){let p=zd(l,r),m=c.config.facets[t.id],h=c.facet(t);if(m&&!p&&ep(n,m))return l.values[o]=h,0;let f=u(l);return t.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Lm=Vt.define({static:!0});class Qn{constructor(t,n,r,s,a){this.id=t,this.createF=n,this.updateF=r,this.compareF=s,this.spec=a,this.provides=void 0}static define(t){let n=new Qn(Zf++,t.create,t.update,t.compare||((r,s)=>r===s),t);return t.provide&&(n.provides=t.provide(n)),n}create(t){let n=t.facet(Lm).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(t)}slot(t){let n=t[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,s)=>{let a=r.values[n],o=this.updateF(a,s);return this.compareF(a,o)?0:(r.values[n]=o,1)},reconfigure:(r,s)=>s.config.address[this.id]!=null?(r.values[n]=s.field(this),0):(r.values[n]=this.create(r),1)}}init(t){return[this,Lm.of({field:this,create:t})]}get extension(){return this}}const qo={lowest:4,low:3,default:2,high:1,highest:0};function _l(i){return t=>new $0(t,i)}const hl={highest:_l(qo.highest),high:_l(qo.high),default:_l(qo.default),low:_l(qo.low),lowest:_l(qo.lowest)};class $0{constructor(t,n){this.inner=t,this.prec=n}}class gh{of(t){return new Wd(this,t)}reconfigure(t){return gh.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Wd{constructor(t,n){this.compartment=t,this.inner=n}}class _c{constructor(t,n,r,s,a,o){for(this.base=t,this.compartments=n,this.dynamicSlots=r,this.address=s,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(t){let n=this.address[t.id];return n==null?t.default:this.staticValues[n>>1]}static resolve(t,n,r){let s=[],a=Object.create(null),o=new Map;for(let h of Mx(t,n,o))h instanceof Qn?s.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let u=Object.create(null),l=[],c=[];for(let h of s)u[h.id]=c.length<<1,c.push(f=>h.slot(f));let p=r==null?void 0:r.config.facets;for(let h in a){let f=a[h],d=f[0].facet,g=p&&p[h]||[];if(f.every(y=>y.type==0))if(u[d.id]=l.length<<1|1,ep(g,f))l.push(r.facet(d));else{let y=d.combine(f.map(b=>b.value));l.push(r&&d.compare(y,r.facet(d))?r.facet(d):y)}else{for(let y of f)y.type==0?(u[y.id]=l.length<<1|1,l.push(y.value)):(u[y.id]=c.length<<1,c.push(b=>y.dynamicSlot(b)));u[d.id]=c.length<<1,c.push(y=>Ex(y,d,f))}}let m=c.map(h=>h(u));return new _c(t,o,m,u,l,a)}}function Mx(i,t,n){let r=[[],[],[],[],[]],s=new Map;function a(o,u){let l=s.get(o);if(l!=null){if(l<=u)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Wd&&n.delete(o.compartment)}if(s.set(o,u),Array.isArray(o))for(let c of o)a(c,u);else if(o instanceof Wd){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(o.compartment)||o.inner;n.set(o.compartment,c),a(c,u)}else if(o instanceof $0)a(o.inner,o.prec);else if(o instanceof Qn)r[u].push(o),o.provides&&a(o.provides,u);else if(o instanceof lc)r[u].push(o),o.facet.extensions&&a(o.facet.extensions,qo.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(c,u)}}return a(i,qo.default),r.reduce((o,u)=>o.concat(u))}function Dl(i,t){if(t&1)return 2;let n=t>>1,r=i.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;i.status[n]=4;let s=i.computeSlot(i,i.config.dynamicSlots[n]);return i.status[n]=2|s}function wc(i,t){return t&1?i.config.staticValues[t>>1]:i.values[t>>1]}const X0=Vt.define(),Y0=Vt.define({combine:i=>i.some(t=>t),static:!0}),K0=Vt.define({combine:i=>i.length?i[0]:void 0,static:!0}),J0=Vt.define(),Q0=Vt.define(),Z0=Vt.define(),ev=Vt.define({combine:i=>i.length?i[0]:!1});class Qs{constructor(t,n){this.type=t,this.value=n}static define(){return new Ax}}class Ax{of(t){return new Qs(this,t)}}class Ox{constructor(t){this.map=t}of(t){return new pr(this,t)}}class pr{constructor(t,n){this.type=t,this.value=n}map(t){let n=this.type.map(this.value,t);return n===void 0?void 0:n==this.value?this:new pr(this.type,n)}is(t){return this.type==t}static define(t={}){return new Ox(t.map||(n=>n))}static mapEffects(t,n){if(!t.length)return t;let r=[];for(let s of t){let a=s.map(n);a&&r.push(a)}return r}}pr.reconfigure=pr.define();pr.appendConfig=pr.define();class Bn{constructor(t,n,r,s,a,o){this.startState=t,this.changes=n,this.selection=r,this.effects=s,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,r&&q0(r,n.newLength),a.some(u=>u.type==Bn.time)||(this.annotations=a.concat(Bn.time.of(Date.now())))}static create(t,n,r,s,a,o){return new Bn(t,n,r,s,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let n of this.annotations)if(n.type==t)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let n=this.annotation(Bn.userEvent);return!!(n&&(n==t||n.length>t.length&&n.slice(0,t.length)==t&&n[t.length]=="."))}}Bn.time=Qs.define();Bn.userEvent=Qs.define();Bn.addToHistory=Qs.define();Bn.remote=Qs.define();function Ix(i,t){let n=[];for(let r=0,s=0;;){let a,o;if(r<i.length&&(s==t.length||t[s]>=i[r]))a=i[r++],o=i[r++];else if(s<t.length)a=t[s++],o=t[s++];else return n;!n.length||n[n.length-1]<a?n.push(a,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function tv(i,t,n){var r;let s,a,o;return n?(s=t.changes,a=Dn.empty(t.changes.length),o=i.changes.compose(t.changes)):(s=t.changes.map(i.changes),a=i.changes.mapDesc(t.changes,!0),o=i.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(a):(r=i.selection)===null||r===void 0?void 0:r.map(s),effects:pr.mapEffects(i.effects,s).concat(pr.mapEffects(t.effects,a)),annotations:i.annotations.length?i.annotations.concat(t.annotations):t.annotations,scrollIntoView:i.scrollIntoView||t.scrollIntoView}}function qd(i,t,n){let r=t.selection,s=Ua(t.annotations);return t.userEvent&&(s=s.concat(Bn.userEvent.of(t.userEvent))),{changes:t.changes instanceof Dn?t.changes:Dn.of(t.changes||[],n,i.facet(K0)),selection:r&&(r instanceof yt?r:yt.single(r.anchor,r.head)),effects:Ua(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function rv(i,t,n){let r=qd(i,t.length?t[0]:{},i.doc.length);t.length&&t[0].filter===!1&&(n=!1);for(let a=1;a<t.length;a++){t[a].filter===!1&&(n=!1);let o=!!t[a].sequential;r=tv(r,qd(i,t[a],o?r.changes.newLength:i.doc.length),o)}let s=Bn.create(i,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Rx(n?Px(s):s)}function Px(i){let t=i.startState,n=!0;for(let s of t.facet(J0)){let a=s(i);if(a===!1){n=!1;break}Array.isArray(a)&&(n=n===!0?a:Ix(n,a))}if(n!==!0){let s,a;if(n===!1)a=i.changes.invertedDesc,s=Dn.empty(t.doc.length);else{let o=i.changes.filter(n);s=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}i=Bn.create(t,s,i.selection&&i.selection.map(a),pr.mapEffects(i.effects,a),i.annotations,i.scrollIntoView)}let r=t.facet(Q0);for(let s=r.length-1;s>=0;s--){let a=r[s](i);a instanceof Bn?i=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Bn?i=a[0]:i=rv(t,Ua(a),!1)}return i}function Rx(i){let t=i.startState,n=t.facet(Z0),r=i;for(let s=n.length-1;s>=0;s--){let a=n[s](i);a&&Object.keys(a).length&&(r=tv(r,qd(t,a,i.changes.newLength),!0))}return r==i?i:Bn.create(t,i.changes,i.selection,r.effects,r.annotations,r.scrollIntoView)}const Dx=[];function Ua(i){return i==null?Dx:Array.isArray(i)?i:[i]}var pn=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(pn||(pn={}));const Lx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let $d;try{$d=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Nx(i){if($d)return $d.test(i);for(let t=0;t<i.length;t++){let n=i[t];if(/\w/.test(n)||n>"Â"&&(n.toUpperCase()!=n.toLowerCase()||Lx.test(n)))return!0}return!1}function Bx(i){return t=>{if(!/\S/.test(t))return pn.Space;if(Nx(t))return pn.Word;for(let n=0;n<i.length;n++)if(t.indexOf(i[n])>-1)return pn.Word;return pn.Other}}class Mr{constructor(t,n,r,s,a,o){this.config=t,this.doc=n,this.selection=r,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)Dl(this,u<<1);this.computeSlot=null}field(t,n=!0){let r=this.config.address[t.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Dl(this,r),wc(this,r)}update(...t){return rv(this,t,!0)}applyTransaction(t){let n=this.config,{base:r,compartments:s}=n;for(let o of t.effects)o.is(gh.reconfigure)?(n&&(s=new Map,n.compartments.forEach((u,l)=>s.set(l,u)),n=null),s.set(o.value.compartment,o.value.extension)):o.is(pr.reconfigure)?(n=null,r=o.value):o.is(pr.appendConfig)&&(n=null,r=Ua(r).concat(o.value));let a;n?a=t.startState.values.slice():(n=_c.resolve(r,s,this),a=new Mr(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,l)=>l.reconfigure(u,this),null).values),new Mr(n,t.newDoc,t.newSelection,a,(o,u)=>u.update(o,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:t},range:yt.cursor(n.from+t.length)}))}changeByRange(t){let n=this.selection,r=t(n.ranges[0]),s=this.changes(r.changes),a=[r.range],o=Ua(r.effects);for(let u=1;u<n.ranges.length;u++){let l=t(n.ranges[u]),c=this.changes(l.changes),p=c.map(s);for(let h=0;h<u;h++)a[h]=a[h].map(p);let m=s.mapDesc(c,!0);a.push(l.range.map(m)),s=s.compose(p),o=pr.mapEffects(o,p).concat(pr.mapEffects(Ua(l.effects),m))}return{changes:s,selection:yt.create(a,n.mainIndex),effects:o}}changes(t=[]){return t instanceof Dn?t:Dn.of(t,this.doc.length,this.facet(Mr.lineSeparator))}toText(t){return Lr.of(t.split(this.facet(Mr.lineSeparator)||Vd))}sliceDoc(t=0,n=this.doc.length){return this.doc.sliceString(t,n,this.lineBreak)}facet(t){let n=this.config.address[t.id];return n==null?t.default:(Dl(this,n),wc(this,n))}toJSON(t){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let r in t){let s=t[r];s instanceof Qn&&this.config.address[s.id]!=null&&(n[r]=s.spec.toJSON(this.field(t[r]),this))}return n}static fromJSON(t,n={},r){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let a in r)if(Object.prototype.hasOwnProperty.call(t,a)){let o=r[a],u=t[a];s.push(o.init(l=>o.spec.fromJSON(u,l)))}}return Mr.create({doc:t.doc,selection:yt.fromJSON(t.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(t={}){let n=_c.resolve(t.extensions||[],new Map),r=t.doc instanceof Lr?t.doc:Lr.of((t.doc||"").split(n.staticFacet(Mr.lineSeparator)||Vd)),s=t.selection?t.selection instanceof yt?t.selection:yt.single(t.selection.anchor,t.selection.head):yt.single(0);return q0(s,r.length),n.staticFacet(Y0)||(s=s.asSingle()),new Mr(n,r,s,n.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(Mr.tabSize)}get lineBreak(){return this.facet(Mr.lineSeparator)||`
`}get readOnly(){return this.facet(ev)}phrase(t,...n){for(let r of this.facet(Mr.phrases))if(Object.prototype.hasOwnProperty.call(r,t)){t=r[t];break}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let a=+(s||1);return!a||a>n.length?r:n[a-1]})),t}languageDataAt(t,n,r=-1){let s=[];for(let a of this.facet(X0))for(let o of a(this,n,r))Object.prototype.hasOwnProperty.call(o,t)&&s.push(o[t]);return s}charCategorizer(t){return Bx(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:n,from:r,length:s}=this.doc.lineAt(t),a=this.charCategorizer(t),o=t-r,u=t-r;for(;o>0;){let l=_i(n,o,!1);if(a(n.slice(l,o))!=pn.Word)break;o=l}for(;u<s;){let l=_i(n,u);if(a(n.slice(u,l))!=pn.Word)break;u=l}return o==u?null:yt.range(o+r,u+r)}}Mr.allowMultipleSelections=Y0;Mr.tabSize=Vt.define({combine:i=>i.length?i[0]:4});Mr.lineSeparator=K0;Mr.readOnly=ev;Mr.phrases=Vt.define({compare(i,t){let n=Object.keys(i),r=Object.keys(t);return n.length==r.length&&n.every(s=>i[s]==t[s])}});Mr.languageData=X0;Mr.changeFilter=J0;Mr.transactionFilter=Q0;Mr.transactionExtender=Z0;gh.reconfigure=pr.define();function Ps(i,t,n={}){let r={};for(let s of i)for(let a of Object.keys(s)){let o=s[a],u=r[a];if(u===void 0)r[a]=o;else if(!(u===o||o===void 0))if(Object.hasOwnProperty.call(n,a))r[a]=n[a](u,o);else throw new Error("Config merge conflict for field "+a)}for(let s in t)r[s]===void 0&&(r[s]=t[s]);return r}class sa{eq(t){return this==t}range(t,n=t){return Xd.create(t,n,this)}}sa.prototype.startSide=sa.prototype.endSide=0;sa.prototype.point=!1;sa.prototype.mapMode=bi.TrackDel;let Xd=class nv{constructor(t,n,r){this.from=t,this.to=n,this.value=r}static create(t,n,r){return new nv(t,n,r)}};function Yd(i,t){return i.from-t.from||i.value.startSide-t.value.startSide}class tp{constructor(t,n,r,s){this.from=t,this.to=n,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(t,n,r,s=0){let a=r?this.to:this.from;for(let o=s,u=a.length;;){if(o==u)return o;let l=o+u>>1,c=a[l]-t||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:u;c>=0?u=l:o=l+1}}between(t,n,r,s){for(let a=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,a);a<o;a++)if(s(this.from[a]+t,this.to[a]+t,this.value[a])===!1)return!1}map(t,n){let r=[],s=[],a=[],o=-1,u=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],p=this.from[l]+t,m=this.to[l]+t,h,f;if(p==m){let d=n.mapPos(p,c.startSide,c.mapMode);if(d==null||(h=f=d,c.startSide!=c.endSide&&(f=n.mapPos(p,c.endSide),f<h)))continue}else if(h=n.mapPos(p,c.startSide),f=n.mapPos(m,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(u=Math.max(u,f-h)),r.push(c),s.push(h-o),a.push(f-o))}return{mapped:r.length?new tp(s,a,r,u):null,pos:o}}}class Hr{constructor(t,n,r,s){this.chunkPos=t,this.chunk=n,this.nextLayer=r,this.maxPoint=s}static create(t,n,r,s){return new Hr(t,n,r,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let n of this.chunk)t+=n.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:n=[],sort:r=!1,filterFrom:s=0,filterTo:a=this.length}=t,o=t.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Yd)),this.isEmpty)return n.length?Hr.of(n):this;let u=new iv(this,null,-1).goto(0),l=0,c=[],p=new To;for(;u.value||l<n.length;)if(l<n.length&&(u.from-n[l].from||u.startSide-n[l].value.startSide)>=0){let m=n[l++];p.addInner(m.from,m.to,m.value)||c.push(m)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(u.chunkIndex)<n[l].from)&&(!o||s>this.chunkEnd(u.chunkIndex)||a<this.chunkPos[u.chunkIndex])&&p.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!o||s>u.to||a<u.from||o(u.from,u.to,u.value))&&(p.addInner(u.from,u.to,u.value)||c.push(Xd.create(u.from,u.to,u.value))),u.next());return p.finishInner(this.nextLayer.isEmpty&&!c.length?Hr.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let n=[],r=[],s=-1;for(let o=0;o<this.chunk.length;o++){let u=this.chunkPos[o],l=this.chunk[o],c=t.touchesRange(u,u+l.length);if(c===!1)s=Math.max(s,l.maxPoint),n.push(l),r.push(t.mapPos(u));else if(c===!0){let{mapped:p,pos:m}=l.map(u,t);p&&(s=Math.max(s,p.maxPoint),n.push(p),r.push(m))}}let a=this.nextLayer.map(t);return n.length==0?a:new Hr(r,n,a||Hr.empty,s)}between(t,n,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],o=this.chunk[s];if(n>=a&&t<=a+o.length&&o.between(a,t-a,n-a,r)===!1)return}this.nextLayer.between(t,n,r)}}iter(t=0){return zl.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,n=0){return zl.from(t).goto(n)}static compare(t,n,r,s,a=-1){let o=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),u=n.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),l=Nm(o,u,r),c=new wl(o,l,a),p=new wl(u,l,a);r.iterGaps((m,h,f)=>Bm(c,m,p,h,f,s)),r.empty&&r.length==0&&Bm(c,0,p,0,0,s)}static eq(t,n,r=0,s){s==null&&(s=1e9-1);let a=t.filter(p=>!p.isEmpty&&n.indexOf(p)<0),o=n.filter(p=>!p.isEmpty&&t.indexOf(p)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let u=Nm(a,o),l=new wl(a,u,0).goto(r),c=new wl(o,u,0).goto(r);for(;;){if(l.to!=c.to||!Kd(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(t,n,r,s,a=-1){let o=new wl(t,null,a).goto(n),u=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let p=o.activeForPoint(o.to),m=o.pointFrom<n?p.length+1:Math.min(p.length,l);s.point(u,c,o.point,p,m,o.pointRank),l=Math.min(o.openEnd(c),p.length)}else c>u&&(s.span(u,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);u=o.to,o.next()}}static of(t,n=!1){let r=new To;for(let s of t instanceof Xd?[t]:n?Fx(t):t)r.add(s.from,s.to,s.value);return r.finish()}}Hr.empty=new Hr([],[],null,-1);function Fx(i){if(i.length>1)for(let t=i[0],n=1;n<i.length;n++){let r=i[n];if(Yd(t,r)>0)return i.slice().sort(Yd);t=r}return i}Hr.empty.nextLayer=Hr.empty;class To{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new tp(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,n,r){this.addInner(t,n,r)||(this.nextLayer||(this.nextLayer=new To)).add(t,n,r)}addInner(t,n,r){let s=t-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(t-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=t,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-t)),!0)}addChunk(t,n){if((t-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(t);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+t,this.lastTo=n.to[r]+t,!0}finish(){return this.finishInner(Hr.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let n=Hr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,n}}function Nm(i,t,n){let r=new Map;for(let a of i)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&r.set(a.chunk[o],a.chunkPos[o]);let s=new Set;for(let a of t)for(let o=0;o<a.chunk.length;o++){let u=r.get(a.chunk[o]);u!=null&&(n?n.mapPos(u):u)==a.chunkPos[o]&&!(n!=null&&n.touchesRange(u,u+a.chunk[o].length))&&s.add(a.chunk[o])}return s}class iv{constructor(t,n,r,s=0){this.layer=t,this.skip=n,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,n,!1),this}gotoInner(t,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<t||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(t,n){(this.to-t||this.endSide-n)<0&&this.gotoInner(t,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=t+n.from[this.rangeIndex];if(this.from=r,this.to=t+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class zl{constructor(t){this.heap=t}static from(t,n=null,r=-1){let s=[];for(let a=0;a<t.length;a++)for(let o=t[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&s.push(new iv(o,n,r,a));return s.length==1?s[0]:new zl(s)}get startSide(){return this.value?this.value.startSide:0}goto(t,n=-1e9){for(let r of this.heap)r.goto(t,n);for(let r=this.heap.length>>1;r>=0;r--)ed(this.heap,r);return this.next(),this}forward(t,n){for(let r of this.heap)r.forward(t,n);for(let r=this.heap.length>>1;r>=0;r--)ed(this.heap,r);(this.to-t||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),ed(this.heap,0)}}}function ed(i,t){for(let n=i[t];;){let r=(t<<1)+1;if(r>=i.length)break;let s=i[r];if(r+1<i.length&&s.compare(i[r+1])>=0&&(s=i[r+1],r++),n.compare(s)<0)break;i[r]=n,i[t]=s,t=r}}class wl{constructor(t,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zl.from(t,n,r)}goto(t,n=-1e9){return this.cursor.goto(t,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=n,this.openStart=-1,this.next(),this}forward(t,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(t,n)}removeActive(t){Nu(this.active,t),Nu(this.activeTo,t),Nu(this.activeRank,t),this.minActive=Fm(this.active,this.activeTo)}addActive(t){let n=0,{value:r,to:s,rank:a}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=a;)n++;Bu(this.active,n,r),Bu(this.activeTo,n,s),Bu(this.activeRank,n,a),t&&Bu(t,n,this.cursor.from),this.minActive=Fm(this.active,this.activeTo)}next(){let t=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>t){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Nu(r,s)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<t;s--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>t||this.activeTo[r]==t&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(t){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>t;r--)n++;return n}}function Bm(i,t,n,r,s,a){i.goto(t),n.goto(r);let o=r+s,u=r,l=r-t;for(;;){let c=i.to+l-n.to||i.endSide-n.endSide,p=c<0?i.to+l:n.to,m=Math.min(p,o);if(i.point||n.point?i.point&&n.point&&(i.point==n.point||i.point.eq(n.point))&&Kd(i.activeForPoint(i.to+l),n.activeForPoint(n.to))||a.comparePoint(u,m,i.point,n.point):m>u&&!Kd(i.active,n.active)&&a.compareRange(u,m,i.active,n.active),p>o)break;u=p,c<=0&&i.next(),c>=0&&n.next()}}function Kd(i,t){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!=t[n]&&!i[n].eq(t[n]))return!1;return!0}function Nu(i,t){for(let n=t,r=i.length-1;n<r;n++)i[n]=i[n+1];i.pop()}function Bu(i,t,n){for(let r=i.length-1;r>=t;r--)i[r+1]=i[r];i[t]=n}function Fm(i,t){let n=-1,r=1e9;for(let s=0;s<t.length;s++)(t[s]-r||i[s].endSide-i[n].endSide)<0&&(n=s,r=t[s]);return n}function gu(i,t,n=i.length){let r=0;for(let s=0;s<n;)i.charCodeAt(s)==9?(r+=t-r%t,s++):(r++,s=_i(i,s));return r}function Jd(i,t,n,r){for(let s=0,a=0;;){if(a>=t)return s;if(s==i.length)break;a+=i.charCodeAt(s)==9?n-a%n:1,s=_i(i,s)}return r===!0?-1:i.length}const Qd="Í¼",Um=typeof Symbol>"u"?"__"+Qd:Symbol.for(Qd),Zd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ko{constructor(t,n){this.rules=[];let{finish:r}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,u,l,c){let p=[],m=/^@(\w+)\b/.exec(o[0]),h=m&&m[1]=="keyframes";if(m&&u==null)return l.push(o[0]+";");for(let f in u){let d=u[f];if(/&/.test(f))a(f.split(/,\s*/).map(g=>o.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),d,l);else if(d&&typeof d=="object"){if(!m)throw new RangeError("The value of a property ("+f+") should be a primitive value.");a(s(f),d,p,h)}else d!=null&&p.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+d+";")}(p.length||h)&&l.push((r&&!m&&!c?o.map(r):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in t)a(s(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Vm[Um]||1;return Vm[Um]=t+1,Qd+t.toString(36)}static mount(t,n){(t[Zd]||new Ux(t)).mount(Array.isArray(n)?n:[n])}}let Fu=null;class Ux{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Fu)return t.adoptedStyleSheets=[Fu.sheet].concat(t.adoptedStyleSheets),t[Zd]=Fu;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Fu=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let n=t.head||t;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],t[Zd]=this}mount(t){let n=this.sheet,r=0,s=0;for(let a=0;a<t.length;a++){let o=t[a],u=this.modules.indexOf(o);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;s<u;)r+=this.modules[s++].rules.length;r+=o.rules.length,s++}}if(!n){let a="";for(let o=0;o<this.modules.length;o++)a+=this.modules[o].getRules()+`
`;this.styleTag.textContent=a}}}var Eo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Gm=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Vx=typeof navigator<"u"&&/Mac/.test(navigator.platform),Gx=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Hx=Vx||Gm&&+Gm[1]<57;for(var Kn=0;Kn<10;Kn++)Eo[48+Kn]=Eo[96+Kn]=String(Kn);for(var Kn=1;Kn<=24;Kn++)Eo[Kn+111]="F"+Kn;for(var Kn=65;Kn<=90;Kn++)Eo[Kn]=String.fromCharCode(Kn+32),Wl[Kn]=String.fromCharCode(Kn);for(var td in Eo)Wl.hasOwnProperty(td)||(Wl[td]=Eo[td]);function zx(i){var t=Hx&&(i.ctrlKey||i.altKey||i.metaKey)||Gx&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",n=!t&&i.key||(i.shiftKey?Wl:Eo)[i.keyCode]||i.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function xc(i){let t;return i.nodeType==11?t=i.getSelection?i:i.ownerDocument:t=i,t.getSelection()}function Ka(i,t){return t?i==t||i.contains(t.nodeType!=1?t.parentNode:t):!1}function Wx(i){let t=i.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function uc(i,t){if(!t.anchorNode)return!1;try{return Ka(i,t.anchorNode)}catch{return!1}}function ql(i){return i.nodeType==3?Ja(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Sc(i,t,n,r){return n?Hm(i,t,n,r,-1)||Hm(i,t,n,r,1):!1}function Cc(i){for(var t=0;;t++)if(i=i.previousSibling,!i)return t}function Hm(i,t,n,r,s){for(;;){if(i==n&&t==r)return!0;if(t==(s<0?0:$l(i))){if(i.nodeName=="DIV")return!1;let a=i.parentNode;if(!a||a.nodeType!=1)return!1;t=Cc(i)+(s<0?0:1),i=a}else if(i.nodeType==1){if(i=i.childNodes[t+(s<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;t=s<0?$l(i):0}else return!1}}function $l(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const sv={left:0,right:0,top:0,bottom:0};function rp(i,t){let n=t?i.left:i.right;return{left:n,right:n,top:i.top,bottom:i.bottom}}function qx(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function $x(i,t,n,r,s,a,o,u){let l=i.ownerDocument,c=l.defaultView||window;for(let p=i;p;)if(p.nodeType==1){let m,h=p==l.body;if(h)m=qx(c);else{if(p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let g=p.getBoundingClientRect();m={left:g.left,right:g.left+p.clientWidth,top:g.top,bottom:g.top+p.clientHeight}}let f=0,d=0;if(s=="nearest")t.top<m.top?(d=-(m.top-t.top+o),n>0&&t.bottom>m.bottom+d&&(d=t.bottom-m.bottom+d+o)):t.bottom>m.bottom&&(d=t.bottom-m.bottom+o,n<0&&t.top-d<m.top&&(d=-(m.top+d-t.top+o)));else{let g=t.bottom-t.top,y=m.bottom-m.top;d=(s=="center"&&g<=y?t.top+g/2-y/2:s=="start"||s=="center"&&n<0?t.top-o:t.bottom-y+o)-m.top}if(r=="nearest"?t.left<m.left?(f=-(m.left-t.left+a),n>0&&t.right>m.right+f&&(f=t.right-m.right+f+a)):t.right>m.right&&(f=t.right-m.right+a,n<0&&t.left<m.left+f&&(f=-(m.left+f-t.left+a))):f=(r=="center"?t.left+(t.right-t.left)/2-(m.right-m.left)/2:r=="start"==u?t.left-a:t.right-(m.right-m.left)+a)-m.left,f||d)if(h)c.scrollBy(f,d);else{let g=0,y=0;if(d){let b=p.scrollTop;p.scrollTop+=d,y=p.scrollTop-b}if(f){let b=p.scrollLeft;p.scrollLeft+=f,g=p.scrollLeft-b}t={left:t.left-g,top:t.top-y,right:t.right-g,bottom:t.bottom-y},g&&Math.abs(g-f)<1&&(r="nearest"),y&&Math.abs(y-d)<1&&(s="nearest")}if(h)break;p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function Xx(i){let t=i.ownerDocument;for(let n=i.parentNode;n&&n!=t.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class Yx{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,n,r,s){this.anchorNode=t,this.anchorOffset=n,this.focusNode=r,this.focusOffset=s}}let Ma=null;function ov(i){if(i.setActive)return i.setActive();if(Ma)return i.focus(Ma);let t=[];for(let n=i;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(i.focus(Ma==null?{get preventScroll(){return Ma={preventScroll:!0},!0}}:void 0),!Ma){Ma=!1;for(let n=0;n<t.length;){let r=t[n++],s=t[n++],a=t[n++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=a&&(r.scrollLeft=a)}}}let zm;function Ja(i,t,n=t){let r=zm||(zm=document.createRange());return r.setEnd(i,n),r.setStart(i,t),r}function Va(i,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},s=new KeyboardEvent("keydown",r);s.synthetic=!0,i.dispatchEvent(s);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,i.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function Kx(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function av(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function Jx(i,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(;;)if(r){if(n.nodeType!=1)return!1;let s=n.childNodes[r-1];s.contentEditable=="false"?r--:(n=s,r=$l(n))}else{if(n==i)return!0;r=Cc(n),n=n.parentNode}}class ui{constructor(t,n,r=!0){this.node=t,this.offset=n,this.precise=r}static before(t,n){return new ui(t.parentNode,Cc(t),n)}static after(t,n){return new ui(t.parentNode,Cc(t)+1,n)}}const np=[];class cn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let n=this.posAtStart;for(let r of this.children){if(r==t)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,n){return null}sync(t,n){if(this.dirty&2){let r=this.dom,s=null,a;for(let o of this.children){if(o.dirty){if(!o.dom&&(a=s?s.nextSibling:r.firstChild)){let u=cn.get(a);(!u||!u.parent&&u.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(t,n),o.dirty=0}if(a=s?s.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&a!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;a&&a!=o.dom;)a=Wm(a);else r.insertBefore(o.dom,a);s=o.dom}for(a=s?s.nextSibling:r.firstChild,a&&n&&n.node==r&&(n.written=!0);a;)a=Wm(a)}else if(this.dirty&1)for(let r of this.children)r.dirty&&(r.sync(t,n),r.dirty=0)}reuseDOM(t){}localPosFromDOM(t,n){let r;if(t==this.dom)r=this.dom.childNodes[n];else{let s=$l(t)==0?0:n==0?-1:1;for(;;){let a=t.parentNode;if(a==this.dom)break;s==0&&a.firstChild!=a.lastChild&&(t==a.firstChild?s=-1:s=1),t=a}s<0?r=t:r=t.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!cn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,a=0;;s++){let o=this.children[s];if(o.dom==r)return a;a+=o.length+o.breakAfter}}domBoundsAround(t,n,r=0){let s=-1,a=-1,o=-1,u=-1;for(let l=0,c=r,p=r;l<this.children.length;l++){let m=this.children[l],h=c+m.length;if(c<t&&h>n)return m.domBoundsAround(t,n,c);if(h>=t&&s==-1&&(s=l,a=c),c>n&&m.dom.parentNode==this.dom){o=l,u=p;break}p=h,c=h+m.breakAfter}return{from:a,to:u<0?r+this.length:u,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let n=this.parent;n;n=n.parent){if(t&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let n=t.parent;if(!n)return t;t=n}}replaceChildren(t,n,r=np){this.markDirty();for(let s=t;s<n;s++){let a=this.children[s];a.parent==this&&a.destroy()}this.children.splice(t,n-t,...r);for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new lv(this.children,t,this.children.length)}childPos(t,n=1){return this.childCursor().findPos(t,n)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(t,n,r,s,a,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}cn.prototype.breakAfter=0;function Wm(i){let t=i.nextSibling;return i.parentNode.removeChild(i),t}class lv{constructor(t,n,r){this.children=t,this.pos=n,this.i=r,this.off=0}findPos(t,n=1){for(;;){if(t>this.pos||t==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function uv(i,t,n,r,s,a,o,u,l){let{children:c}=i,p=c.length?c[t]:null,m=a.length?a[a.length-1]:null,h=m?m.breakAfter:o;if(!(t==r&&p&&!o&&!h&&a.length<2&&p.merge(n,s,a.length?m:null,n==0,u,l))){if(r<c.length){let f=c[r];f&&s<f.length?(t==r&&(f=f.split(s),s=0),!h&&m&&f.merge(0,s,m,!0,0,l)?a[a.length-1]=f:(s&&f.merge(0,s,null,!1,0,l),a.push(f))):f!=null&&f.breakAfter&&(m?m.breakAfter=1:o=1),r++}for(p&&(p.breakAfter=o,n>0&&(!o&&a.length&&p.merge(n,p.length,a[0],!1,u,0)?p.breakAfter=a.shift().breakAfter:(n<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(n,p.length,null,!1,u,0),t++));t<r&&a.length;)if(c[r-1].become(a[a.length-1]))r--,a.pop(),l=a.length?0:u;else if(c[t].become(a[0]))t++,a.shift(),u=a.length?0:l;else break;!a.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,u,l)&&t--,(t<r||a.length)&&i.replaceChildren(t,r,a)}}function cv(i,t,n,r,s,a){let o=i.childCursor(),{i:u,off:l}=o.findPos(n,1),{i:c,off:p}=o.findPos(t,-1),m=t-n;for(let h of r)m+=h.length;i.length+=m,uv(i,c,p,u,l,r,0,s,a)}let Ui=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ef=typeof document<"u"?document:{documentElement:{style:{}}};const tf=/Edge\/(\d+)/.exec(Ui.userAgent),hv=/MSIE \d/.test(Ui.userAgent),rf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ui.userAgent),yh=!!(hv||rf||tf),qm=!yh&&/gecko\/(\d+)/i.test(Ui.userAgent),rd=!yh&&/Chrome\/(\d+)/.exec(Ui.userAgent),$m="webkitFontSmoothing"in ef.documentElement.style,dv=!yh&&/Apple Computer/.test(Ui.vendor),Xm=dv&&(/Mobile\/\w+/.test(Ui.userAgent)||Ui.maxTouchPoints>2);var Ft={mac:Xm||/Mac/.test(Ui.platform),windows:/Win/.test(Ui.platform),linux:/Linux|X11/.test(Ui.platform),ie:yh,ie_version:hv?ef.documentMode||6:rf?+rf[1]:tf?+tf[1]:0,gecko:qm,gecko_version:qm?+(/Firefox\/(\d+)/.exec(Ui.userAgent)||[0,0])[1]:0,chrome:!!rd,chrome_version:rd?+rd[1]:0,ios:Xm,android:/Android\b/.test(Ui.userAgent),webkit:$m,safari:dv,webkit_version:$m?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ef.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Qx=256;class Mo extends cn{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,n,r){return r&&(!(r instanceof Mo)||this.length-(n-t)+r.length>Qx)?!1:(this.text=this.text.slice(0,t)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(t){let n=new Mo(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),n}localPosFromDOM(t,n){return t==this.dom?n:n?this.text.length:0}domAtPos(t){return new ui(this.dom,t)}domBoundsAround(t,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,n){return nf(this.dom,t,n)}}class Ms extends cn{constructor(t,n=[],r=0){super(),this.mark=t,this.children=n,this.length=r;for(let s of n)s.setParent(this)}setAttrs(t){if(av(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)t.setAttribute(n,this.mark.attrs[n]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t,n){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,n)}merge(t,n,r,s,a,o){return r&&(!(r instanceof Ms&&r.mark.eq(this.mark))||t&&a<=0||n<this.length&&o<=0)?!1:(cv(this,t,n,r?r.children:[],a-1,o-1),this.markDirty(),!0)}split(t){let n=[],r=0,s=-1,a=0;for(let u of this.children){let l=r+u.length;l>t&&n.push(r<t?u.split(t-r):u),s<0&&r>=t&&(s=a),r=l,a++}let o=this.length-t;return this.length=t,s>-1&&(this.children.length=s,this.markDirty()),new Ms(this.mark,n,o)}domAtPos(t){return mv(this,t)}coordsAt(t,n){return yv(this,t,n)}}function nf(i,t,n){let r=i.nodeValue.length;t>r&&(t=r);let s=t,a=t,o=0;t==0&&n<0||t==r&&n>=0?Ft.chrome||Ft.gecko||(t?(s--,o=1):a<r&&(a++,o=-1)):n<0?s--:a<r&&a++;let u=Ja(i,s,a).getClientRects();if(!u.length)return sv;let l=u[(o?o<0:n>=0)?0:u.length-1];return Ft.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(u,c=>c.width)||l),o?rp(l,o<0):l||null}class mo extends cn{constructor(t,n,r){super(),this.widget=t,this.length=n,this.side=r,this.prevWidget=null}static create(t,n,r){return new(t.customView||mo)(t,n,r)}split(t){let n=mo.create(this.widget,this.length-t,this.side);return this.length-=t,n}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,n,r,s,a,o){return r&&(!(r instanceof mo)||!this.widget.compare(r.widget)||t>0&&a<=0||n<this.length&&o<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-n),!0)}become(t){return t.length==this.length&&t instanceof mo&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Lr.empty;let t=this;for(;t.parent;)t=t.parent;let{view:n}=t,r=n&&n.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Lr.empty}domAtPos(t){return t==0?ui.before(this.dom):ui.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,n){let r=this.dom.getClientRects(),s=null;if(!r.length)return sv;for(let a=t>0?r.length-1:0;s=r[a],!(t>0?a==0:a==r.length-1||s.top<s.bottom);a+=t>0?-1:1);return this.length?s:rp(s,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fv extends mo{domAtPos(t){let{topView:n,text:r}=this.widget;return n?sf(t,0,n,r,(s,a)=>s.domAtPos(a),s=>new ui(r,Math.min(s,r.nodeValue.length))):new ui(r,Math.min(t,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,n){let{topView:r,text:s}=this.widget;return r?pv(t,n,r,s):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,n){let{topView:r,text:s}=this.widget;return r?sf(t,n,r,s,(a,o,u)=>a.coordsAt(o,u),(a,o)=>nf(s,a,o)):nf(s,t,n)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function sf(i,t,n,r,s,a){if(n instanceof Ms){for(let o=n.dom.firstChild;o;o=o.nextSibling){let u=cn.get(o);if(!u)return a(i,t);let l=Ka(o,r),c=u.length+(l?r.nodeValue.length:0);if(i<c||i==c&&u.getSide()<=0)return l?sf(i,t,u,r,s,a):s(u,i,t);i-=c}return s(n,n.length,-1)}else return n.dom==r?a(i,t):s(n,i,t)}function pv(i,t,n,r){if(n instanceof Ms)for(let s of n.children){let a=0,o=Ka(s.dom,r);if(Ka(s.dom,i))return a+(o?pv(i,t,s,r):s.localPosFromDOM(i,t));a+=o?r.nodeValue.length:s.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(i,t)}class Qa extends cn{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Qa&&t.side==this.side}split(){return new Qa(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return ui.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let n=this.dom.getBoundingClientRect(),r=Zx(this,this.side>0?-1:1);return r&&r.top<n.bottom&&r.bottom>n.top?{left:n.left,right:n.right,top:r.top,bottom:r.bottom}:n}get overrideDOMText(){return Lr.empty}}Mo.prototype.children=mo.prototype.children=Qa.prototype.children=np;function Zx(i,t){let n=i.parent,r=n?n.children.indexOf(i):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let s=n.children[r+t];if(s instanceof Mo){let a=s.coordsAt(t<0?s.length:0,t);if(a)return a}r+=t}else if(n instanceof Ms&&n.parent)r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent;else{let s=n.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function mv(i,t){let n=i.dom,{children:r}=i,s=0;for(let a=0;s<r.length;s++){let o=r[s],u=a+o.length;if(!(u==a&&o.getSide()<=0)){if(t>a&&t<u&&o.dom.parentNode==n)return o.domAtPos(t-a);if(t<=a)break;a=u}}for(let a=s;a>0;a--){let o=r[a-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let a=s;a<r.length;a++){let o=r[a];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ui(n,0)}function gv(i,t,n){let r,{children:s}=i;n>0&&t instanceof Ms&&s.length&&(r=s[s.length-1])instanceof Ms&&r.mark.eq(t.mark)?gv(r,t.children[0],n-1):(s.push(t),t.setParent(i)),i.length+=t.length}function yv(i,t,n){let r=null,s=-1,a=null,o=-1;function u(c,p){for(let m=0,h=0;m<c.children.length&&h<=p;m++){let f=c.children[m],d=h+f.length;d>=p&&(f.children.length?u(f,p-h):!a&&(d>p||h==d&&f.getSide()>0)?(a=f,o=p-h):(h<p||h==d&&f.getSide()<0)&&(r=f,s=p-h)),h=d}}u(i,t);let l=(n<0?r:a)||r||a;return l?l.coordsAt(Math.max(0,l==r?s:o),n):eS(i)}function eS(i){let t=i.dom.lastChild;if(!t)return i.dom.getBoundingClientRect();let n=ql(t);return n[n.length-1]||null}function of(i,t){for(let n in i)n=="class"&&t.class?t.class+=" "+i.class:n=="style"&&t.style?t.style+=";"+i.style:t[n]=i[n];return t}function ip(i,t){if(i==t)return!0;if(!i||!t)return!1;let n=Object.keys(i),r=Object.keys(t);if(n.length!=r.length)return!1;for(let s of n)if(r.indexOf(s)==-1||i[s]!==t[s])return!1;return!0}function af(i,t,n){let r=null;if(t)for(let s in t)n&&s in n||i.removeAttribute(r=s);if(n)for(let s in n)t&&t[s]==n[s]||i.setAttribute(r=s,n[s]);return!!r}class Ro{eq(t){return!1}updateDOM(t,n){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Qr=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Qr||(Qr={}));class Zt extends sa{constructor(t,n,r,s){super(),this.startSide=t,this.endSide=n,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(t){return new vh(t)}static widget(t){let n=t.side||0,r=!!t.block;return n+=r?n>0?3e8:-4e8:n>0?1e8:-1e8,new oa(t,n,n,r,t.widget||null,!1)}static replace(t){let n=!!t.block,r,s;if(t.isBlockGap)r=-5e8,s=4e8;else{let{start:a,end:o}=vv(t,n);r=(a?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new oa(t,r,s,n,t.widget||null,!0)}static line(t){return new yu(t)}static set(t,n=!1){return Hr.of(t,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Zt.none=Hr.empty;class vh extends Zt{constructor(t){let{start:n,end:r}=vv(t);super(n?-1:5e8,r?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof vh&&this.tagName==t.tagName&&this.class==t.class&&ip(this.attrs,t.attrs)}range(t,n=t){if(t>=n)throw new RangeError("Mark decorations may not be empty");return super.range(t,n)}}vh.prototype.point=!1;class yu extends Zt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof yu&&this.spec.class==t.spec.class&&ip(this.spec.attributes,t.spec.attributes)}range(t,n=t){if(n!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,n)}}yu.prototype.mapMode=bi.TrackBefore;yu.prototype.point=!0;class oa extends Zt{constructor(t,n,r,s,a,o){super(n,r,a,t),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?bi.TrackBefore:bi.TrackAfter:bi.TrackDel}get type(){return this.startSide<this.endSide?Qr.WidgetRange:this.startSide<=0?Qr.WidgetBefore:Qr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof oa&&tS(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,n=t){if(this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,n)}}oa.prototype.point=!0;function vv(i,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=i;return n==null&&(n=i.inclusive),r==null&&(r=i.inclusive),{start:n??t,end:r??t}}function tS(i,t){return i==t||!!(i&&t&&i.compare(t))}function lf(i,t,n,r=0){let s=n.length-1;s>=0&&n[s]+r>=i?n[s]=Math.max(n[s],t):n.push(i,t)}class wi extends cn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,n,r,s,a,o){if(r){if(!(r instanceof wi))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),cv(this,t,n,r?r.children:[],a,o),!0}split(t){let n=new wi;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:s}=this.childPos(t);s&&(n.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let a=r;a<this.children.length;a++)n.append(this.children[a],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=t,n}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){ip(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,n){gv(this,t,n)}addLineDeco(t){let n=t.spec.attributes,r=t.spec.class;n&&(this.attrs=of(n,this.attrs||{})),r&&(this.attrs=of({class:r},this.attrs||{}))}domAtPos(t){return mv(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t,n){var r;this.dom?this.dirty&4&&(av(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(af(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,n);let s=this.dom.lastChild;for(;s&&cn.get(s)instanceof Ms;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=cn.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ft.ios||!this.children.some(a=>a instanceof Mo))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let n of this.children){if(!(n instanceof Mo)||/[^ -~]/.test(n.text))return null;let r=ql(n.dom);if(r.length!=1)return null;t+=r[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,n){return yv(this,t,n)}become(t){return!1}get type(){return Qr.Text}static find(t,n){for(let r=0,s=0;r<t.children.length;r++){let a=t.children[r],o=s+a.length;if(o>=n){if(a instanceof wi)return a;if(o>n)break}s=o+a.breakAfter}return null}}class Zo extends cn{constructor(t,n,r){super(),this.widget=t,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(t,n,r,s,a,o){return r&&(!(r instanceof Zo)||!this.widget.compare(r.widget)||t>0&&a<=0||n<this.length&&o<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-n),!0)}domAtPos(t){return t==0?ui.before(this.dom):ui.after(this.dom,t==this.length)}split(t){let n=this.length-t;this.length=t;let r=new Zo(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return np}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Lr.empty}domBoundsAround(){return null}become(t){return t instanceof Zo&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sp{constructor(t,n,r,s){this.doc=t,this.pos=n,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Zo&&t.type==Qr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new wi),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Uu(new Qa(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,n,r){for(;t>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Uu(new Mo(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,t-=s,r=0}}span(t,n,r,s){this.buildText(n-t,r,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(t,n,r,s,a,o){if(this.disallowBlockEffectsFor[o]&&r instanceof oa){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=n-t;if(r instanceof oa)if(r.block){let{type:l}=r;l==Qr.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Zo(r.widget||new Ym("div"),u,l))}else{let l=mo.create(r.widget||new Ym("span"),u,u?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&a<=s.length&&(t<n||r.startSide>0),p=!l.isEditable&&(t<n||a>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(m.append(Uu(new Qa(1),s),a),a=s.length+Math.max(0,a-s.length)),m.append(Uu(l,s),a),this.atCursorPos=p,this.pendingBuffer=p?t<n||a>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=a)}static build(t,n,r,s,a){let o=new sp(t,n,r,a);return o.openEnd=Hr.spans(s,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Uu(i,t){for(let n of t)i=new Ms(n,[i],i.length);return i}class Ym extends Ro{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const bv=Vt.define(),_v=Vt.define(),wv=Vt.define(),xv=Vt.define(),uf=Vt.define(),Sv=Vt.define(),Cv=Vt.define(),jv=Vt.define({combine:i=>i.some(t=>t)}),Tv=Vt.define({combine:i=>i.some(t=>t)});class jc{constructor(t,n="nearest",r="nearest",s=5,a=5){this.range=t,this.y=n,this.x=r,this.yMargin=s,this.xMargin=a}map(t){return t.empty?this:new jc(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Km=pr.define({map:(i,t)=>i.map(t)});function Gi(i,t,n){let r=i.facet(xv);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const bh=Vt.define({combine:i=>i.length?i[0]:!0});let rS=0;const Al=Vt.define();class An{constructor(t,n,r,s){this.id=t,this.create=n,this.domEventHandlers=r,this.extension=s(this)}static define(t,n){const{eventHandlers:r,provide:s,decorations:a}=n||{};return new An(rS++,t,r,o=>{let u=[Al.of(o)];return a&&u.push(Xl.of(l=>{let c=l.plugin(o);return c?a(c):Zt.none})),s&&u.push(s(o)),u})}static fromClass(t,n){return An.define(r=>new t(r),n)}}class nd{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Gi(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(n){Gi(t.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Gi(t.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const kv=Vt.define(),op=Vt.define(),Xl=Vt.define(),Ev=Vt.define(),Mv=Vt.define(),Ol=Vt.define();class Ts{constructor(t,n,r,s){this.fromA=t,this.toA=n,this.fromB=r,this.toB=s}join(t){return new Ts(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let n=t.length,r=this;for(;n>0;n--){let s=t[n-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),t.splice(n-1,1)}}return t.splice(n,0,r),t}static extendWithRanges(t,n){if(n.length==0)return t;let r=[];for(let s=0,a=0,o=0,u=0;;s++){let l=s==t.length?null:t[s],c=o-u,p=l?l.fromB:1e9;for(;a<n.length&&n[a]<p;){let m=n[a],h=n[a+1],f=Math.max(u,m),d=Math.min(p,h);if(f<=d&&new Ts(f+c,d+c,f,d).addToSet(r),h>p)break;a+=2}if(!l)return r;new Ts(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,u=l.toB}}}class Tc{constructor(t,n,r){this.view=t,this.state=n,this.transactions=r,this.flags=0,this.startState=t.state,this.changes=Dn.empty(this.startState.doc.length);for(let a of r)this.changes=this.changes.compose(a.changes);let s=[];this.changes.iterChangedRanges((a,o,u,l)=>s.push(new Ts(a,o,u,l))),this.changedRanges=s}static create(t,n,r){return new Tc(t,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var vn=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(vn||(vn={}));const cf=vn.LTR,nS=vn.RTL;function Av(i){let t=[];for(let n=0;n<i.length;n++)t.push(1<<+i[n]);return t}const iS=Av("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sS=Av("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hf=Object.create(null),ys=[];for(let i of["()","[]","{}"]){let t=i.charCodeAt(0),n=i.charCodeAt(1);hf[t]=n,hf[n]=-t}function oS(i){return i<=247?iS[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?sS[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const aS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ga{constructor(t,n,r){this.from=t,this.to=n,this.level=r}get dir(){return this.level%2?nS:cf}side(t,n){return this.dir==n==t?this.to:this.from}static find(t,n,r,s){let a=-1;for(let o=0;o<t.length;o++){let u=t[o];if(u.from<=n&&u.to>=n){if(u.level==r)return o;(a<0||(s!=0?s<0?u.from<n:u.to>n:t[a].level>u.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}const yn=[];function lS(i,t){let n=i.length,r=t==cf?1:2,s=t==cf?2:1;if(!i||r==1&&!aS.test(i))return Ov(n);for(let o=0,u=r,l=r;o<n;o++){let c=oS(i.charCodeAt(o));c==512?c=u:c==8&&l==4&&(c=16),yn[o]=c==4?2:c,c&7&&(l=c),u=c}for(let o=0,u=r,l=r;o<n;o++){let c=yn[o];if(c==128)o<n-1&&u==yn[o+1]&&u&24?c=yn[o]=u:yn[o]=256;else if(c==64){let p=o+1;for(;p<n&&yn[p]==64;)p++;let m=o&&u==8||p<n&&yn[p]==8?l==1?1:8:256;for(let h=o;h<p;h++)yn[h]=m;o=p-1}else c==8&&l==1&&(yn[o]=1);u=c,c&7&&(l=c)}for(let o=0,u=0,l=0,c,p,m;o<n;o++)if(p=hf[c=i.charCodeAt(o)])if(p<0){for(let h=u-3;h>=0;h-=3)if(ys[h+1]==-p){let f=ys[h+2],d=f&2?r:f&4?f&1?s:r:0;d&&(yn[o]=yn[ys[h]]=d),u=h;break}}else{if(ys.length==189)break;ys[u++]=o,ys[u++]=c,ys[u++]=l}else if((m=yn[o])==2||m==1){let h=m==r;l=h?0:1;for(let f=u-3;f>=0;f-=3){let d=ys[f+2];if(d&2)break;if(h)ys[f+2]|=2;else{if(d&4)break;ys[f+2]|=4}}}for(let o=0;o<n;o++)if(yn[o]==256){let u=o+1;for(;u<n&&yn[u]==256;)u++;let l=(o?yn[o-1]:r)==1,c=(u<n?yn[u]:r)==1,p=l==c?l?1:2:r;for(let m=o;m<u;m++)yn[m]=p;o=u-1}let a=[];if(r==1)for(let o=0;o<n;){let u=o,l=yn[o++]!=1;for(;o<n&&l==(yn[o]!=1);)o++;if(l)for(let c=o;c>u;){let p=c,m=yn[--c]!=2;for(;c>u&&m==(yn[c-1]!=2);)c--;a.push(new Ga(c,p,m?2:1))}else a.push(new Ga(u,o,0))}else for(let o=0;o<n;){let u=o,l=yn[o++]==2;for(;o<n&&l==(yn[o]==2);)o++;a.push(new Ga(u,o,l?1:2))}return a}function Ov(i){return[new Ga(0,i,0)]}let Iv="";function uS(i,t,n,r,s){var a;let o=r.head-i.from,u=-1;if(o==0){if(!s||!i.length)return null;t[0].level!=n&&(o=t[0].side(!1,n),u=0)}else if(o==i.length){if(s)return null;let h=t[t.length-1];h.level!=n&&(o=h.side(!0,n),u=t.length-1)}u<0&&(u=Ga.find(t,o,(a=r.bidiLevel)!==null&&a!==void 0?a:-1,r.assoc));let l=t[u];o==l.side(s,n)&&(l=t[u+=s?1:-1],o=l.side(!s,n));let c=s==(l.dir==n),p=_i(i.text,o,c);if(Iv=i.text.slice(Math.min(o,p),Math.max(o,p)),p!=l.side(s,n))return yt.cursor(p+i.from,c?-1:1,l.level);let m=u==(s?t.length-1:0)?null:t[u+(s?1:-1)];return!m&&l.level!=n?yt.cursor(s?i.to:i.from,s?-1:1,n):m&&m.level<l.level?yt.cursor(m.side(!s,n)+i.from,s?1:-1,m.level):yt.cursor(p+i.from,s?-1:1,l.level)}const go="ï¿¿";class Pv{constructor(t,n){this.points=t,this.text="",this.lineSeparator=n.facet(Mr.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=go}readRange(t,n){if(!t)return this;let r=t.parentNode;for(let s=t;;){this.findPointBefore(r,s),this.readNode(s);let a=s.nextSibling;if(a==n)break;let o=cn.get(s),u=cn.get(a);(o&&u?o.breakAfter:(o?o.breakAfter:Jm(s))||Jm(a)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=a}return this.findPointBefore(r,n),this}readTextNode(t){let n=t.nodeValue;for(let r of this.points)r.node==t&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,u;if(this.lineSeparator?(a=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(u=s.exec(n))&&(a=u.index,o=u[0].length),this.append(n.slice(r,a<0?n.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=o-1);r=a+o}}readNode(t){if(t.cmIgnore)return;let n=cn.get(t),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(t,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,n){for(let r of this.points)r.node==t&&t.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(t,n){for(let r of this.points)(t.nodeType==3?r.node==t:t.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function Jm(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class Qm{constructor(t,n){this.node=t,this.offset=n,this.pos=-1}}class Zm extends cn{constructor(t){super(),this.view=t,this.compositionDeco=Zt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new wi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ts(0,0,0,t.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(t){let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:o,toA:u})=>u<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Zt.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=hS(this.view,t.changes)),(Ft.ie||Ft.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),a=mS(r,s,t.changes);return n=Ts.extendWithRanges(n,a),this.dirty==0&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Ft.chrome||Ft.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.dirty=0,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Zo&&a.widget instanceof eg&&s.push(a.dom);r.updateGaps(s)}updateChildren(t,n){let r=this.childCursor(n);for(let s=t.length-1;;s--){let a=s>=0?t[s]:null;if(!a)break;let{fromA:o,toA:u,fromB:l,toB:c}=a,{content:p,breakAtStart:m,openStart:h,openEnd:f}=sp.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:d,off:g}=r.findPos(u,1),{i:y,off:b}=r.findPos(o,-1);uv(this,y,b,d,g,p,m,h,f)}}updateSelection(t=!1,n=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.domAtPos(s.anchor),o=s.empty?a:this.domAtPos(s.head);if(Ft.gecko&&s.empty&&cS(a)){let l=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(l,a.node.childNodes[a.offset]||null)),a=o=new ui(l,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||!Sc(a.node,a.offset,u.anchorNode,u.anchorOffset)||!Sc(o.node,o.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{Ft.android&&Ft.chrome&&this.dom.contains(u.focusNode)&&gS(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=xc(this.view.root);if(l)if(s.empty){if(Ft.gecko){let c=fS(a.node,a.offset);if(c&&c!=3){let p=Dv(a.node,a.offset,c==1?1:-1);p&&(a=new ui(p,c==1?0:p.nodeValue.length))}}l.collapse(a.node,a.offset),s.bidiLevel!=null&&u.cursorBidiLevel!=null&&(u.cursorBidiLevel=s.bidiLevel)}else if(l.extend){l.collapse(a.node,a.offset);try{l.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();s.anchor>s.head&&([a,o]=[o,a]),c.setEnd(o.node,o.offset),c.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(a,o)),this.impreciseAnchor=a.precise?null:new ui(u.anchorNode,u.anchorOffset),this.impreciseHead=o.precise?null:new ui(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,n=t.state.selection.main,r=xc(t.root),{anchorNode:s,anchorOffset:a}=t.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=wi.find(this,n.head);if(!o)return;let u=o.posAtStart;if(n.head==u||n.head==u+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let p=this.domAtPos(n.head+n.assoc);r.collapse(p.node,p.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let m=t.observer.selectionRange;t.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=n.from&&r.collapse(s,a)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||uc(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let n=t;n;){let r=cn.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(t,n){let r=this.nearest(t);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(t,n)+r.posAtStart}domAtPos(t){let{i:n,off:r}=this.childCursor().findPos(t,-1);for(;n<this.children.length-1;){let s=this.children[n];if(r<s.length||s instanceof wi)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(t,n){for(let r=this.length,s=this.children.length-1;;s--){let a=this.children[s],o=r-a.breakAfter-a.length;if(t>o||t==o&&a.type!=Qr.WidgetBefore&&a.type!=Qr.WidgetAfter&&(!s||n==2||this.children[s-1].breakAfter||this.children[s-1].type==Qr.WidgetBefore&&n>-2))return a.coordsAt(t-o,n);r=o}}measureVisibleLineHeights(t){let n=[],{from:r,to:s}=t,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,l=this.view.textDirection==vn.LTR;for(let c=0,p=0;p<this.children.length;p++){let m=this.children[p],h=c+m.length;if(h>s)break;if(c>=r){let f=m.dom.getBoundingClientRect();if(n.push(f.height),o){let d=m.dom.lastChild,g=d?ql(d):[];if(g.length){let y=g[g.length-1],b=l?y.right-f.left:f.right-y.left;b>u&&(u=b,this.minWidth=a,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+m.breakAfter}return n}textDirectionAt(t){let{i:n}=this.childPos(t,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?vn.RTL:vn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof wi){let a=s.measureTextSize();if(a)return a}let t=document.createElement("div"),n,r;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let s=ql(t.firstChild)[0];n=t.getBoundingClientRect().height,r=s?s.width/27:7,t.remove()}),{lineHeight:n,charWidth:r}}childCursor(t=this.length){let n=this.children.length;return n&&(t-=this.children[--n].length),new lv(this.children,t,n)}computeBlockGapDeco(){let t=[],n=this.view.viewState;for(let r=0,s=0;;s++){let a=s==n.viewports.length?null:n.viewports[s],o=a?a.from-1:this.length;if(o>r){let u=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;t.push(Zt.replace({widget:new eg(u),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!a)break;r=a.to+1}return Zt.set(t)}updateDeco(){let t=this.view.state.facet(Xl).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:n}=t,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!r)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let a=0,o=0,u=0,l=0;for(let p of this.view.state.facet(Mv).map(m=>m(this.view)))if(p){let{left:m,right:h,top:f,bottom:d}=p;m!=null&&(a=Math.max(a,m)),h!=null&&(o=Math.max(o,h)),f!=null&&(u=Math.max(u,f)),d!=null&&(l=Math.max(l,d))}let c={left:r.left-a,top:r.top-u,right:r.right+o,bottom:r.bottom+l};$x(this.view.scrollDOM,c,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==vn.LTR)}}function cS(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class eg extends Ro{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Rv(i){let t=i.observer.selectionRange,n=t.focusNode&&Dv(t.focusNode,t.focusOffset,0);if(!n)return null;let r=i.docView.nearest(n);if(!r)return null;if(r instanceof wi){let s=n;for(;s.parentNode!=r.dom;)s=s.parentNode;let a=s.previousSibling;for(;a&&!cn.get(a);)a=a.previousSibling;let o=a?cn.get(a).posAtEnd:r.posAtStart;return{from:o,to:o,node:s,text:n}}else{for(;;){let{parent:a}=r;if(!a)return null;if(a instanceof wi)break;r=a}let s=r.posAtStart;return{from:s,to:s+r.length,node:r.dom,text:n}}}function hS(i,t){let n=Rv(i);if(!n)return Zt.none;let{from:r,to:s,node:a,text:o}=n,u=t.mapPos(r,1),l=Math.max(u,t.mapPos(s,-1)),{state:c}=i,p=a.nodeType==3?a.nodeValue:new Pv([],c).readRange(a.firstChild,null).text;if(l-u<p.length)if(c.doc.sliceString(u,Math.min(c.doc.length,u+p.length),go)==p)l=u+p.length;else if(c.doc.sliceString(Math.max(0,l-p.length),l,go)==p)u=l-p.length;else return Zt.none;else if(c.doc.sliceString(u,l,go)!=p)return Zt.none;let m=cn.get(a);return m instanceof fv?m=m.widget.topView:m&&(m.parent=null),Zt.set(Zt.replace({widget:new dS(a,o,m),inclusive:!0}).range(u,l))}class dS extends Ro{constructor(t,n,r){super(),this.top=t,this.text=n,this.topView=r}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return fv}}function Dv(i,t,n){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&t>0&&n<=0)i=i.childNodes[t-1],t=$l(i);else if(i.nodeType==1&&t<i.childNodes.length&&n>=0)i=i.childNodes[t],t=0;else return null}}function fS(i,t){return i.nodeType!=1?0:(t&&i.childNodes[t-1].contentEditable=="false"?1:0)|(t<i.childNodes.length&&i.childNodes[t].contentEditable=="false"?2:0)}class pS{constructor(){this.changes=[]}compareRange(t,n){lf(t,n,this.changes)}comparePoint(t,n){lf(t,n,this.changes)}}function mS(i,t,n){let r=new pS;return Hr.compare(i,t,n,r),r.changes}function gS(i,t){for(let n=i;n&&n!=t;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function yS(i,t,n=1){let r=i.charCategorizer(t),s=i.doc.lineAt(t),a=t-s.from;if(s.length==0)return yt.cursor(t);a==0?n=1:a==s.length&&(n=-1);let o=a,u=a;n<0?o=_i(s.text,a,!1):u=_i(s.text,a);let l=r(s.text.slice(o,u));for(;o>0;){let c=_i(s.text,o,!1);if(r(s.text.slice(c,o))!=l)break;o=c}for(;u<s.length;){let c=_i(s.text,u);if(r(s.text.slice(u,c))!=l)break;u=c}return yt.range(o+s.from,u+s.from)}function vS(i,t){return t.left>i?t.left-i:Math.max(0,i-t.right)}function bS(i,t){return t.top>i?t.top-i:Math.max(0,i-t.bottom)}function id(i,t){return i.top<t.bottom-1&&i.bottom>t.top+1}function tg(i,t){return t<i.top?{top:t,left:i.left,right:i.right,bottom:i.bottom}:i}function rg(i,t){return t>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:t}:i}function df(i,t,n){let r,s,a,o,u=!1,l,c,p,m;for(let d=i.firstChild;d;d=d.nextSibling){let g=ql(d);for(let y=0;y<g.length;y++){let b=g[y];s&&id(s,b)&&(b=tg(rg(b,s.bottom),s.top));let x=vS(t,b),C=bS(n,b);if(x==0&&C==0)return d.nodeType==3?ng(d,t,n):df(d,t,n);if(!r||o>C||o==C&&a>x){r=d,s=b,a=x,o=C;let S=C?n<b.top?-1:1:x?t<b.left?-1:1:0;u=!S||(S>0?y<g.length-1:y>0)}x==0?n>b.bottom&&(!p||p.bottom<b.bottom)?(l=d,p=b):n<b.top&&(!m||m.top>b.top)&&(c=d,m=b):p&&id(p,b)?p=rg(p,b.bottom):m&&id(m,b)&&(m=tg(m,b.top))}}if(p&&p.bottom>=n?(r=l,s=p):m&&m.top<=n&&(r=c,s=m),!r)return{node:i,offset:0};let h=Math.max(s.left,Math.min(s.right,t));if(r.nodeType==3)return ng(r,h,n);if(u&&r.contentEditable!="false")return df(r,h,n);let f=Array.prototype.indexOf.call(i.childNodes,r)+(t>=(s.left+s.right)/2?1:0);return{node:i,offset:f}}function ng(i,t,n){let r=i.nodeValue.length,s=-1,a=1e9,o=0;for(let u=0;u<r;u++){let l=Ja(i,u,u+1).getClientRects();for(let c=0;c<l.length;c++){let p=l[c];if(p.top==p.bottom)continue;o||(o=t-p.left);let m=(p.top>n?p.top-n:n-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&m<a){let h=t>=(p.left+p.right)/2,f=h;if((Ft.chrome||Ft.gecko)&&Ja(i,u).getBoundingClientRect().left==p.right&&(f=!h),m<=0)return{node:i,offset:u+(f?1:0)};s=u+(f?1:0),a=m}}}return{node:i,offset:s>-1?s:o>0?i.nodeValue.length:0}}function Lv(i,t,n,r=-1){var s;let a=i.contentDOM.getBoundingClientRect(),o=a.top+i.viewState.paddingTop,u,{docHeight:l}=i.viewState,{x:c,y:p}=t,m=p-o;if(m<0)return 0;if(m>l)return i.state.doc.length;for(let C=i.defaultLineHeight/2,S=!1;u=i.elementAtHeight(m),u.type!=Qr.Text;)for(;m=r>0?u.bottom+C:u.top-C,!(m>=0&&m<=l);){if(S)return n?null:0;S=!0,r=-r}p=o+m;let h=u.from;if(h<i.viewport.from)return i.viewport.from==0?0:n?null:ig(i,a,u,c,p);if(h>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:ig(i,a,u,c,p);let f=i.dom.ownerDocument,d=i.root.elementFromPoint?i.root:f,g=d.elementFromPoint(c,p);g&&!i.contentDOM.contains(g)&&(g=null),g||(c=Math.max(a.left+1,Math.min(a.right-1,c)),g=d.elementFromPoint(c,p),g&&!i.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&((s=i.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let C=f.caretPositionFromPoint(c,p);C&&({offsetNode:y,offset:b}=C)}else if(f.caretRangeFromPoint){let C=f.caretRangeFromPoint(c,p);C&&({startContainer:y,startOffset:b}=C,(!i.contentDOM.contains(y)||Ft.safari&&_S(y,b,c)||Ft.chrome&&wS(y,b,c))&&(y=void 0))}}if(!y||!i.docView.dom.contains(y)){let C=wi.find(i.docView,h);if(!C)return m>u.top+u.height/2?u.to:u.from;({node:y,offset:b}=df(C.dom,c,p))}let x=i.docView.nearest(y);if(!x)return null;if(x.isWidget){let C=x.dom.getBoundingClientRect();return t.y<C.top||t.y<=C.bottom&&t.x<=(C.left+C.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,b)+x.posAtStart}function ig(i,t,n,r,s){let a=Math.round((r-t.left)*i.defaultCharacterWidth);if(i.lineWrapping&&n.height>i.defaultLineHeight*1.5){let u=Math.floor((s-n.top)/i.defaultLineHeight);a+=u*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(n.from,n.to);return n.from+Jd(o,a,i.state.tabSize)}function _S(i,t,n){let r;if(i.nodeType!=3||t!=(r=i.nodeValue.length))return!1;for(let s=i.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Ja(i,r-1,r).getBoundingClientRect().left>n}function wS(i,t,n){if(t!=0)return!1;for(let s=i;;){let a=s.parentNode;if(!a||a.nodeType!=1||a.firstChild!=s)return!1;if(a.classList.contains("cm-line"))break;s=a}let r=i.nodeType==1?i.getBoundingClientRect():Ja(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function xS(i,t,n,r){let s=i.state.doc.lineAt(t.head),a=!r||!i.lineWrapping?null:i.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head);if(a){let l=i.dom.getBoundingClientRect(),c=i.textDirectionAt(s.from),p=i.posAtCoords({x:n==(c==vn.LTR)?l.right-1:l.left+1,y:(a.top+a.bottom)/2});if(p!=null)return yt.cursor(p,n?-1:1)}let o=wi.find(i.docView,t.head),u=o?n?o.posAtEnd:o.posAtStart:n?s.to:s.from;return yt.cursor(u,n?-1:1)}function sg(i,t,n,r){let s=i.state.doc.lineAt(t.head),a=i.bidiSpans(s),o=i.textDirectionAt(s.from);for(let u=t,l=null;;){let c=uS(s,a,o,u,n),p=Iv;if(!c){if(s.number==(n?i.state.doc.lines:1))return u;p=`
`,s=i.state.doc.line(s.number+(n?1:-1)),a=i.bidiSpans(s),c=yt.cursor(n?s.from:s.to)}if(l){if(!l(p))return u}else{if(!r)return c;l=r(p)}u=c}}function SS(i,t,n){let r=i.state.charCategorizer(t),s=r(n);return a=>{let o=r(a);return s==pn.Space&&(s=o),s==o}}function CS(i,t,n,r){let s=t.head,a=n?1:-1;if(s==(n?i.state.doc.length:0))return yt.cursor(s,t.assoc);let o=t.goalColumn,u,l=i.contentDOM.getBoundingClientRect(),c=i.coordsAtPos(s),p=i.documentTop;if(c)o==null&&(o=c.left-l.left),u=a<0?c.top:c.bottom;else{let f=i.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,i.defaultCharacterWidth*(s-f.from))),u=(a<0?f.top:f.bottom)+p}let m=l.left+o,h=r??i.defaultLineHeight>>1;for(let f=0;;f+=10){let d=u+(h+f)*a,g=Lv(i,{x:m,y:d},!1,a);if(d<l.top||d>l.bottom||(a<0?g<s:g>s))return yt.cursor(g,t.assoc,void 0,o)}}function sd(i,t,n){let r=i.state.facet(Ev).map(s=>s(i));for(;;){let s=!1;for(let a of r)a.between(n.from-1,n.from+1,(o,u,l)=>{n.from>o&&n.from<u&&(n=t.head>n.from?yt.cursor(o,1):yt.cursor(u,-1),s=!0)});if(!s)return n}}class jS{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let n=(r,s)=>{this.ignoreDuringComposition(s)||s.type=="keydown"&&this.keydown(t,s)||(this.mustFlushObserver(s)&&t.observer.forceFlush(),this.runCustomHandlers(s.type,t,s)?s.preventDefault():r(t,s))};for(let r in Fn){let s=Fn[r];t.contentDOM.addEventListener(r,a=>{og(t,a)&&n(s,a)},ff[r]),this.registeredEvents.push(r)}t.scrollDOM.addEventListener("mousedown",r=>{r.target==t.scrollDOM&&r.clientY>t.contentDOM.getBoundingClientRect().bottom&&n(Fn.mousedown,r)}),Ft.chrome&&Ft.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,Ft.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,n){var r;let s;this.customHandlers=[];for(let a of n)if(s=(r=a.update(t).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:s});for(let o in s)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),t.contentDOM.addEventListener(o,u=>{og(t,u)&&this.runCustomHandlers(o,t,u)&&u.preventDefault()}))}}runCustomHandlers(t,n,r){for(let s of this.customHandlers){let a=s.handlers[t];if(a)try{if(a.call(s.plugin,r,n)||r.defaultPrevented)return!0}catch(o){Gi(n.state,o)}}return!1}runScrollHandlers(t,n){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let r of this.customHandlers){let s=r.handlers.scroll;if(s)try{s.call(r.plugin,n,t)}catch(a){Gi(t.state,a)}}}keydown(t,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ft.android&&Ft.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return t.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return Ft.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=Nv.find(s=>s.keyCode==n.keyCode))&&!n.ctrlKey||TS.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Va(t.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:Ft.safari&&!Ft.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Nv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],TS="dthko",Bv=[16,17,18,20,91,92,224,225];function Vu(i){return i*.7+8}class kS{constructor(t,n,r,s){this.view=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=Xx(t.contentDOM);let a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=t.state.facet(Mr.allowMultipleSelections)&&ES(t,n),this.dragMove=MS(t,n),this.dragging=AS(t,n)&&Gv(n)==1?null:!1}start(t){this.dragging===!1&&(t.preventDefault(),this.select(t))}move(t){var n;if(t.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=t);let r=0,s=0,a=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=a.left?r=-Vu(a.left-t.clientX):t.clientX>=a.right&&(r=Vu(t.clientX-a.right)),t.clientY<=a.top?s=-Vu(a.top-t.clientY):t.clientY>=a.bottom&&(s=Vu(t.clientY-a.bottom)),this.setScrollSpeed(r,s)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,n){this.scrollSpeed={x:t,y:n},t||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(t){let n=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ES(i,t){let n=i.state.facet(bv);return n.length?n[0](t):Ft.mac?t.metaKey:t.ctrlKey}function MS(i,t){let n=i.state.facet(_v);return n.length?n[0](t):Ft.mac?!t.altKey:!t.ctrlKey}function AS(i,t){let{main:n}=i.state.selection;if(n.empty)return!1;let r=xc(i.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let a=0;a<s.length;a++){let o=s[a];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function og(i,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target,r;n!=i.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=cn.get(n))&&r.ignoreEvent(t))return!1;return!0}const Fn=Object.create(null),ff=Object.create(null),Fv=Ft.ie&&Ft.ie_version<15||Ft.ios&&Ft.webkit_version<604;function OS(i){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{i.focus(),n.remove(),Uv(i,n.value)},50)}function Uv(i,t){let{state:n}=i,r,s=1,a=n.toText(t),o=a.lines==n.selection.ranges.length;if(pf!=null&&n.selection.ranges.every(l=>l.empty)&&pf==a.toString()){let l=-1;r=n.changeByRange(c=>{let p=n.doc.lineAt(c.from);if(p.from==l)return{range:c};l=p.from;let m=n.toText((o?a.line(s++).text:t)+n.lineBreak);return{changes:{from:p.from,insert:m},range:yt.cursor(c.from+m.length)}})}else o?r=n.changeByRange(l=>{let c=a.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:yt.cursor(l.from+c.length)}}):r=n.replaceSelection(a);i.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Fn.keydown=(i,t)=>{i.inputState.setSelectionOrigin("select"),t.keyCode==27?i.inputState.lastEscPress=Date.now():Bv.indexOf(t.keyCode)<0&&(i.inputState.lastEscPress=0)};Fn.touchstart=(i,t)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};Fn.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};ff.touchstart=ff.touchmove={passive:!0};Fn.mousedown=(i,t)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of i.state.facet(wv))if(n=r(i,t),n)break;if(!n&&t.button==0&&(n=RS(i,t)),n){let r=i.root.activeElement!=i.contentDOM;i.inputState.startMouseSelection(new kS(i,t,n,r)),r&&i.observer.ignore(()=>ov(i.contentDOM)),i.inputState.mouseSelection&&i.inputState.mouseSelection.start(t)}};function ag(i,t,n,r){if(r==1)return yt.cursor(t,n);if(r==2)return yS(i.state,t,n);{let s=wi.find(i.docView,t),a=i.state.doc.lineAt(s?s.posAtEnd:t),o=s?s.posAtStart:a.from,u=s?s.posAtEnd:a.to;return u<i.state.doc.length&&u==a.to&&u++,yt.range(o,u)}}let Vv=(i,t)=>i>=t.top&&i<=t.bottom,lg=(i,t,n)=>Vv(t,n)&&i>=n.left&&i<=n.right;function IS(i,t,n,r){let s=wi.find(i.docView,t);if(!s)return 1;let a=t-s.posAtStart;if(a==0)return 1;if(a==s.length)return-1;let o=s.coordsAt(a,-1);if(o&&lg(n,r,o))return-1;let u=s.coordsAt(a,1);return u&&lg(n,r,u)?1:o&&Vv(r,o)?-1:1}function ug(i,t){let n=i.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:IS(i,n,t.clientX,t.clientY)}}const PS=Ft.ie&&Ft.ie_version<=11;let cg=null,hg=0,dg=0;function Gv(i){if(!PS)return i.detail;let t=cg,n=dg;return cg=i,dg=Date.now(),hg=!t||n>Date.now()-400&&Math.abs(t.clientX-i.clientX)<2&&Math.abs(t.clientY-i.clientY)<2?(hg+1)%3:1}function RS(i,t){let n=ug(i,t),r=Gv(t),s=i.state.selection;return{update(a){a.docChanged&&(n.pos=a.changes.mapPos(n.pos),s=s.map(a.changes))},get(a,o,u){let l=ug(i,a),c=ag(i,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let p=ag(i,n.pos,n.bias,r),m=Math.min(p.from,c.from),h=Math.max(p.to,c.to);c=m<c.from?yt.range(m,h):yt.range(h,m)}return o?s.replaceRange(s.main.extend(c.from,c.to)):u&&s.ranges.length>1&&s.ranges.some(p=>p.eq(c))?DS(s,c):u?s.addRange(c):yt.create([c])}}}function DS(i,t){for(let n=0;;n++)if(i.ranges[n].eq(t))return yt.create(i.ranges.slice(0,n).concat(i.ranges.slice(n+1)),i.mainIndex==n?0:i.mainIndex-(i.mainIndex>n?1:0))}Fn.dragstart=(i,t)=>{let{selection:{main:n}}=i.state,{mouseSelection:r}=i.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",i.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")};function fg(i,t,n,r){if(!n)return;let s=i.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:a}=i.inputState,o=r&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,u={from:s,insert:n},l=i.state.changes(o?[o,u]:u);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"})}Fn.drop=(i,t)=>{if(!t.dataTransfer)return;if(i.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),s=0,a=()=>{++s==n.length&&fg(i,t,r.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let u=new FileReader;u.onerror=a,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(r[o]=u.result),a()},u.readAsText(n[o])}}else fg(i,t,t.dataTransfer.getData("Text"),!0)};Fn.paste=(i,t)=>{if(i.state.readOnly)return t.preventDefault();i.observer.flush();let n=Fv?null:t.clipboardData;n?(Uv(i,n.getData("text/plain")),t.preventDefault()):OS(i)};function LS(i,t){let n=i.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),i.focus()},50)}function NS(i){let t=[],n=[],r=!1;for(let s of i.selection.ranges)s.empty||(t.push(i.sliceDoc(s.from,s.to)),n.push(s));if(!t.length){let s=-1;for(let{from:a}of i.selection.ranges){let o=i.doc.lineAt(a);o.number>s&&(t.push(o.text),n.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),s=o.number}r=!0}return{text:t.join(i.lineBreak),ranges:n,linewise:r}}let pf=null;Fn.copy=Fn.cut=(i,t)=>{let{text:n,ranges:r,linewise:s}=NS(i.state);if(!n&&!s)return;pf=s?n:null;let a=Fv?null:t.clipboardData;a?(t.preventDefault(),a.clearData(),a.setData("text/plain",n)):LS(i,n),t.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const Hv=Qs.define();function zv(i,t){let n=[];for(let r of i.facet(Cv)){let s=r(i,t);s&&n.push(s)}return n?i.update({effects:n,annotations:Hv.of(!0)}):null}function Wv(i){setTimeout(()=>{let t=i.hasFocus;if(t!=i.inputState.notifiedFocused){let n=zv(i.state,t);n?i.dispatch(n):i.update([])}},10)}Fn.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Wv(i)};Fn.blur=i=>{i.observer.clearSelectionRange(),Wv(i)};Fn.compositionstart=Fn.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};Fn.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,Ft.chrome&&Ft.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};Fn.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Fn.beforeinput=(i,t)=>{var n;let r;if(Ft.chrome&&Ft.android&&(r=Nv.find(s=>s.inputType==t.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const pg=["pre-wrap","normal","pre-line","break-spaces"];class BS{constructor(t){this.lineWrapping=t,this.doc=Lr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-t-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return pg.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let n=!1;for(let r=0;r<t.length;r++){let s=t[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(t,n,r,s,a){let o=pg.indexOf(t)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.lineLength=s,u){this.heightSamples={};for(let l=0;l<a.length;l++){let c=a[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return u}}class FS{constructor(t,n){this.from=t,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Vs{constructor(t,n,r,s,a){this.from=t,this.length=n,this.top=r,this.height=s,this.type=a}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new Vs(this.from,this.length+t.length,this.top,this.height+t.height,n)}}var un=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(un||(un={}));const cc=.001;class Si{constructor(t,n,r=2){this.length=t,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,n){this.height!=n&&(Math.abs(this.height-n)>cc&&(t.heightChanged=!0),this.height=n)}replace(t,n,r){return Si.of(r)}decomposeLeft(t,n){n.push(this)}decomposeRight(t,n){n.push(this)}applyChanges(t,n,r,s){let a=this,o=r.doc;for(let u=s.length-1;u>=0;u--){let{fromA:l,toA:c,fromB:p,toB:m}=s[u],h=a.lineAt(l,un.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=c?h:a.lineAt(c,un.ByPosNoHeight,r,0,0);for(m+=f.to-c,c=f.to;u>0&&h.from<=s[u-1].toA;)l=s[u-1].fromA,p=s[u-1].fromB,u--,l<h.from&&(h=a.lineAt(l,un.ByPosNoHeight,r,0,0));p+=h.from-l,l=h.from;let d=ap.build(r.setDoc(o),t,p,m);a=a.replace(l,c,d)}return a.updateHeight(r,0)}static empty(){return new Fi(0,0)}static of(t){if(t.length==1)return t[0];let n=0,r=t.length,s=0,a=0;for(;;)if(n==r)if(s>a*2){let u=t[n-1];u.break?t.splice(--n,1,u.left,null,u.right):t.splice(--n,1,u.left,u.right),r+=1+u.break,s-=u.size}else if(a>s*2){let u=t[r];u.break?t.splice(r,1,u.left,null,u.right):t.splice(r,1,u.left,u.right),r+=2+u.break,a-=u.size}else break;else if(s<a){let u=t[n++];u&&(s+=u.size)}else{let u=t[--r];u&&(a+=u.size)}let o=0;return t[n-1]==null?(o=1,n--):t[n]==null&&(o=1,r++),new US(Si.of(t.slice(0,n)),o,Si.of(t.slice(r)))}}Si.prototype.size=1;class qv extends Si{constructor(t,n,r){super(t,n),this.type=r}blockAt(t,n,r,s){return new Vs(s,this.length,r,this.height,this.type)}lineAt(t,n,r,s,a){return this.blockAt(0,r,s,a)}forEachLine(t,n,r,s,a,o){t<=a+this.length&&n>=a&&o(this.blockAt(0,r,s,a))}updateHeight(t,n=0,r=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(t,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Fi extends qv{constructor(t,n){super(t,n,Qr.Text),this.collapsed=0,this.widgetHeight=0}replace(t,n,r){let s=r[0];return r.length==1&&(s instanceof Fi||s instanceof Xn&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Xn?s=new Fi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Si.of(r)}updateHeight(t,n=0,r=!1,s){return s&&s.from<=n&&s.more?this.setHeight(t,s.heights[s.index++]):(r||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xn extends Si{constructor(t){super(t,0)}heightMetrics(t,n){let r=t.doc.lineAt(n).number,s=t.doc.lineAt(n+this.length).number,a=s-r+1,o,u=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*a);o=l/a,u=(this.height-l)/(this.length-a-1)}else o=this.height/a;return{firstLine:r,lastLine:s,perLine:o,perChar:u}}blockAt(t,n,r,s){let{firstLine:a,lastLine:o,perLine:u,perChar:l}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+Math.round(Math.max(0,Math.min(1,(t-r)/this.height))*this.length),p=n.doc.lineAt(c),m=u+p.length*l,h=Math.max(r,t-m/2);return new Vs(p.from,p.length,h,m,Qr.Text)}else{let c=Math.max(0,Math.min(o-a,Math.floor((t-r)/u))),{from:p,length:m}=n.doc.line(a+c);return new Vs(p,m,r+u*c,u,Qr.Text)}}lineAt(t,n,r,s,a){if(n==un.ByHeight)return this.blockAt(t,r,s,a);if(n==un.ByPosNoHeight){let{from:f,to:d}=r.doc.lineAt(t);return new Vs(f,d-f,0,0,Qr.Text)}let{firstLine:o,perLine:u,perChar:l}=this.heightMetrics(r,a),c=r.doc.lineAt(t),p=u+c.length*l,m=c.number-o,h=s+u*m+l*(c.from-a-m);return new Vs(c.from,c.length,Math.max(s,Math.min(h,s+this.height-p)),p,Qr.Text)}forEachLine(t,n,r,s,a,o){t=Math.max(t,a),n=Math.min(n,a+this.length);let{firstLine:u,perLine:l,perChar:c}=this.heightMetrics(r,a);for(let p=t,m=s;p<=n;){let h=r.doc.lineAt(p);if(p==t){let d=h.number-u;m+=l*d+c*(t-a-d)}let f=l+c*h.length;o(new Vs(h.from,h.length,m,f,Qr.Text)),m+=f,p=h.to+1}}replace(t,n,r){let s=this.length-n;if(s>0){let a=r[r.length-1];a instanceof Xn?r[r.length-1]=new Xn(a.length+s):r.push(null,new Xn(s-1))}if(t>0){let a=r[0];a instanceof Xn?r[0]=new Xn(t+a.length):r.unshift(new Xn(t-1),null)}return Si.of(r)}decomposeLeft(t,n){n.push(new Xn(t-1),null)}decomposeRight(t,n){n.push(null,new Xn(this.length-t-1))}updateHeight(t,n=0,r=!1,s){let a=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],u=Math.max(n,s.from),l=-1;for(s.from>n&&o.push(new Xn(s.from-n-1).updateHeight(t,n));u<=a&&s.more;){let p=t.doc.lineAt(u).length;o.length&&o.push(null);let m=s.heights[s.index++];l==-1?l=m:Math.abs(m-l)>=cc&&(l=-2);let h=new Fi(p,m);h.outdated=!1,o.push(h),u+=p+1}u<=a&&o.push(null,new Xn(a-u).updateHeight(t,u));let c=Si.of(o);return(l<0||Math.abs(c.height-this.height)>=cc||Math.abs(l-this.heightMetrics(t,n).perLine)>=cc)&&(t.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(t,t.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class US extends Si{constructor(t,n,r){super(t.length+n+r.length,t.height+r.height,n|(t.outdated||r.outdated?2:0)),this.left=t,this.right=r,this.size=t.size+r.size}get break(){return this.flags&1}blockAt(t,n,r,s){let a=r+this.left.height;return t<a?this.left.blockAt(t,n,r,s):this.right.blockAt(t,n,a,s+this.left.length+this.break)}lineAt(t,n,r,s,a){let o=s+this.left.height,u=a+this.left.length+this.break,l=n==un.ByHeight?t<o:t<u,c=l?this.left.lineAt(t,n,r,s,a):this.right.lineAt(t,n,r,o,u);if(this.break||(l?c.to<u:c.from>u))return c;let p=n==un.ByPosNoHeight?un.ByPosNoHeight:un.ByPos;return l?c.join(this.right.lineAt(u,p,r,o,u)):this.left.lineAt(u,p,r,s,a).join(c)}forEachLine(t,n,r,s,a,o){let u=s+this.left.height,l=a+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,n,r,s,a,o),n>=l&&this.right.forEachLine(t,n,r,u,l,o);else{let c=this.lineAt(l,un.ByPos,r,s,a);t<c.from&&this.left.forEachLine(t,c.from-1,r,s,a,o),c.to>=t&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,u,l,o)}}replace(t,n,r){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(t,n,r),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-s,n-s,r));let a=[];t>0&&this.decomposeLeft(t,a);let o=a.length;for(let u of r)a.push(u);if(t>0&&mg(a,o-1),n<this.length){let u=a.length;this.decomposeRight(n,a),mg(a,u)}return Si.of(a)}decomposeLeft(t,n){let r=this.left.length;if(t<=r)return this.left.decomposeLeft(t,n);n.push(this.left),this.break&&(r++,t>=r&&n.push(null)),t>r&&this.right.decomposeLeft(t-r,n)}decomposeRight(t,n){let r=this.left.length,s=r+this.break;if(t>=s)return this.right.decomposeRight(t-s,n);t<r&&this.left.decomposeRight(t,n),this.break&&t<s&&n.push(null),n.push(this.right)}balanced(t,n){return t.size>2*n.size||n.size>2*t.size?Si.of(this.break?[t,null,n]:[t,n]):(this.left=t,this.right=n,this.height=t.height+n.height,this.outdated=t.outdated||n.outdated,this.size=t.size+n.size,this.length=t.length+this.break+n.length,this)}updateHeight(t,n=0,r=!1,s){let{left:a,right:o}=this,u=n+a.length+this.break,l=null;return s&&s.from<=n+a.length&&s.more?l=a=a.updateHeight(t,n,r,s):a.updateHeight(t,n,r),s&&s.from<=u+o.length&&s.more?l=o=o.updateHeight(t,u,r,s):o.updateHeight(t,u,r),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mg(i,t){let n,r;i[t]==null&&(n=i[t-1])instanceof Xn&&(r=i[t+1])instanceof Xn&&i.splice(t-1,3,new Xn(n.length+1+r.length))}const VS=5;class ap{constructor(t,n){this.pos=t,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Fi?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Fi(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(t,n,r){if(t<n||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let a=n-t;r.block?this.addBlock(new qv(a,s,r.type)):(a||s>=VS)&&this.addLineDeco(s,a)}else n>t&&this.span(t,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Fi(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,n){let r=new Xn(n-t);return this.oracle.doc.lineAt(t).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Fi)return t;let n=new Fi(0,-1);return this.nodes.push(n),n}addBlock(t){this.enterLine(),t.type==Qr.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Qr.WidgetBefore&&(this.covering=t)}addLineDeco(t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,t),this.writtenTo=this.pos=this.pos+n}finish(t){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Fi)&&!this.isCovered?this.nodes.push(new Fi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=t;for(let s of this.nodes)s instanceof Fi&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(t,n,r,s){let a=new ap(r,t);return Hr.spans(n,r,s,a,0),a.finish(r)}}function GS(i,t,n){let r=new HS;return Hr.compare(i,t,n,r,0),r.changes}class HS{constructor(){this.changes=[]}compareRange(){}comparePoint(t,n,r,s){(t<n||r&&r.heightRelevant||s&&s.heightRelevant)&&lf(t,n,this.changes,5)}}function zS(i,t){let n=i.getBoundingClientRect(),r=i.ownerDocument,s=r.defaultView||window,a=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),u=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let c=i.parentNode;c&&c!=r.body;)if(c.nodeType==1){let p=c,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let h=p.getBoundingClientRect();a=Math.max(a,h.left),o=Math.min(o,h.right),u=Math.max(u,h.top),l=c==i.parentNode?h.bottom:Math.min(l,h.bottom)}c=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:a-n.left,right:Math.max(a,o)-n.left,top:u-(n.top+t),bottom:Math.max(u,l)-(n.top+t)}}function WS(i,t){let n=i.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class od{constructor(t,n,r){this.from=t,this.to=n,this.size=r}static same(t,n){if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],a=n[r];if(s.from!=a.from||s.to!=a.to||s.size!=a.size)return!1}return!0}draw(t){return Zt.replace({widget:new qS(this.size,t)}).range(this.from,this.to)}}class qS extends Ro{constructor(t,n){super(),this.size=t,this.vertical=n}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class gg{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=yg,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=t.facet(op).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new BS(n),this.stateDeco=t.facet(Xl).filter(r=>typeof r!="function"),this.heightMap=Si.empty().applyChanges(this.stateDeco,Lr.empty,this.heightOracle.setDoc(t.doc),[new Ts(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Zt.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let s=r?n.head:n.anchor;if(!t.some(({from:a,to:o})=>s>=a&&s<=o)){let{from:a,to:o}=this.lineBlockAt(s);t.push(new Gu(a,o))}}this.viewports=t.sort((r,s)=>r.from-s.from),this.scaler=this.heightMap.height<=7e6?yg:new YS(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:Il(t,this.scaler))})}update(t,n=null){this.state=t.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Xl).filter(c=>typeof c!="function");let s=t.changedRanges,a=Ts.extendWithRanges(s,GS(r,this.stateDeco,t?t.changes:Dn.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(t.flags|=2);let u=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let l=!t.changes.empty||t.flags&2||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Tv)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let n=t.contentDOM,r=window.getComputedStyle(n),s=this.heightOracle,a=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?vn.RTL:vn.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),u=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let c=0,p=0,m=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=h)&&(this.paddingTop=m,this.paddingBottom=h,c|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=8);let f=(this.printing?WS:zS)(n,this.paddingTop),d=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=u.width;if((this.contentDOMWidth!=b||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=t.scrollDOM.clientHeight,c|=8),l){let C=t.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(C)&&(o=!0),o||s.lineWrapping&&Math.abs(b-this.contentDOMWidth)>s.charWidth){let{lineHeight:S,charWidth:w}=t.docView.measureTextSize();o=S>0&&s.refresh(a,S,w,b/w,C),o&&(t.docView.minWidth=0,c|=8)}d>0&&g>0?p=Math.max(d,g):d<0&&g<0&&(p=Math.min(d,g)),s.heightChanged=!1;for(let S of this.viewports){let w=S.from==this.viewport.from?C:t.docView.measureVisibleLineHeights(S);this.heightMap=(o?Si.empty().applyChanges(this.stateDeco,Lr.empty,this.heightOracle,[new Ts(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new FS(S.from,w))}s.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(p,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,n){let r=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),s=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:u}=this,l=new Gu(s.lineAt(o-r*1e3,un.ByHeight,a,0,0).from,s.lineAt(u+(1-r)*1e3,un.ByHeight,a,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(c,un.ByPos,a,0,0),h;n.y=="center"?h=(m.top+m.bottom)/2-p/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=m.top:h=m.bottom-p,l=new Gu(s.lineAt(h-1e3/2,un.ByHeight,a,0,0).from,s.lineAt(h+p+1e3/2,un.ByHeight,a,0,0).to)}}return l}mapViewport(t,n){let r=n.mapPos(t.from,-1),s=n.mapPos(t.to,1);return new Gu(this.heightMap.lineAt(r,un.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,un.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:n},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(t,un.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(n,un.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:u}=this;return(t==0||s<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||a>=u+Math.max(10,Math.min(r,250)))&&s>o-2*1e3&&a<u+2*1e3}mapLineGaps(t,n){if(!t.length||n.empty)return t;let r=[];for(let s of t)n.touchesRange(s.from,s.to)||r.push(new od(n.mapPos(s.from),n.mapPos(s.to),s.size));return r}ensureLineGaps(t,n){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,a=s>>1,o=s<<1;if(this.defaultTextDirection!=vn.LTR&&!r)return[];let u=[],l=(c,p,m,h)=>{if(p-c<a)return;let f=this.state.selection.main,d=[f.from];f.empty||d.push(f.to);for(let y of d)if(y>c&&y<p){l(c,y-10,m,h),l(y+10,p,m,h);return}let g=XS(t,y=>y.from>=m.from&&y.to<=m.to&&Math.abs(y.from-c)<a&&Math.abs(y.to-p)<a&&!d.some(b=>y.from<b&&y.to>b));if(!g){if(p<m.to&&n&&r&&n.visibleRanges.some(y=>y.from<=p&&y.to>=p)){let y=n.moveToLineBoundary(yt.cursor(p),!1,!0).head;y>c&&(p=y)}g=new od(c,p,this.gapSize(m,c,p,h))}u.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let p=$S(c.from,c.to,this.stateDeco);if(p.total<o)continue;let m=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(r){let d=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(m!=null){let b=zu(p,m),x=((this.visibleBottom-this.visibleTop)/2+d)/c.height;g=b-x,y=b+x}else g=(this.visibleTop-c.top-d)/c.height,y=(this.visibleBottom-c.top+d)/c.height;h=Hu(p,g),f=Hu(p,y)}else{let d=p.total*this.heightOracle.charWidth,g=s*this.heightOracle.charWidth,y,b;if(m!=null){let x=zu(p,m),C=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/d;y=x-C,b=x+C}else y=(this.pixelViewport.left-g)/d,b=(this.pixelViewport.right+g)/d;h=Hu(p,y),f=Hu(p,b)}h>c.from&&l(c.from,h,c,p),f<c.to&&l(f,c.to,c,p)}return u}gapSize(t,n,r,s){let a=zu(s,r)-zu(s,n);return this.heightOracle.lineWrapping?t.height*a:s.total*this.heightOracle.charWidth*a}updateLineGaps(t){od.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Zt.set(t.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Hr.spans(t,this.viewport.from,this.viewport.to,{span(s,a){n.push({from:s,to:a})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((s,a)=>s.from!=n[a].from||s.to!=n[a].to);return this.visibleRanges=n,r?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(n=>n.from<=t&&n.to>=t)||Il(this.heightMap.lineAt(t,un.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return Il(this.heightMap.lineAt(this.scaler.fromDOM(t),un.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(t){return Il(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Gu{constructor(t,n){this.from=t,this.to=n}}function $S(i,t,n){let r=[],s=i,a=0;return Hr.spans(n,i,t,{span(){},point(o,u){o>s&&(r.push({from:s,to:o}),a+=o-s),s=u}},20),s<t&&(r.push({from:s,to:t}),a+=t-s),{total:a,ranges:r}}function Hu({total:i,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(i*n);for(let s=0;;s++){let{from:a,to:o}=t[s],u=o-a;if(r<=u)return a+r;r-=u}}function zu(i,t){let n=0;for(let{from:r,to:s}of i.ranges){if(t<=s){n+=t-r;break}n+=s-r}return n/i.total}function XS(i,t){for(let n of i)if(t(n))return n}const yg={toDOM(i){return i},fromDOM(i){return i},scale:1};class YS{constructor(t,n,r){let s=0,a=0,o=0;this.viewports=r.map(({from:u,to:l})=>{let c=n.lineAt(u,un.ByPos,t,0,0).top,p=n.lineAt(l,un.ByPos,t,0,0).bottom;return s+=p-c,{from:u,to:l,top:c,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let u of this.viewports)u.domTop=o+(u.top-a)*this.scale,o=u.domBottom=u.domTop+(u.bottom-u.top),a=u.bottom}toDOM(t){for(let n=0,r=0,s=0;;n++){let a=n<this.viewports.length?this.viewports[n]:null;if(!a||t<a.top)return s+(t-r)*this.scale;if(t<=a.bottom)return a.domTop+(t-a.top);r=a.bottom,s=a.domBottom}}fromDOM(t){for(let n=0,r=0,s=0;;n++){let a=n<this.viewports.length?this.viewports[n]:null;if(!a||t<a.domTop)return r+(t-s)/this.scale;if(t<=a.domBottom)return a.top+(t-a.domTop);r=a.bottom,s=a.domBottom}}}function Il(i,t){if(t.scale==1)return i;let n=t.toDOM(i.top),r=t.toDOM(i.bottom);return new Vs(i.from,i.length,n,r-n,Array.isArray(i.type)?i.type.map(s=>Il(s,t)):i.type)}const Wu=Vt.define({combine:i=>i.join(" ")}),mf=Vt.define({combine:i=>i.indexOf(!0)>-1}),gf=ko.newName(),$v=ko.newName(),Xv=ko.newName(),Yv={"&light":"."+$v,"&dark":"."+Xv};function yf(i,t,n){return new ko(t,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return i;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):i+" "+r}})}const KS=yf("."+gf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Yv);class JS{constructor(t,n,r,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=t.docView.domBoundsAround(n,r,0))){let u=a||o?[]:ZS(t),l=new Pv(u,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=e2(u,this.bounds.from)}else{let u=t.observer.selectionRange,l=a&&a.node==u.focusNode&&a.offset==u.focusOffset||!Ka(t.contentDOM,u.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(u.focusNode,u.focusOffset),c=o&&o.node==u.anchorNode&&o.offset==u.anchorOffset||!Ka(t.contentDOM,u.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=yt.single(c,l)}}}function Kv(i,t){let n,{newSel:r}=t,s=i.state.selection.main;if(t.bounds){let{from:a,to:o}=t.bounds,u=s.from,l=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||Ft.android&&t.text.length<o-a)&&(u=s.to,l="end");let c=QS(i.state.doc.sliceString(a,o,go),t.text,u-a,l);c&&(Ft.chrome&&i.inputState.lastKeyCode==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==go+go&&c.toB--,n={from:a+c.from,to:a+c.toA,insert:Lr.of(t.text.slice(c.from,c.toB).split(go))})}else r&&(!i.hasFocus&&i.state.facet(bh)||r.main.eq(s))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!s.empty&&r&&r.main.empty?n={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,n.from).append(n.insert).append(i.state.doc.slice(n.to,s.to))}:(Ft.mac||Ft.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=yt.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:Lr.of([" "])}):Ft.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&i.lineWrapping&&(r&&(r=yt.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:Lr.of([" "])}),n){let a=i.state;if(Ft.ios&&i.inputState.flushIOSKey(i)||Ft.android&&(n.from==s.from&&n.to==s.to&&n.insert.length==1&&n.insert.lines==2&&Va(i.contentDOM,"Enter",13)||n.from==s.from-1&&n.to==s.to&&n.insert.length==0&&Va(i.contentDOM,"Backspace",8)||n.from==s.from&&n.to==s.to+1&&n.insert.length==0&&Va(i.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();if(i.state.facet(Sv).some(c=>c(i,n.from,n.to,o)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let u;if(n.from>=s.from&&n.to<=s.to&&n.to-n.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&i.inputState.composing<0){let c=s.from<n.from?a.sliceDoc(s.from,n.from):"",p=s.to>n.to?a.sliceDoc(n.to,s.to):"";u=a.replaceSelection(i.state.toText(c+n.insert.sliceString(0,void 0,i.state.lineBreak)+p))}else{let c=a.changes(n),p=r&&!a.selection.main.eq(r.main)&&r.main.to<=c.newLength?r.main:void 0;if(a.selection.ranges.length>1&&i.inputState.composing>=0&&n.to<=s.to&&n.to>=s.to-10){let m=i.state.sliceDoc(n.from,n.to),h=Rv(i)||i.state.doc.lineAt(s.head),f=s.to-n.to,d=s.to-s.from;u=a.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:c,range:p||g.map(c)};let y=g.to-f,b=y-m.length;if(g.to-g.from!=d||i.state.sliceDoc(b,y)!=m||h&&g.to>=h.from&&g.from<=h.to)return{range:g};let x=a.changes({from:b,to:y,insert:n.insert}),C=g.to-s.to;return{changes:x,range:p?yt.range(Math.max(0,p.anchor+C),Math.max(0,p.head+C)):g.map(x)}})}else u={changes:c,selection:p&&a.selection.replaceRange(p)}}let l="input.type";return i.composing&&(l+=".compose",i.inputState.compositionFirstChange&&(l+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(u,{scrollIntoView:!0,userEvent:l}),!0}else if(r&&!r.main.eq(s)){let a=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(a=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:r,scrollIntoView:a,userEvent:o}),!0}else return!1}function QS(i,t,n,r){let s=Math.min(i.length,t.length),a=0;for(;a<s&&i.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==s&&i.length==t.length)return null;let o=i.length,u=t.length;for(;o>0&&u>0&&i.charCodeAt(o-1)==t.charCodeAt(u-1);)o--,u--;if(r=="end"){let l=Math.max(0,a-Math.min(o,u));n-=o+l-a}if(o<a&&i.length<t.length){let l=n<=a&&n>=o?a-n:0;a-=l,u=a+(u-o),o=a}else if(u<a){let l=n<=a&&n>=u?a-n:0;a-=l,o=a+(o-u),u=a}return{from:a,toA:o,toB:u}}function ZS(i){let t=[];if(i.root.activeElement!=i.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}=i.observer.selectionRange;return n&&(t.push(new Qm(n,r)),(s!=n||a!=r)&&t.push(new Qm(s,a))),t}function e2(i,t){if(i.length==0)return null;let n=i[0].pos,r=i.length==2?i[1].pos:n;return n>-1&&r>-1?yt.single(n+t,r+t):null}const t2={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ad=Ft.ie&&Ft.ie_version<=11;class r2{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Yx,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ft.ie&&Ft.ie_version<=11||Ft.ios&&t.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),ad&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((n,r)=>n!=t[r]))){this.gapIntersection.disconnect();for(let n of t)this.gapIntersection.observe(n);this.gaps=t}}onSelectionChange(t){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(bh)?r.root.activeElement!=this.dom:!uc(r.dom,s))return;let a=s.anchorNode&&r.docView.nearest(s.anchorNode);if(a&&a.ignoreEvent(t)){n||(this.selectionChanged=!1);return}(Ft.ie&&Ft.ie_version<=11||Ft.android&&Ft.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Sc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,n=Ft.safari&&t.root.nodeType==11&&Wx(this.dom.ownerDocument)==this.dom&&n2(this.view)||xc(t.root);if(!n||this.selectionRange.eq(n))return!1;let r=uc(this.dom,n);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Jx(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,n){this.selectionRange.set(t.node,t.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&t<this.scrollTargets.length&&this.scrollTargets[t]==r?t++:n||(n=this.scrollTargets.slice(0,t)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(t<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,t)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,t2),ad&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ad&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,n){var r;if(!this.delayedAndroidKey){let s=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),!this.flush()&&a.force&&Va(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let a of this.observer.takeRecords())t.push(a);t.length&&(this.queue=[]);let n=-1,r=-1,s=!1;for(let a of t){let o=this.readMutation(a);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:s}}readChange(){let{from:t,to:n,typeOver:r}=this.processRecords(),s=this.selectionChanged&&uc(this.dom,this.selectionRange);return t<0&&!s?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new JS(this.view,t,n,r))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,s=Kv(this.view,n);return this.view.state==r&&this.view.update([]),s}readMutation(t){let n=this.view.docView.nearest(t.target);if(!n||n.ignoreMutation(t))return null;if(n.markDirty(t.type=="attributes"),t.type=="attributes"&&(n.dirty|=4),t.type=="childList"){let r=vg(n,t.previousSibling||t.target.previousSibling,-1),s=vg(n,t.nextSibling||t.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,n,r,s;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(s=this.resizeContent)===null||s===void 0||s.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function vg(i,t,n){for(;t;){let r=cn.get(t);if(r&&r.parent==i)return r;let s=t.parentNode;t=s!=i.dom?s:n>0?t.nextSibling:t.previousSibling}return null}function n2(i){let t=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,s=t.startOffset,a=t.endContainer,o=t.endOffset,u=i.docView.domAtPos(i.state.selection.main.anchor);return Sc(u.node,u.offset,a,o)&&([r,s,a,o]=[a,o,r,s]),{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}}class Ht{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=t.root||Kx(t.parent)||document,this.viewState=new gg(t.state||Mr.create(t)),this.plugins=this.state.facet(Al).map(n=>new nd(n));for(let n of this.plugins)n.update(this);this.observer=new r2(this),this.inputState=new jS(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Zm(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof Bn?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,s,a=this.state;for(let h of t){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,u=0,l=null;t.some(h=>h.annotation(Hv))?(this.inputState.notifiedFocused=o,u=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=zv(a,o),l||(u=1));let c=this.observer.delayedAndroidKey,p=null;if(c?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(p=null)):this.observer.clear(),a.facet(Mr.phrases)!=this.state.facet(Mr.phrases))return this.setState(a);s=Tc.create(this,a,t),s.flags|=u;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let h of t){if(m&&(m=m.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;m=new jc(f.empty?f:yt.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Km)&&(m=f.value)}this.viewState.update(s,m),this.bidiCache=kc.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(Ol)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Wu)!=s.state.facet(Wu)&&(this.viewState.mustMeasureContent=!0),(n||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let h of this.state.facet(uf))h(s);(l||p)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),p&&!Kv(this,p)&&c.force&&Va(this.contentDOM,c.key,c.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new gg(t),this.plugins=t.facet(Al).map(r=>new nd(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new Zm(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(t){let n=t.startState.facet(Al),r=t.state.facet(Al);if(n!=r){let s=[];for(let a of r){let o=n.indexOf(a);if(o<0)s.push(new nd(a));else{let u=this.plugins[o];u.mustUpdate=t,s.push(u)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let n=null,{scrollHeight:r,scrollTop:s,clientHeight:a}=this.scrollDOM,o=s>r-a-4?r:s;try{for(let u=0;;u++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(o),p=this.viewState.measure(this);if(!p&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];p&4||([this.measureRequests,m]=[m,this.measureRequests]);let h=m.map(y=>{try{return y.read(this)}catch(b){return Gi(this.state,b),bg}}),f=Tc.create(this,this.state,[]),d=!1,g=!1;f.flags|=p,n?n.flags|=p:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f));for(let y=0;y<m.length;y++)if(h[y]!=bg)try{let b=m[y];b.write&&b.write(h[y],this)}catch(b){Gi(this.state,b)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,g=!0)}if(d&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let u of this.state.facet(uf))u(n)}get themeClasses(){return gf+" "+(this.state.facet(mf)?Xv:$v)+" "+this.state.facet(Wu)}updateAttrs(){let t=_g(this,kv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(bh)?"true":"false",class:"cm-content",style:`${Ft.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),_g(this,op,n);let r=this.observer.ignore(()=>{let s=af(this.contentDOM,this.contentAttrs,n),a=af(this.dom,this.editorAttrs,t);return s||a});return this.editorAttrs=t,this.contentAttrs=n,r}showAnnouncements(t){let n=!0;for(let r of t)for(let s of r.effects)if(s.is(Ht.announce)){n&&(this.announceDOM.textContent=""),n=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ol),ko.mount(this.root,this.styleModules.concat(KS).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===t.key){this.measureRequests[n]=t;return}}this.measureRequests.push(t)}}plugin(t){let n=this.pluginMap.get(t);return(n===void 0||n&&n.spec!=t)&&this.pluginMap.set(t,n=this.plugins.find(r=>r.spec==t)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,n,r){return sd(this,t,sg(this,t,n,r))}moveByGroup(t,n){return sd(this,t,sg(this,t,n,r=>SS(this,t.head,r)))}moveToLineBoundary(t,n,r=!0){return xS(this,t,n,r)}moveVertically(t,n,r){return sd(this,t,CS(this,t,n,r))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,n=0){return this.docView.posFromDOM(t,n)}posAtCoords(t,n=!0){return this.readMeasured(),Lv(this,t,n)}coordsAtPos(t,n=1){this.readMeasured();let r=this.docView.coordsAt(t,n);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(t),a=this.bidiSpans(s),o=a[Ga.find(a,t-s.from,-1,n)];return rp(r,o.dir==vn.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(jv)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>i2)return Ov(t.length);let n=this.textDirectionAt(t.from);for(let s of this.bidiCache)if(s.from==t.from&&s.dir==n)return s.order;let r=lS(t.text,n);return this.bidiCache.push(new kc(t.from,t.to,n,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Ft.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ov(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,n={}){return Km.of(new jc(typeof t=="number"?yt.cursor(t):t,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(t){return An.define(()=>({}),{eventHandlers:t})}static theme(t,n){let r=ko.newName(),s=[Wu.of(r),Ol.of(yf(`.${r}`,t))];return n&&n.dark&&s.push(mf.of(!0)),s}static baseTheme(t){return hl.lowest(Ol.of(yf("."+gf,t,Yv)))}static findFromDOM(t){var n;let r=t.querySelector(".cm-content"),s=r&&cn.get(r)||cn.get(t);return((n=s==null?void 0:s.rootView)===null||n===void 0?void 0:n.view)||null}}Ht.styleModule=Ol;Ht.inputHandler=Sv;Ht.focusChangeEffect=Cv;Ht.perLineTextDirection=jv;Ht.exceptionSink=xv;Ht.updateListener=uf;Ht.editable=bh;Ht.mouseSelectionStyle=wv;Ht.dragMovesSelection=_v;Ht.clickAddsSelectionRange=bv;Ht.decorations=Xl;Ht.atomicRanges=Ev;Ht.scrollMargins=Mv;Ht.darkTheme=mf;Ht.contentAttributes=op;Ht.editorAttributes=kv;Ht.lineWrapping=Ht.contentAttributes.of({class:"cm-lineWrapping"});Ht.announce=pr.define();const i2=4096,bg={};class kc{constructor(t,n,r,s){this.from=t,this.to=n,this.dir=r,this.order=s}static update(t,n){if(n.empty)return t;let r=[],s=t.length?t[t.length-1].dir:vn.LTR;for(let a=Math.max(0,t.length-10);a<t.length;a++){let o=t[a];o.dir==s&&!n.touchesRange(o.from,o.to)&&r.push(new kc(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function _g(i,t,n){for(let r=i.state.facet(t),s=r.length-1;s>=0;s--){let a=r[s],o=typeof a=="function"?a(i):a;o&&of(o,n)}return n}const s2=Ft.mac?"mac":Ft.windows?"win":Ft.linux?"linux":"key";function o2(i,t){const n=i.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let s,a,o,u;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))u=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))t=="mac"?u=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(r="Alt-"+r),a&&(r="Ctrl-"+r),u&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function qu(i,t,n){return t.altKey&&(i="Alt-"+i),t.ctrlKey&&(i="Ctrl-"+i),t.metaKey&&(i="Meta-"+i),n!==!1&&t.shiftKey&&(i="Shift-"+i),i}const a2=hl.default(Ht.domEventHandlers({keydown(i,t){return Qv(Jv(t.state),i,t,"editor")}})),lp=Vt.define({enables:a2}),wg=new WeakMap;function Jv(i){let t=i.facet(lp),n=wg.get(t);return n||wg.set(t,n=c2(t.reduce((r,s)=>r.concat(s),[]))),n}function l2(i,t,n){return Qv(Jv(i.state),t,i,n)}let uo=null;const u2=4e3;function c2(i,t=s2){let n=Object.create(null),r=Object.create(null),s=(o,u)=>{let l=r[o];if(l==null)r[o]=u;else if(l!=u)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,u,l,c)=>{var p,m;let h=n[o]||(n[o]=Object.create(null)),f=u.split(/ (?!$)/).map(y=>o2(y,t));for(let y=1;y<f.length;y++){let b=f.slice(0,y).join(" ");s(b,!0),h[b]||(h[b]={preventDefault:!0,run:[x=>{let C=uo={view:x,prefix:b,scope:o};return setTimeout(()=>{uo==C&&(uo=null)},u2),!0}]})}let d=f.join(" ");s(d,!1);let g=h[d]||(h[d]={preventDefault:!1,run:((m=(p=h._any)===null||p===void 0?void 0:p.run)===null||m===void 0?void 0:m.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0)};for(let o of i){let u=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of u){let p=n[c]||(n[c]=Object.create(null));p._any||(p._any={preventDefault:!1,run:[]});for(let m in p)p[m].run.push(o.any)}let l=o[t]||o.key;if(l)for(let c of u)a(c,l,o.run,o.preventDefault),o.shift&&a(c,"Shift-"+l,o.shift,o.preventDefault)}return n}function Qv(i,t,n,r){let s=zx(t),a=Yn(s,0),o=Yi(a)==s.length&&s!=" ",u="",l=!1;uo&&uo.view==n&&uo.scope==r&&(u=uo.prefix+" ",(l=Bv.indexOf(t.keyCode)<0)&&(uo=null));let c=new Set,p=d=>{if(d){for(let g of d.run)if(!c.has(g)&&(c.add(g),g(n,t)))return!0;d.preventDefault&&(l=!0)}return!1},m=i[r],h,f;if(m){if(p(m[u+qu(s,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Ft.windows&&t.ctrlKey&&t.altKey)&&(h=Eo[t.keyCode])&&h!=s){if(p(m[u+qu(h,t,!0)]))return!0;if(t.shiftKey&&(f=Wl[t.keyCode])!=s&&f!=h&&p(m[u+qu(f,t,!1)]))return!0}else if(o&&t.shiftKey&&p(m[u+qu(s,t,!0)]))return!0;if(p(m._any))return!0}return l}class vu{constructor(t,n,r,s,a){this.className=t,this.left=n,this.top=r,this.width=s,this.height=a}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,n){return n.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,n,r){if(r.empty){let s=t.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let a=Zv(t);return[new vu(n,s.left-a.left,s.top-a.top,null,s.bottom-s.top)]}else return h2(t,n,r)}}function Zv(i){let t=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==vn.LTR?t.left:t.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:t.top-i.scrollDOM.scrollTop}}function xg(i,t,n){let r=yt.cursor(t);return{from:Math.max(n.from,i.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,i.moveToLineBoundary(r,!0,!0).from),type:Qr.Text}}function Sg(i,t){let n=i.lineBlockAt(t);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==Qr.Text))return r}return n}function h2(i,t,n){if(n.to<=i.viewport.from||n.from>=i.viewport.to)return[];let r=Math.max(n.from,i.viewport.from),s=Math.min(n.to,i.viewport.to),a=i.textDirection==vn.LTR,o=i.contentDOM,u=o.getBoundingClientRect(),l=Zv(i),c=window.getComputedStyle(o.firstChild),p=u.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),m=u.right-parseInt(c.paddingRight),h=Sg(i,r),f=Sg(i,s),d=h.type==Qr.Text?h:null,g=f.type==Qr.Text?f:null;if(i.lineWrapping&&(d&&(d=xg(i,r,d)),g&&(g=xg(i,s,g))),d&&g&&d.from==g.from)return b(x(n.from,n.to,d));{let S=d?x(n.from,null,d):C(h,!1),w=g?x(null,n.to,g):C(f,!0),_=[];return(d||h).to<(g||f).from-1?_.push(y(p,S.bottom,m,w.top)):S.bottom<w.top&&i.elementAtHeight((S.bottom+w.top)/2).type==Qr.Text&&(S.bottom=w.top=(S.bottom+w.top)/2),b(S).concat(_).concat(b(w))}function y(S,w,_,M){return new vu(t,S-l.left,w-l.top-.01,_-S,M-w+.01)}function b({top:S,bottom:w,horizontal:_}){let M=[];for(let I=0;I<_.length;I+=2)M.push(y(_[I],S,_[I+1],w));return M}function x(S,w,_){let M=1e9,I=-1e9,R=[];function P(F,z,J,Q,Z){let K=i.coordsAtPos(F,F==_.to?-2:2),H=i.coordsAtPos(J,J==_.from?2:-2);M=Math.min(K.top,H.top,M),I=Math.max(K.bottom,H.bottom,I),Z==vn.LTR?R.push(a&&z?p:K.left,a&&Q?m:H.right):R.push(!a&&Q?p:H.left,!a&&z?m:K.right)}let D=S??_.from,U=w??_.to;for(let F of i.visibleRanges)if(F.to>D&&F.from<U)for(let z=Math.max(F.from,D),J=Math.min(F.to,U);;){let Q=i.state.doc.lineAt(z);for(let Z of i.bidiSpans(Q)){let K=Z.from+Q.from,H=Z.to+Q.from;if(K>=J)break;H>z&&P(Math.max(K,z),S==null&&K<=D,Math.min(H,J),w==null&&H>=U,Z.dir)}if(z=Q.to+1,z>=J)break}return R.length==0&&P(D,S==null,U,w==null,i.textDirection),{top:M,bottom:I,horizontal:R}}function C(S,w){let _=u.top+(w?S.top:S.bottom);return{top:_,bottom:_,horizontal:[]}}}function d2(i,t){return i.constructor==t.constructor&&i.eq(t)}class f2{constructor(t,n){this.view=t,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,t)}update(t){t.startState.facet(hc)!=t.state.facet(hc)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let n=0,r=t.facet(hc);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some((n,r)=>!d2(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let s of t)s.update&&n&&s.constructor&&this.drawn[r].constructor&&s.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const hc=Vt.define();function eb(i){return[An.define(t=>new f2(t,i)),hc.of(i)]}const tb=!Ft.ios,Yl=Vt.define({combine(i){return Ps(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,n)=>Math.min(t,n),drawRangeCursor:(t,n)=>t||n})}});function p2(i={}){return[Yl.of(i),m2,g2,y2,Tv.of(!0)]}function rb(i){return i.startState.facet(Yl)!=i.state.facet(Yl)}const m2=eb({above:!0,markers(i){let{state:t}=i,n=t.facet(Yl),r=[];for(let s of t.selection.ranges){let a=s==t.selection.main;if(s.empty?!a||tb:n.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=s.empty?s:yt.cursor(s.head,s.head>s.anchor?-1:1);for(let l of vu.forRange(i,o,u))r.push(l)}}return r},update(i,t){i.transactions.some(r=>r.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=rb(i);return n&&Cg(i.state,t),i.docChanged||i.selectionSet||n},mount(i,t){Cg(t.state,i)},class:"cm-cursorLayer"});function Cg(i,t){t.style.animationDuration=i.facet(Yl).cursorBlinkRate+"ms"}const g2=eb({above:!1,markers(i){return i.state.selection.ranges.map(t=>t.empty?[]:vu.forRange(i,"cm-selectionBackground",t)).reduce((t,n)=>t.concat(n))},update(i,t){return i.docChanged||i.selectionSet||i.viewportChanged||rb(i)},class:"cm-selectionLayer"}),nb={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};tb&&(nb[".cm-line"].caretColor="transparent !important");const y2=hl.highest(Ht.theme(nb)),ib=pr.define({map(i,t){return i==null?null:t.mapPos(i)}}),Pl=Qn.define({create(){return null},update(i,t){return i!=null&&(i=t.changes.mapPos(i)),t.effects.reduce((n,r)=>r.is(ib)?r.value:n,i)}}),v2=An.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var t;let n=i.state.field(Pl);n==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Pl)!=n||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let i=this.view.state.field(Pl),t=i!=null&&this.view.coordsAtPos(i);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(i){this.cursor&&(i?(this.cursor.style.left=i.left+"px",this.cursor.style.top=i.top+"px",this.cursor.style.height=i.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Pl)!=i&&this.view.dispatch({effects:ib.of(i)})}},{eventHandlers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function b2(){return[Pl,v2]}function jg(i,t,n,r,s){t.lastIndex=0;for(let a=i.iterRange(n,r),o=n,u;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;u=t.exec(a.value);)s(o+u.index,u)}function _2(i,t){let n=i.visibleRanges;if(n.length==1&&n[0].from==i.viewport.from&&n[0].to==i.viewport.to)return n;let r=[];for(let{from:s,to:a}of n)s=Math.max(i.state.doc.lineAt(s).from,s-t),a=Math.min(i.state.doc.lineAt(a).to,a+t),r.length&&r[r.length-1].to>=s?r[r.length-1].to=a:r.push({from:s,to:a});return r}class w2{constructor(t){const{regexp:n,decoration:r,decorate:s,boundary:a,maxLength:o=1e3}=t;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(u,l,c,p)=>s(p,c,c+u[0].length,u,l);else if(typeof r=="function")this.addMatch=(u,l,c,p)=>{let m=r(u,l,c);m&&p(c,c+u[0].length,m)};else if(r)this.addMatch=(u,l,c,p)=>p(c,c+u[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(t){let n=new To,r=n.add.bind(n);for(let{from:s,to:a}of _2(t,this.maxLength))jg(t.state.doc,this.regexp,s,a,(o,u)=>this.addMatch(u,t,o,r));return n.finish()}updateDeco(t,n){let r=1e9,s=-1;return t.docChanged&&t.changes.iterChanges((a,o,u,l)=>{l>t.view.viewport.from&&u<t.view.viewport.to&&(r=Math.min(u,r),s=Math.max(l,s))}),t.viewportChanged||s-r>1e3?this.createDeco(t.view):s>-1?this.updateRange(t.view,n.map(t.changes),r,s):n}updateRange(t,n,r,s){for(let a of t.visibleRanges){let o=Math.max(a.from,r),u=Math.min(a.to,s);if(u>o){let l=t.state.doc.lineAt(o),c=l.to<u?t.state.doc.lineAt(u):l,p=Math.max(a.from,l.from),m=Math.min(a.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){p=o;break}for(;u<c.to;u++)if(this.boundary.test(c.text[u-c.from])){m=u;break}}let h=[],f,d=(g,y,b)=>h.push(b.range(g,y));if(l==c)for(this.regexp.lastIndex=p-l.from;(f=this.regexp.exec(l.text))&&f.index<m-l.from;)this.addMatch(f,t,f.index+l.from,d);else jg(t.state.doc,this.regexp,p,m,(g,y)=>this.addMatch(y,t,g,d));n=n.update({filterFrom:p,filterTo:m,filter:(g,y)=>g<p||y>m,add:h})}}return n}}const vf=/x/.unicode!=null?"gu":"g",x2=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,vf),S2={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ld=null;function C2(){var i;if(ld==null&&typeof document<"u"&&document.body){let t=document.body.style;ld=((i=t.tabSize)!==null&&i!==void 0?i:t.MozTabSize)!=null}return ld||!1}const dc=Vt.define({combine(i){let t=Ps(i,{render:null,specialChars:x2,addSpecialChars:null});return(t.replaceTabs=!C2())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,vf)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,vf)),t}});function j2(i={}){return[dc.of(i),T2()]}let Tg=null;function T2(){return Tg||(Tg=An.fromClass(class{constructor(i){this.view=i,this.decorations=Zt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(dc)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new w2({regexp:i.specialChars,decoration:(t,n,r)=>{let{doc:s}=n.state,a=Yn(t[0],0);if(a==9){let o=s.lineAt(r),u=n.state.tabSize,l=gu(o.text,u,r-o.from);return Zt.replace({widget:new A2((u-l%u)*this.view.defaultCharacterWidth)})}return this.decorationCache[a]||(this.decorationCache[a]=Zt.replace({widget:new M2(i,a)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let t=i.state.facet(dc);i.startState.facet(dc)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const k2="â¢";function E2(i){return i>=32?k2:i==10?"â¤":String.fromCharCode(9216+i)}class M2 extends Ro{constructor(t,n){super(),this.options=t,this.code=n}eq(t){return t.code==this.code}toDOM(t){let n=E2(this.code),r=t.state.phrase("Control character")+" "+(S2[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,r,n);if(s)return s;let a=document.createElement("span");return a.textContent=n,a.title=r,a.setAttribute("aria-label",r),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class A2 extends Ro{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function O2(){return P2}const I2=Zt.line({class:"cm-activeLine"}),P2=An.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=-1,n=[];for(let r of i.state.selection.ranges){let s=i.lineBlockAt(r.head);s.from>t&&(n.push(I2.range(s.from)),t=s.from)}return Zt.set(n)}},{decorations:i=>i.decorations}),bf=2e3;function R2(i,t,n){let r=Math.min(t.line,n.line),s=Math.max(t.line,n.line),a=[];if(t.off>bf||n.off>bf||t.col<0||n.col<0){let o=Math.min(t.off,n.off),u=Math.max(t.off,n.off);for(let l=r;l<=s;l++){let c=i.doc.line(l);c.length<=u&&a.push(yt.range(c.from+o,c.to+u))}}else{let o=Math.min(t.col,n.col),u=Math.max(t.col,n.col);for(let l=r;l<=s;l++){let c=i.doc.line(l),p=Jd(c.text,o,i.tabSize,!0);if(p<0)a.push(yt.cursor(c.to));else{let m=Jd(c.text,u,i.tabSize);a.push(yt.range(c.from+p,c.from+m))}}}return a}function D2(i,t){let n=i.coordsAtPos(i.viewport.from);return n?Math.round(Math.abs((n.left-t)/i.defaultCharacterWidth)):-1}function kg(i,t){let n=i.posAtCoords({x:t.clientX,y:t.clientY},!1),r=i.state.doc.lineAt(n),s=n-r.from,a=s>bf?-1:s==r.length?D2(i,t.clientX):gu(r.text,i.state.tabSize,n-r.from);return{line:r.number,col:a,off:s}}function L2(i,t){let n=kg(i,t),r=i.state.selection;return n?{update(s){if(s.docChanged){let a=s.changes.mapPos(s.startState.doc.line(n.line).from),o=s.state.doc.lineAt(a);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(s.changes)}},get(s,a,o){let u=kg(i,s);if(!u)return r;let l=R2(i.state,n,u);return l.length?o?yt.create(l.concat(r.ranges)):yt.create(l):r}}:null}function N2(i){let t=(i==null?void 0:i.eventFilter)||(n=>n.altKey&&n.button==0);return Ht.mouseSelectionStyle.of((n,r)=>t(r)?L2(n,r):null)}const B2={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},F2={style:"cursor: crosshair"};function U2(i={}){let[t,n]=B2[i.key||"Alt"],r=An.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==t||n(s))},keyup(s){(s.keyCode==t||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[r,Ht.contentAttributes.of(s=>{var a;return!((a=s.plugin(r))===null||a===void 0)&&a.isDown?F2:null})]}const $u="-10000px";class sb{constructor(t,n,r){this.facet=n,this.createTooltipView=r,this.input=t.state.facet(n),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(r)}update(t){var n;let r=t.state.facet(this.facet),s=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let a=[];for(let o=0;o<s.length;o++){let u=s[o],l=-1;if(u){for(let c=0;c<this.tooltips.length;c++){let p=this.tooltips[c];p&&p.create==u.create&&(l=c)}if(l<0)a[o]=this.createTooltipView(u);else{let c=a[o]=this.tooltipViews[l];c.update&&c.update(t)}}}for(let o of this.tooltipViews)a.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=s,this.tooltipViews=a,!0}}function V2(i){let{win:t}=i;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const ud=Vt.define({combine:i=>{var t,n,r;return{position:Ft.ios?"absolute":((t=i.find(s=>s.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((n=i.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=i.find(s=>s.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||V2}}}),Eg=new WeakMap,ob=An.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=i.state.facet(ud);this.position=t.position,this.parent=t.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new sb(i,up,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(i);t&&this.observeIntersection();let n=t||i.geometryChanged,r=i.state.facet(ud);if(r.position!=this.position){this.position=r.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(i){let t=i.create(this.view);if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=$u,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var i,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((t,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(ud).tooltipSpace(this.view)}}writeMeasure(i){var t;let{editor:n,space:r}=i,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let o=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:l}=u,c=i.pos[a],p=i.size[a];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){l.style.top=$u;continue}let m=o.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,h=m?7:0,f=p.right-p.left,d=(t=Eg.get(u))!==null&&t!==void 0?t:p.bottom-p.top,g=u.offset||H2,y=this.view.textDirection==vn.LTR,b=p.width>r.right-r.left?y?r.left:r.right-p.width:y?Math.min(c.left-(m?14:0)+g.x,r.right-f):Math.max(r.left,c.left-f+(m?14:0)-g.x),x=!!o.above;!o.strictSide&&(x?c.top-(p.bottom-p.top)-g.y<r.top:c.bottom+(p.bottom-p.top)+g.y>r.bottom)&&x==r.bottom-c.bottom>c.top-r.top&&(x=!x);let C=(x?c.top-r.top:r.bottom-c.bottom)-h;if(C<d&&u.resize!==!1){if(C<this.view.defaultLineHeight){l.style.top=$u;continue}Eg.set(u,d),l.style.height=(d=C)+"px"}else l.style.height&&(l.style.height="");let S=x?c.top-d-h-g.y:c.bottom+h+g.y,w=b+f;if(u.overlap!==!0)for(let _ of s)_.left<w&&_.right>b&&_.top<S+d&&_.bottom>S&&(S=x?_.top-d-2-h:_.bottom+h+2);this.position=="absolute"?(l.style.top=S-i.parent.top+"px",l.style.left=b-i.parent.left+"px"):(l.style.top=S+"px",l.style.left=b+"px"),m&&(m.style.left=`${c.left+(y?g.x:-g.x)-(b+14-7)}px`),u.overlap!==!0&&s.push({left:b,top:S,right:w,bottom:S+d}),l.classList.toggle("cm-tooltip-above",x),l.classList.toggle("cm-tooltip-below",!x),u.positioned&&u.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=$u}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),G2=Ht.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),H2={x:0,y:0},up=Vt.define({enables:[ob,G2]}),Ec=Vt.define();class cp{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new sb(t,Ec,n=>this.createHostedView(n))}static create(t){return new cp(t)}createHostedView(t){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let n of this.manager.tooltipViews)n.mount&&n.mount(t);this.mounted=!0}positioned(t){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(t)}update(t){this.manager.update(t)}}const z2=up.compute([Ec],i=>{let t=i.facet(Ec).filter(n=>n);return t.length===0?null:{pos:Math.min(...t.map(n=>n.pos)),end:Math.max(...t.filter(n=>n.end!=null).map(n=>n.end)),create:cp.create,above:t[0].above,arrow:t.some(n=>n.arrow)}});class W2{constructor(t,n,r,s,a){this.view=t,this.source=n,this.field=r,this.setHover=s,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),a=s&&s.dir==vn.RTL?-1:1,o=this.source(this.view,n,t.x<r.left?-a:a);if(o!=null&&o.then){let u=this.pending={pos:n};o.then(l=>{this.pending==u&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Gi(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(t){var n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!Mg(this.lastMove.target)||this.pending){let{pos:s}=r||this.pending,a=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!q2(this.view,s,a,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Mg(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Mg(i){for(let t=i;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function q2(i,t,n,r,s,a){let o=document.createRange(),u=i.domAtPos(t),l=i.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(u.node,u.offset);let c=o.getClientRects();o.detach();for(let p=0;p<c.length;p++){let m=c[p];if(Math.max(m.top-s,s-m.bottom,m.left-r,r-m.right)<=a)return!0}return!1}function $2(i,t={}){let n=pr.define(),r=Qn.define({create(){return null},update(s,a){if(s&&(t.hideOnChange&&(a.docChanged||a.selection)||t.hideOn&&t.hideOn(a,s)))return null;if(s&&a.docChanged){let o=a.changes.mapPos(s.pos,-1,bi.TrackDel);if(o==null)return null;let u=Object.assign(Object.create(null),s);u.pos=o,s.end!=null&&(u.end=a.changes.mapPos(s.end)),s=u}for(let o of a.effects)o.is(n)&&(s=o.value),o.is(Y2)&&(s=null);return s},provide:s=>Ec.from(s)});return[r,An.define(s=>new W2(s,i,r,n,t.hoverTime||300)),z2]}function X2(i,t){let n=i.plugin(ob);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const Y2=pr.define(),Ag=Vt.define({combine(i){let t,n;for(let r of i)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Kl(i,t){let n=i.plugin(ab),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const ab=An.fromClass(class{constructor(i){this.input=i.state.facet(Jl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(i));let t=i.state.facet(Ag);this.top=new Xu(i,!0,t.topContainer),this.bottom=new Xu(i,!1,t.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(i){let t=i.state.facet(Ag);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Xu(i.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Xu(i.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=i.state.facet(Jl);if(n!=this.input){let r=n.filter(l=>l),s=[],a=[],o=[],u=[];for(let l of r){let c=this.specs.indexOf(l),p;c<0?(p=l(i.view),u.push(p)):(p=this.panels[c],p.update&&p.update(i)),s.push(p),(p.top?a:o).push(p)}this.specs=r,this.panels=s,this.top.sync(a),this.bottom.sync(o);for(let l of u)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>Ht.scrollMargins.of(t=>{let n=t.plugin(i);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Xu{constructor(t,n,r){this.view=t,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let n of this.panels)n.destroy&&t.indexOf(n)<0&&n.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let t=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;t!=n.dom;)t=Og(t);t=t.nextSibling}else this.dom.insertBefore(n.dom,t);for(;t;)t=Og(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Og(i){let t=i.nextSibling;return i.remove(),t}const Jl=Vt.define({enables:ab});class Xs extends sa{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Xs.prototype.elementClass="";Xs.prototype.toDOM=void 0;Xs.prototype.mapMode=bi.TrackBefore;Xs.prototype.startSide=Xs.prototype.endSide=-1;Xs.prototype.point=!0;const fc=Vt.define(),K2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Hr.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ll=Vt.define();function J2(i){return[lb(),Ll.of(Object.assign(Object.assign({},K2),i))]}const _f=Vt.define({combine:i=>i.some(t=>t)});function lb(i){let t=[Q2];return i&&i.fixed===!1&&t.push(_f.of(!0)),t}const Q2=An.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(Ll).map(t=>new Pg(i,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!i.state.facet(_f),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let t=this.prevViewport,n=i.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(_f)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let t=this.dom.nextSibling;i&&this.dom.remove();let n=Hr.iter(this.view.state.facet(fc),this.view.viewport.from),r=[],s=this.gutters.map(a=>new Z2(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks){let o;if(Array.isArray(a.type)){for(let u of a.type)if(u.type==Qr.Text){o=u;break}}else o=a.type==Qr.Text?a:void 0;if(o){r.length&&(r=[]),ub(n,r,a.from);for(let u of s)u.line(this.view,o,r)}}for(let a of s)a.finish();i&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(i){let t=i.startState.facet(Ll),n=i.state.facet(Ll),r=i.docChanged||i.heightChanged||i.viewportChanged||!Hr.eq(i.startState.facet(fc),i.state.facet(fc),i.view.viewport.from,i.view.viewport.to);if(t==n)for(let s of this.gutters)s.update(i)&&(r=!0);else{r=!0;let s=[];for(let a of n){let o=t.indexOf(a);o<0?s.push(new Pg(this.view,a)):(this.gutters[o].update(i),s.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),s.indexOf(a)<0&&a.destroy();for(let a of s)this.dom.appendChild(a.dom);this.gutters=s}return r}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>Ht.scrollMargins.of(t=>{let n=t.plugin(i);return!n||n.gutters.length==0||!n.fixed?null:t.textDirection==vn.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function Ig(i){return Array.isArray(i)?i:[i]}function ub(i,t,n){for(;i.value&&i.from<=n;)i.from==n&&t.push(i.value),i.next()}class Z2{constructor(t,n,r){this.gutter=t,this.height=r,this.i=0,this.cursor=Hr.iter(t.markers,n.from)}line(t,n,r){let s=[];ub(this.cursor,s,n.from),r.length&&(s=s.concat(r));let a=this.gutter.config.lineMarker(t,n,s);a&&s.unshift(a);let o=this.gutter;if(s.length==0&&!o.config.renderEmptyElements)return;let u=n.top-this.height;if(this.i==o.elements.length){let l=new cb(t,n.height,u,s);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(t,n.height,u,s);this.height=n.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let n=t.elements.pop();t.dom.removeChild(n.dom),n.destroy()}}}class Pg{constructor(t,n){this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,s=>{let a=s.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let u=t.lineBlockAtHeight(o-t.documentTop);n.domEventHandlers[r](t,u,s)&&s.preventDefault()});this.markers=Ig(n.markers(t)),n.initialSpacer&&(this.spacer=new cb(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let n=this.markers;if(this.markers=Ig(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],t);s!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[s])}let r=t.view.viewport;return!Hr.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class cb{constructor(t,n,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,s)}update(t,n,r,s){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),eC(this.markers,s)||this.setMarkers(t,s)}setMarkers(t,n){let r="cm-gutterElement",s=this.dom.firstChild;for(let a=0,o=0;;){let u=o,l=a<n.length?n[a++]:null,c=!1;if(l){let p=l.elementClass;p&&(r+=" "+p);for(let m=o;m<this.markers.length;m++)if(this.markers[m].compare(l)){u=m,c=!0;break}}else u=this.markers.length;for(;o<u;){let p=this.markers[o++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(t),s)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function eC(i,t){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(!i[n].compare(t[n]))return!1;return!0}const tC=Vt.define(),Ra=Vt.define({combine(i){return Ps(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,n){let r=Object.assign({},t);for(let s in n){let a=r[s],o=n[s];r[s]=a?(u,l,c)=>a(u,l,c)||o(u,l,c):o}return r}})}});class cd extends Xs{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function hd(i,t){return i.state.facet(Ra).formatNumber(t,i.state)}const rC=Ll.compute([Ra],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(tC)},lineMarker(t,n,r){return r.some(s=>s.toDOM)?null:new cd(hd(t,t.state.doc.lineAt(n.from).number))},lineMarkerChange:t=>t.startState.facet(Ra)!=t.state.facet(Ra),initialSpacer(t){return new cd(hd(t,Rg(t.state.doc.lines)))},updateSpacer(t,n){let r=hd(n.view,Rg(n.view.state.doc.lines));return r==t.number?t:new cd(r)},domEventHandlers:i.facet(Ra).domEventHandlers}));function hb(i={}){return[Ra.of(i),lb(),rC]}function Rg(i){let t=9;for(;t<i;)t=t*10+9;return t}const nC=new class extends Xs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},iC=fc.compute(["selection"],i=>{let t=[],n=-1;for(let r of i.selection.ranges){let s=i.doc.lineAt(r.head).from;s>n&&(n=s,t.push(nC.range(s)))}return Hr.of(t)});function sC(){return iC}const oC=1024;let aC=0;class dd{constructor(t,n){this.from=t,this.to=n}}class Tr{constructor(t={}){this.id=aC++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Mi.match(t)),n=>{let r=t(n);return r===void 0?null:[this,r]}}}Tr.closedBy=new Tr({deserialize:i=>i.split(" ")});Tr.openedBy=new Tr({deserialize:i=>i.split(" ")});Tr.group=new Tr({deserialize:i=>i.split(" ")});Tr.contextHash=new Tr({perNode:!0});Tr.lookAhead=new Tr({perNode:!0});Tr.mounted=new Tr({perNode:!0});const lC=Object.create(null);class Mi{constructor(t,n,r,s=0){this.name=t,this.props=n,this.id=r,this.flags=s}static define(t){let n=t.props&&t.props.length?Object.create(null):lC,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),s=new Mi(t.name||"",n,t.id,r);if(t.props){for(let a of t.props)if(Array.isArray(a)||(a=a(s)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[a[0].id]=a[1]}}return s}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let n=this.prop(Tr.group);return n?n.indexOf(t)>-1:!1}return this.id==t}static match(t){let n=Object.create(null);for(let r in t)for(let s of r.split(" "))n[s]=t[r];return r=>{for(let s=r.prop(Tr.group),a=-1;a<(s?s.length:0);a++){let o=n[a<0?r.name:s[a]];if(o)return o}}}}Mi.none=new Mi("",Object.create(null),0,8);class hp{constructor(t){this.types=t;for(let n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let n=[];for(let r of this.types){let s=null;for(let a of t){let o=a(r);o&&(s||(s=Object.assign({},r.props)),s[o[0].id]=o[1])}n.push(s?new Mi(r.name,s,r.id,r.flags):r)}return new hp(n)}}const Yu=new WeakMap,Dg=new WeakMap;var ai;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(ai||(ai={}));let Mn=class wf{constructor(t,n,r,s,a){if(this.type=t,this.children=n,this.positions=r,this.length=s,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,u]of a)this.props[typeof o=="number"?o:o.id]=u}}toString(){let t=this.prop(Tr.mounted);if(t&&!t.overlay)return t.tree.toString();let n="";for(let r of this.children){let s=r.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(t=0){return new Oc(this.topNode,t)}cursorAt(t,n=0,r=0){let s=Yu.get(this)||this.topNode,a=new Oc(s);return a.moveTo(t,n),Yu.set(this,a._tree),a}get topNode(){return new qs(this,0,0,null)}resolve(t,n=0){let r=Za(Yu.get(this)||this.topNode,t,n,!1);return Yu.set(this,r),r}resolveInner(t,n=0){let r=Za(Dg.get(this)||this.topNode,t,n,!0);return Dg.set(this,r),r}iterate(t){let{enter:n,leave:r,from:s=0,to:a=this.length}=t;for(let o=this.cursor((t.mode||0)|ai.IncludeAnonymous);;){let u=!1;if(o.from<=a&&o.to>=s&&(o.type.isAnonymous||n(o)!==!1)){if(o.firstChild())continue;u=!0}for(;u&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;u=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let n in this.props)t.push([+n,this.props[n]]);return t}balance(t={}){return this.children.length<=8?this:pp(Mi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,s)=>new wf(this.type,n,r,s,this.propValues),t.makeTree||((n,r,s)=>new wf(Mi.none,n,r,s)))}static build(t){return cC(t)}};Mn.empty=new Mn(Mi.none,[],[],0);class dp{constructor(t,n){this.buffer=t,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dp(this.buffer,this.index)}}class ya{constructor(t,n,r){this.buffer=t,this.length=n,this.set=r}get type(){return Mi.none}toString(){let t=[];for(let n=0;n<this.buffer.length;)t.push(this.childString(n)),n=this.buffer[n+3];return t.join(",")}childString(t){let n=this.buffer[t],r=this.buffer[t+3],s=this.set.types[n],a=s.name;if(/\W/.test(a)&&!s.isError&&(a=JSON.stringify(a)),t+=4,r==t)return a;let o=[];for(;t<r;)o.push(this.childString(t)),t=this.buffer[t+3];return a+"("+o.join(",")+")"}findChild(t,n,r,s,a){let{buffer:o}=this,u=-1;for(let l=t;l!=n&&!(db(a,s,o[l+1],o[l+2])&&(u=l,r>0));l=o[l+3]);return u}slice(t,n,r){let s=this.buffer,a=new Uint16Array(n-t),o=0;for(let u=t,l=0;u<n;){a[l++]=s[u++],a[l++]=s[u++]-r;let c=a[l++]=s[u++]-r;a[l++]=s[u++]-t,o=Math.max(o,c)}return new ya(a,o,this.set)}}function db(i,t,n,r){switch(i){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function fb(i,t){let n=i.childBefore(t);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}function Za(i,t,n,r){for(var s;i.from==i.to||(n<1?i.from>=t:i.from>t)||(n>-1?i.to<=t:i.to<t);){let o=!r&&i instanceof qs&&i.index<0?null:i.parent;if(!o)return i;i=o}let a=r?0:ai.IgnoreOverlays;if(r)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof qs&&o.index<0&&((s=u.enter(t,n,a))===null||s===void 0?void 0:s.from)!=o.from&&(i=u);for(;;){let o=i.enter(t,n,a);if(!o)return i;i=o}}class qs{constructor(t,n,r,s){this._tree=t,this.from=n,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,n,r,s,a=0){for(let o=this;;){for(let{children:u,positions:l}=o._tree,c=n>0?u.length:-1;t!=c;t+=n){let p=u[t],m=l[t]+o.from;if(db(s,r,m,m+p.length)){if(p instanceof ya){if(a&ai.ExcludeBuffers)continue;let h=p.findChild(0,p.buffer.length,n,r-m,s);if(h>-1)return new yo(new uC(o,p,t,m),null,h)}else if(a&ai.IncludeAnonymous||!p.type.isAnonymous||fp(p)){let h;if(!(a&ai.IgnoreMounts)&&p.props&&(h=p.prop(Tr.mounted))&&!h.overlay)return new qs(h.tree,m,t,o);let f=new qs(p,m,t,o);return a&ai.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?p.children.length-1:0,n,r,s)}}}if(a&ai.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+n:t=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,n,r=0){let s;if(!(r&ai.IgnoreOverlays)&&(s=this._tree.prop(Tr.mounted))&&s.overlay){let a=t-this.from;for(let{from:o,to:u}of s.overlay)if((n>0?o<=a:o<a)&&(n<0?u>=a:u>a))return new qs(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,r)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Oc(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,n=0){return Za(this,t,n,!1)}resolveInner(t,n=0){return Za(this,t,n,!0)}enterUnfinishedNodesBefore(t){return fb(this,t)}getChild(t,n=null,r=null){let s=Mc(this,t,n,r);return s.length?s[0]:null}getChildren(t,n=null,r=null){return Mc(this,t,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Ac(this,t)}}function Mc(i,t,n,r){let s=i.cursor(),a=[];if(!s.firstChild())return a;if(n!=null){for(;!s.type.is(n);)if(!s.nextSibling())return a}for(;;){if(r!=null&&s.type.is(r))return a;if(s.type.is(t)&&a.push(s.node),!s.nextSibling())return r==null?a:[]}}function Ac(i,t,n=t.length-1){for(let r=i.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class uC{constructor(t,n,r,s){this.parent=t,this.buffer=n,this.index=r,this.start=s}}class yo{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,n,r){this.context=t,this._parent=n,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}child(t,n,r){let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],t,n-this.context.start,r);return a<0?null:new yo(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,n,r=0){if(r&ai.ExcludeBuffers)return null;let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return a<0?null:new yo(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new yo(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new yo(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}cursor(t=0){return new Oc(this,t)}get tree(){return null}toTree(){let t=[],n=[],{buffer:r}=this.context,s=this.index+4,a=r.buffer[this.index+3];if(a>s){let o=r.buffer[this.index+1];t.push(r.slice(s,a,o)),n.push(0)}return new Mn(this.type,t,n,this.to-this.from)}resolve(t,n=0){return Za(this,t,n,!1)}resolveInner(t,n=0){return Za(this,t,n,!0)}enterUnfinishedNodesBefore(t){return fb(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,n=null,r=null){let s=Mc(this,t,n,r);return s.length?s[0]:null}getChildren(t,n=null,r=null){return Mc(this,t,n,r)}get node(){return this}matchContext(t){return Ac(this,t)}}class Oc{get name(){return this.type.name}constructor(t,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof qs)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let r=t._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,n){this.index=t;let{start:r,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[t]],this.from=r+s.buffer[t+1],this.to=r+s.buffer[t+2],!0}yield(t){return t?t instanceof qs?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,n,r,this.mode));let{buffer:s}=this.buffer,a=s.findChild(this.index+4,s.buffer[this.index+3],t,n-this.buffer.start,r);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,n,r=this.mode){return this.buffer?r&ai.ExcludeBuffers?!1:this.enterChild(1,t,n):this.yield(this._tree.enter(t,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ai.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&ai.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(t<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let n,r,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(s.buffer.buffer[a+3]<this.index)return!1;({index:n,parent:r}=s)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let a=n+t,o=t<0?-1:r._tree.children.length;a!=o;a+=t){let u=r._tree.children[a];if(this.mode&ai.IncludeAnonymous||u instanceof ya||!u.type.isAnonymous||fp(u))return!1}return!0}move(t,n){if(n&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,n=0){for(;(this.from==this.to||(n<1?this.from>=t:this.from>t)||(n>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,n););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,n=null,r=0;if(t&&t.context==this.buffer){e:for(let s=this.index,a=this.stack.length;a>=0;){for(let o=t;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,r=a+1;break e}s=this.stack[--a]}}for(let s=r;s<this.stack.length;s++)n=new yo(this.buffer,n,this.stack[s]);return this.bufferNode=new yo(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,n){for(let r=0;;){let s=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;s&&n&&n(this),s=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,s=!0}}}matchContext(t){if(!this.buffer)return Ac(this.node,t);let{buffer:n}=this.buffer,{types:r}=n.set;for(let s=t.length-1,a=this.stack.length-1;s>=0;a--){if(a<0)return Ac(this.node,t,s);let o=r[n.buffer[this.stack[a]]];if(!o.isAnonymous){if(t[s]&&t[s]!=o.name)return!1;s--}}return!0}}function fp(i){return i.children.some(t=>t instanceof ya||!t.type.isAnonymous||fp(t))}function cC(i){var t;let{buffer:n,nodeSet:r,maxBufferLength:s=oC,reused:a=[],minRepeatType:o=r.types.length}=i,u=Array.isArray(n)?new dp(n,n.length):n,l=r.types,c=0,p=0;function m(S,w,_,M,I){let{id:R,start:P,end:D,size:U}=u,F=p;for(;U<0;)if(u.next(),U==-1){let K=a[R];_.push(K),M.push(P-S);return}else if(U==-3){c=R;return}else if(U==-4){p=R;return}else throw new RangeError(`Unrecognized record size: ${U}`);let z=l[R],J,Q,Z=P-S;if(D-P<=s&&(Q=g(u.pos-w,I))){let K=new Uint16Array(Q.size-Q.skip),H=u.pos-Q.size,$=K.length;for(;u.pos>H;)$=y(Q.start,K,$);J=new ya(K,D-Q.start,r),Z=Q.start-S}else{let K=u.pos-U;u.next();let H=[],$=[],Y=R>=o?R:-1,oe=0,O=D;for(;u.pos>K;)Y>=0&&u.id==Y&&u.size>=0?(u.end<=O-s&&(f(H,$,P,oe,u.end,O,Y,F),oe=H.length,O=u.end),u.next()):m(P,K,H,$,Y);if(Y>=0&&oe>0&&oe<H.length&&f(H,$,P,oe,P,O,Y,F),H.reverse(),$.reverse(),Y>-1&&oe>0){let B=h(z);J=pp(z,H,$,0,H.length,0,D-P,B,B)}else J=d(z,H,$,D-P,F-D)}_.push(J),M.push(Z)}function h(S){return(w,_,M)=>{let I=0,R=w.length-1,P,D;if(R>=0&&(P=w[R])instanceof Mn){if(!R&&P.type==S&&P.length==M)return P;(D=P.prop(Tr.lookAhead))&&(I=_[R]+P.length+D)}return d(S,w,_,M,I)}}function f(S,w,_,M,I,R,P,D){let U=[],F=[];for(;S.length>M;)U.push(S.pop()),F.push(w.pop()+_-I);S.push(d(r.types[P],U,F,R-I,D-R)),w.push(I-_)}function d(S,w,_,M,I=0,R){if(c){let P=[Tr.contextHash,c];R=R?[P].concat(R):[P]}if(I>25){let P=[Tr.lookAhead,I];R=R?[P].concat(R):[P]}return new Mn(S,w,_,M,R)}function g(S,w){let _=u.fork(),M=0,I=0,R=0,P=_.end-s,D={size:0,start:0,skip:0};e:for(let U=_.pos-S;_.pos>U;){let F=_.size;if(_.id==w&&F>=0){D.size=M,D.start=I,D.skip=R,R+=4,M+=4,_.next();continue}let z=_.pos-F;if(F<0||z<U||_.start<P)break;let J=_.id>=o?4:0,Q=_.start;for(_.next();_.pos>z;){if(_.size<0)if(_.size==-3)J+=4;else break e;else _.id>=o&&(J+=4);_.next()}I=Q,M+=F,R+=J}return(w<0||M==S)&&(D.size=M,D.start=I,D.skip=R),D.size>4?D:void 0}function y(S,w,_){let{id:M,start:I,end:R,size:P}=u;if(u.next(),P>=0&&M<o){let D=_;if(P>4){let U=u.pos-(P-4);for(;u.pos>U;)_=y(S,w,_)}w[--_]=D,w[--_]=R-S,w[--_]=I-S,w[--_]=M}else P==-3?c=M:P==-4&&(p=M);return _}let b=[],x=[];for(;u.pos>0;)m(i.start||0,i.bufferStart||0,b,x,-1);let C=(t=i.length)!==null&&t!==void 0?t:b.length?x[0]+b[0].length:0;return new Mn(l[i.topID],b.reverse(),x.reverse(),C)}const Lg=new WeakMap;function pc(i,t){if(!i.isAnonymous||t instanceof ya||t.type!=i)return 1;let n=Lg.get(t);if(n==null){n=1;for(let r of t.children){if(r.type!=i||!(r instanceof Mn)){n=1;break}n+=pc(i,r)}Lg.set(t,n)}return n}function pp(i,t,n,r,s,a,o,u,l){let c=0;for(let d=r;d<s;d++)c+=pc(i,t[d]);let p=Math.ceil(c*1.5/8),m=[],h=[];function f(d,g,y,b,x){for(let C=y;C<b;){let S=C,w=g[C],_=pc(i,d[C]);for(C++;C<b;C++){let M=pc(i,d[C]);if(_+M>=p)break;_+=M}if(C==S+1){if(_>p){let M=d[S];f(M.children,M.positions,0,M.children.length,g[S]+x);continue}m.push(d[S])}else{let M=g[C-1]+d[C-1].length-w;m.push(pp(i,d,g,S,C,w,M,null,l))}h.push(w+x-a)}}return f(t,n,r,s,0),(u||l)(m,h,o)}class ea{constructor(t,n,r,s,a=!1,o=!1){this.from=t,this.to=n,this.tree=r,this.offset=s,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,n=[],r=!1){let s=[new ea(0,t.length,t,0,!1,r)];for(let a of n)a.to>t.length&&s.push(a);return s}static applyChanges(t,n,r=128){if(!n.length)return t;let s=[],a=1,o=t.length?t[0]:null;for(let u=0,l=0,c=0;;u++){let p=u<n.length?n[u]:null,m=p?p.fromA:1e9;if(m-l>=r)for(;o&&o.from<m;){let h=o;if(l>=h.from||m<=h.to||c){let f=Math.max(h.from,l)-c,d=Math.min(h.to,m)-c;h=f>=d?null:new ea(f,d,h.tree,h.offset+c,u>0,!!p)}if(h&&s.push(h),o.to>m)break;o=a<t.length?t[a++]:null}if(!p)break;l=p.toA,c=p.toA-p.toB}return s}}class pb{startParse(t,n,r){return typeof t=="string"&&(t=new hC(t)),r=r?r.length?r.map(s=>new dd(s.from,s.to)):[new dd(0,0)]:[new dd(0,t.length)],this.createParse(t,n||[],r)}parse(t,n,r){let s=this.startParse(t,n,r);for(;;){let a=s.advance();if(a)return a}}}class hC{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,n){return this.string.slice(t,n)}}new Tr({perNode:!0});let dC=0;class ws{constructor(t,n,r){this.set=t,this.base=n,this.modified=r,this.id=dC++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new ws([],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(){let t=new Ic;return n=>n.modified.indexOf(t)>-1?n:Ic.get(n.base||n,n.modified.concat(t).sort((r,s)=>r.id-s.id))}}let fC=0;class Ic{constructor(){this.instances=[],this.id=fC++}static get(t,n){if(!n.length)return t;let r=n[0].instances.find(u=>u.base==t&&pC(n,u.modified));if(r)return r;let s=[],a=new ws(s,t,n);for(let u of n)u.instances.push(a);let o=mC(n);for(let u of t.set)if(!u.modified.length)for(let l of o)s.push(Ic.get(u,l));return a}}function pC(i,t){return i.length==t.length&&i.every((n,r)=>n==t[r])}function mC(i){let t=[[]];for(let n=0;n<i.length;n++)for(let r=0,s=t.length;r<s;r++)t.push(t[r].concat(i[n]));return t.sort((n,r)=>r.length-n.length)}function gC(i){let t=Object.create(null);for(let n in i){let r=i[n];Array.isArray(r)||(r=[r]);for(let s of n.split(" "))if(s){let a=[],o=2,u=s;for(let m=0;;){if(u=="..."&&m>0&&m+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!h)throw new RangeError("Invalid path: "+s);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),m+=h[0].length,m==s.length)break;let f=s[m++];if(m==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);u=s.slice(m)}let l=a.length-1,c=a[l];if(!c)throw new RangeError("Invalid path: "+s);let p=new Pc(r,o,l>0?a.slice(0,l):null);t[c]=p.sort(t[c])}}return mb.add(t)}const mb=new Tr;class Pc{constructor(t,n,r,s){this.tags=t,this.mode=n,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Pc.empty=new Pc([],2,null);function gb(i,t){let n=Object.create(null);for(let a of i)if(!Array.isArray(a.tag))n[a.tag.id]=a.class;else for(let o of a.tag)n[o.id]=a.class;let{scope:r,all:s=null}=t||{};return{style:a=>{let o=s;for(let u of a)for(let l of u.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function yC(i,t){let n=null;for(let r of i){let s=r.style(t);s&&(n=n?n+" "+s:s)}return n}function vC(i,t,n,r=0,s=i.length){let a=new bC(r,Array.isArray(t)?t:[t],n);a.highlightRange(i.cursor(),r,s,"",a.highlighters),a.flush(s)}class bC{constructor(t,n,r){this.at=t,this.highlighters=n,this.span=r,this.class=""}startSpan(t,n){n!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=n)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,n,r,s,a){let{type:o,from:u,to:l}=t;if(u>=r||l<=n)return;o.isTop&&(a=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=s,p=_C(t)||Pc.empty,m=yC(a,p.tags);if(m&&(c&&(c+=" "),c+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(t.from,c),p.opaque)return;let h=t.tree&&t.tree.prop(Tr.mounted);if(h&&h.overlay){let f=t.node.enter(h.overlay[0].from+u,1),d=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),g=t.firstChild();for(let y=0,b=u;;y++){let x=y<h.overlay.length?h.overlay[y]:null,C=x?x.from+u:l,S=Math.max(n,b),w=Math.min(r,C);if(S<w&&g)for(;t.from<w&&(this.highlightRange(t,S,w,s,a),this.startSpan(Math.min(w,t.to),c),!(t.to>=C||!t.nextSibling())););if(!x||C>r)break;b=x.to+u,b>n&&(this.highlightRange(f.cursor(),Math.max(n,x.from+u),Math.min(r,b),s,d),this.startSpan(b,c))}g&&t.parent()}else if(t.firstChild()){do if(!(t.to<=n)){if(t.from>=r)break;this.highlightRange(t,n,r,s,a),this.startSpan(Math.min(r,t.to),c)}while(t.nextSibling());t.parent()}}}function _C(i){let t=i.type.prop(mb);for(;t&&t.context&&!i.matchContext(t.context);)t=t.next;return t||null}const Et=ws.define,Ku=Et(),ao=Et(),Ng=Et(ao),Bg=Et(ao),lo=Et(),Ju=Et(lo),fd=Et(lo),_s=Et(),Ho=Et(_s),vs=Et(),bs=Et(),xf=Et(),xl=Et(xf),Qu=Et(),Ot={comment:Ku,lineComment:Et(Ku),blockComment:Et(Ku),docComment:Et(Ku),name:ao,variableName:Et(ao),typeName:Ng,tagName:Et(Ng),propertyName:Bg,attributeName:Et(Bg),className:Et(ao),labelName:Et(ao),namespace:Et(ao),macroName:Et(ao),literal:lo,string:Ju,docString:Et(Ju),character:Et(Ju),attributeValue:Et(Ju),number:fd,integer:Et(fd),float:Et(fd),bool:Et(lo),regexp:Et(lo),escape:Et(lo),color:Et(lo),url:Et(lo),keyword:vs,self:Et(vs),null:Et(vs),atom:Et(vs),unit:Et(vs),modifier:Et(vs),operatorKeyword:Et(vs),controlKeyword:Et(vs),definitionKeyword:Et(vs),moduleKeyword:Et(vs),operator:bs,derefOperator:Et(bs),arithmeticOperator:Et(bs),logicOperator:Et(bs),bitwiseOperator:Et(bs),compareOperator:Et(bs),updateOperator:Et(bs),definitionOperator:Et(bs),typeOperator:Et(bs),controlOperator:Et(bs),punctuation:xf,separator:Et(xf),bracket:xl,angleBracket:Et(xl),squareBracket:Et(xl),paren:Et(xl),brace:Et(xl),content:_s,heading:Ho,heading1:Et(Ho),heading2:Et(Ho),heading3:Et(Ho),heading4:Et(Ho),heading5:Et(Ho),heading6:Et(Ho),contentSeparator:Et(_s),list:Et(_s),quote:Et(_s),emphasis:Et(_s),strong:Et(_s),link:Et(_s),monospace:Et(_s),strikethrough:Et(_s),inserted:Et(),deleted:Et(),changed:Et(),invalid:Et(),meta:Qu,documentMeta:Et(Qu),annotation:Et(Qu),processingInstruction:Et(Qu),definition:ws.defineModifier(),constant:ws.defineModifier(),function:ws.defineModifier(),standard:ws.defineModifier(),local:ws.defineModifier(),special:ws.defineModifier()};gb([{tag:Ot.link,class:"tok-link"},{tag:Ot.heading,class:"tok-heading"},{tag:Ot.emphasis,class:"tok-emphasis"},{tag:Ot.strong,class:"tok-strong"},{tag:Ot.keyword,class:"tok-keyword"},{tag:Ot.atom,class:"tok-atom"},{tag:Ot.bool,class:"tok-bool"},{tag:Ot.url,class:"tok-url"},{tag:Ot.labelName,class:"tok-labelName"},{tag:Ot.inserted,class:"tok-inserted"},{tag:Ot.deleted,class:"tok-deleted"},{tag:Ot.literal,class:"tok-literal"},{tag:Ot.string,class:"tok-string"},{tag:Ot.number,class:"tok-number"},{tag:[Ot.regexp,Ot.escape,Ot.special(Ot.string)],class:"tok-string2"},{tag:Ot.variableName,class:"tok-variableName"},{tag:Ot.local(Ot.variableName),class:"tok-variableName tok-local"},{tag:Ot.definition(Ot.variableName),class:"tok-variableName tok-definition"},{tag:Ot.special(Ot.variableName),class:"tok-variableName2"},{tag:Ot.definition(Ot.propertyName),class:"tok-propertyName tok-definition"},{tag:Ot.typeName,class:"tok-typeName"},{tag:Ot.namespace,class:"tok-namespace"},{tag:Ot.className,class:"tok-className"},{tag:Ot.macroName,class:"tok-macroName"},{tag:Ot.propertyName,class:"tok-propertyName"},{tag:Ot.operator,class:"tok-operator"},{tag:Ot.comment,class:"tok-comment"},{tag:Ot.meta,class:"tok-meta"},{tag:Ot.invalid,class:"tok-invalid"},{tag:Ot.punctuation,class:"tok-punctuation"}]);var pd;const Da=new Tr;function wC(i){return Vt.define({combine:i?t=>t.concat(i):void 0})}const xC=new Tr;class as{constructor(t,n,r=[],s=""){this.data=t,this.name=s,Mr.prototype.hasOwnProperty("tree")||Object.defineProperty(Mr.prototype,"tree",{get(){return Jn(this)}}),this.parser=n,this.extension=[Ao.of(this),Mr.languageData.of((a,o,u)=>{let l=Fg(a,o,u),c=l.type.prop(Da);if(!c)return[];let p=a.facet(c),m=l.type.prop(xC);if(m){let h=l.resolve(o-l.from,u);for(let f of m)if(f.test(h,a)){let d=a.facet(f.facet);return f.type=="replace"?d:d.concat(p)}}return p})].concat(r)}isActiveAt(t,n,r=-1){return Fg(t,n,r).type.prop(Da)==this.data}findRegions(t){let n=t.facet(Ao);if((n==null?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],s=(a,o)=>{if(a.prop(Da)==this.data){r.push({from:o,to:o+a.length});return}let u=a.prop(Tr.mounted);if(u){if(u.tree.prop(Da)==this.data){if(u.overlay)for(let l of u.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+a.length});return}else if(u.overlay){let l=r.length;if(s(u.tree,u.overlay[0].from+o),r.length>l)return}}for(let l=0;l<a.children.length;l++){let c=a.children[l];c instanceof Mn&&s(c,a.positions[l]+o)}};return s(Jn(t),0),r}get allowsNesting(){return!0}}as.setState=pr.define();function Fg(i,t,n){let r=i.facet(Ao),s=Jn(i).topNode;if(!r||r.allowsNesting)for(let a=s;a;a=a.enter(t,n,ai.ExcludeBuffers))a.type.isTop&&(s=a);return s}function Jn(i){let t=i.field(as.state,!1);return t?t.tree:Mn.empty}class SC{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,n){let r=this.cursorPos-this.string.length;return t<r||n>=this.cursorPos?this.doc.sliceString(t,n):this.string.slice(t-r,n-r)}}let Sl=null;class el{constructor(t,n,r=[],s,a,o,u,l){this.parser=t,this.state=n,this.fragments=r,this.tree=s,this.treeLen=a,this.viewport=o,this.skipped=u,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,n,r){return new el(t,n,[],Mn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new SC(this.state.doc),this.fragments)}work(t,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Mn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof t=="number"){let s=Date.now()+t;t=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(ea.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,n;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=t,this.tree=n,this.fragments=this.withoutTempSkipped(ea.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let n=Sl;Sl=this;try{return t()}finally{Sl=n}}withoutTempSkipped(t){for(let n;n=this.tempSkipped.pop();)t=Ug(t,n.from,n.to);return t}changes(t,n){let{fragments:r,tree:s,treeLen:a,viewport:o,skipped:u}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((c,p,m,h)=>l.push({fromA:c,toA:p,fromB:m,toB:h})),r=ea.applyChanges(r,l),s=Mn.empty,a=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){u=[];for(let c of this.skipped){let p=t.mapPos(c.from,1),m=t.mapPos(c.to,-1);p<m&&u.push({from:p,to:m})}}}return new el(this.parser,n,r,s,a,o,u,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:a}=this.skipped[r];s<t.to&&a>t.from&&(this.fragments=Ug(this.fragments,s,a),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,n){this.skipped.push({from:t,to:n})}static getSkippingParser(t){return new class extends pb{createParse(n,r,s){let a=s[0].from,o=s[s.length-1].to;return{parsedPos:a,advance(){let l=Sl;if(l){for(let c of s)l.tempSkipped.push(c);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=o,new Mn(Mi.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let n=this.fragments;return this.treeLen>=t&&n.length&&n[0].from==0&&n[0].to>=t}static get(){return Sl}}function Ug(i,t,n){return ea.applyChanges(i,[{fromA:t,toA:n,fromB:t,toB:n}])}class tl{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(t.changes,t.state),r=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new tl(n)}static init(t){let n=Math.min(3e3,t.doc.length),r=el.create(t.facet(Ao).parser,t,{from:0,to:n});return r.work(20,n)||r.takeTree(),new tl(r)}}as.state=Qn.define({create:tl.init,update(i,t){for(let n of t.effects)if(n.is(as.setState))return n.value;return t.startState.facet(Ao)!=t.state.facet(Ao)?tl.init(t.state):i.apply(t)}});let yb=i=>{let t=setTimeout(()=>i(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(yb=i=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(i,{timeout:500-100})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const md=typeof navigator<"u"&&(!((pd=navigator.scheduling)===null||pd===void 0)&&pd.isInputPending)?()=>navigator.scheduling.isInputPending():null,CC=An.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let n=this.view.state.field(as.state).context;(n.updateViewport(t.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:t}=this.view,n=t.field(as.state);(n.tree!=n.context.tree||!n.context.isDone(t.doc.length))&&(this.working=yb(this.work))}work(t){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,a=r.field(as.state);if(a.tree==a.context.tree&&a.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!md?Math.max(25,t.timeRemaining()-5):1e9),u=a.context.treeLen<s&&r.doc.length>s+1e3,l=a.context.work(()=>md&&md()||Date.now()>o,s+(u?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:as.setState.of(new tl(a.context))})),this.chunkBudget>0&&!(l&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Gi(this.view.state,n)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ao=Vt.define({combine(i){return i.length?i[0]:null},enables:i=>[as.state,CC,Ht.contentAttributes.compute([i],t=>{let n=t.facet(i);return n&&n.name?{"data-language":n.name}:{}})]}),vb=Vt.define(),mp=Vt.define({combine:i=>{if(!i.length)return"  ";let t=i[0];if(!t||/\S/.test(t)||Array.from(t).some(n=>n!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return t}});function aa(i){let t=i.facet(mp);return t.charCodeAt(0)==9?i.tabSize*t.length:t.length}function Ql(i,t){let n="",r=i.tabSize,s=i.facet(mp)[0];if(s=="	"){for(;t>=r;)n+="	",t-=r;s=" "}for(let a=0;a<t;a++)n+=s;return n}function gp(i,t){i instanceof Mr&&(i=new _h(i));for(let r of i.state.facet(vb)){let s=r(i,t);if(s!==void 0)return s}let n=Jn(i.state);return n?TC(i,n,t):null}class _h{constructor(t,n={}){this.state=t,this.options=n,this.unit=aa(t)}lineAt(t,n=1){let r=this.state.doc.lineAt(t),{simulateBreak:s,simulateDoubleBreak:a}=this.options;return s!=null&&s>=r.from&&s<=r.to?a&&s==t?{text:"",from:t}:(n<0?s<t:s<=t)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(t,n=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(t,n);return r.slice(t-s,Math.min(r.length,t+100-s))}column(t,n=1){let{text:r,from:s}=this.lineAt(t,n),a=this.countColumn(r,t-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(a+=o-this.countColumn(r,r.search(/\S|$/))),a}countColumn(t,n=t.length){return gu(t,this.state.tabSize,n)}lineIndent(t,n=1){let{text:r,from:s}=this.lineAt(t,n),a=this.options.overrideIndentation;if(a){let o=a(s);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jC=new Tr;function TC(i,t,n){return bb(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,i)}function kC(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function EC(i){let t=i.type.prop(jC);if(t)return t;let n=i.firstChild,r;if(n&&(r=n.type.prop(Tr.closedBy))){let s=i.lastChild,a=s&&r.indexOf(s.name)>-1;return o=>IC(o,!0,1,void 0,a&&!kC(o)?s.from:void 0)}return i.parent==null?MC:null}function bb(i,t,n){for(;i;i=i.parent){let r=EC(i);if(r)return r(yp.create(n,t,i))}return null}function MC(){return 0}class yp extends _h{constructor(t,n,r){super(t.state,t.options),this.base=t,this.pos=n,this.node=r}static create(t,n,r){return new yp(t,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(AC(n,this.node))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?bb(t,this.pos,this.base):0}}function AC(i,t){for(let n=t;n;n=n.parent)if(i==n)return!0;return!1}function OC(i){let t=i.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let s=i.options.simulateBreak,a=i.state.doc.lineAt(n.from),o=s==null||s<=a.from?a.to:Math.min(a.to,s);for(let u=n.to;;){let l=t.childAfter(u);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;u=l.to}}function IC(i,t,n,r,s){let a=i.textAfter,o=a.match(/^\s*/)[0].length,u=r&&a.slice(o,o+r.length)==r||s==i.pos+o,l=t?OC(i):null;return l?u?i.column(l.from):i.column(l.to):i.baseIndent+(u?0:i.unit*n)}const PC=200;function RC(){return Mr.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let t=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!t.length)return i;let n=i.newDoc,{head:r}=i.newSelection.main,s=n.lineAt(r);if(r>s.from+PC)return i;let a=n.sliceString(s.from,r);if(!t.some(c=>c.test(a)))return i;let{state:o}=i,u=-1,l=[];for(let{head:c}of o.selection.ranges){let p=o.doc.lineAt(c);if(p.from==u)continue;u=p.from;let m=gp(o,p.from);if(m==null)continue;let h=/^\s*/.exec(p.text)[0],f=Ql(o,m);h!=f&&l.push({from:p.from,to:p.from+h.length,insert:f})}return l.length?[i,{changes:l,sequential:!0}]:i})}const DC=Vt.define(),LC=new Tr;function NC(i,t,n){let r=Jn(i);if(r.length<n)return null;let s=r.resolveInner(n,1),a=null;for(let o=s;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(a&&o.from<t)break;let u=o.type.prop(LC);if(u&&(o.to<r.length-50||r.length==i.doc.length||!BC(o))){let l=u(o,i);l&&l.from<=n&&l.from>=t&&l.to>n&&(a=l)}}return a}function BC(i){let t=i.lastChild;return t&&t.to==i.to&&t.type.isError}function Rc(i,t,n){for(let r of i.facet(DC)){let s=r(i,t,n);if(s)return s}return NC(i,t,n)}function _b(i,t){let n=t.mapPos(i.from,1),r=t.mapPos(i.to,-1);return n>=r?void 0:{from:n,to:r}}const wh=pr.define({map:_b}),bu=pr.define({map:_b});function wb(i){let t=[];for(let{head:n}of i.state.selection.ranges)t.some(r=>r.from<=n&&r.to>=n)||t.push(i.lineBlockAt(n));return t}const la=Qn.define({create(){return Zt.none},update(i,t){i=i.map(t.changes);for(let n of t.effects)n.is(wh)&&!FC(i,n.value.from,n.value.to)?i=i.update({add:[Vg.range(n.value.from,n.value.to)]}):n.is(bu)&&(i=i.update({filter:(r,s)=>n.value.from!=r||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;i.between(r,r,(s,a)=>{s<r&&a>r&&(n=!0)}),n&&(i=i.update({filterFrom:r,filterTo:r,filter:(s,a)=>a<=r||s>=r}))}return i},provide:i=>Ht.decorations.from(i),toJSON(i,t){let n=[];return i.between(0,t.doc.length,(r,s)=>{n.push(r,s)}),n},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<i.length;){let r=i[n++],s=i[n++];if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");t.push(Vg.range(r,s))}return Zt.set(t,!0)}});function Dc(i,t,n){var r;let s=null;return(r=i.field(la,!1))===null||r===void 0||r.between(t,n,(a,o)=>{(!s||s.from>a)&&(s={from:a,to:o})}),s}function FC(i,t,n){let r=!1;return i.between(t,t,(s,a)=>{s==t&&a==n&&(r=!0)}),r}function xb(i,t){return i.field(la,!1)?t:t.concat(pr.appendConfig.of(jb()))}const UC=i=>{for(let t of wb(i)){let n=Rc(i.state,t.from,t.to);if(n)return i.dispatch({effects:xb(i.state,[wh.of(n),Sb(i,n)])}),!0}return!1},VC=i=>{if(!i.state.field(la,!1))return!1;let t=[];for(let n of wb(i)){let r=Dc(i.state,n.from,n.to);r&&t.push(bu.of(r),Sb(i,r,!1))}return t.length&&i.dispatch({effects:t}),t.length>0};function Sb(i,t,n=!0){let r=i.state.doc.lineAt(t.from).number,s=i.state.doc.lineAt(t.to).number;return Ht.announce.of(`${i.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${i.state.phrase("to")} ${s}.`)}const GC=i=>{let{state:t}=i,n=[];for(let r=0;r<t.doc.length;){let s=i.lineBlockAt(r),a=Rc(t,s.from,s.to);a&&n.push(wh.of(a)),r=(a?i.lineBlockAt(a.to):s).to+1}return n.length&&i.dispatch({effects:xb(i.state,n)}),!!n.length},HC=i=>{let t=i.state.field(la,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,i.state.doc.length,(r,s)=>{n.push(bu.of({from:r,to:s}))}),i.dispatch({effects:n}),!0},zC=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:UC},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:VC},{key:"Ctrl-Alt-[",run:GC},{key:"Ctrl-Alt-]",run:HC}],WC={placeholderDOM:null,placeholderText:"â¦"},Cb=Vt.define({combine(i){return Ps(i,WC)}});function jb(i){let t=[la,XC];return i&&t.push(Cb.of(i)),t}const Vg=Zt.replace({widget:new class extends Ro{toDOM(i){let{state:t}=i,n=t.facet(Cb),r=a=>{let o=i.lineBlockAt(i.posAtDOM(a.target)),u=Dc(i.state,o.from,o.to);u&&i.dispatch({effects:bu.of(u)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}}}),qC={openText:"â",closedText:"âº",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class gd extends Xs{constructor(t,n){super(),this.config=t,this.open=n}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=t.state.phrase(this.open?"Fold line":"Unfold line"),n}}function $C(i={}){let t=Object.assign(Object.assign({},qC),i),n=new gd(t,!0),r=new gd(t,!1),s=An.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ao)!=o.state.facet(Ao)||o.startState.field(la,!1)!=o.state.field(la,!1)||Jn(o.startState)!=Jn(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let u=new To;for(let l of o.viewportLineBlocks){let c=Dc(o.state,l.from,l.to)?r:Rc(o.state,l.from,l.to)?n:null;c&&u.add(l.from,l.from,c)}return u.finish()}}),{domEventHandlers:a}=t;return[s,J2({class:"cm-foldGutter",markers(o){var u;return((u=o.plugin(s))===null||u===void 0?void 0:u.markers)||Hr.empty},initialSpacer(){return new gd(t,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,u,l)=>{if(a.click&&a.click(o,u,l))return!0;let c=Dc(o.state,u.from,u.to);if(c)return o.dispatch({effects:bu.of(c)}),!0;let p=Rc(o.state,u.from,u.to);return p?(o.dispatch({effects:wh.of(p)}),!0):!1}})}),jb()]}const XC=Ht.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class xh{constructor(t,n){this.specs=t;let r;function s(u){let l=ko.newName();return(r||(r=Object.create(null)))["."+l]=u,l}const a=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof as?u=>u.prop(Da)==o.data:o?u=>u==o:void 0,this.style=gb(t.map(u=>({tag:u.tag,class:u.class||s(Object.assign({},u,{tag:null}))})),{all:a}).style,this.module=r?new ko(r):null,this.themeType=n.themeType}static define(t,n){return new xh(t,n||{})}}const Sf=Vt.define(),Tb=Vt.define({combine(i){return i.length?[i[0]]:null}});function yd(i){let t=i.facet(Sf);return t.length?t:i.facet(Tb)}function YC(i,t){let n=[JC],r;return i instanceof xh&&(i.module&&n.push(Ht.styleModule.of(i.module)),r=i.themeType),t!=null&&t.fallback?n.push(Tb.of(i)):r?n.push(Sf.computeN([Ht.darkTheme],s=>s.facet(Ht.darkTheme)==(r=="dark")?[i]:[])):n.push(Sf.of(i)),n}class KC{constructor(t){this.markCache=Object.create(null),this.tree=Jn(t.state),this.decorations=this.buildDeco(t,yd(t.state))}update(t){let n=Jn(t.state),r=yd(t.state),s=r!=yd(t.startState);n.length<t.view.viewport.to&&!s&&n.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(n!=this.tree||t.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(t.view,r))}buildDeco(t,n){if(!n||!this.tree.length)return Zt.none;let r=new To;for(let{from:s,to:a}of t.visibleRanges)vC(this.tree,n,(o,u,l)=>{r.add(o,u,this.markCache[l]||(this.markCache[l]=Zt.mark({class:l})))},s,a);return r.finish()}}const JC=hl.high(An.fromClass(KC,{decorations:i=>i.decorations})),QC=xh.define([{tag:Ot.meta,color:"#404740"},{tag:Ot.link,textDecoration:"underline"},{tag:Ot.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ot.emphasis,fontStyle:"italic"},{tag:Ot.strong,fontWeight:"bold"},{tag:Ot.strikethrough,textDecoration:"line-through"},{tag:Ot.keyword,color:"#708"},{tag:[Ot.atom,Ot.bool,Ot.url,Ot.contentSeparator,Ot.labelName],color:"#219"},{tag:[Ot.literal,Ot.inserted],color:"#164"},{tag:[Ot.string,Ot.deleted],color:"#a11"},{tag:[Ot.regexp,Ot.escape,Ot.special(Ot.string)],color:"#e40"},{tag:Ot.definition(Ot.variableName),color:"#00f"},{tag:Ot.local(Ot.variableName),color:"#30a"},{tag:[Ot.typeName,Ot.namespace],color:"#085"},{tag:Ot.className,color:"#167"},{tag:[Ot.special(Ot.variableName),Ot.macroName],color:"#256"},{tag:Ot.definition(Ot.propertyName),color:"#00c"},{tag:Ot.comment,color:"#940"},{tag:Ot.invalid,color:"#f00"}]),ZC=Ht.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),kb=1e4,Eb="()[]{}",Mb=Vt.define({combine(i){return Ps(i,{afterCursor:!0,brackets:Eb,maxScanDistance:kb,renderMatch:rj})}}),ej=Zt.mark({class:"cm-matchingBracket"}),tj=Zt.mark({class:"cm-nonmatchingBracket"});function rj(i){let t=[],n=i.matched?ej:tj;return t.push(n.range(i.start.from,i.start.to)),i.end&&t.push(n.range(i.end.from,i.end.to)),t}const nj=Qn.define({create(){return Zt.none},update(i,t){if(!t.docChanged&&!t.selection)return i;let n=[],r=t.state.facet(Mb);for(let s of t.state.selection.ranges){if(!s.empty)continue;let a=Ss(t.state,s.head,-1,r)||s.head>0&&Ss(t.state,s.head-1,1,r)||r.afterCursor&&(Ss(t.state,s.head,1,r)||s.head<t.state.doc.length&&Ss(t.state,s.head+1,-1,r));a&&(n=n.concat(r.renderMatch(a,t.state)))}return Zt.set(n,!0)},provide:i=>Ht.decorations.from(i)}),ij=[nj,ZC];function sj(i={}){return[Mb.of(i),ij]}const oj=new Tr;function Cf(i,t,n){let r=i.prop(t<0?Tr.openedBy:Tr.closedBy);if(r)return r;if(i.name.length==1){let s=n.indexOf(i.name);if(s>-1&&s%2==(t<0?1:0))return[n[s+t]]}return null}function jf(i){let t=i.type.prop(oj);return t?t(i.node):i}function Ss(i,t,n,r={}){let s=r.maxScanDistance||kb,a=r.brackets||Eb,o=Jn(i),u=o.resolveInner(t,n);for(let l=u;l;l=l.parent){let c=Cf(l.type,n,a);if(c&&l.from<l.to){let p=jf(l);if(p&&(n>0?t>=p.from&&t<p.to:t>p.from&&t<=p.to))return aj(i,t,n,l,p,c,a)}}return lj(i,t,n,o,u.type,s,a)}function aj(i,t,n,r,s,a,o){let u=r.parent,l={from:s.from,to:s.to},c=0,p=u==null?void 0:u.cursor();if(p&&(n<0?p.childBefore(r.from):p.childAfter(r.to)))do if(n<0?p.to<=r.from:p.from>=r.to){if(c==0&&a.indexOf(p.type.name)>-1&&p.from<p.to){let m=jf(p);return{start:l,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Cf(p.type,n,o))c++;else if(Cf(p.type,-n,o)){if(c==0){let m=jf(p);return{start:l,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}c--}}while(n<0?p.prevSibling():p.nextSibling());return{start:l,matched:!1}}function lj(i,t,n,r,s,a,o){let u=n<0?i.sliceDoc(t-1,t):i.sliceDoc(t,t+1),l=o.indexOf(u);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},p=i.doc.iterRange(t,n>0?i.doc.length:0),m=0;for(let h=0;!p.next().done&&h<=a;){let f=p.value;n<0&&(h+=f.length);let d=t+h*n;for(let g=n>0?0:f.length-1,y=n>0?f.length:-1;g!=y;g+=n){let b=o.indexOf(f[g]);if(!(b<0||r.resolveInner(d+g,1).type!=s))if(b%2==0==n>0)m++;else{if(m==1)return{start:c,end:{from:d+g,to:d+g+1},matched:b>>1==l>>1};m--}}n>0&&(h+=f.length)}return p.done?{start:c,matched:!1}:null}function Gg(i,t,n,r=0,s=0){t==null&&(t=i.search(/[^\s\u00a0]/),t==-1&&(t=i.length));let a=s;for(let o=r;o<t;o++)i.charCodeAt(o)==9?a+=n-a%n:a++;return a}class Ab{constructor(t,n,r,s){this.string=t,this.tabSize=n,this.indentUnit=r,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let n=this.string.charAt(this.pos),r;if(typeof t=="string"?r=n==t:r=n&&(t instanceof RegExp?t.test(n):t(n)),r)return++this.pos,n}eatWhile(t){let n=this.pos;for(;this.eat(t););return this.pos>n}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gg(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:Gg(this.string,null,this.tabSize)}match(t,n,r){if(typeof t=="string"){let s=o=>r?o.toLowerCase():o,a=this.string.substr(this.pos,t.length);return s(a)==s(t)?(n!==!1&&(this.pos+=t.length),!0):null}else{let s=this.string.slice(this.pos).match(t);return s&&s.index>0?null:(s&&n!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function uj(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||cj,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||_p}}function cj(i){if(typeof i!="object")return i;let t={};for(let n in i){let r=i[n];t[n]=r instanceof Array?r.slice():r}return t}const Hg=new WeakMap;class vp extends as{constructor(t){let n=wC(t.languageData),r=uj(t),s,a=new class extends pb{createParse(o,u,l){return new dj(s,o,u,l)}};super(n,a,[vb.of((o,u)=>this.getIndent(o,u))],t.name),this.topNode=mj(n),s=this,this.streamParser=r,this.stateAfter=new Tr({perNode:!0}),this.tokenTable=t.tokenTable?new Rb(r.tokenTable):pj}static define(t){return new vp(t)}getIndent(t,n){let r=Jn(t.state),s=r.resolve(n);for(;s&&s.type!=this.topNode;)s=s.parent;if(!s)return null;let a,{overrideIndentation:o}=t.options;o&&(a=Hg.get(t.state),a!=null&&a<n-1e4&&(a=void 0));let u=bp(this,r,0,s.from,a??n),l,c;if(u?(c=u.state,l=u.pos+1):(c=this.streamParser.startState(t.unit),l=0),n-l>1e4)return null;for(;l<n;){let m=t.state.doc.lineAt(l),h=Math.min(n,m.to);if(m.length){let f=o?o(m.from):-1,d=new Ab(m.text,t.state.tabSize,t.unit,f<0?void 0:f);for(;d.pos<h-m.from;)Ib(this.streamParser.token,d,c)}else this.streamParser.blankLine(c,t.unit);if(h==n)break;l=m.to+1}let p=t.lineAt(n);return o&&a==null&&Hg.set(t.state,p.from),this.streamParser.indent(c,/^\s*(.*)/.exec(p.text)[1],t)}get allowsNesting(){return!1}}function bp(i,t,n,r,s){let a=n>=r&&n+t.length<=s&&t.prop(i.stateAfter);if(a)return{state:i.streamParser.copyState(a),pos:n+t.length};for(let o=t.children.length-1;o>=0;o--){let u=t.children[o],l=n+t.positions[o],c=u instanceof Mn&&l<s&&bp(i,u,l,r,s);if(c)return c}return null}function Ob(i,t,n,r,s){if(s&&n<=0&&r>=t.length)return t;!s&&t.type==i.topNode&&(s=!0);for(let a=t.children.length-1;a>=0;a--){let o=t.positions[a],u=t.children[a],l;if(o<r&&u instanceof Mn){if(!(l=Ob(i,u,n-o,r-o,s)))break;return s?new Mn(t.type,t.children.slice(0,a).concat(l),t.positions.slice(0,a+1),o+l.length):l}}return null}function hj(i,t,n,r){for(let s of t){let a=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),u=a<=n&&o>n&&bp(i,s.tree,0-s.offset,n,o),l;if(u&&(l=Ob(i,s.tree,n+s.offset,u.pos+s.offset,!1)))return{state:u.state,tree:l}}return{state:i.streamParser.startState(r?aa(r):4),tree:Mn.empty}}class dj{constructor(t,n,r,s){this.lang=t,this.input=n,this.fragments=r,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let a=el.get(),o=s[0].from,{state:u,tree:l}=hj(t,r,o,a==null?void 0:a.state);this.state=u,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(aa(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let t=el.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(t&&(r=Math.min(r,t.viewport.to));this.parsedPos<r;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let n=this.input.chunk(t);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return t+n.length<=this.to?n:n.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,n=this.lineAfter(t),r=t+n.length;for(let s=this.rangeIndex;;){let a=this.ranges[s].to;if(a>=r||(n=n.slice(0,a-(r-n.length)),s++,s==this.ranges.length))break;let o=this.ranges[s].from,u=this.lineAfter(o);n+=u,r=o+u.length}return{line:n,end:r}}skipGapsTo(t,n,r){for(;;){let s=this.ranges[this.rangeIndex].to,a=t+n;if(r>0?s>a:s>=a)break;let o=this.ranges[++this.rangeIndex].from;n+=o-s}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,n,r,s,a){if(this.ranges.length>1){a=this.skipGapsTo(n,a,1),n+=a;let o=this.chunk.length;a=this.skipGapsTo(r,a,-1),r+=a,s+=this.chunk.length-o}return this.chunk.push(t,n,r,s),a}parseLine(t){let{line:n,end:r}=this.nextLine(),s=0,{streamParser:a}=this.lang,o=new Ab(n,t?t.state.tabSize:4,t?aa(t.state):2);if(o.eol())a.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let u=Ib(a.token,o,this.state);if(u&&(s=this.emitToken(this.lang.tokenTable.resolve(u),this.parsedPos+o.start,this.parsedPos+o.pos,4,s)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=Mn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:fj,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new Mn(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Mn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Ib(i,t,n){t.start=t.pos;for(let r=0;r<10;r++){let s=i(t,n);if(t.pos>t.start)return s}throw new Error("Stream parser failed to advance stream.")}const _p=Object.create(null),Zl=[Mi.none],fj=new hp(Zl),zg=[],Pb=Object.create(null);for(let[i,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Pb[i]=Db(_p,t);class Rb{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),Pb)}resolve(t){return t?this.table[t]||(this.table[t]=Db(this.extra,t)):0}}const pj=new Rb(_p);function vd(i,t){zg.indexOf(i)>-1||(zg.push(i),console.warn(t))}function Db(i,t){let n=null;for(let a of t.split(".")){let o=i[a]||Ot[a];o?typeof o=="function"?n?n=o(n):vd(a,`Modifier ${a} used at start of tag`):n?vd(a,`Tag ${a} used as modifier`):n=o:vd(a,`Unknown highlighting tag ${a}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),s=Mi.define({id:Zl.length,name:r,props:[gC({[r]:n})]});return Zl.push(s),s.id}function mj(i){let t=Mi.define({id:Zl.length,name:"Document",props:[Da.add(()=>i)]});return Zl.push(t),t}const gj=i=>{let{state:t}=i,n=t.doc.lineAt(t.selection.main.head),r=xp(i.state,n.from);return r.line?yj(i):r.block?bj(i):!1};function wp(i,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let s=i(t,n);return s?(r(n.update(s)),!0):!1}}const yj=wp(xj,0),vj=wp(Lb,0),bj=wp((i,t)=>Lb(i,t,wj(t)),0);function xp(i,t){let n=i.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const Cl=50;function _j(i,{open:t,close:n},r,s){let a=i.sliceDoc(r-Cl,r),o=i.sliceDoc(s,s+Cl),u=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,c=a.length-u;if(a.slice(c-t.length,c)==t&&o.slice(l,l+n.length)==n)return{open:{pos:r-u,margin:u&&1},close:{pos:s+l,margin:l&&1}};let p,m;s-r<=2*Cl?p=m=i.sliceDoc(r,s):(p=i.sliceDoc(r,r+Cl),m=i.sliceDoc(s-Cl,s));let h=/^\s*/.exec(p)[0].length,f=/\s*$/.exec(m)[0].length,d=m.length-f-n.length;return p.slice(h,h+t.length)==t&&m.slice(d,d+n.length)==n?{open:{pos:r+h+t.length,margin:/\s/.test(p.charAt(h+t.length))?1:0},close:{pos:s-f-n.length,margin:/\s/.test(m.charAt(d-1))?1:0}}:null}function wj(i){let t=[];for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),s=n.to<=r.to?r:i.doc.lineAt(n.to),a=t.length-1;a>=0&&t[a].to>r.from?t[a].to=s.to:t.push({from:r.from,to:s.to})}return t}function Lb(i,t,n=t.selection.ranges){let r=n.map(a=>xp(t,a.from).block);if(!r.every(a=>a))return null;let s=n.map((a,o)=>_j(t,r[o],a.from,a.to));if(i!=2&&!s.every(a=>a))return{changes:t.changes(n.map((a,o)=>s[o]?[]:[{from:a.from,insert:r[o].open+" "},{from:a.to,insert:" "+r[o].close}]))};if(i!=1&&s.some(a=>a)){let a=[];for(let o=0,u;o<s.length;o++)if(u=s[o]){let l=r[o],{open:c,close:p}=u;a.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:p.pos-p.margin,to:p.pos+l.close.length})}return{changes:a}}return null}function xj(i,t,n=t.selection.ranges){let r=[],s=-1;for(let{from:a,to:o}of n){let u=r.length,l=1e9;for(let c=a;c<=o;){let p=t.doc.lineAt(c);if(p.from>s&&(a==o||o>p.from)){s=p.from;let m=xp(t,p.from).line;if(!m)continue;let h=/^\s*/.exec(p.text)[0].length,f=h==p.length,d=p.text.slice(h,h+m.length)==m?h:-1;h<p.text.length&&h<l&&(l=h),r.push({line:p,comment:d,token:m,indent:h,empty:f,single:!1})}c=p.to+1}if(l<1e9)for(let c=u;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==u+1&&(r[u].single=!0)}if(i!=2&&r.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:u,token:l,indent:c,empty:p,single:m}of r)(m||!p)&&a.push({from:u.from+c,insert:l+" "});let o=t.changes(a);return{changes:o,selection:t.selection.map(o,1)}}else if(i!=1&&r.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:u,token:l}of r)if(u>=0){let c=o.from+u,p=c+l.length;o.text[p-o.from]==" "&&p++,a.push({from:c,to:p})}return{changes:a}}return null}const Tf=Qs.define(),Sj=Qs.define(),Cj=Vt.define(),Nb=Vt.define({combine(i){return Ps(i,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(r,s)=>t(r,s)||n(r,s)})}});function jj(i){let t=0;return i.iterChangedRanges((n,r)=>t=r),t}const Bb=Qn.define({create(){return Cs.empty},update(i,t){let n=t.state.facet(Nb),r=t.annotation(Tf);if(r){let l=t.docChanged?yt.single(jj(t.changes)):void 0,c=Ti.fromTransaction(t,l),p=r.side,m=p==0?i.undone:i.done;return c?m=Lc(m,m.length,n.minDepth,c):m=Vb(m,t.startState.selection),new Cs(p==0?r.rest:m,p==0?m:r.rest)}let s=t.annotation(Sj);if((s=="full"||s=="before")&&(i=i.isolate()),t.annotation(Bn.addToHistory)===!1)return t.changes.empty?i:i.addMapping(t.changes.desc);let a=Ti.fromTransaction(t),o=t.annotation(Bn.time),u=t.annotation(Bn.userEvent);return a?i=i.addChanges(a,o,u,n,t):t.selection&&(i=i.addSelection(t.startState.selection,o,u,n.newGroupDelay)),(s=="full"||s=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(t=>t.toJSON()),undone:i.undone.map(t=>t.toJSON())}},fromJSON(i){return new Cs(i.done.map(Ti.fromJSON),i.undone.map(Ti.fromJSON))}});function Tj(i={}){return[Bb,Nb.of(i),Ht.domEventHandlers({beforeinput(t,n){let r=t.inputType=="historyUndo"?Fb:t.inputType=="historyRedo"?kf:null;return r?(t.preventDefault(),r(n)):!1}})]}function Sh(i,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let s=n.field(Bb,!1);if(!s)return!1;let a=s.pop(i,n,t);return a?(r(a),!0):!1}}const Fb=Sh(0,!1),kf=Sh(1,!1),kj=Sh(0,!0),Ej=Sh(1,!0);class Ti{constructor(t,n,r,s,a){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=s,this.selectionsAfter=a}setSelAfter(t){return new Ti(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(t){return new Ti(t.changes&&Dn.fromJSON(t.changes),[],t.mapped&&js.fromJSON(t.mapped),t.startSelection&&yt.fromJSON(t.startSelection),t.selectionsAfter.map(yt.fromJSON))}static fromTransaction(t,n){let r=Ki;for(let s of t.startState.facet(Cj)){let a=s(t);a.length&&(r=r.concat(a))}return!r.length&&t.changes.empty?null:new Ti(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,Ki)}static selection(t){return new Ti(void 0,Ki,void 0,void 0,t)}}function Lc(i,t,n,r){let s=t+1>n+20?t-n-1:0,a=i.slice(s,t);return a.push(r),a}function Mj(i,t){let n=[],r=!1;return i.iterChangedRanges((s,a)=>n.push(s,a)),t.iterChangedRanges((s,a,o,u)=>{for(let l=0;l<n.length;){let c=n[l++],p=n[l++];u>=c&&o<=p&&(r=!0)}}),r}function Aj(i,t){return i.ranges.length==t.ranges.length&&i.ranges.filter((n,r)=>n.empty!=t.ranges[r].empty).length===0}function Ub(i,t){return i.length?t.length?i.concat(t):i:t}const Ki=[],Oj=200;function Vb(i,t){if(i.length){let n=i[i.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Oj));return r.length&&r[r.length-1].eq(t)?i:(r.push(t),Lc(i,i.length-1,1e9,n.setSelAfter(r)))}else return[Ti.selection([t])]}function Ij(i){let t=i[i.length-1],n=i.slice();return n[i.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function bd(i,t){if(!i.length)return i;let n=i.length,r=Ki;for(;n;){let s=Pj(i[n-1],t,r);if(s.changes&&!s.changes.empty||s.effects.length){let a=i.slice(0,n);return a[n-1]=s,a}else t=s.mapped,n--,r=s.selectionsAfter}return r.length?[Ti.selection(r)]:Ki}function Pj(i,t,n){let r=Ub(i.selectionsAfter.length?i.selectionsAfter.map(u=>u.map(t)):Ki,n);if(!i.changes)return Ti.selection(r);let s=i.changes.map(t),a=t.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(a):a;return new Ti(s,pr.mapEffects(i.effects,t),o,i.startSelection.map(a),r)}const Rj=/^(input\.type|delete)($|\.)/;class Cs{constructor(t,n,r=0,s=void 0){this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=s}isolate(){return this.prevTime?new Cs(this.done,this.undone):this}addChanges(t,n,r,s,a){let o=this.done,u=o[o.length-1];return u&&u.changes&&!u.changes.empty&&t.changes&&(!r||Rj.test(r))&&(!u.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,Mj(u.changes,t.changes))||r=="input.type.compose")?o=Lc(o,o.length-1,s.minDepth,new Ti(t.changes.compose(u.changes),Ub(t.effects,u.effects),u.mapped,u.startSelection,Ki)):o=Lc(o,o.length,s.minDepth,t),new Cs(o,Ki,n,r)}addSelection(t,n,r,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Ki;return a.length>0&&n-this.prevTime<s&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Aj(a[a.length-1],t)?this:new Cs(Vb(this.done,t),this.undone,n,r)}addMapping(t){return new Cs(bd(this.done,t),bd(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,r){let s=t==0?this.done:this.undone;if(s.length==0)return null;let a=s[s.length-1];if(r&&a.selectionsAfter.length)return n.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:Tf.of({side:t,rest:Ij(s)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let o=s.length==1?Ki:s.slice(0,s.length-1);return a.mapped&&(o=bd(o,a.mapped)),n.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:Tf.of({side:t,rest:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Cs.empty=new Cs(Ki,Ki);const Dj=[{key:"Mod-z",run:Fb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kf,preventDefault:!0},{key:"Mod-u",run:kj,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ej,preventDefault:!0}];function dl(i,t){return yt.create(i.ranges.map(t),i.mainIndex)}function Rs(i,t){return i.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function hs({state:i,dispatch:t},n){let r=dl(i.selection,n);return r.eq(i.selection)?!1:(t(Rs(i,r)),!0)}function Ch(i,t){return yt.cursor(t?i.to:i.from)}function Gb(i,t){return hs(i,n=>n.empty?i.moveByChar(n,t):Ch(n,t))}function hi(i){return i.textDirectionAt(i.state.selection.main.head)==vn.LTR}const Hb=i=>Gb(i,!hi(i)),zb=i=>Gb(i,hi(i));function Wb(i,t){return hs(i,n=>n.empty?i.moveByGroup(n,t):Ch(n,t))}const Lj=i=>Wb(i,!hi(i)),Nj=i=>Wb(i,hi(i));function Bj(i,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(i.sliceDoc(t.from,t.to)))||t.firstChild}function jh(i,t,n){let r=Jn(i).resolveInner(t.head),s=n?Tr.closedBy:Tr.openedBy;for(let l=t.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;Bj(i,c,s)?r=c:l=n?c.to:c.from}let a=r.type.prop(s),o,u;return a&&(o=n?Ss(i,r.from,1):Ss(i,r.to,-1))&&o.matched?u=n?o.end.to:o.end.from:u=n?r.to:r.from,yt.cursor(u,n?-1:1)}const Fj=i=>hs(i,t=>jh(i.state,t,!hi(i))),Uj=i=>hs(i,t=>jh(i.state,t,hi(i)));function qb(i,t){return hs(i,n=>{if(!n.empty)return Ch(n,t);let r=i.moveVertically(n,t);return r.head!=n.head?r:i.moveToLineBoundary(n,t)})}const $b=i=>qb(i,!1),Xb=i=>qb(i,!0);function Yb(i){let t=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,n=0,r=0,s;if(t){for(let a of i.state.facet(Ht.scrollMargins)){let o=a(i);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}s=i.scrollDOM.clientHeight-n-r}else s=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(i.defaultLineHeight,s-5)}}function Kb(i,t){let n=Yb(i),{state:r}=i,s=dl(r.selection,o=>o.empty?i.moveVertically(o,t,n.height):Ch(o,t));if(s.eq(r.selection))return!1;let a;if(n.selfScroll){let o=i.coordsAtPos(r.selection.main.head),u=i.scrollDOM.getBoundingClientRect(),l=u.top+n.marginTop,c=u.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(a=Ht.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return i.dispatch(Rs(r,s),{effects:a}),!0}const Wg=i=>Kb(i,!1),Ef=i=>Kb(i,!0);function Do(i,t,n){let r=i.lineBlockAt(t.head),s=i.moveToLineBoundary(t,n);if(s.head==t.head&&s.head!=(n?r.to:r.from)&&(s=i.moveToLineBoundary(t,n,!1)),!n&&s.head==r.from&&r.length){let a=/^\s*/.exec(i.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;a&&t.head!=r.from+a&&(s=yt.cursor(r.from+a))}return s}const Vj=i=>hs(i,t=>Do(i,t,!0)),Gj=i=>hs(i,t=>Do(i,t,!1)),Hj=i=>hs(i,t=>Do(i,t,!hi(i))),zj=i=>hs(i,t=>Do(i,t,hi(i))),Wj=i=>hs(i,t=>yt.cursor(i.lineBlockAt(t.head).from,1)),qj=i=>hs(i,t=>yt.cursor(i.lineBlockAt(t.head).to,-1));function $j(i,t,n){let r=!1,s=dl(i.selection,a=>{let o=Ss(i,a.head,-1)||Ss(i,a.head,1)||a.head>0&&Ss(i,a.head-1,1)||a.head<i.doc.length&&Ss(i,a.head+1,-1);if(!o||!o.end)return a;r=!0;let u=o.start.from==a.head?o.end.to:o.end.from;return n?yt.range(a.anchor,u):yt.cursor(u)});return r?(t(Rs(i,s)),!0):!1}const Xj=({state:i,dispatch:t})=>$j(i,t,!1);function Qi(i,t){let n=dl(i.state.selection,r=>{let s=t(r);return yt.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(i.state.selection)?!1:(i.dispatch(Rs(i.state,n)),!0)}function Jb(i,t){return Qi(i,n=>i.moveByChar(n,t))}const Qb=i=>Jb(i,!hi(i)),Zb=i=>Jb(i,hi(i));function e1(i,t){return Qi(i,n=>i.moveByGroup(n,t))}const Yj=i=>e1(i,!hi(i)),Kj=i=>e1(i,hi(i)),Jj=i=>Qi(i,t=>jh(i.state,t,!hi(i))),Qj=i=>Qi(i,t=>jh(i.state,t,hi(i)));function t1(i,t){return Qi(i,n=>i.moveVertically(n,t))}const r1=i=>t1(i,!1),n1=i=>t1(i,!0);function i1(i,t){return Qi(i,n=>i.moveVertically(n,t,Yb(i).height))}const qg=i=>i1(i,!1),$g=i=>i1(i,!0),Zj=i=>Qi(i,t=>Do(i,t,!0)),eT=i=>Qi(i,t=>Do(i,t,!1)),tT=i=>Qi(i,t=>Do(i,t,!hi(i))),rT=i=>Qi(i,t=>Do(i,t,hi(i))),nT=i=>Qi(i,t=>yt.cursor(i.lineBlockAt(t.head).from)),iT=i=>Qi(i,t=>yt.cursor(i.lineBlockAt(t.head).to)),Xg=({state:i,dispatch:t})=>(t(Rs(i,{anchor:0})),!0),Yg=({state:i,dispatch:t})=>(t(Rs(i,{anchor:i.doc.length})),!0),Kg=({state:i,dispatch:t})=>(t(Rs(i,{anchor:i.selection.main.anchor,head:0})),!0),Jg=({state:i,dispatch:t})=>(t(Rs(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),sT=({state:i,dispatch:t})=>(t(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),oT=({state:i,dispatch:t})=>{let n=kh(i).map(({from:r,to:s})=>yt.range(r,Math.min(s+1,i.doc.length)));return t(i.update({selection:yt.create(n),userEvent:"select"})),!0},aT=({state:i,dispatch:t})=>{let n=dl(i.selection,r=>{var s;let a=Jn(i).resolveInner(r.head,1);for(;!(a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from||!(!((s=a.parent)===null||s===void 0)&&s.parent));)a=a.parent;return yt.range(a.to,a.from)});return t(Rs(i,n)),!0},lT=({state:i,dispatch:t})=>{let n=i.selection,r=null;return n.ranges.length>1?r=yt.create([n.main]):n.main.empty||(r=yt.create([yt.cursor(n.main.head)])),r?(t(Rs(i,r)),!0):!1};function Th(i,t){if(i.state.readOnly)return!1;let n="delete.selection",{state:r}=i,s=r.changeByRange(a=>{let{from:o,to:u}=a;if(o==u){let l=t(o);l<o?(n="delete.backward",l=Zu(i,l,!1)):l>o&&(n="delete.forward",l=Zu(i,l,!0)),o=Math.min(o,l),u=Math.max(u,l)}else o=Zu(i,o,!1),u=Zu(i,u,!0);return o==u?{range:a}:{changes:{from:o,to:u},range:yt.cursor(o)}});return s.changes.empty?!1:(i.dispatch(r.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ht.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Zu(i,t,n){if(i instanceof Ht)for(let r of i.state.facet(Ht.atomicRanges).map(s=>s(i)))r.between(t,t,(s,a)=>{s<t&&a>t&&(t=n?a:s)});return t}const s1=(i,t)=>Th(i,n=>{let{state:r}=i,s=r.doc.lineAt(n),a,o;if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,n-s.from))){if(a[a.length-1]=="	")return n-1;let u=gu(a,r.tabSize),l=u%aa(r)||aa(r);for(let c=0;c<l&&a[a.length-1-c]==" ";c++)n--;o=n}else o=_i(s.text,n-s.from,t,t)+s.from,o==n&&s.number!=(t?r.doc.lines:1)&&(o+=t?1:-1);return o}),Mf=i=>s1(i,!1),o1=i=>s1(i,!0),a1=(i,t)=>Th(i,n=>{let r=n,{state:s}=i,a=s.doc.lineAt(r),o=s.charCategorizer(r);for(let u=null;;){if(r==(t?a.to:a.from)){r==n&&a.number!=(t?s.doc.lines:1)&&(r+=t?1:-1);break}let l=_i(a.text,r-a.from,t)+a.from,c=a.text.slice(Math.min(r,l)-a.from,Math.max(r,l)-a.from),p=o(c);if(u!=null&&p!=u)break;(c!=" "||r!=n)&&(u=p),r=l}return r}),l1=i=>a1(i,!1),uT=i=>a1(i,!0),u1=i=>Th(i,t=>{let n=i.lineBlockAt(t).to;return t<n?n:Math.min(i.state.doc.length,t+1)}),cT=i=>Th(i,t=>{let n=i.lineBlockAt(t).from;return t>n?n:Math.max(0,t-1)}),hT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=i.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Lr.of(["",""])},range:yt.cursor(r.from)}));return t(i.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},dT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=i.changeByRange(r=>{if(!r.empty||r.from==0||r.from==i.doc.length)return{range:r};let s=r.from,a=i.doc.lineAt(s),o=s==a.from?s-1:_i(a.text,s-a.from,!1)+a.from,u=s==a.to?s+1:_i(a.text,s-a.from,!0)+a.from;return{changes:{from:o,to:u,insert:i.doc.slice(s,u).append(i.doc.slice(o,s))},range:yt.cursor(u)}});return n.changes.empty?!1:(t(i.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function kh(i){let t=[],n=-1;for(let r of i.selection.ranges){let s=i.doc.lineAt(r.from),a=i.doc.lineAt(r.to);if(!r.empty&&r.to==a.from&&(a=i.doc.lineAt(r.to-1)),n>=s.number){let o=t[t.length-1];o.to=a.to,o.ranges.push(r)}else t.push({from:s.from,to:a.to,ranges:[r]});n=a.number+1}return t}function c1(i,t,n){if(i.readOnly)return!1;let r=[],s=[];for(let a of kh(i)){if(n?a.to==i.doc.length:a.from==0)continue;let o=i.doc.lineAt(n?a.to+1:a.from-1),u=o.length+1;if(n){r.push({from:a.to,to:o.to},{from:a.from,insert:o.text+i.lineBreak});for(let l of a.ranges)s.push(yt.range(Math.min(i.doc.length,l.anchor+u),Math.min(i.doc.length,l.head+u)))}else{r.push({from:o.from,to:a.from},{from:a.to,insert:i.lineBreak+o.text});for(let l of a.ranges)s.push(yt.range(l.anchor-u,l.head-u))}}return r.length?(t(i.update({changes:r,scrollIntoView:!0,selection:yt.create(s,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const fT=({state:i,dispatch:t})=>c1(i,t,!1),pT=({state:i,dispatch:t})=>c1(i,t,!0);function h1(i,t,n){if(i.readOnly)return!1;let r=[];for(let s of kh(i))n?r.push({from:s.from,insert:i.doc.slice(s.from,s.to)+i.lineBreak}):r.push({from:s.to,insert:i.lineBreak+i.doc.slice(s.from,s.to)});return t(i.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mT=({state:i,dispatch:t})=>h1(i,t,!1),gT=({state:i,dispatch:t})=>h1(i,t,!0),yT=i=>{if(i.state.readOnly)return!1;let{state:t}=i,n=t.changes(kh(t).map(({from:s,to:a})=>(s>0?s--:a<t.doc.length&&a++,{from:s,to:a}))),r=dl(t.selection,s=>i.moveVertically(s,!0)).map(n);return i.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function vT(i,t){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=Jn(i).resolveInner(t),r=n.childBefore(t),s=n.childAfter(t),a;return r&&s&&r.to<=t&&s.from>=t&&(a=r.type.prop(Tr.closedBy))&&a.indexOf(s.name)>-1&&i.doc.lineAt(r.to).from==i.doc.lineAt(s.from).from?{from:r.to,to:s.from}:null}const bT=d1(!1),_T=d1(!0);function d1(i){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(s=>{let{from:a,to:o}=s,u=t.doc.lineAt(a),l=!i&&a==o&&vT(t,a);i&&(a=o=(o<=u.to?u:t.doc.lineAt(o)).to);let c=new _h(t,{simulateBreak:a,simulateDoubleBreak:!!l}),p=gp(c,a);for(p==null&&(p=/^\s*/.exec(t.doc.lineAt(a).text)[0].length);o<u.to&&/\s/.test(u.text[o-u.from]);)o++;l?{from:a,to:o}=l:a>u.from&&a<u.from+100&&!/\S/.test(u.text.slice(0,a))&&(a=u.from);let m=["",Ql(t,p)];return l&&m.push(Ql(t,c.lineIndent(u.from,-1))),{changes:{from:a,to:o,insert:Lr.of(m)},range:yt.cursor(a+1+m[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Sp(i,t){let n=-1;return i.changeByRange(r=>{let s=[];for(let o=r.from;o<=r.to;){let u=i.doc.lineAt(o);u.number>n&&(r.empty||r.to>u.from)&&(t(u,s,r),n=u.number),o=u.to+1}let a=i.changes(s);return{changes:s,range:yt.range(a.mapPos(r.anchor,1),a.mapPos(r.head,1))}})}const wT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=Object.create(null),r=new _h(i,{overrideIndentation:a=>{let o=n[a];return o??-1}}),s=Sp(i,(a,o,u)=>{let l=gp(r,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let c=/^\s*/.exec(a.text)[0],p=Ql(i,l);(c!=p||u.from<a.from+c.length)&&(n[a.from]=l,o.push({from:a.from,to:a.from+c.length,insert:p}))});return s.changes.empty||t(i.update(s,{userEvent:"indent"})),!0},xT=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(Sp(i,(n,r)=>{r.push({from:n.from,insert:i.facet(mp)})}),{userEvent:"input.indent"})),!0),ST=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(Sp(i,(n,r)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let a=gu(s,i.tabSize),o=0,u=Ql(i,Math.max(0,a-aa(i)));for(;o<s.length&&o<u.length&&s.charCodeAt(o)==u.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+s.length,insert:u.slice(o)})}),{userEvent:"delete.dedent"})),!0),CT=[{key:"Ctrl-b",run:Hb,shift:Qb,preventDefault:!0},{key:"Ctrl-f",run:zb,shift:Zb},{key:"Ctrl-p",run:$b,shift:r1},{key:"Ctrl-n",run:Xb,shift:n1},{key:"Ctrl-a",run:Wj,shift:nT},{key:"Ctrl-e",run:qj,shift:iT},{key:"Ctrl-d",run:o1},{key:"Ctrl-h",run:Mf},{key:"Ctrl-k",run:u1},{key:"Ctrl-Alt-h",run:l1},{key:"Ctrl-o",run:hT},{key:"Ctrl-t",run:dT},{key:"Ctrl-v",run:Ef}],jT=[{key:"ArrowLeft",run:Hb,shift:Qb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Lj,shift:Yj,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Hj,shift:tT,preventDefault:!0},{key:"ArrowRight",run:zb,shift:Zb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Nj,shift:Kj,preventDefault:!0},{mac:"Cmd-ArrowRight",run:zj,shift:rT,preventDefault:!0},{key:"ArrowUp",run:$b,shift:r1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Xg,shift:Kg},{mac:"Ctrl-ArrowUp",run:Wg,shift:qg},{key:"ArrowDown",run:Xb,shift:n1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Yg,shift:Jg},{mac:"Ctrl-ArrowDown",run:Ef,shift:$g},{key:"PageUp",run:Wg,shift:qg},{key:"PageDown",run:Ef,shift:$g},{key:"Home",run:Gj,shift:eT,preventDefault:!0},{key:"Mod-Home",run:Xg,shift:Kg},{key:"End",run:Vj,shift:Zj,preventDefault:!0},{key:"Mod-End",run:Yg,shift:Jg},{key:"Enter",run:bT},{key:"Mod-a",run:sT},{key:"Backspace",run:Mf,shift:Mf},{key:"Delete",run:o1},{key:"Mod-Backspace",mac:"Alt-Backspace",run:l1},{key:"Mod-Delete",mac:"Alt-Delete",run:uT},{mac:"Mod-Backspace",run:cT},{mac:"Mod-Delete",run:u1}].concat(CT.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),TT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Fj,shift:Jj},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Uj,shift:Qj},{key:"Alt-ArrowUp",run:fT},{key:"Shift-Alt-ArrowUp",run:mT},{key:"Alt-ArrowDown",run:pT},{key:"Shift-Alt-ArrowDown",run:gT},{key:"Escape",run:lT},{key:"Mod-Enter",run:_T},{key:"Alt-l",mac:"Ctrl-l",run:oT},{key:"Mod-i",run:aT,preventDefault:!0},{key:"Mod-[",run:ST},{key:"Mod-]",run:xT},{key:"Mod-Alt-\\",run:wT},{key:"Shift-Mod-k",run:yT},{key:"Shift-Mod-\\",run:Xj},{key:"Mod-/",run:gj},{key:"Alt-A",run:vj}].concat(jT);function nn(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var t=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var s=n[r];typeof s=="string"?i.setAttribute(r,s):s!=null&&(i[r]=s)}t++}for(;t<arguments.length;t++)f1(i,arguments[t]);return i}function f1(i,t){if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)i.appendChild(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)f1(i,t[n]);else throw new RangeError("Unsupported child node: "+t)}const Qg=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class rl{constructor(t,n,r=0,s=t.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,s),this.bufferStart=r,this.normalize=a?u=>a(Qg(u)):Qg,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Yn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let n=Qf(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=Yi(t);let s=this.normalize(n);for(let a=0,o=r;;a++){let u=s.charCodeAt(a),l=this.match(u,o);if(l)return this.value=l,this;if(a==s.length-1)break;o==r&&a<n.length&&n.charCodeAt(a)==u&&o++}}}match(t,n){let r=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==t&&(a==this.query.length-1?r={from:this.matches[s+1],to:n+1}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(rl.prototype[Symbol.iterator]=function(){return this});const p1={from:-1,to:-1,match:/.*/.exec("")},Cp="gm"+(/x/.unicode==null?"":"u");class m1{constructor(t,n,r,s=0,a=t.length){if(this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=p1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new g1(t,n,r,s,a);this.re=new RegExp(n,Cp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=t.iter();let o=t.lineAt(s);this.curLineStart=o.from,this.matchPos=Nc(t,s),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,s=r+n[0].length;if(this.matchPos=Nc(this.text,s+(r==s?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<s||r>this.value.to)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const _d=new WeakMap;class Ha{constructor(t,n){this.from=t,this.text=n}get to(){return this.from+this.text.length}static get(t,n,r){let s=_d.get(t);if(!s||s.from>=r||s.to<=n){let u=new Ha(n,t.sliceString(n,r));return _d.set(t,u),u}if(s.from==n&&s.to==r)return s;let{text:a,from:o}=s;return o>n&&(a=t.sliceString(n,o)+a,o=n),s.to<r&&(a+=t.sliceString(s.to,r)),_d.set(t,new Ha(o,a)),new Ha(n,a.slice(n-o,r-o))}}class g1{constructor(t,n,r,s,a){this.text=t,this.to=a,this.done=!1,this.value=p1,this.matchPos=Nc(t,s),this.re=new RegExp(n,Cp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Ha.get(t,s,this.chunkEnd(s+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==t&&(this.re.lastIndex=t+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,s=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this.matchPos=Nc(this.text,s+(r==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ha.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(m1.prototype[Symbol.iterator]=g1.prototype[Symbol.iterator]=function(){return this});function kT(i){try{return new RegExp(i,Cp),!0}catch{return!1}}function Nc(i,t){if(t>=i.length)return t;let n=i.lineAt(t),r;for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function Af(i){let t=nn("input",{class:"cm-textfield",name:"line"}),n=nn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),i.dispatch({effects:Bc.of(!1)}),i.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},nn("label",i.state.phrase("Go to line"),": ",t)," ",nn("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:a}=i,o=a.doc.lineAt(a.selection.main.head),[,u,l,c,p]=s,m=c?+c.slice(1):0,h=l?+l:o.number;if(l&&p){let d=h/100;u&&(d=d*(u=="-"?-1:1)+o.number/a.doc.lines),h=Math.round(a.doc.lines*d)}else l&&u&&(h=h*(u=="-"?-1:1)+o.number);let f=a.doc.line(Math.max(1,Math.min(a.doc.lines,h)));i.dispatch({effects:Bc.of(!1),selection:yt.cursor(f.from+Math.max(0,Math.min(m,f.length))),scrollIntoView:!0}),i.focus()}return{dom:n}}const Bc=pr.define(),Zg=Qn.define({create(){return!0},update(i,t){for(let n of t.effects)n.is(Bc)&&(i=n.value);return i},provide:i=>Jl.from(i,t=>t?Af:null)}),ET=i=>{let t=Kl(i,Af);if(!t){let n=[Bc.of(!0)];i.state.field(Zg,!1)==null&&n.push(pr.appendConfig.of([Zg,MT])),i.dispatch({effects:n}),t=Kl(i,Af)}return t&&t.dom.querySelector("input").focus(),!0},MT=Ht.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),AT={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},y1=Vt.define({combine(i){return Ps(i,AT,{highlightWordAroundCursor:(t,n)=>t||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function OT(i){let t=[LT,DT];return i&&t.push(y1.of(i)),t}const IT=Zt.mark({class:"cm-selectionMatch"}),PT=Zt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ey(i,t,n,r){return(n==0||i(t.sliceDoc(n-1,n))!=pn.Word)&&(r==t.doc.length||i(t.sliceDoc(r,r+1))!=pn.Word)}function RT(i,t,n,r){return i(t.sliceDoc(n,n+1))==pn.Word&&i(t.sliceDoc(r-1,r))==pn.Word}const DT=An.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=i.state.facet(y1),{state:n}=i,r=n.selection;if(r.ranges.length>1)return Zt.none;let s=r.main,a,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return Zt.none;let l=n.wordAt(s.head);if(!l)return Zt.none;o=n.charCategorizer(s.head),a=n.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<t.minSelectionLength||l>200)return Zt.none;if(t.wholeWords){if(a=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!(ey(o,n,s.from,s.to)&&RT(o,n,s.from,s.to)))return Zt.none}else if(a=n.sliceDoc(s.from,s.to).trim(),!a)return Zt.none}let u=[];for(let l of i.visibleRanges){let c=new rl(n.doc,a,l.from,l.to);for(;!c.next().done;){let{from:p,to:m}=c.value;if((!o||ey(o,n,p,m))&&(s.empty&&p<=s.from&&m>=s.to?u.push(PT.range(p,m)):(p>=s.to||m<=s.from)&&u.push(IT.range(p,m)),u.length>t.maxMatches))return Zt.none}}return Zt.set(u)}},{decorations:i=>i.decorations}),LT=Ht.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),NT=({state:i,dispatch:t})=>{let{selection:n}=i,r=yt.create(n.ranges.map(s=>i.wordAt(s.head)||yt.cursor(s.head)),n.mainIndex);return r.eq(n)?!1:(t(i.update({selection:r})),!0)};function BT(i,t){let{main:n,ranges:r}=i.selection,s=i.wordAt(n.head),a=s&&s.from==n.from&&s.to==n.to;for(let o=!1,u=new rl(i.doc,t,r[r.length-1].to);;)if(u.next(),u.done){if(o)return null;u=new rl(i.doc,t,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==u.value.from))continue;if(a){let l=i.wordAt(u.value.from);if(!l||l.from!=u.value.from||l.to!=u.value.to)continue}return u.value}}const FT=({state:i,dispatch:t})=>{let{ranges:n}=i.selection;if(n.some(a=>a.from===a.to))return NT({state:i,dispatch:t});let r=i.sliceDoc(n[0].from,n[0].to);if(i.selection.ranges.some(a=>i.sliceDoc(a.from,a.to)!=r))return!1;let s=BT(i,r);return s?(t(i.update({selection:i.selection.addRange(yt.range(s.from,s.to),!1),effects:Ht.scrollIntoView(s.to)})),!0):!1},jp=Vt.define({combine(i){return Ps(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new JT(t)})}});class v1{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||kT(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new HT(this):new VT(this)}getCursor(t,n=0,r){let s=t.doc?t:Mr.create({doc:t});return r==null&&(r=s.doc.length),this.regexp?Ia(this,s,n,r):Oa(this,s,n,r)}}class b1{constructor(t){this.spec=t}}function Oa(i,t,n,r){return new rl(t.doc,i.unquoted,n,r,i.caseSensitive?void 0:s=>s.toLowerCase(),i.wholeWord?UT(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function UT(i,t){return(n,r,s,a)=>((a>n||a+s.length<r)&&(a=Math.max(0,n-2),s=i.sliceString(a,Math.min(i.length,r+2))),(t(Fc(s,n-a))!=pn.Word||t(Uc(s,n-a))!=pn.Word)&&(t(Uc(s,r-a))!=pn.Word||t(Fc(s,r-a))!=pn.Word))}class VT extends b1{constructor(t){super(t)}nextMatch(t,n,r){let s=Oa(this.spec,t,r,t.doc.length).nextOverlapping();return s.done&&(s=Oa(this.spec,t,0,n).nextOverlapping()),s.done?null:s.value}prevMatchInRange(t,n,r){for(let s=r;;){let a=Math.max(n,s-1e4-this.spec.unquoted.length),o=Oa(this.spec,t,a,s),u=null;for(;!o.nextOverlapping().done;)u=o.value;if(u)return u;if(a==n)return null;s-=1e4}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,n){let r=Oa(this.spec,t,0,t.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(t,n,r,s){let a=Oa(this.spec,t,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}function Ia(i,t,n,r){return new m1(t.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?GT(t.charCategorizer(t.selection.main.head)):void 0},n,r)}function Fc(i,t){return i.slice(_i(i,t,!1),t)}function Uc(i,t){return i.slice(t,_i(i,t))}function GT(i){return(t,n,r)=>!r[0].length||(i(Fc(r.input,r.index))!=pn.Word||i(Uc(r.input,r.index))!=pn.Word)&&(i(Uc(r.input,r.index+r[0].length))!=pn.Word||i(Fc(r.input,r.index+r[0].length))!=pn.Word)}class HT extends b1{nextMatch(t,n,r){let s=Ia(this.spec,t,r,t.doc.length).next();return s.done&&(s=Ia(this.spec,t,0,n).next()),s.done?null:s.value}prevMatchInRange(t,n,r){for(let s=1;;s++){let a=Math.max(n,r-s*1e4),o=Ia(this.spec,t,a,r),u=null;for(;!o.next().done;)u=o.value;if(u&&(a==n||u.from>a+10))return u;if(a==n)return null}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?t.match[0]:r!="0"&&+r<t.match.length?t.match[r]:n))}matchAll(t,n){let r=Ia(this.spec,t,0,t.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(t,n,r,s){let a=Ia(this.spec,t,Math.max(0,n-250),Math.min(r+250,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}const eu=pr.define(),Tp=pr.define(),bo=Qn.define({create(i){return new wd(Of(i).create(),null)},update(i,t){for(let n of t.effects)n.is(eu)?i=new wd(n.value.create(),i.panel):n.is(Tp)&&(i=new wd(i.query,n.value?kp:null));return i},provide:i=>Jl.from(i,t=>t.panel)});class wd{constructor(t,n){this.query=t,this.panel=n}}const zT=Zt.mark({class:"cm-searchMatch"}),WT=Zt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),qT=An.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(bo))}update(i){let t=i.state.field(bo);(t!=i.startState.field(bo)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:i,panel:t}){if(!t||!i.spec.valid)return Zt.none;let{view:n}=this,r=new To;for(let s=0,a=n.visibleRanges,o=a.length;s<o;s++){let{from:u,to:l}=a[s];for(;s<o-1&&l>a[s+1].from-2*250;)l=a[++s].to;i.highlight(n.state,u,l,(c,p)=>{let m=n.state.selection.ranges.some(h=>h.from==c&&h.to==p);r.add(c,p,m?WT:zT)})}return r.finish()}},{decorations:i=>i.decorations});function _u(i){return t=>{let n=t.state.field(bo,!1);return n&&n.query.spec.valid?i(t,n):_1(t)}}const Vc=_u((i,{query:t})=>{let{to:n}=i.state.selection.main,r=t.nextMatch(i.state,n,n);return r?(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Ep(i,r),userEvent:"select.search"}),!0):!1}),Gc=_u((i,{query:t})=>{let{state:n}=i,{from:r}=n.selection.main,s=t.prevMatch(n,r,r);return s?(i.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Ep(i,s),userEvent:"select.search"}),!0):!1}),$T=_u((i,{query:t})=>{let n=t.matchAll(i.state,1e3);return!n||!n.length?!1:(i.dispatch({selection:yt.create(n.map(r=>yt.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),XT=({state:i,dispatch:t})=>{let n=i.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:s}=n.main,a=[],o=0;for(let u=new rl(i.doc,i.sliceDoc(r,s));!u.next().done;){if(a.length>1e3)return!1;u.value.from==r&&(o=a.length),a.push(yt.range(u.value.from,u.value.to))}return t(i.update({selection:yt.create(a,o),userEvent:"select.search.matches"})),!0},ty=_u((i,{query:t})=>{let{state:n}=i,{from:r,to:s}=n.selection.main;if(n.readOnly)return!1;let a=t.nextMatch(n,r,r);if(!a)return!1;let o=[],u,l,c=[];if(a.from==r&&a.to==s&&(l=n.toText(t.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=t.nextMatch(n,a.from,a.to),c.push(Ht.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),a){let p=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;u={anchor:a.from-p,head:a.to-p},c.push(Ep(i,a))}return i.dispatch({changes:o,selection:u,scrollIntoView:!!u,effects:c,userEvent:"input.replace"}),!0}),YT=_u((i,{query:t})=>{if(i.state.readOnly)return!1;let n=t.matchAll(i.state,1e9).map(s=>{let{from:a,to:o}=s;return{from:a,to:o,insert:t.getReplacement(s)}});if(!n.length)return!1;let r=i.state.phrase("replaced $ matches",n.length)+".";return i.dispatch({changes:n,effects:Ht.announce.of(r),userEvent:"input.replace.all"}),!0});function kp(i){return i.state.facet(jp).createPanel(i)}function Of(i,t){var n,r,s,a;let o=i.selection.main,u=o.empty||o.to>o.from+100?"":i.sliceDoc(o.from,o.to);if(t&&!u)return t;let l=i.facet(jp);return new v1({search:((n=t==null?void 0:t.literal)!==null&&n!==void 0?n:l.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=t==null?void 0:t.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(s=t==null?void 0:t.literal)!==null&&s!==void 0?s:l.literal,wholeWord:(a=t==null?void 0:t.wholeWord)!==null&&a!==void 0?a:l.wholeWord})}const _1=i=>{let t=i.state.field(bo,!1);if(t&&t.panel){let n=Kl(i,kp);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=i.root.activeElement){let s=Of(i.state,t.query.spec);s.valid&&i.dispatch({effects:eu.of(s)}),r.focus(),r.select()}}else i.dispatch({effects:[Tp.of(!0),t?eu.of(Of(i.state,t.query.spec)):pr.appendConfig.of(ZT)]});return!0},w1=i=>{let t=i.state.field(bo,!1);if(!t||!t.panel)return!1;let n=Kl(i,kp);return n&&n.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:Tp.of(!1)}),!0},KT=[{key:"Mod-f",run:_1,scope:"editor search-panel"},{key:"F3",run:Vc,shift:Gc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vc,shift:Gc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:w1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:XT},{key:"Alt-g",run:ET},{key:"Mod-d",run:FT,preventDefault:!0}];class JT{constructor(t){this.view=t;let n=this.query=t.state.field(bo).query.spec;this.commit=this.commit.bind(this),this.searchField=nn("input",{value:n.search,placeholder:Bi(t,"Find"),"aria-label":Bi(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nn("input",{value:n.replace,placeholder:Bi(t,"Replace"),"aria-label":Bi(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nn("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=nn("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=nn("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(s,a,o){return nn("button",{class:"cm-button",name:s,onclick:a,type:"button"},o)}this.dom=nn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,r("next",()=>Vc(t),[Bi(t,"next")]),r("prev",()=>Gc(t),[Bi(t,"previous")]),r("select",()=>$T(t),[Bi(t,"all")]),nn("label",null,[this.caseField,Bi(t,"match case")]),nn("label",null,[this.reField,Bi(t,"regexp")]),nn("label",null,[this.wordField,Bi(t,"by word")]),...t.state.readOnly?[]:[nn("br"),this.replaceField,r("replace",()=>ty(t),[Bi(t,"replace")]),r("replaceAll",()=>YT(t),[Bi(t,"replace all")])],nn("button",{name:"close",onclick:()=>w1(t),"aria-label":Bi(t,"close"),type:"button"},["Ã"])])}commit(){let t=new v1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:eu.of(t)}))}keydown(t){l2(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Gc:Vc)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),ty(this.view))}update(t){for(let n of t.transactions)for(let r of n.effects)r.is(eu)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jp).top}}function Bi(i,t){return i.state.phrase(t)}const ec=30,tc=/[\s\.,:;?!]/;function Ep(i,{from:t,to:n}){let r=i.state.doc.lineAt(t),s=i.state.doc.lineAt(n).to,a=Math.max(r.from,t-ec),o=Math.min(s,n+ec),u=i.state.sliceDoc(a,o);if(a!=r.from){for(let l=0;l<ec;l++)if(!tc.test(u[l+1])&&tc.test(u[l])){u=u.slice(l);break}}if(o!=s){for(let l=u.length-1;l>u.length-ec;l--)if(!tc.test(u[l-1])&&tc.test(u[l])){u=u.slice(0,l);break}}return Ht.announce.of(`${i.state.phrase("current match")}. ${u} ${i.state.phrase("on line")} ${r.number}.`)}const QT=Ht.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ZT=[bo,hl.lowest(qT),QT];class x1{constructor(t,n,r){this.state=t,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(t){let n=Jn(this.state).resolveInner(this.pos,-1);for(;n&&t.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(t){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),s=n.text.slice(r-n.from,this.pos-n.from),a=s.search(S1(t,!1));return a<0?null:{from:r+a,to:this.pos,text:s.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(t,n){t=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function ry(i){let t=Object.keys(i).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function ek(i){let t=Object.create(null),n=Object.create(null);for(let{label:s}of i){t[s[0]]=!0;for(let a=1;a<s.length;a++)n[s[a]]=!0}let r=ry(t)+ry(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function tk(i){let t=i.map(s=>typeof s=="string"?{label:s}:s),[n,r]=t.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:ek(t);return s=>{let a=s.matchBefore(r);return a||s.explicit?{from:a?a.from:s.pos,options:t,validFor:n}:null}}class ny{constructor(t,n,r){this.completion=t,this.source=n,this.match=r}}function _o(i){return i.selection.main.head}function S1(i,t){var n;let{source:r}=i,s=t&&r[0]!="^",a=r[r.length-1]!="$";return!s&&!a?i:new RegExp(`${s?"^":""}(?:${r})${a?"$":""}`,(n=i.flags)!==null&&n!==void 0?n:i.ignoreCase?"i":"")}const rk=Qs.define();function nk(i,t,n,r){return Object.assign(Object.assign({},i.changeByRange(s=>{if(s==i.selection.main)return{changes:{from:n,to:r,insert:t},range:yt.cursor(n+t.length)};let a=r-n;return!s.empty||a&&i.sliceDoc(s.from-a,s.from)!=i.sliceDoc(n,r)?{range:s}:{changes:{from:s.from-a,to:s.from,insert:t},range:yt.cursor(s.from-a+t.length)}})),{userEvent:"input.complete"})}function C1(i,t){const n=t.completion.apply||t.completion.label;let r=t.source;typeof n=="string"?i.dispatch(Object.assign(Object.assign({},nk(i.state,n,r.from,r.to)),{annotations:rk.of(t.completion)})):n(i,t.completion,r.from,r.to)}const iy=new WeakMap;function ik(i){if(!Array.isArray(i))return i;let t=iy.get(i);return t||iy.set(i,t=tk(i)),t}class sk{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<t.length;){let r=Yn(t,n),s=Yi(r);this.chars.push(r);let a=t.slice(n,n+s),o=a.toUpperCase();this.folded.push(Yn(o==a?a.toLowerCase():o,0)),n+=s}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:n,folded:r,any:s,precise:a,byWord:o}=this;if(n.length==1){let x=Yn(t,0),C=Yi(x),S=C==t.length?0:-100;if(x!=n[0])if(x==r[0])S+=-200;else return null;return[S,0,C]}let u=t.indexOf(this.pattern);if(u==0)return[t.length==this.pattern.length?0:-100,0,this.pattern.length];let l=n.length,c=0;if(u<0){for(let x=0,C=Math.min(t.length,200);x<C&&c<l;){let S=Yn(t,x);(S==n[c]||S==r[c])&&(s[c++]=x),x+=Yi(S)}if(c<l)return null}let p=0,m=0,h=!1,f=0,d=-1,g=-1,y=/[a-z]/.test(t),b=!0;for(let x=0,C=Math.min(t.length,200),S=0;x<C&&m<l;){let w=Yn(t,x);u<0&&(p<l&&w==n[p]&&(a[p++]=x),f<l&&(w==n[f]||w==r[f]?(f==0&&(d=x),g=x+1,f++):f=0));let _,M=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(_=Qf(w))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!x||M==1&&y||S==0&&M!=0)&&(n[m]==w||r[m]==w&&(h=!0)?o[m++]=x:o.length&&(b=!1)),S=M,x+=Yi(w)}return m==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,t):f==l&&d==0?[-200-t.length+(g==t.length?0:-100),0,g]:u>-1?[-700-t.length,u,u+this.pattern.length]:f==l?[-200+-700-t.length,d,g]:m==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,t):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,t)}result(t,n,r){let s=[t-r.length],a=1;for(let o of n){let u=o+(this.astral?Yi(Yn(r,o)):1);a>1&&s[a-1]==o?s[a-1]=u:(s[a++]=o,s[a++]=u)}return s}}const Ji=Vt.define({combine(i){return Ps(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,n)=>t.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(t,n)=>t&&n,closeOnBlur:(t,n)=>t&&n,icons:(t,n)=>t&&n,tooltipClass:(t,n)=>r=>sy(t(r),n(r)),optionClass:(t,n)=>r=>sy(t(r),n(r)),addToOptions:(t,n)=>t.concat(n)})}});function sy(i,t){return i?t?i+" "+t:i:t}function ok(i){let t=i.addToOptions.slice();return i.icons&&t.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),r.setAttribute("aria-hidden","true"),r},position:20}),t.push({render(n,r,s){let a=document.createElement("span");a.className="cm-completionLabel";let{label:o}=n,u=0;for(let l=1;l<s.length;){let c=s[l++],p=s[l++];c>u&&a.appendChild(document.createTextNode(o.slice(u,c)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(o.slice(c,p))),m.className="cm-completionMatchedText",u=p}return u<o.length&&a.appendChild(document.createTextNode(o.slice(u))),a},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),t.sort((n,r)=>n.position-r.position).map(n=>n.render)}function oy(i,t,n){if(i<=n)return{from:0,to:i};if(t<0&&(t=0),t<=i>>1){let s=Math.floor(t/n);return{from:s*n,to:(s+1)*n}}let r=Math.floor((i-t)/n);return{from:i-(r+1)*n,to:i-r*n}}class ak{constructor(t,n){this.view=t,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:u=>this.positionInfo(u),key:this},this.space=null,this.currentClass="";let r=t.state.field(n),{options:s,selected:a}=r.open,o=t.state.facet(Ji);this.optionContent=ok(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=oy(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",u=>{for(let l=u.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<s.length){C1(t,s[+c[1]]),u.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){var n,r,s;let a=t.state.field(this.stateField),o=t.startState.field(this.stateField);this.updateTooltipClass(t.state),a!=o&&(this.updateSel(),((n=a.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((s=a.open)===null||s===void 0)&&s.disabled)))}updateTooltipClass(t){let n=this.tooltipClass(t);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=oy(n.options.length,n.selected,this.view.state.facet(Ji).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:s}=r;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(r);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(o)}).catch(o=>Gi(this.view.state,o,"completion info")):this.addInfoPane(a)}}addInfoPane(t){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(t),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let n=null;for(let r=this.list.firstChild,s=this.range.from;r;r=r.nextSibling,s++)s==t?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&uk(this.list,n),n}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=t.getBoundingClientRect(),a=this.space;if(!a){let d=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:d.innerWidth,bottom:d.innerHeight}}if(s.top>Math.min(a.bottom,n.bottom)-10||s.bottom<Math.max(a.top,n.top)+10)return null;let o=this.view.textDirection==vn.RTL,u=o,l=!1,c,p="",m="",h=n.left-a.left,f=a.right-n.right;if(u&&h<Math.min(r.width,f)?u=!1:!u&&f<Math.min(r.width,h)&&(u=!0),r.width<=(u?h:f))p=Math.max(a.top,Math.min(s.top,a.bottom-r.height))-n.top+"px",c=Math.min(400,u?h:f)+"px";else{l=!0,c=Math.min(400,(o?n.right:a.right-n.left)-30)+"px";let d=a.bottom-n.bottom;d>=r.height||d>n.top?p=s.bottom-n.top+"px":m=n.bottom-s.top+"px"}return{top:p,bottom:m,maxWidth:c,class:l?o?"left-narrow":"right-narrow":u?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,n,r){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let a=r.from;a<r.to;a++){let{completion:o,match:u}=t[a];const l=s.appendChild(document.createElement("li"));l.id=n+"-"+a,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let p of this.optionContent){let m=p(o,this.view.state,u);m&&l.appendChild(m)}}return r.from&&s.classList.add("cm-completionListIncompleteTop"),r.to<t.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function lk(i){return t=>new ak(t,i)}function uk(i,t){let n=i.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?i.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(i.scrollTop+=r.bottom-n.bottom)}function ay(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function ck(i,t){let n=[],r=0;for(let u of i)if(u.hasResult())if(u.result.filter===!1){let l=u.result.getMatch;for(let c of u.result.options){let p=[1e9-r++];if(l)for(let m of l(c))p.push(m);n.push(new ny(c,u,p))}}else{let l=new sk(t.sliceDoc(u.from,u.to)),c;for(let p of u.result.options)(c=l.match(p.label))&&(p.boost!=null&&(c[0]+=p.boost),n.push(new ny(p,u,c)))}let s=[],a=null,o=t.facet(Ji).compareCompletions;for(let u of n.sort((l,c)=>c.match[0]-l.match[0]||o(l.completion,c.completion)))!a||a.label!=u.completion.label||a.detail!=u.completion.detail||a.type!=null&&u.completion.type!=null&&a.type!=u.completion.type||a.apply!=u.completion.apply?s.push(u):ay(u.completion)>ay(a)&&(s[s.length-1]=u),a=u.completion;return s}class La{constructor(t,n,r,s,a,o){this.options=t,this.attrs=n,this.tooltip=r,this.timestamp=s,this.selected=a,this.disabled=o}setSelected(t,n){return t==this.selected||t>=this.options.length?this:new La(this.options,ly(n,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,n,r,s,a){let o=ck(t,n);if(!o.length)return s&&t.some(l=>l.state==1)?new La(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let u=n.facet(Ji).selectOnOpen?0:-1;if(s&&s.selected!=u&&s.selected!=-1){let l=s.options[s.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){u=c;break}}return new La(o,ly(r,u),{pos:t.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:lk(Xi),above:a.aboveCursor},s?s.timestamp:Date.now(),u,!1)}map(t){return new La(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Hc{constructor(t,n,r){this.active=t,this.id=n,this.open=r}static start(){return new Hc(fk,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:n}=t,r=n.facet(Ji),a=(r.override||n.languageDataAt("autocomplete",_o(n)).map(ik)).map(u=>(this.active.find(c=>c.source==u)||new ji(u,this.active.some(c=>c.state!=0)?1:0)).update(t,r));a.length==this.active.length&&a.every((u,l)=>u==this.active[l])&&(a=this.active);let o=this.open;o&&t.docChanged&&(o=o.map(t.changes)),t.selection||a.some(u=>u.hasResult()&&t.changes.touchesRange(u.from,u.to))||!hk(a,this.active)?o=La.build(a,n,this.id,o,r):o&&o.disabled&&!a.some(u=>u.state==1)&&(o=null),!o&&a.every(u=>u.state!=1)&&a.some(u=>u.hasResult())&&(a=a.map(u=>u.hasResult()?new ji(u.source,0):u));for(let u of t.effects)u.is(T1)&&(o=o&&o.setSelected(u.value,this.id));return a==this.active&&o==this.open?this:new Hc(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:dk}}function hk(i,t){if(i==t)return!0;for(let n=0,r=0;;){for(;n<i.length&&!i[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let s=n==i.length,a=r==t.length;if(s||a)return s==a;if(i[n++].result!=t[r++].result)return!1}}const dk={"aria-autocomplete":"list"};function ly(i,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return t>-1&&(n["aria-activedescendant"]=i+"-"+t),n}const fk=[];function If(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class ji{constructor(t,n,r=-1){this.source=t,this.state=n,this.explicitPos=r}hasResult(){return!1}update(t,n){let r=If(t),s=this;r?s=s.handleUserEvent(t,r,n):t.docChanged?s=s.handleChange(t):t.selection&&s.state!=0&&(s=new ji(s.source,0));for(let a of t.effects)if(a.is(Mp))s=new ji(s.source,1,a.value?_o(t.state):-1);else if(a.is(zc))s=new ji(s.source,0);else if(a.is(j1))for(let o of a.value)o.source==s.source&&(s=o);return s}handleUserEvent(t,n,r){return n=="delete"||!r.activateOnTyping?this.map(t.changes):new ji(this.source,1)}handleChange(t){return t.changes.touchesRange(_o(t.startState))?new ji(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new ji(this.source,this.state,t.mapPos(this.explicitPos))}}class Nl extends ji{constructor(t,n,r,s,a){super(t,2,n),this.result=r,this.from=s,this.to=a}hasResult(){return!0}handleUserEvent(t,n,r){var s;let a=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),u=_o(t.state);if((this.explicitPos<0?u<=a:u<this.from)||u>o||n=="delete"&&_o(t.startState)==this.from)return new ji(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return pk(this.result.validFor,t.state,a,o)?new Nl(this.source,l,this.result,a,o):this.result.update&&(c=this.result.update(this.result,a,o,new x1(t.state,u,l>=0)))?new Nl(this.source,l,c,c.from,(s=c.to)!==null&&s!==void 0?s:_o(t.state)):new ji(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new ji(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new Nl(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function pk(i,t,n,r){if(!i)return!1;let s=t.sliceDoc(n,r);return typeof i=="function"?i(s,n,r,t):S1(i,!0).test(s)}const Mp=pr.define(),zc=pr.define(),j1=pr.define({map(i,t){return i.map(n=>n.map(t))}}),T1=pr.define(),Xi=Qn.define({create(){return Hc.start()},update(i,t){return i.update(t)},provide:i=>[up.from(i,t=>t.tooltip),Ht.contentAttributes.from(i,t=>t.attrs)]});function rc(i,t="option"){return n=>{let r=n.state.field(Xi,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Ji).interactionDelay)return!1;let s=1,a;t=="page"&&(a=X2(n,r.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,u=r.open.selected>-1?r.open.selected+s*(i?1:-1):i?0:o-1;return u<0?u=t=="page"?0:o-1:u>=o&&(u=t=="page"?o-1:0),n.dispatch({effects:T1.of(u)}),!0}}const mk=i=>{let t=i.state.field(Xi,!1);return i.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<i.state.facet(Ji).interactionDelay?!1:(t.open.disabled||C1(i,t.open.options[t.open.selected]),!0)},gk=i=>i.state.field(Xi,!1)?(i.dispatch({effects:Mp.of(!0)}),!0):!1,yk=i=>{let t=i.state.field(Xi,!1);return!t||!t.active.some(n=>n.state!=0)?!1:(i.dispatch({effects:zc.of(null)}),!0)};class vk{constructor(t,n){this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const uy=50,bk=50,_k=1e3,wk=An.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of i.state.field(Xi).active)t.state==1&&this.startQuery(t)}update(i){let t=i.state.field(Xi);if(!i.selectionSet&&!i.docChanged&&i.startState.field(Xi)==t)return;let n=i.transactions.some(r=>(r.selection||r.docChanged)&&!If(r));for(let r=0;r<this.running.length;r++){let s=this.running[r];if(n||s.updates.length+i.transactions.length>bk&&Date.now()-s.time>_k){for(let a of s.context.abortListeners)try{a()}catch(o){Gi(this.view.state,o)}s.context.abortListeners=null,this.running.splice(r--,1)}else s.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(r=>r.state==1&&!this.running.some(s=>s.active.source==r.source))?setTimeout(()=>this.startUpdate(),uy):-1,this.composing!=0)for(let r of i.transactions)If(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,t=i.field(Xi);for(let n of t.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(i){let{state:t}=this.view,n=_o(t),r=new x1(t,n,i.explicitPos==n),s=new vk(i,r);this.running.push(s),Promise.resolve(i.source(r)).then(a=>{s.context.aborted||(s.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:zc.of(null)}),Gi(this.view.state,a)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),uy))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(Ji);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let o=new Nl(s.active.source,s.active.explicitPos,s.done,s.done.from,(i=s.done.to)!==null&&i!==void 0?i:_o(s.updates.length?s.updates[0].startState:this.view.state));for(let u of s.updates)o=o.update(u,n);if(o.hasResult()){t.push(o);continue}}let a=this.view.state.field(Xi).active.find(o=>o.source==s.active.source);if(a&&a.state==1)if(s.done==null){let o=new ji(s.active.source,0);for(let u of s.updates)o=o.update(u,n);o.state!=1&&t.push(o)}else this.startQuery(a)}t.length&&this.view.dispatch({effects:j1.of(t)})}},{eventHandlers:{blur(){let i=this.view.state.field(Xi,!1);i&&i.tooltip&&this.view.state.facet(Ji).closeOnBlur&&this.view.dispatch({effects:zc.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Mp.of(!1)}),20),this.composing=0}}}),xk=Ht.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),tu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Yo=pr.define({map(i,t){let n=t.mapPos(i,-1,bi.TrackAfter);return n??void 0}}),Ap=pr.define({map(i,t){return t.mapPos(i)}}),Op=new class extends sa{};Op.startSide=1;Op.endSide=-1;const k1=Qn.define({create(){return Hr.empty},update(i,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(i=Hr.empty)}i=i.map(t.changes);for(let n of t.effects)n.is(Yo)?i=i.update({add:[Op.range(n.value,n.value+1)]}):n.is(Ap)&&(i=i.update({filter:r=>r!=n.value}));return i}});function Sk(){return[jk,k1]}const xd="()[]{}<>";function E1(i){for(let t=0;t<xd.length;t+=2)if(xd.charCodeAt(t)==i)return xd.charAt(t+1);return Qf(i<128?i:i+1)}function M1(i,t){return i.languageDataAt("closeBrackets",t)[0]||tu}const Ck=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),jk=Ht.inputHandler.of((i,t,n,r)=>{if((Ck?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let s=i.state.selection.main;if(r.length>2||r.length==2&&Yi(Yn(r,0))==1||t!=s.from||n!=s.to)return!1;let a=Ek(i.state,r);return a?(i.dispatch(a),!0):!1}),Tk=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let r=M1(i,i.selection.main.head).brackets||tu.brackets,s=null,a=i.changeByRange(o=>{if(o.empty){let u=Mk(i.doc,o.head);for(let l of r)if(l==u&&Eh(i.doc,o.head)==E1(Yn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:yt.cursor(o.head-l.length)}}return{range:s=o}});return s||t(i.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},kk=[{key:"Backspace",run:Tk}];function Ek(i,t){let n=M1(i,i.selection.main.head),r=n.brackets||tu.brackets;for(let s of r){let a=E1(Yn(s,0));if(t==s)return a==s?Ik(i,s,r.indexOf(s+s+s)>-1,n):Ak(i,s,a,n.before||tu.before);if(t==a&&A1(i,i.selection.main.from))return Ok(i,s,a)}return null}function A1(i,t){let n=!1;return i.field(k1).between(0,i.doc.length,r=>{r==t&&(n=!0)}),n}function Eh(i,t){let n=i.sliceString(t,t+2);return n.slice(0,Yi(Yn(n,0)))}function Mk(i,t){let n=i.sliceString(t-2,t);return Yi(Yn(n,0))==n.length?n:n.slice(1)}function Ak(i,t,n,r){let s=null,a=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Yo.of(o.to+t.length),range:yt.range(o.anchor+t.length,o.head+t.length)};let u=Eh(i.doc,o.head);return!u||/\s/.test(u)||r.indexOf(u)>-1?{changes:{insert:t+n,from:o.head},effects:Yo.of(o.head+t.length),range:yt.cursor(o.head+t.length)}:{range:s=o}});return s?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Ok(i,t,n){let r=null,s=i.selection.ranges.map(a=>a.empty&&Eh(i.doc,a.head)==n?yt.cursor(a.head+n.length):r=a);return r?null:i.update({selection:yt.create(s,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:a})=>Ap.of(a))})}function Ik(i,t,n,r){let s=r.stringPrefixes||tu.stringPrefixes,a=null,o=i.changeByRange(u=>{if(!u.empty)return{changes:[{insert:t,from:u.from},{insert:t,from:u.to}],effects:Yo.of(u.to+t.length),range:yt.range(u.anchor+t.length,u.head+t.length)};let l=u.head,c=Eh(i.doc,l),p;if(c==t){if(cy(i,l))return{changes:{insert:t+t,from:l},effects:Yo.of(l+t.length),range:yt.cursor(l+t.length)};if(A1(i,l)){let m=n&&i.sliceDoc(l,l+t.length*3)==t+t+t;return{range:yt.cursor(l+t.length*(m?3:1)),effects:Ap.of(l)}}}else{if(n&&i.sliceDoc(l-2*t.length,l)==t+t&&(p=hy(i,l-2*t.length,s))>-1&&cy(i,p))return{changes:{insert:t+t+t+t,from:l},effects:Yo.of(l+t.length),range:yt.cursor(l+t.length)};if(i.charCategorizer(l)(c)!=pn.Word&&hy(i,l,s)>-1&&!Pk(i,l,t,s))return{changes:{insert:t+t,from:l},effects:Yo.of(l+t.length),range:yt.cursor(l+t.length)}}return{range:a=u}});return a?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cy(i,t){let n=Jn(i).resolveInner(t+1);return n.parent&&n.from==t}function Pk(i,t,n,r){let s=Jn(i).resolveInner(t,-1),a=r.reduce((o,u)=>Math.max(o,u.length),0);for(let o=0;o<5;o++){let u=i.sliceDoc(s.from,Math.min(s.to,s.from+n.length+a)),l=u.indexOf(n);if(!l||l>-1&&r.indexOf(u.slice(0,l))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>n.length+l;){if(i.sliceDoc(p.to-n.length,p.to)==n)return!1;p=p.firstChild}return!0}let c=s.to==t&&s.parent;if(!c)break;s=c}return!1}function hy(i,t,n){let r=i.charCategorizer(t);if(r(i.sliceDoc(t-1,t))!=pn.Word)return t;for(let s of n){let a=t-s.length;if(i.sliceDoc(a,t)==s&&r(i.sliceDoc(a-1,a))!=pn.Word)return a}return-1}function Rk(i={}){return[Xi,Ji.of(i),wk,Dk,xk]}const O1=[{key:"Ctrl-Space",run:gk},{key:"Escape",run:yk},{key:"ArrowDown",run:rc(!0)},{key:"ArrowUp",run:rc(!1)},{key:"PageDown",run:rc(!0,"page")},{key:"PageUp",run:rc(!1,"page")},{key:"Enter",run:mk}],Dk=hl.highest(lp.computeN([Ji],i=>i.facet(Ji).defaultKeymap?[O1]:[]));class Lk{constructor(t,n,r){this.from=t,this.to=n,this.diagnostic=r}}class $o{constructor(t,n,r){this.diagnostics=t,this.panel=n,this.selected=r}static init(t,n,r){let s=t,a=r.facet(Na).markerFilter;a&&(s=a(s));let o=Zt.set(s.map(u=>u.from==u.to||u.from==u.to-1&&r.doc.lineAt(u.from).to==u.from?Zt.widget({widget:new qk(u),diagnostic:u}).range(u.from):Zt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity},diagnostic:u}).range(u.from,u.to)),!0);return new $o(o,n,nl(o))}}function nl(i,t=null,n=0){let r=null;return i.between(n,1e9,(s,a,{spec:o})=>{if(!(t&&o.diagnostic!=t))return r=new Lk(s,a,o.diagnostic),!1}),r}function Nk(i,t){return!!(i.effects.some(n=>n.is(Ip))||i.changes.touchesRange(t.pos))}function I1(i,t){return i.field(Vi,!1)?t:t.concat(pr.appendConfig.of([Vi,Ht.decorations.compute([Vi],n=>{let{selected:r,panel:s}=n.field(Vi);return!r||!s||r.from==r.to?Zt.none:Zt.set([Fk.range(r.from,r.to)])}),$2(Uk,{hideOn:Nk}),Xk]))}function Bk(i,t){return{effects:I1(i,[Ip.of(t)])}}const Ip=pr.define(),Pp=pr.define(),P1=pr.define(),Vi=Qn.define({create(){return new $o(Zt.none,null,null)},update(i,t){if(t.docChanged){let n=i.diagnostics.map(t.changes),r=null;if(i.selected){let s=t.changes.mapPos(i.selected.from,1);r=nl(n,i.selected.diagnostic,s)||nl(n,null,s)}i=new $o(n,i.panel,r)}for(let n of t.effects)n.is(Ip)?i=$o.init(n.value,i.panel,t.state):n.is(Pp)?i=new $o(i.diagnostics,n.value?Mh.open:null,i.selected):n.is(P1)&&(i=new $o(i.diagnostics,i.panel,n.value));return i},provide:i=>[Jl.from(i,t=>t.panel),Ht.decorations.from(i,t=>t.diagnostics)]}),Fk=Zt.mark({class:"cm-lintRange cm-lintRange-active"});function Uk(i,t,n){let{diagnostics:r}=i.state.field(Vi),s=[],a=2e8,o=0;r.between(t-(n<0?1:0),t+(n>0?1:0),(l,c,{spec:p})=>{t>=l&&t<=c&&(l==c||(t>l||n>0)&&(t<c||n<0))&&(s.push(p.diagnostic),a=Math.min(l,a),o=Math.max(c,o))});let u=i.state.facet(Na).tooltipFilter;return u&&(s=u(s)),s.length?{pos:a,end:o,above:i.state.doc.lineAt(a).to<o,create(){return{dom:Vk(i,s)}}}:null}function Vk(i,t){return nn("ul",{class:"cm-tooltip-lint"},t.map(n=>D1(i,n,!1)))}const Gk=i=>{let t=i.state.field(Vi,!1);(!t||!t.panel)&&i.dispatch({effects:I1(i.state,[Pp.of(!0)])});let n=Kl(i,Mh.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},dy=i=>{let t=i.state.field(Vi,!1);return!t||!t.panel?!1:(i.dispatch({effects:Pp.of(!1)}),!0)},Hk=i=>{let t=i.state.field(Vi,!1);if(!t)return!1;let n=i.state.selection.main,r=t.diagnostics.iter(n.to+1);return!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},zk=[{key:"Mod-Shift-m",run:Gk,preventDefault:!0},{key:"F8",run:Hk}],Wk=An.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:t}=i.state.facet(Na);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:t}=this.view,{sources:n}=t.facet(Na);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let s=r.reduce((a,o)=>a.concat(o));this.view.state.doc==t.doc&&this.view.dispatch(Bk(this.view.state,s))},r=>{Gi(this.view.state,r)})}}update(i){let t=i.state.facet(Na);(i.docChanged||t!=i.startState.facet(Na))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Na=Vt.define({combine(i){return Object.assign({sources:i.map(t=>t.source)},Ps(i.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Wk});function R1(i){let t=[];if(i)e:for(let{name:n}of i){for(let r=0;r<n.length;r++){let s=n[r];if(/[a-zA-Z]/.test(s)&&!t.some(a=>a.toLowerCase()==s.toLowerCase())){t.push(s);continue e}}t.push("")}return t}function D1(i,t,n){var r;let s=n?R1(t.actions):[];return nn("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},nn("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(r=t.actions)===null||r===void 0?void 0:r.map((a,o)=>{let u=!1,l=h=>{if(h.preventDefault(),u)return;u=!0;let f=nl(i.state.field(Vi).diagnostics,t);f&&a.apply(i,f.from,f.to)},{name:c}=a,p=s[o]?c.indexOf(s[o]):-1,m=p<0?c:[c.slice(0,p),nn("u",c.slice(p,p+1)),c.slice(p+1)];return nn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${p<0?"":` (access key "${s[o]})"`}.`},m)}),t.source&&nn("div",{class:"cm-diagnosticSource"},t.source))}class qk extends Ro{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return nn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class fy{constructor(t,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=D1(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Mh{constructor(t){this.view=t,this.items=[];let n=s=>{if(s.keyCode==27)dy(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=R1(a.actions);for(let u=0;u<o.length;u++)if(o[u].toUpperCase().charCodeAt(0)==s.keyCode){let l=nl(this.view.state.field(Vi).diagnostics,a);l&&a.actions[u].apply(t,l.from,l.to)}}else return;s.preventDefault()},r=s=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(s.target)&&this.moveSelection(a)};this.list=nn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=nn("div",{class:"cm-panel-lint"},this.list,nn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>dy(this.view)},"Ã")),this.update()}get selectedIndex(){let t=this.view.state.field(Vi).selected;if(!t)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==t.diagnostic)return n;return-1}update(){let{diagnostics:t,selected:n}=this.view.state.field(Vi),r=0,s=!1,a=null;for(t.between(0,this.view.state.doc.length,(o,u,{spec:l})=>{let c=-1,p;for(let m=r;m<this.items.length;m++)if(this.items[m].diagnostic==l.diagnostic){c=m;break}c<0?(p=new fy(this.view,l.diagnostic),this.items.splice(r,0,p),s=!0):(p=this.items[c],c>r&&(this.items.splice(r,c-r),s=!0)),n&&p.diagnostic==n.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),a=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new fy(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:u})=>{o.top<u.top?this.list.scrollTop-=u.top-o.top:o.bottom>u.bottom&&(this.list.scrollTop+=o.bottom-u.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let t=this.list.firstChild;function n(){let r=t;t=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;t!=r.dom;)n();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t);for(;t;)n()}moveSelection(t){if(this.selectedIndex<0)return;let n=this.view.state.field(Vi),r=nl(n.diagnostics,this.items[t].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:P1.of(r)})}static open(t){return new Mh(t)}}function $k(i,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(i)}</svg>')`}function Sd(i){return $k(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Xk=Ht.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Sd("#d11")},".cm-lintRange-warning":{backgroundImage:Sd("orange")},".cm-lintRange-info":{backgroundImage:Sd("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Yk=(()=>[hb(),sC(),j2(),Tj(),$C(),p2(),b2(),Mr.allowMultipleSelections.of(!0),RC(),YC(QC,{fallback:!0}),sj(),Sk(),Rk(),N2(),U2(),O2(),OT(),lp.of([...kk,...TT,...KT,...Dj,...zC,...O1,...zk])])();function Rp(i,t,n,r,s,a){this.indented=i,this.column=t,this.type=n,this.info=r,this.align=s,this.prev=a}function nc(i,t,n,r){var s=i.indented;return i.context&&i.context.type=="statement"&&n!="statement"&&(s=i.context.indented),i.context=new Rp(s,t,n,r,null,i.context)}function jl(i){var t=i.context.type;return(t==")"||t=="]"||t=="}")&&(i.indented=i.context.indented),i.context=i.context.prev}function py(i,t,n){if(t.prevToken=="variable"||t.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(i.string.slice(0,n))||t.typeAtEndOfLine&&i.column()==i.indentation())return!0}function my(i){for(;;){if(!i||i.type=="top")return!0;if(i.type=="}"&&i.prev.info!="namespace")return!1;i=i.prev}}function Hi(i){var t=i.statementIndentUnit,n=i.dontAlignCalls,r=i.keywords||{},s=i.types||{},a=i.builtin||{},o=i.blockKeywords||{},u=i.defKeywords||{},l=i.atoms||{},c=i.hooks||{},p=i.multiLineStrings,m=i.indentStatements!==!1,h=i.indentSwitch!==!1,f=i.namespaceSeparator,d=i.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,g=i.numberStart||/[\d\.]/,y=i.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,b=i.isOperatorChar||/[+\-*&%=<>!?|\/]/,x=i.isIdentifierChar||/[\w\$_\xa1-\uffff]/,C=i.isReservedIdentifier||!1,S,w;function _(P,D){var U=P.next();if(c[U]){var F=c[U](P,D);if(F!==!1)return F}if(U=='"'||U=="'")return D.tokenize=M(U),D.tokenize(P,D);if(g.test(U)){if(P.backUp(1),P.match(y))return"number";P.next()}if(d.test(U))return S=U,null;if(U=="/"){if(P.eat("*"))return D.tokenize=I,I(P,D);if(P.eat("/"))return P.skipToEnd(),"comment"}if(b.test(U)){for(;!P.match(/^\/[\/*]/,!1)&&P.eat(b););return"operator"}if(P.eatWhile(x),f)for(;P.match(f);)P.eatWhile(x);var z=P.current();return Us(r,z)?(Us(o,z)&&(S="newstatement"),Us(u,z)&&(w=!0),"keyword"):Us(s,z)?"type":Us(a,z)||C&&C(z)?(Us(o,z)&&(S="newstatement"),"builtin"):Us(l,z)?"atom":"variable"}function M(P){return function(D,U){for(var F=!1,z,J=!1;(z=D.next())!=null;){if(z==P&&!F){J=!0;break}F=!F&&z=="\\"}return(J||!(F||p))&&(U.tokenize=null),"string"}}function I(P,D){for(var U=!1,F;F=P.next();){if(F=="/"&&U){D.tokenize=null;break}U=F=="*"}return"comment"}function R(P,D){i.typeFirstDefinitions&&P.eol()&&my(D.context)&&(D.typeAtEndOfLine=py(P,D,P.pos))}return{name:i.name,startState:function(P){return{tokenize:null,context:new Rp(-P,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(P,D){var U=D.context;if(P.sol()&&(U.align==null&&(U.align=!1),D.indented=P.indentation(),D.startOfLine=!0),P.eatSpace())return R(P,D),null;S=w=null;var F=(D.tokenize||_)(P,D);if(F=="comment"||F=="meta")return F;if(U.align==null&&(U.align=!0),S==";"||S==":"||S==","&&P.match(/^\s*(?:\/\/.*)?$/,!1))for(;D.context.type=="statement";)jl(D);else if(S=="{")nc(D,P.column(),"}");else if(S=="[")nc(D,P.column(),"]");else if(S=="(")nc(D,P.column(),")");else if(S=="}"){for(;U.type=="statement";)U=jl(D);for(U.type=="}"&&(U=jl(D));U.type=="statement";)U=jl(D)}else S==U.type?jl(D):m&&((U.type=="}"||U.type=="top")&&S!=";"||U.type=="statement"&&S=="newstatement")&&nc(D,P.column(),"statement",P.current());if(F=="variable"&&(D.prevToken=="def"||i.typeFirstDefinitions&&py(P,D,P.start)&&my(D.context)&&P.match(/^\s*\(/,!1))&&(F="def"),c.token){var z=c.token(P,D,F);z!==void 0&&(F=z)}return F=="def"&&i.styleDefs===!1&&(F="variable"),D.startOfLine=!1,D.prevToken=w?"def":F||S,R(P,D),F},indent:function(P,D,U){if(P.tokenize!=_&&P.tokenize!=null||P.typeAtEndOfLine)return null;var F=P.context,z=D&&D.charAt(0),J=z==F.type;if(F.type=="statement"&&z=="}"&&(F=F.prev),i.dontIndentStatements)for(;F.type=="statement"&&i.dontIndentStatements.test(F.info);)F=F.prev;if(c.indent){var Q=c.indent(P,F,D,U.unit);if(typeof Q=="number")return Q}var Z=F.prev&&F.prev.info=="switch";if(i.allmanIndentation&&/[{(]/.test(z)){for(;F.type!="top"&&F.type!="}";)F=F.prev;return F.indented}return F.type=="statement"?F.indented+(z=="{"?0:t||U.unit):F.align&&(!n||F.type!=")")?F.column+(J?0:1):F.type==")"&&!J?F.indented+(t||U.unit):F.indented+(J?0:U.unit)+(!J&&Z&&!/^(?:case|default)\b/.test(D)?U.unit:0)},languageData:{indentOnInput:h?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}},autocomplete:Object.keys(r).concat(Object.keys(s)).concat(Object.keys(a)).concat(Object.keys(l)),...i.languageData}}}function Ut(i){for(var t={},n=i.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function Us(i,t){return typeof i=="function"?i(t):i.propertyIsEnumerable(t)}var wu="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",L1="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",N1="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",B1="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",Kk=Ut("int long char short double float unsigned signed void bool"),Jk=Ut("SEL instancetype id Class Protocol BOOL");function xu(i){return Us(Kk,i)||/.+_t$/.test(i)}function F1(i){return xu(i)||Us(Jk,i)}var Su="case do else for if switch while struct enum union",Ah="struct enum union";function Lo(i,t){if(!t.startOfLine)return!1;for(var n,r=null;n=i.peek();){if(n=="\\"&&i.match(/^.$/)){r=Lo;break}else if(n=="/"&&i.match(/^\/[\/\*]/,!1))break;i.next()}return t.tokenize=r,"meta"}function Oh(i,t){return t.prevToken=="type"?"type":!1}function Ih(i){return!i||i.length<2||i[0]!="_"?!1:i[1]=="_"||i[1]!==i[1].toLowerCase()}function En(i){return i.eatWhile(/[\w\.']/),"number"}function vo(i,t){if(i.backUp(1),i.match(/^(?:R|u8R|uR|UR|LR)/)){var n=i.match(/^"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=yy,yy(i,t)):!1}return i.match(/^(?:u8|u|U|L)/)?i.match(/^["']/,!1)?"string":!1:(i.next(),!1)}function U1(i){var t=/(\w+)::~?(\w+)$/.exec(i);return t&&t[1]==t[2]}function gy(i,t){for(var n;(n=i.next())!=null;)if(n=='"'&&!i.eat('"')){t.tokenize=null;break}return"string"}function yy(i,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=i.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:i.skipToEnd(),"string"}Hi({name:"c",keywords:Ut(wu),types:xu,blockKeywords:Ut(Su),defKeywords:Ut(Ah),typeFirstDefinitions:!0,atoms:Ut("NULL true false"),isReservedIdentifier:Ih,hooks:{"#":Lo,"*":Oh}});Hi({name:"cpp",keywords:Ut(wu+" "+L1),types:xu,blockKeywords:Ut(Su+" class try catch"),defKeywords:Ut(Ah+" class namespace"),typeFirstDefinitions:!0,atoms:Ut("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:Ih,hooks:{"#":Lo,"*":Oh,u:vo,U:vo,L:vo,R:vo,0:En,1:En,2:En,3:En,4:En,5:En,6:En,7:En,8:En,9:En,token:function(i,t,n){if(n=="variable"&&i.peek()=="("&&(t.prevToken==";"||t.prevToken==null||t.prevToken=="}")&&U1(i.current()))return"def"}},namespaceSeparator:"::"});Hi({name:"java",keywords:Ut("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:Ut("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:Ut("catch class do else finally for if switch try while"),defKeywords:Ut("class interface enum @interface"),typeFirstDefinitions:!0,atoms:Ut("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(i){return i.match("interface",!1)?!1:(i.eatWhile(/[\w\$_]/),"meta")},'"':function(i,t){return i.match(/""$/)?(t.tokenize=V1,t.tokenize(i,t)):!1}}});Hi({name:"csharp",keywords:Ut("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:Ut("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:Ut("catch class do else finally for foreach if struct switch try while"),defKeywords:Ut("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:Ut("true false null"),hooks:{"@":function(i,t){return i.eat('"')?(t.tokenize=gy,gy(i,t)):(i.eatWhile(/[\w\$_]/),"meta")}}});function V1(i,t){for(var n=!1;!i.eol();){if(!n&&i.match('"""')){t.tokenize=null;break}n=i.next()=="\\"&&!n}return"string"}function ru(i){return function(t,n){for(var r;r=t.next();)if(r=="*"&&t.eat("/"))if(i==1){n.tokenize=null;break}else return n.tokenize=ru(i-1),n.tokenize(t,n);else if(r=="/"&&t.eat("*"))return n.tokenize=ru(i+1),n.tokenize(t,n);return"comment"}}Hi({name:"scala",keywords:Ut("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:Ut("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:Ut("catch class enum do else finally for forSome if match switch try while"),defKeywords:Ut("class enum def object package trait type val var"),atoms:Ut("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},'"':function(i,t){return i.match('""')?(t.tokenize=V1,t.tokenize(i,t)):!1},"'":function(i){return i.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(i,t){var n=t.context;return n.type=="}"&&n.align&&i.eat(">")?(t.context=new Rp(n.indented,n.column,n.type,n.info,null,n.prev),"operator"):!1},"/":function(i,t){return i.eat("*")?(t.tokenize=ru(1),t.tokenize(i,t)):!1}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function Qk(i){return function(t,n){for(var r=!1,s,a=!1;!t.eol();){if(!i&&!r&&t.match('"')){a=!0;break}if(i&&t.match('"""')){a=!0;break}s=t.next(),!r&&s=="$"&&t.match("{")&&t.skipTo("}"),r=!r&&s=="\\"&&!i}return(a||!i)&&(n.tokenize=null),"string"}}Hi({name:"kotlin",keywords:Ut("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:Ut("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:Ut("catch class do else finally for if where try while enum"),defKeywords:Ut("class val var object interface fun"),atoms:Ut("true false null this"),hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},"*":function(i,t){return t.prevToken=="."?"variable":"operator"},'"':function(i,t){return t.tokenize=Qk(i.match('""')),t.tokenize(i,t)},"/":function(i,t){return i.eat("*")?(t.tokenize=ru(1),t.tokenize(i,t)):!1},indent:function(i,t,n,r){var s=n&&n.charAt(0);if((i.prevToken=="}"||i.prevToken==")")&&n=="")return i.indented;if(i.prevToken=="operator"&&n!="}"&&i.context.type!="}"||i.prevToken=="variable"&&s=="."||(i.prevToken=="}"||i.prevToken==")")&&s==".")return r*2+t.indented;if(t.align&&t.type=="}")return t.indented+(i.context.type==(n||"").charAt(0)?0:r)}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});const Zk=Hi({name:"shader",keywords:Ut("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:Ut("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:Ut("for while do if else struct"),builtin:Ut("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:Ut("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":Lo}});Hi({name:"nesc",keywords:Ut(wu+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:xu,blockKeywords:Ut(Su),atoms:Ut("null true false"),hooks:{"#":Lo}});Hi({name:"objectivec",keywords:Ut(wu+" "+N1),types:F1,builtin:Ut(B1),blockKeywords:Ut(Su+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:Ut(Ah+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:Ut("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:Ih,hooks:{"#":Lo,"*":Oh}});Hi({name:"objectivecpp",keywords:Ut(wu+" "+N1+" "+L1),types:F1,builtin:Ut(B1),blockKeywords:Ut(Su+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:Ut(Ah+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:Ut("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:Ih,hooks:{"#":Lo,"*":Oh,u:vo,U:vo,L:vo,R:vo,0:En,1:En,2:En,3:En,4:En,5:En,6:En,7:En,8:En,9:En,token:function(i,t,n){if(n=="variable"&&i.peek()=="("&&(t.prevToken==";"||t.prevToken==null||t.prevToken=="}")&&U1(i.current()))return"def"}},namespaceSeparator:"::"});Hi({name:"squirrel",keywords:Ut("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:xu,blockKeywords:Ut("case catch class else for foreach if switch try while"),defKeywords:Ut("function local class"),typeFirstDefinitions:!0,atoms:Ut("true false null"),hooks:{"#":Lo}});var mc=null;function G1(i){return function(t,n){for(var r=!1,s,a=!1;!t.eol();){if(!r&&t.match('"')&&(i=="single"||t.match('""'))){a=!0;break}if(!r&&t.match("``")){mc=G1(i),a=!0;break}s=t.next(),r=i=="single"&&!r&&s=="\\"}return a&&(n.tokenize=null),"string"}}Hi({name:"ceylon",keywords:Ut("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(i){var t=i.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:Ut("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:Ut("class dynamic function interface module object package value"),builtin:Ut("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:Ut("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},'"':function(i,t){return t.tokenize=G1(i.match('""')?"triple":"single"),t.tokenize(i,t)},"`":function(i,t){return!mc||!i.match("`")?!1:(t.tokenize=mc,mc=null,t.tokenize(i,t))},"'":function(i){return i.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(i,t,n){if((n=="variable"||n=="type")&&t.prevToken==".")return"variableName.special"}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function eE(i){(i.interpolationStack||(i.interpolationStack=[])).push(i.tokenize)}function H1(i){return(i.interpolationStack||(i.interpolationStack=[])).pop()}function tE(i){return i.interpolationStack?i.interpolationStack.length:0}function Cd(i,t,n,r){var s=!1;if(t.eat(i))if(t.eat(i))s=!0;else return"string";function a(o,u){for(var l=!1;!o.eol();){if(!r&&!l&&o.peek()=="$")return eE(u),u.tokenize=rE,"string";var c=o.next();if(c==i&&!l&&(!s||o.match(i+i))){u.tokenize=null;break}l=!r&&!l&&c=="\\"}return"string"}return n.tokenize=a,a(t,n)}function rE(i,t){return i.eat("$"),i.eat("{")?t.tokenize=null:t.tokenize=nE,null}function nE(i,t){return i.eatWhile(/[\w_]/),t.tokenize=H1(t),"variable"}Hi({name:"dart",keywords:Ut("this super static final const abstract class extends external factory implements mixin get native set typedef with enum throw rethrow assert break case continue default in return new deferred async await covariant try catch finally do else for if switch while import library export part of show hide is as extension on yield late required"),blockKeywords:Ut("try catch finally do else for if switch while"),builtin:Ut("void bool num int double dynamic var String Null Never"),atoms:Ut("true false null"),hooks:{"@":function(i){return i.eatWhile(/[\w\$_\.]/),"meta"},"'":function(i,t){return Cd("'",i,t,!1)},'"':function(i,t){return Cd('"',i,t,!1)},r:function(i,t){var n=i.peek();return n=="'"||n=='"'?Cd(i.next(),i,t,!0):!1},"}":function(i,t){return tE(t)>0?(t.tokenize=H1(t),null):!1},"/":function(i,t){return i.eat("*")?(t.tokenize=ru(1),t.tokenize(i,t)):!1},token:function(i,t,n){if(n=="variable"){var r=RegExp("^[_$]*[A-Z][a-zA-Z0-9_$]*$","g");if(r.test(i.current()))return"type"}}}});var Wc={},iE={get exports(){return Wc},set exports(i){Wc=i}};(function(i,t){(function(n,r){var s={};n.PubSub?(s=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=s,r(s)),i!==void 0&&i.exports&&(t=i.exports=s),t.PubSub=s,i.exports=t=s})(typeof window=="object"&&window||Pa,function(n){var r={},s=-1,a="*";function o(g){var y;for(y in g)if(Object.prototype.hasOwnProperty.call(g,y))return!0;return!1}function u(g){return function(){throw g}}function l(g,y,b){try{g(y,b)}catch(x){setTimeout(u(x),0)}}function c(g,y,b){g(y,b)}function p(g,y,b,x){var C=r[y],S=x?c:l,w;if(Object.prototype.hasOwnProperty.call(r,y))for(w in C)Object.prototype.hasOwnProperty.call(C,w)&&S(C[w],g,b)}function m(g,y,b){return function(){var C=String(g),S=C.lastIndexOf(".");for(p(g,g,y,b);S!==-1;)C=C.substr(0,S),S=C.lastIndexOf("."),p(g,C,y,b);p(g,a,y,b)}}function h(g){var y=String(g),b=Boolean(Object.prototype.hasOwnProperty.call(r,y)&&o(r[y]));return b}function f(g){for(var y=String(g),b=h(y)||h(a),x=y.lastIndexOf(".");!b&&x!==-1;)y=y.substr(0,x),x=y.lastIndexOf("."),b=h(y);return b}function d(g,y,b,x){g=typeof g=="symbol"?g.toString():g;var C=m(g,y,x),S=f(g);return S?(b===!0?C():setTimeout(C,0),!0):!1}n.publish=function(g,y){return d(g,y,!1,n.immediateExceptions)},n.publishSync=function(g,y){return d(g,y,!0,n.immediateExceptions)},n.subscribe=function(g,y){if(typeof y!="function")return!1;g=typeof g=="symbol"?g.toString():g,Object.prototype.hasOwnProperty.call(r,g)||(r[g]={});var b="uid_"+String(++s);return r[g][b]=y,b},n.subscribeAll=function(g){return n.subscribe(a,g)},n.subscribeOnce=function(g,y){var b=n.subscribe(g,function(){n.unsubscribe(b),y.apply(this,arguments)});return n},n.clearAllSubscriptions=function(){r={}},n.clearSubscriptions=function(y){var b;for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0&&delete r[b]},n.countSubscriptions=function(y){var b,x,C=0;for(b in r)if(Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0){for(x in r[b])C++;break}return C},n.getSubscriptions=function(y){var b,x=[];for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0&&x.push(b);return x},n.unsubscribe=function(g){var y=function(I){var R;for(R in r)if(Object.prototype.hasOwnProperty.call(r,R)&&R.indexOf(I)===0)return!0;return!1},b=typeof g=="string"&&(Object.prototype.hasOwnProperty.call(r,g)||y(g)),x=!b&&typeof g=="string",C=typeof g=="function",S=!1,w,_,M;if(b){n.clearSubscriptions(g);return}for(w in r)if(Object.prototype.hasOwnProperty.call(r,w)){if(_=r[w],x&&_[g]){delete _[g],S=g;break}if(C)for(M in _)Object.prototype.hasOwnProperty.call(_,M)&&_[M]===g&&(delete _[M],S=!0)}return S}})})(iE,Wc);const qc=Wc;var Dp,$c,z1,Lp,W1,q1,$1,vi,ir,Np,Bp;ir={shaderObj:null,cam:null,paramValues:{},imagesCache:{},lastShaderDrawError:""};$c=`///////////////////////////////////////////////////////////////////
//  Fill in the image function below to write your shader!       //
//  Built-ins:                                                   //
//    - Uniforms:                                                //
//      - vec2 iResolution                                       //
//      - float iTime - seconds since shader load                //
//    - Functions:                                               //
//      - vec3 sampleCamera(uv)                                  //
//      - vec3 samplePrevFrame(uv)                               //
///////////////////////////////////////////////////////////////////

vec3 image(vec2 uv, vec3 color) {
  return color;
}`;vi=null;Bp=!1;Np=Date.now()/1e3;$1=i=>(vi=i,vi.setup=function(){var t,n,r,s;return t=[4,3],r=200,s=t.map(a=>a*r),n=vi.createCanvas(s[0],s[1],vi.WEBGL),n.parent("canvas"),vi.noStroke(),ir.cam=vi.createCapture(vi.VIDEO),ir.cam.size(s[0],s[1]),ir.cam.hide(),ir.shaderObj=vi.createShader(F0,Lp($c,[])),vi.shader(ir.shaderObj)},vi.draw=function(){return ir.shaderObj.setUniform("tex0",ir.cam),ir.shaderObj.setUniform("iResolution",[710,400]),ir.shaderObj.setUniform("iTime",Np-Date.now()/1e3),Bp&&ir.shaderObj.setUniform("prevFrame",vi.get()),Object.entries(ir.paramValues).forEach(([t,n])=>{var r,s,a,o;if(t.length>0&&(n.type==="color"?s=q1(n.val):n.type==="float"||n.type==="boolean"?s=n.val:n.type==="texture"&&(s=null,a=ir.imagesCache[n.val],a&&!a.error?ir.shaderObj.setUniform(t,a.img):a||(o=u=>ir.imagesCache[n.val]={img:u},r=u=>{var l,c,p;return c="Possibly a CORS error. Try a different image host such as Imgur.",p=`Error fetching image ${n.val}

 ${u.message}.

 ${c}`,l=ir.lastShaderDrawError===p,l||(ir.lastShaderDrawError=p,qc.publish("shaderDrawError",p)),ir.imagesCache[n.val]={error:!0}},vi.loadImage(n.val,o,r))),s||n.type==="boolean"))return ir.shaderObj.setUniform(t,s)}),vi.rect(0,0,1,1)});q1=function(i){var t;return t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),t?[parseFloat(parseInt(t[1],16))/255,parseFloat(parseInt(t[2],16))/255,parseFloat(parseInt(t[3],16))/255]:[0,0,0]};Dp=`precision mediump float;

varying vec2 vTexCoord; // grab texcoords from vert shader
uniform sampler2D tex0; // our texture coming from p5
uniform vec2 iResolution;
uniform float iTime;
uniform sampler2D prevFrame; // only set if the shader text references it

float round(float val) {
  return floor(val + 0.5);
}

vec3 sampleCamera(vec2 uv) {
  return texture2D(tex0, uv).rgb;
}

vec3 samplePrevFrame(vec2 uv) {
  uv.x = 1.0 - uv.x;
  return texture2D(prevFrame, uv).rgb;
}`;Lp=function(i,t){var n;return Np=Date.now()/1e3,Bp=i.includes("samplePrevFrame"),n=t.map(function(r){var s,a;return s=r.type.split(".").slice(-1)[0],a={FloatShaderParam:"float",ColorShaderParam:"vec3",TextureShaderParam:"sampler2D",BooleanShaderParam:"bool"}[s],`uniform ${a} ${r.paramName};`}).join(`
`),`${Dp}
${n}
${i}

void main() {
    vec2 uv = vTexCoord;
    uv.x = 1.0 - uv.x;
    uv.y = 1.0 - uv.y;
    vec4 tex = texture2D(tex0, uv);
    vec3 finalRGB = image(uv, tex.rgb);
    gl_FragColor = vec4(finalRGB, 1.0);
}`};z1=function(i,t){var n,r,s;return n=Lp(i,t),r=vi.createShader(F0,n),s=W1(ir.shaderObj,n),[r,s]};W1=function(i,t){var n,r;return n=i._renderer.GL,r=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?null:n.getShaderInfoLog(r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=function(i,t){if(!i)throw fl(t)},fl=function(i){return new Error("Firebase Database ("+X1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(i){const t=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},sE=function(i){const t=[];let n=0,r=0;for(;n<i.length;){const s=i[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[n++];t[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[n++],o=i[n++],u=i[n++],l=((s&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const a=i[n++],o=i[n++];t[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return t.join("")},Fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<i.length;s+=3){const a=i[s],o=s+1<i.length,u=o?i[s+1]:0,l=s+2<i.length,c=l?i[s+2]:0,p=a>>2,m=(a&3)<<4|u>>4;let h=(u&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[p],n[m],n[h],n[f])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Y1(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):sE(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<i.length;){const a=n[i.charAt(s++)],u=s<i.length?n[i.charAt(s)]:0;++s;const c=s<i.length?n[i.charAt(s)]:64;++s;const m=s<i.length?n[i.charAt(s)]:64;if(++s,a==null||u==null||c==null||m==null)throw Error();const h=a<<2|u>>4;if(r.push(h),c!==64){const f=u<<4&240|c>>2;if(r.push(f),m!==64){const d=c<<6&192|m;r.push(d)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},K1=function(i){const t=Y1(i);return Fp.encodeByteArray(t,!0)},Xc=function(i){return K1(i).replace(/\./g,"")},Yc=function(i){try{return Fp.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(i){return J1(void 0,i)}function J1(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!aE(n)||(i[n]=J1(i[n],t[n]));return i}function aE(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=()=>lE().__FIREBASE_DEFAULTS__,cE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const i={}.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},hE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&Yc(i[1]);return t&&JSON.parse(t)},Up=()=>{try{return uE()||cE()||hE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Q1=i=>{var t,n;return(n=(t=Up())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[i]},dE=i=>{const t=Q1(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},fE=()=>{var i;return(i=Up())===null||i===void 0?void 0:i.config},Z1=i=>{var t;return(t=Up())===null||t===void 0?void 0:t[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i),u="";return[Xc(JSON.stringify(n)),Xc(JSON.stringify(o)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function mE(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function e_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gE(){const i=ci();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function t_(){return X1.NODE_ADMIN===!0}function yE(){try{return typeof indexedDB=="object"}catch{return!1}}function vE(){return new Promise((i,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="FirebaseError";class No extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=bE,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,a=this.errors[t],o=a?_E(a,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new No(s,u,r)}}function _E(i,t){return i.replace(wE,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const wE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(i){return JSON.parse(i)}function Ln(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=function(i){let t={},n={},r={},s="";try{const a=i.split(".");t=nu(Yc(a[0])||""),n=nu(Yc(a[1])||""),s=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:s}},xE=function(i){const t=r_(i),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},SE=function(i){const t=r_(i).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function il(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function Pf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Kc(i,t,n){const r={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=t.call(n,i[s],s,i));return r}function Jc(i,t){if(i===t)return!0;const n=Object.keys(i),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const a=i[s],o=t[s];if(vy(a)&&vy(o)){if(!Jc(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(i){const t=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)r[m]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)r[m]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let m=16;m<80;m++){const h=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],u=this.chain_[3],l=this.chain_[4],c,p;for(let m=0;m<80;m++){m<40?m<20?(c=u^a&(o^u),p=1518500249):(c=a^o^u,p=1859775393):m<60?(c=a&o|u&(a|o),p=2400959708):(c=a^o^u,p=3395469782);const h=(s<<5|s>>>27)+c+l+p+r[m]&4294967295;l=u,u=o,o=(a<<30|a>>>2)&4294967295,a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let s=0;const a=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<n;)if(a[o]=t.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(a),o=0;break}}else for(;s<n;)if(a[o]=t[s],++o,++s,o===this.blockSize){this.compress_(a),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)t[r]=this.chain_[s]>>a&255,++r;return t}}function jE(i,t){const n=new TE(i,t);return n.subscribe.bind(n)}class TE{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kE(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=jd),s.error===void 0&&(s.error=jd),s.complete===void 0&&(s.complete=jd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kE(i,t){if(typeof i!="object"||i===null)return!1;for(const n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}function jd(){}function Gp(i,t){return`${i} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(i){const t=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);if(s>=55296&&s<=56319){const a=s-55296;r++,jt(r<i.length,"Surrogate pair missing trail surrogate.");const o=i.charCodeAt(r)-56320;s=65536+(a<<10)+o}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Rh=function(i){let t=0;for(let n=0;n<i.length;n++){const r=i.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(i){return i&&i._delegate?i._delegate:i}class ua{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ph;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(OE(t))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(t=zo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zo){return this.instances.has(t)}getOptions(t=zo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&t(o,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zo){return this.component?this.component.multipleInstances?t:zo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AE(i){return i===zo?void 0:i}function OE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ME(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jr;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Jr||(Jr={}));const PE={debug:Jr.DEBUG,verbose:Jr.VERBOSE,info:Jr.INFO,warn:Jr.WARN,error:Jr.ERROR,silent:Jr.SILENT},RE=Jr.INFO,DE={[Jr.DEBUG]:"log",[Jr.VERBOSE]:"log",[Jr.INFO]:"info",[Jr.WARN]:"warn",[Jr.ERROR]:"error"},LE=(i,t,...n)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),s=DE[t];if(s)console[s](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hp{constructor(t){this.name=t,this._logLevel=RE,this._logHandler=LE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jr.DEBUG,...t),this._logHandler(this,Jr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jr.VERBOSE,...t),this._logHandler(this,Jr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jr.INFO,...t),this._logHandler(this,Jr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jr.WARN,...t),this._logHandler(this,Jr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jr.ERROR,...t),this._logHandler(this,Jr.ERROR,...t)}}const NE=(i,t)=>t.some(n=>i instanceof n);let by,_y;function BE(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FE(){return _y||(_y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n_=new WeakMap,Rf=new WeakMap,i_=new WeakMap,Td=new WeakMap,zp=new WeakMap;function UE(i){const t=new Promise((n,r)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",o)},a=()=>{n(wo(i.result)),s()},o=()=>{r(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&n_.set(n,i)}).catch(()=>{}),zp.set(t,i),t}function VE(i){if(Rf.has(i))return;const t=new Promise((n,r)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",o),i.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",o),i.addEventListener("abort",o)});Rf.set(i,t)}let Df={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return Rf.get(i);if(t==="objectStoreNames")return i.objectStoreNames||i_.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wo(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function GE(i){Df=i(Df)}function HE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=i.call(kd(this),t,...n);return i_.set(r,t.sort?t.sort():[t]),wo(r)}:FE().includes(i)?function(...t){return i.apply(kd(this),t),wo(n_.get(this))}:function(...t){return wo(i.apply(kd(this),t))}}function zE(i){return typeof i=="function"?HE(i):(i instanceof IDBTransaction&&VE(i),NE(i,BE())?new Proxy(i,Df):i)}function wo(i){if(i instanceof IDBRequest)return UE(i);if(Td.has(i))return Td.get(i);const t=zE(i);return t!==i&&(Td.set(i,t),zp.set(t,i)),t}const kd=i=>zp.get(i);function WE(i,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(i,t),u=wo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wo(o.result),l.oldVersion,l.newVersion,wo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),u.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),u}const qE=["get","getKey","getAll","getAllKeys","count"],$E=["put","add","delete","clear"],Ed=new Map;function wy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Ed.get(t))return Ed.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=$E.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qE.includes(n)))return;const a=async function(o,...u){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),s&&l.done]))[0]};return Ed.set(t,a),a}GE(i=>({...i,get:(t,n,r)=>wy(t,n)||i.get(t,n,r),has:(t,n)=>!!wy(t,n)||i.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YE(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Lf="@firebase/app",xy="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Hp("@firebase/app"),KE="@firebase/app-compat",JE="@firebase/analytics-compat",QE="@firebase/analytics",ZE="@firebase/app-check-compat",eM="@firebase/app-check",tM="@firebase/auth",rM="@firebase/auth-compat",nM="@firebase/database",iM="@firebase/database-compat",sM="@firebase/functions",oM="@firebase/functions-compat",aM="@firebase/installations",lM="@firebase/installations-compat",uM="@firebase/messaging",cM="@firebase/messaging-compat",hM="@firebase/performance",dM="@firebase/performance-compat",fM="@firebase/remote-config",pM="@firebase/remote-config-compat",mM="@firebase/storage",gM="@firebase/storage-compat",yM="@firebase/firestore",vM="@firebase/firestore-compat",bM="firebase",_M="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",wM={[Lf]:"fire-core",[KE]:"fire-core-compat",[QE]:"fire-analytics",[JE]:"fire-analytics-compat",[eM]:"fire-app-check",[ZE]:"fire-app-check-compat",[tM]:"fire-auth",[rM]:"fire-auth-compat",[nM]:"fire-rtdb",[iM]:"fire-rtdb-compat",[sM]:"fire-fn",[oM]:"fire-fn-compat",[aM]:"fire-iid",[lM]:"fire-iid-compat",[uM]:"fire-fcm",[cM]:"fire-fcm-compat",[hM]:"fire-perf",[dM]:"fire-perf-compat",[fM]:"fire-rc",[pM]:"fire-rc-compat",[mM]:"fire-gcs",[gM]:"fire-gcs-compat",[yM]:"fire-fst",[vM]:"fire-fst-compat","fire-js":"fire-js",[bM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,Bf=new Map;function xM(i,t){try{i.container.addComponent(t)}catch(n){ca.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function sl(i){const t=i.name;if(Bf.has(t))return ca.debug(`There were multiple attempts to register component ${t}.`),!1;Bf.set(t,i);for(const n of Qc.values())xM(n,i);return!0}function Wp(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xo=new Cu("app","Firebase",SM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=_M;function s_(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Nf,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(n||(n=fE()),!n)throw xo.create("no-options");const a=Qc.get(s);if(a){if(Jc(n,a.options)&&Jc(r,a.config))return a;throw xo.create("duplicate-app",{appName:s})}const o=new IE(s);for(const l of Bf.values())o.addComponent(l);const u=new CM(n,r,o);return Qc.set(s,u),u}function o_(i=Nf){const t=Qc.get(i);if(!t&&i===Nf)return s_();if(!t)throw xo.create("no-app",{appName:i});return t}function So(i,t,n){var r;let s=(r=wM[i])!==null&&r!==void 0?r:i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const u=[`Unable to register library "${s}" with version "${t}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ca.warn(u.join(" "));return}sl(new ua(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firebase-heartbeat-database",TM=1,iu="firebase-heartbeat-store";let Md=null;function a_(){return Md||(Md=WE(jM,TM,{upgrade:(i,t)=>{switch(t){case 0:i.createObjectStore(iu)}}}).catch(i=>{throw xo.create("idb-open",{originalErrorMessage:i.message})})),Md}async function kM(i){try{return(await a_()).transaction(iu).objectStore(iu).get(l_(i))}catch(t){if(t instanceof No)ca.warn(t.message);else{const n=xo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ca.warn(n.message)}}}async function Sy(i,t){try{const r=(await a_()).transaction(iu,"readwrite");return await r.objectStore(iu).put(t,l_(i)),r.done}catch(n){if(n instanceof No)ca.warn(n.message);else{const r=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ca.warn(r.message)}}}function l_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=1024,MM=30*24*60*60*1e3;class AM{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=MM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Cy(),{heartbeatsToSend:n,unsentEntries:r}=OM(this._heartbeatsCache.heartbeats),s=Xc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Cy(){return new Date().toISOString().substring(0,10)}function OM(i,t=EM){const n=[];let r=i.slice();for(const s of i){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),jy(n)>t){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yE()?vE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await kM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function jy(i){return Xc(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(i){sl(new ua("platform-logger",t=>new XE(t),"PRIVATE")),sl(new ua("heartbeat",t=>new AM(t),"PRIVATE")),So(Lf,xy,i),So(Lf,xy,"esm2017"),So("fire-js","")}PM("");function qp(i,t){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(n[r[s]]=i[r[s]]);return n}function u_(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RM=u_,c_=new Cu("auth","Firebase",u_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Hp("@firebase/auth");function gc(i,...t){Ty.logLevel<=Jr.ERROR&&Ty.error(`Auth (${ju}): ${i}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(i,...t){throw $p(i,...t)}function ks(i,...t){return $p(i,...t)}function h_(i,t,n){const r=Object.assign(Object.assign({},RM()),{[t]:n});return new Cu("auth","Firebase",r).create(t,{appName:i.name})}function DM(i,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&As(i,"argument-error"),h_(i,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $p(i,...t){if(typeof i!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return c_.create(i,...t)}function ar(i,t,...n){if(!i)throw $p(t,...n)}function Hs(i){const t="INTERNAL ASSERTION FAILED: "+i;throw gc(t),new Error(t)}function Ys(i,t){i||Hs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function zs(i){Ys(i instanceof Function,"Expected a class definition");let t=ky.get(i);return t?(Ys(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,ky.set(i,t),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(i,t){const n=Wp(i,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Jc(a,t??{}))return s;As(s,"already-initialized")}return n.initialize({options:t})}function NM(i,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zs);t!=null&&t.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function BM(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BM()||mE()||"connection"in navigator)?navigator.onLine:!0}function UM(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ys(n>t,"Short delay should be less than long delay!"),this.isMobile=Vp()||e_()}get(){return FM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(i,t){Ys(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new Tu(3e4,6e4);function HM(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}async function Dh(i,t,n,r,s={}){return f_(i,s,async()=>{let a={},o={};r&&(t==="GET"?o=r:a={body:JSON.stringify(r)});const u=pl(Object.assign({key:i.config.apiKey},o)).slice(1),l=await i._getAdditionalHeaders();return l["Content-Type"]="application/json",i.languageCode&&(l["X-Firebase-Locale"]=i.languageCode),d_.fetch()(p_(i,i.config.apiHost,n,u),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},a))})}async function f_(i,t,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},VM),t);try{const s=new WM(i),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ic(i,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[l,c]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ic(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ic(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw ic(i,"user-disabled",o);const p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw h_(i,p,c);As(i,p)}}catch(s){if(s instanceof No)throw s;As(i,"network-request-failed")}}async function zM(i,t,n,r,s={}){const a=await Dh(i,t,n,r,s);return"mfaPendingCredential"in a&&As(i,"multi-factor-auth-required",{_serverResponse:a}),a}function p_(i,t,n,r){const s=`${t}${n}?${r}`;return i.config.emulator?Xp(i.config,s):`${i.config.apiScheme}://${s}`}class WM{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),GM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ic(i,t,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ks(i,t,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(i,t){return Dh(i,"POST","/v1/accounts:delete",t)}async function $M(i,t){return Dh(i,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function XM(i,t=!1){const n=zi(i),r=await n.getIdToken(t),s=Yp(r);ar(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Bl(Ad(s.auth_time)),issuedAtTime:Bl(Ad(s.iat)),expirationTime:Bl(Ad(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ad(i){return Number(i)*1e3}function Yp(i){const[t,n,r]=i.split(".");if(t===void 0||n===void 0||r===void 0)return gc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yc(n);return s?JSON.parse(s):(gc("Failed to decode base64 JWT payload"),null)}catch(s){return gc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function YM(i){const t=Yp(i);return ar(t,"internal-error"),ar(typeof t.exp<"u","internal-error"),ar(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(i,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof No&&KM(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function KM({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(i){var t;const n=i.auth,r=await i.getIdToken(),s=await su(i,$M(n,{idToken:r}));ar(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const o=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?eA(a.providerUserInfo):[],u=ZM(i.providerData,o),l=i.isAnonymous,c=!(i.email&&a.passwordHash)&&!(u!=null&&u.length),p=l?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new m_(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(i,m)}async function QM(i){const t=zi(i);await Zc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ZM(i,t){return[...i.filter(r=>!t.some(s=>s.providerId===r.providerId)),...t]}function eA(i){return i.map(t=>{var{providerId:n}=t,r=qp(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(i,t){const n=await f_(i,{},async()=>{const r=pl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,o=p_(i,s,"/v1/token",`key=${a}`),u=await i._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",d_.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ar(t.idToken,"internal-error"),ar(typeof t.idToken<"u","internal-error"),ar(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):YM(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return ar(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await tA(t,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new ou;return r&&(ar(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),s&&(ar(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),a&&(ar(typeof a=="number","internal-error",{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ou,this.toJSON())}_performRefresh(){return Hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(i,t){ar(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class ta{constructor(t){var{uid:n,auth:r,stsTokenManager:s}=t,a=qp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new m_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const n=await su(this,this.stsTokenManager.getToken(this.auth,t));return ar(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return XM(this,t)}reload(){return QM(this)}_assign(t){this!==t&&(ar(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new ta(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await su(this,qM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,s,a,o,u,l,c,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,d=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(u=n.tenantId)!==null&&u!==void 0?u:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:C,emailVerified:S,isAnonymous:w,providerData:_,stsTokenManager:M}=n;ar(C&&M,t,"internal-error");const I=ou.fromJSON(this.name,M);ar(typeof C=="string",t,"internal-error"),oo(m,t.name),oo(h,t.name),ar(typeof S=="boolean",t,"internal-error"),ar(typeof w=="boolean",t,"internal-error"),oo(f,t.name),oo(d,t.name),oo(g,t.name),oo(y,t.name),oo(b,t.name),oo(x,t.name);const R=new ta({uid:C,auth:t,email:h,emailVerified:S,displayName:m,isAnonymous:w,photoURL:d,phoneNumber:f,tenantId:g,stsTokenManager:I,createdAt:b,lastLoginAt:x});return _&&Array.isArray(_)&&(R.providerData=_.map(P=>Object.assign({},P))),y&&(R._redirectEventId=y),R}static async _fromIdTokenResponse(t,n,r=!1){const s=new ou;s.updateFromServerResponse(n);const a=new ta({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:r});return await Zc(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}g_.type="NONE";const My=g_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(i,t,n){return`firebase:${i}:${t}:${n}`}class za{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=yc(this.userKey,s.apiKey,a),this.fullPersistenceKey=yc("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ta._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new za(zs(My),t,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||zs(My);const o=yc(r,t.config.apiKey,t.name);let u=null;for(const c of n)try{const p=await c._get(o);if(p){const m=ta._fromJSON(t,p);c!==a&&(u=m),a=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new za(a,t,r):(a=l[0],u&&await a._set(o,u.toJSON()),await Promise.all(n.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new za(a,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(b_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(y_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(w_(t))return"Blackberry";if(x_(t))return"Webos";if(Kp(t))return"Safari";if((t.includes("chrome/")||v_(t))&&!t.includes("edge/"))return"Chrome";if(__(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y_(i=ci()){return/firefox\//i.test(i)}function Kp(i=ci()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function v_(i=ci()){return/crios\//i.test(i)}function b_(i=ci()){return/iemobile/i.test(i)}function __(i=ci()){return/android/i.test(i)}function w_(i=ci()){return/blackberry/i.test(i)}function x_(i=ci()){return/webos/i.test(i)}function Lh(i=ci()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function rA(i=ci()){var t;return Lh(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function nA(){return gE()&&document.documentMode===10}function S_(i=ci()){return Lh(i)||__(i)||x_(i)||w_(i)||/windows phone/i.test(i)||b_(i)}function iA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i,t=[]){let n;switch(i){case"Browser":n=Ay(ci());break;case"Worker":n=`${Ay(ci())}-${i}`;break;default:n=i}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ju}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=a=>new Promise((o,u)=>{try{const l=t(a);o(l)}catch(l){u(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,n,r){this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oy(this),this.idTokenSubscription=new Oy(this),this.beforeStateQueue=new sA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await za.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===u)&&(l!=null&&l.user)&&(s=l.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Zc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=UM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?zi(t):null;return n&&ar(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ar(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(zs(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Cu("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zs(t)||this._popupRedirectResolver;ar(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[zs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ar(o,this,"internal-error"),o.then(()=>a(this.currentUser)),typeof n=="function"?t.addObserver(n,r,s):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=C_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Nh(i){return zi(i)}class Oy{constructor(t){this.auth=t,this.observer=null,this.addObserver=jE(n=>this.observer=n)}get next(){return ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function aA(i,t,n){const r=Nh(i);ar(r._canInitEmulator,r,"emulator-config-failed"),ar(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=j_(t),{host:o,port:u}=lA(t),l=u===null?"":`:${u}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||uA()}function j_(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function lA(i){const t=j_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Iy(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Iy(o)}}}function Iy(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function uA(){function i(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hs("not implemented")}_getIdTokenResponse(t){return Hs("not implemented")}_linkToIdToken(t,n){return Hs("not implemented")}_getReauthenticationResolver(t){return Hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(i,t){return zM(i,"POST","/v1/accounts:signInWithIdp",HM(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="http://localhost";class ha extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ha(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):As("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:s}=n,a=qp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ha(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Wa(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Wa(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Wa(t,n)}buildRequest(){const t={requestUri:cA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=pl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Jp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ku{constructor(){super("facebook.com")}static credential(t){return ha._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return co.credentialFromTaggedObject(t)}static credentialFromError(t){return co.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return co.credential(t.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ha._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Gs.credentialFromTaggedObject(t)}static credentialFromError(t){return Gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ku{constructor(){super("github.com")}static credential(t){return ha._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ho.credentialFromTaggedObject(t)}static credentialFromError(t){return ho.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ho.credential(t.oauthAccessToken)}catch{return null}}}ho.GITHUB_SIGN_IN_METHOD="github.com";ho.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends ku{constructor(){super("twitter.com")}static credential(t,n){return ha._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return fo.credentialFromTaggedObject(t)}static credentialFromError(t){return fo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return fo.credential(n,r)}catch{return null}}}fo.TWITTER_SIGN_IN_METHOD="twitter.com";fo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,s=!1){const a=await ta._fromIdTokenResponse(t,r,s),o=Py(r);return new ol({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const s=Py(r);return new ol({user:t,providerId:s,_tokenResponse:r,operationType:n})}}function Py(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends No{constructor(t,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,eh.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,s){return new eh(t,n,r,s)}}function k_(i,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?eh._fromErrorAndOperation(i,a,t,r):a})}async function hA(i,t,n=!1){const r=await su(i,t._linkToIdToken(i.auth,await i.getIdToken()),n);return ol._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(i,t,n=!1){const{auth:r}=i,s="reauthenticate";try{const a=await su(i,k_(r,s,t,i),n);ar(a.idToken,r,"internal-error");const o=Yp(a.idToken);ar(o,r,"internal-error");const{sub:u}=o;return ar(i.uid===u,r,"user-mismatch"),ol._forOperation(i,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&As(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(i,t,n=!1){const r="signIn",s=await k_(i,r,t),a=await ol._fromIdTokenResponse(i,r,s);return n||await i._updateCurrentUser(a.user),a}function pA(i,t,n,r){return zi(i).onIdTokenChanged(t,n,r)}function mA(i,t,n){return zi(i).beforeAuthStateChanged(t,n)}function gA(i,t,n,r){return zi(i).onAuthStateChanged(t,n,r)}const th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){const i=ci();return Kp(i)||Lh(i)}const vA=1e3,bA=10;class M_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yA()&&iA(),this.fallbackToPolling=S_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&t(n,s,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,u,l)=>{this.notifyListeners(o,l)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);nA()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,bA):s()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},vA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}M_.type="LOCAL";const _A=M_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}A_.type="SESSION";const O_=A_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const r=new Bh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async c=>c(n.origin,a)),l=await wA(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((u,l)=>{const c=Qp("",20);s.port1.start();const p=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const h=m;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(h.data.response);break;default:clearTimeout(p),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(){return window}function SA(i){Es().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){return typeof Es().WorkerGlobalScope<"u"&&typeof Es().importScripts=="function"}async function CA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jA(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function TA(){return I_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="firebaseLocalStorageDb",kA=1,rh="firebaseLocalStorage",R_="fbase_key";class Eu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(i,t){return i.transaction([rh],t?"readwrite":"readonly").objectStore(rh)}function EA(){const i=indexedDB.deleteDatabase(P_);return new Eu(i).toPromise()}function Uf(){const i=indexedDB.open(P_,kA);return new Promise((t,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(rh,{keyPath:R_})}catch(s){n(s)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(rh)?t(r):(r.close(),await EA(),t(await Uf()))})})}async function Ry(i,t,n){const r=Fh(i,!0).put({[R_]:t,value:n});return new Eu(r).toPromise()}async function MA(i,t){const n=Fh(i,!1).get(t),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function Dy(i,t){const n=Fh(i,!0).delete(t);return new Eu(n).toPromise()}const AA=800,OA=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uf(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>OA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(TA()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await CA(),!this.activeServiceWorker)return;this.sender=new xA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||jA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Uf();return await Ry(t,th,"1"),await Dy(t,th),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ry(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>MA(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Fh(s,!1).getAll();return new Eu(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const IA=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}function RA(i){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=t,r.onerror=s=>{const a=ks("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",PA().appendChild(r)})}function DA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(i,t){return t?zs(t):(ar(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends T_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Wa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Wa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Wa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function LA(i){return fA(i.auth,new Zp(i),i.bypassAuthState)}function NA(i){const{auth:t,user:n}=i;return ar(n,t,"internal-error"),dA(n,new Zp(i),i.bypassAuthState)}async function BA(i){const{auth:t,user:n}=i;return ar(n,t,"internal-error"),hA(n,new Zp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(t,n,r,s,a=!1){this.auth=t,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:u}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return LA;case"linkViaPopup":case"linkViaRedirect":return BA;case"reauthViaPopup":case"reauthViaRedirect":return NA;default:As(this.auth,"internal-error")}}resolve(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new Tu(2e3,1e4);async function UA(i,t,n){const r=Nh(i);DM(i,t,Jp);const s=L_(r,n);return new Ko(r,"signInViaPopup",t,s).executeNotNull()}class Ko extends N_{constructor(t,n,r,s,a){super(t,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ar(t,this.auth,"internal-error"),t}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const t=Qp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(t,FA.get())};t()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="pendingRedirect",vc=new Map;class GA extends N_{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=vc.get(this.auth._key());if(!t){try{const r=await HA(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}vc.set(this.auth._key(),t)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HA(i,t){const n=qA(t),r=WA(i);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function zA(i,t){vc.set(i._key(),t)}function WA(i){return zs(i._redirectPersistence)}function qA(i){return yc(VA,i.config.apiKey,i.name)}async function $A(i,t,n=!1){const r=Nh(i),s=L_(r,t),o=await new GA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=10*60*1e3;class YA{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!KA(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!B_(t)){const s=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ks(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ly(t))}saveEventToCache(t){this.cachedEventUids.add(Ly(t)),this.lastProcessedEventTime=Date.now()}}function Ly(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function B_({type:i,error:t}){return i==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function KA(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(i,t={}){return Dh(i,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZA=/^https?/;async function eO(i){if(i.config.emulator)return;const{authorizedDomains:t}=await JA(i);for(const n of t)try{if(tO(n))return}catch{}As(i,"unauthorized-domain")}function tO(i){const t=Ff(),{protocol:n,hostname:r}=new URL(t);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZA.test(n))return!1;if(QA.test(i))return r===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new Tu(3e4,6e4);function Ny(){const i=Es().___jsl;if(i!=null&&i.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function nO(i){return new Promise((t,n)=>{var r,s,a;function o(){Ny(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ny(),n(ks(i,"network-request-failed"))},timeout:rO.get()})}if(!((s=(r=Es().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((a=Es().gapi)===null||a===void 0)&&a.load)o();else{const u=DA("iframefcb");return Es()[u]=()=>{gapi.load?o():n(ks(i,"network-request-failed"))},RA(`https://apis.google.com/js/api.js?onload=${u}`).catch(l=>n(l))}}).catch(t=>{throw bc=null,t})}let bc=null;function iO(i){return bc=bc||nO(i),bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Tu(5e3,15e3),oO="__/auth/iframe",aO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cO(i){const t=i.config;ar(t.authDomain,i,"auth-domain-config-required");const n=t.emulator?Xp(t,aO):`https://${i.config.authDomain}/${oO}`,r={apiKey:t.apiKey,appName:i.name,v:ju},s=uO.get(i.config.apiHost);s&&(r.eid=s);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${pl(r).slice(1)}`}async function hO(i){const t=await iO(i),n=Es().gapi;return ar(n,i,"internal-error"),t.open({where:document.body,url:cO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=ks(i,"network-request-failed"),u=Es().setTimeout(()=>{a(o)},sO.get());function l(){Es().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fO=500,pO=600,mO="_blank",gO="http://localhost";class By{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yO(i,t,n,r=fO,s=pO){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l=Object.assign(Object.assign({},dO),{width:r.toString(),height:s.toString(),top:a,left:o}),c=ci().toLowerCase();n&&(u=v_(c)?mO:n),y_(c)&&(t=t||gO,l.scrollbars="yes");const p=Object.entries(l).reduce((h,[f,d])=>`${h}${f}=${d},`,"");if(rA(c)&&u!=="_self")return vO(t||"",u),new By(null);const m=window.open(t||"",u,p);ar(m,i,"popup-blocked");try{m.focus()}catch{}return new By(m)}function vO(i,t){const n=document.createElement("a");n.href=i,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="__/auth/handler",_O="emulator/auth/handler";function Fy(i,t,n,r,s,a){ar(i.config.authDomain,i,"auth-domain-config-required"),ar(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:ju,eventId:s};if(t instanceof Jp){t.setDefaultLanguage(i.languageCode),o.providerId=t.providerId||"",Pf(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[l,c]of Object.entries(a||{}))o[l]=c}if(t instanceof ku){const l=t.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}i.tenantId&&(o.tid=i.tenantId);const u=o;for(const l of Object.keys(u))u[l]===void 0&&delete u[l];return`${wO(i)}?${pl(u).slice(1)}`}function wO({config:i}){return i.emulator?Xp(i,_O):`https://${i.authDomain}/${bO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="webStorageSupport";class xO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=$A,this._overrideRedirectResult=zA}async _openPopup(t,n,r,s){var a;Ys((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=Fy(t,n,r,Ff(),s);return yO(t,o,Qp())}async _openRedirect(t,n,r,s){return await this._originValidation(t),SA(Fy(t,n,r,Ff(),s)),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Ys(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await hO(t),r=new YA(t);return n.register("authEvent",s=>(ar(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Od,{type:Od},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Od];o!==void 0&&n(!!o),As(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return S_()||Kp()||Lh()}}const SO=xO;var Uy="@firebase/auth",Vy="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function TO(i){sl(new ua("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),{apiKey:a,authDomain:o}=r.options;return((u,l)=>{ar(a&&!a.includes(":"),"invalid-api-key",{appName:u.name}),ar(!(o!=null&&o.includes(":")),"argument-error",{appName:u.name});const c={apiKey:a,authDomain:o,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C_(i)},p=new oA(u,l,c);return NM(p,n),p})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),sl(new ua("auth-internal",t=>{const n=Nh(t.getProvider("auth").getImmediate());return(r=>new CO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),So(Uy,Vy,jO(i)),So(Uy,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=5*60,EO=Z1("authIdTokenMaxAge")||kO;let Gy=null;const MO=i=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EO)return;const s=n==null?void 0:n.token;Gy!==s&&(Gy=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AO(i=o_()){const t=Wp(i,"auth");if(t.isInitialized())return t.getImmediate();const n=LM(i,{popupRedirectResolver:SO,persistence:[IA,_A,O_]}),r=Z1("authTokenSyncURL");if(r){const a=MO(r);mA(n,a,()=>a(n.currentUser)),pA(n,o=>a(o))}const s=Q1("auth");return s&&aA(n,`http://${s}`),n}TO("Browser");const Hy="@firebase/database",zy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_="";function OO(i){F_=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ln(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:nu(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Zs(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new IO(t)}}catch{}return new PO},Jo=U_("localStorage"),Vf=U_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Hp("@firebase/database"),RO=function(){let i=1;return function(){return i++}}(),V_=function(i){const t=EE(i),n=new CE;n.update(t);const r=n.digest();return Fp.encodeByteArray(r)},Mu=function(...i){let t="";for(let n=0;n<i.length;n++){const r=i[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Mu.apply(null,r):typeof r=="object"?t+=Ln(r):t+=r,t+=" "}return t};let ra=null,Wy=!0;const DO=function(i,t){jt(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(qa.logLevel=Jr.VERBOSE,ra=qa.log.bind(qa),t&&Vf.set("logging_enabled",!0)):typeof i=="function"?ra=i:(ra=null,Vf.remove("logging_enabled"))},li=function(...i){if(Wy===!0&&(Wy=!1,ra===null&&Vf.get("logging_enabled")===!0&&DO(!0)),ra){const t=Mu.apply(null,i);ra(t)}},Au=function(i){return function(...t){li(i,...t)}},Gf=function(...i){const t="FIREBASE INTERNAL ERROR: "+Mu(...i);qa.error(t)},Ks=function(...i){const t=`FIREBASE FATAL ERROR: ${Mu(...i)}`;throw qa.error(t),new Error(t)},Ei=function(...i){const t="FIREBASE WARNING: "+Mu(...i);qa.warn(t)},LO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ei("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},G_=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},NO=function(i){if(document.readyState==="complete")i();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},al="[MIN_NAME]",da="[MAX_NAME]",ml=function(i,t){if(i===t)return 0;if(i===al||t===da)return-1;if(t===al||i===da)return 1;{const n=qy(i),r=qy(t);return n!==null?r!==null?n-r===0?i.length-t.length:n-r:-1:r!==null?1:i<t?-1:1}},BO=function(i,t){return i===t?0:i<t?-1:1},Tl=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+Ln(t))},em=function(i){if(typeof i!="object"||i===null)return Ln(i);const t=[];for(const r in i)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Ln(t[r]),n+=":",n+=em(i[t[r]]);return n+="}",n},H_=function(i,t){const n=i.length;if(n<=t)return[i];const r=[];for(let s=0;s<n;s+=t)s+t>n?r.push(i.substring(s,n)):r.push(i.substring(s,s+t));return r};function Ai(i,t){for(const n in i)i.hasOwnProperty(n)&&t(n,i[n])}const z_=function(i){jt(!G_(i),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let s,a,o,u,l;i===0?(a=0,o=0,s=1/i===-1/0?1:0):(s=i<0,i=Math.abs(i),i>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(i)/Math.LN2),r),a=u+r,o=Math.round(i*Math.pow(2,n-u)-Math.pow(2,n))):(a=0,o=Math.round(i/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(a%2?1:0),a=Math.floor(a/2);c.push(s?1:0),c.reverse();const p=c.join("");let m="";for(l=0;l<64;l+=8){let h=parseInt(p.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),m=m+h}return m.toLowerCase()},FO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function VO(i,t){let n="Unknown Error";i==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?n="Client doesn't have permission to access the desired data.":i==="unavailable"&&(n="The service is unavailable");const r=new Error(i+" at "+t._path.toString()+": "+n);return r.code=i.toUpperCase(),r}const GO=new RegExp("^-?(0*)\\d{1,10}$"),HO=-2147483648,zO=2147483647,qy=function(i){if(GO.test(i)){const t=Number(i);if(t>=HO&&t<=zO)return t}return null},gl=function(i){try{i()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Ei("Exception was thrown by user callback.",n),t},Math.floor(0))}},WO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fl=function(i,t){const n=setTimeout(i,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ei(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ei(t)}}class $a{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}$a.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="5",W_="v",q_="s",$_="r",X_="f",Y_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K_="ls",J_="p",Hf="ac",Q_="websocket",Z_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,n,r,s,a=!1,o="",u=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jo.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Jo.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function XO(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function tw(i,t,n){jt(typeof t=="string","typeof type must == string"),jt(typeof n=="object","typeof params must == object");let r;if(t===Q_)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===Z_)r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);XO(i)&&(n.ns=i.namespace);const s=[];return Ai(n,(a,o)=>{s.push(a+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.counters_={}}incrementCounter(t,n=1){Zs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return oE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id={},Pd={};function rm(i){const t=i.toString();return Id[t]||(Id[t]=new YO),Id[t]}function KO(i,t){const n=i.toString();return Pd[n]||(Pd[n]=t()),Pd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&gl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="start",QO="close",ZO="pLPCommand",eI="pRTLPCB",rw="id",nw="pw",iw="ser",tI="cb",rI="seg",nI="ts",iI="d",sI="dframe",sw=1870,ow=30,oI=sw-ow,aI=25e3,lI=3e4;class Ba{constructor(t,n,r,s,a,o,u){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Au(t),this.stats_=rm(n),this.urlFn=l=>(this.appCheckToken&&(l[Hf]=this.appCheckToken),tw(n,Z_,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JO(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lI)),NO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nm((...a)=>{const[o,u,l,c,p]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$y)this.id=u,this.password=l;else if(o===QO)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...a)=>{const[o,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(o,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[$y]="t",r[iw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[W_]=tm,this.transportSessionId&&(r[q_]=this.transportSessionId),this.lastSessionId&&(r[K_]=this.lastSessionId),this.applicationId&&(r[J_]=this.applicationId),this.appCheckToken&&(r[Hf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Y_.test(location.hostname)&&(r[$_]=X_);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ba.forceAllow_=!0}static forceDisallow(){Ba.forceDisallow_=!0}static isAvailable(){return Ba.forceAllow_?!0:!Ba.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!FO()&&!UO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ln(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=K1(n),s=H_(r,oI);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[sI]="t",r[rw]=t,r[nw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ln(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nm{constructor(t,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RO(),window[ZO+this.uniqueCallbackIdentifier]=t,window[eI+this.uniqueCallbackIdentifier]=n,this.myIFrame=nm.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){li("frame writing exception"),u.stack&&li(u.stack),li(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||li("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[rw]=this.myID,t[nw]=this.myPW,t[iw]=this.currentSerial;let n=this.urlFn(t),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ow+r.length<=sw;){const o=this.pendingSegs.shift();r=r+"&"+rI+s+"="+o.seg+"&"+nI+s+"="+o.ts+"&"+iI+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(aI)),a=()=>{clearTimeout(s),r()};this.addTag(t,a)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{li("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=16384,cI=45e3;let nh=null;typeof MozWebSocket<"u"?nh=MozWebSocket:typeof WebSocket<"u"&&(nh=WebSocket);class os{constructor(t,n,r,s,a,o,u){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Au(this.connId),this.stats_=rm(n),this.connURL=os.connectionURL_(n,o,u,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,s,a){const o={};return o[W_]=tm,typeof location<"u"&&location.hostname&&Y_.test(location.hostname)&&(o[$_]=X_),n&&(o[q_]=n),r&&(o[K_]=r),s&&(o[Hf]=s),a&&(o[J_]=a),tw(t,Q_,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jo.set("previous_websocket_failure",!0);try{let r;t_(),this.mySock=new nh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){os.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&nh!==null&&!os.forceDisallow_}static previouslyFailed(){return Jo.isInMemoryStorage||Jo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Jo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=nu(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(jt(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=Ln(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=H_(n,uI);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cI))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}os.responsesRequiredToBeHealthy=2;os.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ba,os]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=os&&os.isAvailable();let r=n&&!os.previouslyFailed();if(t.webSocketOnly&&(n||Ei("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[os];else{const s=this.transports_=[];for(const a of au.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);au.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}au.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=6e4,dI=5e3,fI=10*1024,pI=100*1024,Rd="t",Xy="d",mI="s",Yy="r",gI="e",Ky="o",Jy="a",Qy="n",Zy="p",yI="h";class vI{constructor(t,n,r,s,a,o,u,l,c,p){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Au("c:"+this.id+":"),this.transportManager_=new au(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Fl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Rd in t){const n=t[Rd];n===Jy?this.upgradeIfSecondaryHealthy_():n===Yy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ky&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Tl("t",t),r=Tl("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Zy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Qy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Tl("t",t),r=Tl("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Tl(Rd,t);if(Xy in t){const r=t[Xy];if(n===yI){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Qy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mI?this.onConnectionShutdown_(r):n===Yy?this.onReset_(r):n===gI?Gf("Server Error: "+r):n===Ky?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gf("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),tm!==r&&Ei("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Fl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hI))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Zy,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{put(t,n,r,s){}merge(t,n,r,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.allowedEvents_=t,this.listeners_={},jt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const s=this.getInitialEvent(t);s&&n.apply(r,s)}off(t,n,r){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let a=0;a<s.length;a++)if(s[a].callback===n&&(!r||r===s[a].context)){s.splice(a,1);return}}validateEventType_(t){jt(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends lw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ih}getInitialEvent(t){return jt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=32,t0=768;class Zr{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function Ar(){return new Zr("")}function jr(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Oo(i){return i.pieces_.length-i.pieceNum_}function sn(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Zr(i.pieces_,t)}function uw(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function bI(i){let t="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)i.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[n])));return t||"/"}function cw(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function hw(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)t.push(i.pieces_[n]);return new Zr(t,0)}function Nn(i,t){const n=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)n.push(i.pieces_[r]);if(t instanceof Zr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Zr(n,0)}function wr(i){return i.pieceNum_>=i.pieces_.length}function xi(i,t){const n=jr(i),r=jr(t);if(n===null)return t;if(n===r)return xi(sn(i),sn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function dw(i,t){if(Oo(i)!==Oo(t))return!1;for(let n=i.pieceNum_,r=t.pieceNum_;n<=i.pieces_.length;n++,r++)if(i.pieces_[n]!==t.pieces_[r])return!1;return!0}function ls(i,t){let n=i.pieceNum_,r=t.pieceNum_;if(Oo(i)>Oo(t))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class _I{constructor(t,n){this.errorPrefix_=n,this.parts_=cw(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rh(this.parts_[r]);fw(this)}}function wI(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Rh(t),fw(i)}function xI(i){const t=i.parts_.pop();i.byteLength_-=Rh(t),i.parts_.length>0&&(i.byteLength_-=1)}function fw(i){if(i.byteLength_>t0)throw new Error(i.errorPrefix_+"has a key path longer than "+t0+" bytes ("+i.byteLength_+").");if(i.parts_.length>e0)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e0+") or object contains a cycle "+Wo(i))}function Wo(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends lw{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new im}getInitialEvent(t){return jt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=1e3,SI=60*5*1e3,r0=30*1e3,CI=1.3,jI=3e4,TI="server_kill",n0=3;class $s extends aw{constructor(t,n,r,s,a,o,u,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=$s.nextPersistentConnectionId_++,this.log_=Au("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kl,this.maxReconnectDelay_=SI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!t_())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");im.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ih.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const s=++this.requestNumber_,a={r:s,a:t,b:n};this.log_(Ln(a)),jt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const n=new Ph,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const u=o.d;o.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(t,n,r,s){this.initConnection_();const a=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),jt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),jt(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:n,query:t,tag:r};this.listens.get(o).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r},o="q";t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(o,a,u=>{const l=u.d,c=u.s;$s.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",u),c!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(c,l))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Zs(t,"w")){const r=il(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Ei(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||SE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r0)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=xE(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const a=s.s,o=s.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),jt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,n)}sendUnlisten_(t,n,r,s){this.log_("Unlisten on "+t+" for "+n);const a={p:t},o="n";s&&(a.q=r,a.t=s),this.sendRequest(o,a)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,s){const a={p:n,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,n,r,s){this.putInternal("p",t,n,r,s)}merge(t,n,r,s){this.putInternal("m",t,n,r,s)}putInternal(t,n,r,s,a){this.initConnection_();const o={p:n,d:r};a!==void 0&&(o.h=a),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ln(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Gf("Unrecognized action received from server: "+Ln(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){jt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jI&&(this.reconnectDelay_=kl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+$s.nextConnectionId_++,a=this.lastSessionId;let o=!1,u=null;const l=function(){u?u.close():(o=!0,r())},c=function(m){jt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:c};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,h]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?li("getToken() completed but was canceled"):(li("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=h&&h.token,u=new vI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,f=>{Ei(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(TI)},a))}catch(m){this.log_("Failed to get token: "+m),o||(this.repoInfo_.nodeAdmin&&Ei(m),l())}}}interrupt(t){li("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){li("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Pf(this.interruptReasons_)&&(this.reconnectDelay_=kl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(a=>em(a)).join("$"):r="default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const r=new Zr(t).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,n){li("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=n0&&(this.reconnectDelay_=r0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){li("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=n0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+F_.replace(/\./g,"-")]=1,Vp()?t["framework.cordova"]=1:e_()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ih.getInstance().currentlyOnline();return Pf(this.interruptReasons_)&&t}}$s.nextPersistentConnectionId_=0;$s.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new vr(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new vr(al,t),s=new vr(al,n);return this.compare(r,s)!==0}minPost(){return vr.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc;class pw extends Uh{static get __EMPTY_NODE(){return sc}static set __EMPTY_NODE(t){sc=t}compare(t,n){return ml(t.name,n.name)}isDefinedOn(t){throw fl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return vr.MIN}maxPost(){return new vr(da,sc)}makePost(t,n){return jt(typeof t=="string","KeyIndex indexValue must always be a string."),new vr(t,sc)}toString(){return".key"}}const Xa=new pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(t,n,r,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Hn{constructor(t,n,r,s,a){this.key=t,this.value=n,this.color=r??Hn.RED,this.left=s??ki.EMPTY_NODE,this.right=a??ki.EMPTY_NODE}copy(t,n,r,s,a){return new Hn(t??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const a=r(t,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(t,n,r),null):a===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,s;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return ki.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Hn.RED=!0;Hn.BLACK=!1;class kI{copy(t,n,r,s,a){return this}insert(t,n,r){return new Hn(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ki{constructor(t,n=ki.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ki(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(t){return new ki(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new oc(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new oc(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new oc(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new oc(this.root_,null,this.comparator_,!0,t)}}ki.EMPTY_NODE=new kI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(i,t){return ml(i.name,t.name)}function sm(i,t){return ml(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf;function MI(i){zf=i}const mw=function(i){return typeof i=="number"?"number:"+z_(i):"string:"+i},gw=function(i){if(i.isLeafNode()){const t=i.val();jt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Zs(t,".sv"),"Priority must be a string or number.")}else jt(i===zf||i.isEmpty(),"priority of unexpected type.");jt(i===zf||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i0;class Gn{constructor(t,n=Gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,jt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gw(this.priorityNode_)}static set __childrenNodeConstructor(t){i0=t}static get __childrenNodeConstructor(){return i0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Gn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return wr(t)?this:jr(t)===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=jr(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(jt(r!==".priority"||Oo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(sn(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mw(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=z_(this.value_):t+=this.value_,this.lazyHash_=V_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Gn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Gn.__childrenNodeConstructor?-1:(jt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,s=Gn.VALUE_TYPE_ORDER.indexOf(n),a=Gn.VALUE_TYPE_ORDER.indexOf(r);return jt(s>=0,"Unknown leaf type: "+n),jt(a>=0,"Unknown leaf type: "+r),s===a?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yw,vw;function AI(i){yw=i}function OI(i){vw=i}class II extends Uh{compare(t,n){const r=t.node.getPriority(),s=n.node.getPriority(),a=r.compareTo(s);return a===0?ml(t.name,n.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return vr.MIN}maxPost(){return new vr(da,new Gn("[PRIORITY-POST]",vw))}makePost(t,n){const r=yw(t);return new vr(n,new Gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const bn=new II;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=Math.log(2);class RI{constructor(t){const n=a=>parseInt(Math.log(a)/PI,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=r(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const sh=function(i,t,n,r){i.sort(t);const s=function(l,c){const p=c-l;let m,h;if(p===0)return null;if(p===1)return m=i[l],h=n?n(m):m,new Hn(h,m.node,Hn.BLACK,null,null);{const f=parseInt(p/2,10)+l,d=s(l,f),g=s(f+1,c);return m=i[f],h=n?n(m):m,new Hn(h,m.node,Hn.BLACK,d,g)}},a=function(l){let c=null,p=null,m=i.length;const h=function(d,g){const y=m-d,b=m;m-=d;const x=s(y+1,b),C=i[y],S=n?n(C):C;f(new Hn(S,C.node,g,null,x))},f=function(d){c?(c.left=d,c=d):(p=d,c=d)};for(let d=0;d<l.count;++d){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(d+1));g?h(y,Hn.BLACK):(h(y,Hn.BLACK),h(y,Hn.RED))}return p},o=new RI(i.length),u=a(o);return new ki(r||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd;const Aa={};class Ws{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return jt(Aa&&bn,"ChildrenNode.ts has not been loaded"),Dd=Dd||new Ws({".priority":Aa},{".priority":bn}),Dd}get(t){const n=il(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ki?n:null}hasIndex(t){return Zs(this.indexSet_,t.toString())}addIndex(t,n){jt(t!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const a=n.getIterator(vr.Wrap);let o=a.getNext();for(;o;)s=s||t.isDefinedOn(o.node),r.push(o),o=a.getNext();let u;s?u=sh(r,t.getCompare()):u=Aa;const l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;const p=Object.assign({},this.indexes_);return p[l]=u,new Ws(p,c)}addToIndexes(t,n){const r=Kc(this.indexes_,(s,a)=>{const o=il(this.indexSet_,a);if(jt(o,"Missing index implementation for "+a),s===Aa)if(o.isDefinedOn(t.node)){const u=[],l=n.getIterator(vr.Wrap);let c=l.getNext();for(;c;)c.name!==t.name&&u.push(c),c=l.getNext();return u.push(t),sh(u,o.getCompare())}else return Aa;else{const u=n.get(t.name);let l=s;return u&&(l=l.remove(new vr(t.name,u))),l.insert(t,t.node)}});return new Ws(r,this.indexSet_)}removeFromIndexes(t,n){const r=Kc(this.indexes_,s=>{if(s===Aa)return s;{const a=n.get(t.name);return a?s.remove(new vr(t.name,a)):s}});return new Ws(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;class tr{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&gw(this.priorityNode_),this.children_.isEmpty()&&jt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return El||(El=new tr(new ki(sm),null,Ws.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||El}updatePriority(t){return this.children_.isEmpty()?this:new tr(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?El:n}}getChild(t){const n=jr(t);return n===null?this:this.getImmediateChild(n).getChild(sn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(jt(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new vr(t,n);let s,a;n.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?El:this.priorityNode_;return new tr(s,o,a)}}updateChild(t,n){const r=jr(t);if(r===null)return n;{jt(jr(t)!==".priority"||Oo(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(sn(t),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,s=0,a=!0;if(this.forEachChild(bn,(o,u)=>{n[o]=u.val(t),r++,a&&tr.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):a=!1}),!t&&a&&s<2*r){const o=[];for(const u in n)o[u]=n[u];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+mw(this.getPriority().val())+":"),this.forEachChild(bn,(n,r)=>{const s=r.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":V_(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new vr(t,n));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new vr(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new vr(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,vr.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,vr.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ou?-1:0}withIndex(t){if(t===Xa||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new tr(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Xa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(bn),s=n.getIterator(bn);let a=r.getNext(),o=s.getNext();for(;a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=s.getNext()}return a===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Xa?null:this.indexMap_.get(t.toString())}}tr.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class DI extends tr{constructor(){super(new ki(sm),tr.EMPTY_NODE,Ws.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return tr.EMPTY_NODE}isEmpty(){return!1}}const Ou=new DI;Object.defineProperties(vr,{MIN:{value:new vr(al,tr.EMPTY_NODE)},MAX:{value:new vr(da,Ou)}});pw.__EMPTY_NODE=tr.EMPTY_NODE;Gn.__childrenNodeConstructor=tr;MI(Ou);OI(Ou);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=!0;function zn(i,t=null){if(i===null)return tr.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),jt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const n=i;return new Gn(n,zn(t))}if(!(i instanceof Array)&&LI){const n=[];let r=!1;if(Ai(i,(o,u)=>{if(o.substring(0,1)!=="."){const l=zn(u);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new vr(o,l)))}}),n.length===0)return tr.EMPTY_NODE;const a=sh(n,EI,o=>o.name,sm);if(r){const o=sh(n,bn.getCompare());return new tr(a,zn(t),new Ws({".priority":o},{".priority":bn}))}else return new tr(a,zn(t),Ws.Default)}else{let n=tr.EMPTY_NODE;return Ai(i,(r,s)=>{if(Zs(i,r)&&r.substring(0,1)!=="."){const a=zn(s);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(zn(t))}}AI(zn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI extends Uh{constructor(t){super(),this.indexPath_=t,jt(!wr(t)&&jr(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),s=this.extractChild(n.node),a=r.compareTo(s);return a===0?ml(t.name,n.name):a}makePost(t,n){const r=zn(t),s=tr.EMPTY_NODE.updateChild(this.indexPath_,r);return new vr(n,s)}maxPost(){const t=tr.EMPTY_NODE.updateChild(this.indexPath_,Ou);return new vr(da,t)}toString(){return cw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends Uh{compare(t,n){const r=t.node.compareTo(n.node);return r===0?ml(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return vr.MIN}maxPost(){return vr.MAX}makePost(t,n){const r=zn(t);return new vr(n,r)}toString(){return".value"}}const FI=new BI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(i){return{type:"value",snapshotNode:i}}function ll(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function lu(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function uu(i,t,n){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:n}}function UI(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t){this.index_=t}updateChild(t,n,r,s,a,o){jt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(n);return u.getChild(s).equals(r.getChild(s))&&u.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?t.hasChild(n)?o.trackChildChange(lu(n,u)):jt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?o.trackChildChange(ll(n,r)):o.trackChildChange(uu(n,r,u))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(bn,(s,a)=>{n.hasChild(s)||r.trackChildChange(lu(s,a))}),n.isLeafNode()||n.forEachChild(bn,(s,a)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(a)||r.trackChildChange(uu(s,a,o))}else r.trackChildChange(ll(s,a))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?tr.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t){this.indexedFilter_=new om(t.getIndex()),this.index_=t.getIndex(),this.startPost_=cu.getStartPost_(t),this.endPost_=cu.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,s,a,o){return this.matches(new vr(n,r))||(r=tr.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,s,a,o)}updateFullNode(t,n,r){n.isLeafNode()&&(n=tr.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(tr.EMPTY_NODE);const a=this;return n.forEachChild(bn,(o,u)=>{a.matches(new vr(o,u))||(s=s.updateImmediateChild(o,tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new cu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,s,a,o){return this.rangedFilter_.matches(new vr(n,r))||(r=tr.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,s,a,o):this.fullLimitUpdateChild_(t,n,r,a,o)}updateFullNode(t,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=tr.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=tr.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;a.hasNext()&&o<this.limit_;){const u=a.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))s=s.updateImmediateChild(u.name,u.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(tr.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let o=0;for(;a.hasNext();){const u=a.getNext();o<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?o++:s=s.updateImmediateChild(u.name,tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,s,a){let o;if(this.reverse_){const m=this.index_.getCompare();o=(h,f)=>m(f,h)}else o=this.index_.getCompare();const u=t;jt(u.numChildren()===this.limit_,"");const l=new vr(n,r),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(l);if(u.hasChild(n)){const m=u.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||u.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(p&&!r.isEmpty()&&f>=0)return a!=null&&a.trackChildChange(uu(n,r,m)),u.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(lu(n,m));const g=u.updateImmediateChild(n,tr.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(a!=null&&a.trackChildChange(ll(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?t:p&&o(c,l)>=0?(a!=null&&(a.trackChildChange(lu(c.name,c.node)),a.trackChildChange(ll(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(c.name,tr.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return jt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return jt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:al}hasEnd(){return this.endSet_}getIndexEndValue(){return jt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return jt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:da}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return jt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bn}copy(){const t=new am;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function GI(i){return i.loadsAllData()?new om(i.getIndex()):i.hasLimit()?new VI(i):new cu(i)}function s0(i){const t={};if(i.isDefault())return t;let n;if(i.index_===bn?n="$priority":i.index_===FI?n="$value":i.index_===Xa?n="$key":(jt(i.index_ instanceof NI,"Unrecognized index type!"),n=i.index_.toString()),t.orderBy=Ln(n),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";t[r]=Ln(i.indexStartValue_),i.startNameSet_&&(t[r]+=","+Ln(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";t[r]=Ln(i.indexEndValue_),i.endNameSet_&&(t[r]+=","+Ln(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function o0(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let n=i.viewFrom_;n===""&&(i.isViewFromLeft()?n="l":n="r"),t.vf=n}return i.index_!==bn&&(t.i=i.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends aw{constructor(t,n,r,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Au("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(jt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,s){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const o=oh.getListenId_(t,r),u={};this.listens_[o]=u;const l=s0(t._queryParams);this.restRequest_(a+".json",l,(c,p)=>{let m=p;if(c===404&&(m=null,c=null),c===null&&this.onDataUpdate_(a,m,!1,r),il(this.listens_,o)===u){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",s(h,null)}})}unlisten(t,n){const r=oh.getListenId_(t,n);delete this.listens_[r]}get(t){const n=s0(t._queryParams),r=t._path.toString(),s=new Ph;return this.restRequest_(r+".json",n,(a,o)=>{let u=o;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(n.auth=s.accessToken),a&&a.token&&(n.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+pl(n);this.log_("Sending REST request for "+o);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+o+" received. status:",u.status,"response:",u.responseText);let l=null;if(u.status>=200&&u.status<300){try{l=nu(u.responseText)}catch{Ei("Failed to parse JSON response for "+o+": "+u.responseText)}r(null,l)}else u.status!==401&&u.status!==404&&Ei("Got unsuccessful REST response for "+o+" Status: "+u.status),r(u.status);r=null}},u.open("GET",o,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.rootNode_=tr.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){return{value:null,children:new Map}}function _w(i,t,n){if(wr(t))i.value=n,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,n);else{const r=jr(t);i.children.has(r)||i.children.set(r,ah());const s=i.children.get(r);t=sn(t),_w(s,t,n)}}function Wf(i,t,n){i.value!==null?n(t,i.value):zI(i,(r,s)=>{const a=new Zr(t.toString()+"/"+r);Wf(s,a,n)})}function zI(i,t){i.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Ai(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=10*1e3,qI=30*1e3,$I=5*60*1e3;class XI{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WI(t);const r=a0+(qI-a0)*Math.random();Fl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;Ai(t,(s,a)=>{a>0&&Zs(this.statsToReport_,s)&&(n[s]=a,r=!0)}),r&&this.server_.reportStats(n),Fl(this.reportStats_.bind(this),Math.floor(Math.random()*2*$I))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(us||(us={}));function ww(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function um(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=us.ACK_USER_WRITE,this.source=ww()}operationForChild(t){if(wr(this.path)){if(this.affectedTree.value!=null)return jt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Zr(t));return new lh(Ar(),n,this.revert)}}else return jt(jr(this.path)===t,"operationForChild called for unrelated child."),new lh(sn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t,n){this.source=t,this.path=n,this.type=us.LISTEN_COMPLETE}operationForChild(t){return wr(this.path)?new hu(this.source,Ar()):new hu(this.source,sn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=us.OVERWRITE}operationForChild(t){return wr(this.path)?new fa(this.source,Ar(),this.snap.getImmediateChild(t)):new fa(this.source,sn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=us.MERGE}operationForChild(t){if(wr(this.path)){const n=this.children.subtree(new Zr(t));return n.isEmpty()?null:n.value?new fa(this.source,Ar(),n.value):new du(this.source,Ar(),n)}else return jt(jr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new du(this.source,sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(wr(t))return this.isFullyInitialized()&&!this.filtered_;const n=jr(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function KI(i,t,n,r){const s=[],a=[];return t.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&a.push(UI(o.childName,o.snapshotNode))}),Ml(i,s,"child_removed",t,r,n),Ml(i,s,"child_added",t,r,n),Ml(i,s,"child_moved",a,r,n),Ml(i,s,"child_changed",t,r,n),Ml(i,s,"value",t,r,n),s}function Ml(i,t,n,r,s,a){const o=r.filter(u=>u.type===n);o.sort((u,l)=>QI(i,u,l)),o.forEach(u=>{const l=JI(i,u,a);s.forEach(c=>{c.respondsTo(u.type)&&t.push(c.createEvent(l,i.query_))})})}function JI(i,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function QI(i,t,n){if(t.childName==null||n.childName==null)throw fl("Should only compare child_ events.");const r=new vr(t.childName,t.snapshotNode),s=new vr(n.childName,n.snapshotNode);return i.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(i,t){return{eventCache:i,serverCache:t}}function Ul(i,t,n,r){return Vh(new Io(t,n,r),i.serverCache)}function xw(i,t,n,r){return Vh(i.eventCache,new Io(t,n,r))}function uh(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function pa(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld;const ZI=()=>(Ld||(Ld=new ki(BO)),Ld);class ln{constructor(t,n=ZI()){this.value=t,this.children=n}static fromObject(t){let n=new ln(null);return Ai(t,(r,s)=>{n=n.set(new Zr(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Ar(),value:this.value};if(wr(t))return null;{const r=jr(t),s=this.children.get(r);if(s!==null){const a=s.findRootMostMatchingPathAndValue(sn(t),n);return a!=null?{path:Nn(new Zr(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(wr(t))return this;{const n=jr(t),r=this.children.get(n);return r!==null?r.subtree(sn(t)):new ln(null)}}set(t,n){if(wr(t))return new ln(n,this.children);{const r=jr(t),a=(this.children.get(r)||new ln(null)).set(sn(t),n),o=this.children.insert(r,a);return new ln(this.value,o)}}remove(t){if(wr(t))return this.children.isEmpty()?new ln(null):new ln(null,this.children);{const n=jr(t),r=this.children.get(n);if(r){const s=r.remove(sn(t));let a;return s.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,s),this.value===null&&a.isEmpty()?new ln(null):new ln(this.value,a)}else return this}}get(t){if(wr(t))return this.value;{const n=jr(t),r=this.children.get(n);return r?r.get(sn(t)):null}}setTree(t,n){if(wr(t))return n;{const r=jr(t),a=(this.children.get(r)||new ln(null)).setTree(sn(t),n);let o;return a.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,a),new ln(this.value,o)}}fold(t){return this.fold_(Ar(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((s,a)=>{r[s]=a.fold_(Nn(t,s),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Ar(),n)}findOnPath_(t,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(wr(t))return null;{const a=jr(t),o=this.children.get(a);return o?o.findOnPath_(sn(t),Nn(n,a),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Ar(),n)}foreachOnPath_(t,n,r){if(wr(t))return this;{this.value&&r(n,this.value);const s=jr(t),a=this.children.get(s);return a?a.foreachOnPath_(sn(t),Nn(n,s),r):new ln(null)}}foreach(t){this.foreach_(Ar(),t)}foreach_(t,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Nn(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.writeTree_=t}static empty(){return new cs(new ln(null))}}function Vl(i,t,n){if(wr(t))return new cs(new ln(n));{const r=i.writeTree_.findRootMostValueAndPath(t);if(r!=null){const s=r.path;let a=r.value;const o=xi(s,t);return a=a.updateChild(o,n),new cs(i.writeTree_.set(s,a))}else{const s=new ln(n),a=i.writeTree_.setTree(t,s);return new cs(a)}}}function l0(i,t,n){let r=i;return Ai(n,(s,a)=>{r=Vl(r,Nn(t,s),a)}),r}function u0(i,t){if(wr(t))return cs.empty();{const n=i.writeTree_.setTree(t,new ln(null));return new cs(n)}}function qf(i,t){return va(i,t)!=null}function va(i,t){const n=i.writeTree_.findRootMostValueAndPath(t);return n!=null?i.writeTree_.get(n.path).getChild(xi(n.path,t)):null}function c0(i){const t=[],n=i.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(bn,(r,s)=>{t.push(new vr(r,s))}):i.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&t.push(new vr(r,s.value))}),t}function Co(i,t){if(wr(t))return i;{const n=va(i,t);return n!=null?new cs(new ln(n)):new cs(i.writeTree_.subtree(t))}}function $f(i){return i.writeTree_.isEmpty()}function ul(i,t){return Sw(Ar(),i.writeTree_,t)}function Sw(i,t,n){if(t.value!=null)return n.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((s,a)=>{s===".priority"?(jt(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=Sw(Nn(i,s),a,n)}),!n.getChild(i).isEmpty()&&r!==null&&(n=n.updateChild(Nn(i,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i,t){return kw(t,i)}function eP(i,t,n,r,s){jt(r>i.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),i.allWrites.push({path:t,snap:n,writeId:r,visible:s}),s&&(i.visibleWrites=Vl(i.visibleWrites,t,n)),i.lastWriteId=r}function tP(i,t){for(let n=0;n<i.allWrites.length;n++){const r=i.allWrites[n];if(r.writeId===t)return r}return null}function rP(i,t){const n=i.allWrites.findIndex(u=>u.writeId===t);jt(n>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[n];i.allWrites.splice(n,1);let s=r.visible,a=!1,o=i.allWrites.length-1;for(;s&&o>=0;){const u=i.allWrites[o];u.visible&&(o>=n&&nP(u,r.path)?s=!1:ls(r.path,u.path)&&(a=!0)),o--}if(s){if(a)return iP(i),!0;if(r.snap)i.visibleWrites=u0(i.visibleWrites,r.path);else{const u=r.children;Ai(u,l=>{i.visibleWrites=u0(i.visibleWrites,Nn(r.path,l))})}return!0}else return!1}function nP(i,t){if(i.snap)return ls(i.path,t);for(const n in i.children)if(i.children.hasOwnProperty(n)&&ls(Nn(i.path,n),t))return!0;return!1}function iP(i){i.visibleWrites=Cw(i.allWrites,sP,Ar()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function sP(i){return i.visible}function Cw(i,t,n){let r=cs.empty();for(let s=0;s<i.length;++s){const a=i[s];if(t(a)){const o=a.path;let u;if(a.snap)ls(n,o)?(u=xi(n,o),r=Vl(r,u,a.snap)):ls(o,n)&&(u=xi(o,n),r=Vl(r,Ar(),a.snap.getChild(u)));else if(a.children){if(ls(n,o))u=xi(n,o),r=l0(r,u,a.children);else if(ls(o,n))if(u=xi(o,n),wr(u))r=l0(r,Ar(),a.children);else{const l=il(a.children,jr(u));if(l){const c=l.getChild(sn(u));r=Vl(r,Ar(),c)}}}else throw fl("WriteRecord should have .snap or .children")}}return r}function jw(i,t,n,r,s){if(!r&&!s){const a=va(i.visibleWrites,t);if(a!=null)return a;{const o=Co(i.visibleWrites,t);if($f(o))return n;if(n==null&&!qf(o,Ar()))return null;{const u=n||tr.EMPTY_NODE;return ul(o,u)}}}else{const a=Co(i.visibleWrites,t);if(!s&&$f(a))return n;if(!s&&n==null&&!qf(a,Ar()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(ls(c.path,t)||ls(t,c.path))},u=Cw(i.allWrites,o,t),l=n||tr.EMPTY_NODE;return ul(u,l)}}}function oP(i,t,n){let r=tr.EMPTY_NODE;const s=va(i.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(bn,(a,o)=>{r=r.updateImmediateChild(a,o)}),r;if(n){const a=Co(i.visibleWrites,t);return n.forEachChild(bn,(o,u)=>{const l=ul(Co(a,new Zr(o)),u);r=r.updateImmediateChild(o,l)}),c0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const a=Co(i.visibleWrites,t);return c0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function aP(i,t,n,r,s){jt(r||s,"Either existingEventSnap or existingServerSnap must exist");const a=Nn(t,n);if(qf(i.visibleWrites,a))return null;{const o=Co(i.visibleWrites,a);return $f(o)?s.getChild(n):ul(o,s.getChild(n))}}function lP(i,t,n,r){const s=Nn(t,n),a=va(i.visibleWrites,s);if(a!=null)return a;if(r.isCompleteForChild(n)){const o=Co(i.visibleWrites,s);return ul(o,r.getNode().getImmediateChild(n))}else return null}function uP(i,t){return va(i.visibleWrites,t)}function cP(i,t,n,r,s,a,o){let u;const l=Co(i.visibleWrites,t),c=va(l,Ar());if(c!=null)u=c;else if(n!=null)u=ul(l,n);else return[];if(u=u.withIndex(o),!u.isEmpty()&&!u.isLeafNode()){const p=[],m=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o);let f=h.getNext();for(;f&&p.length<s;)m(f,r)!==0&&p.push(f),f=h.getNext();return p}else return[]}function hP(){return{visibleWrites:cs.empty(),allWrites:[],lastWriteId:-1}}function ch(i,t,n,r){return jw(i.writeTree,i.treePath,t,n,r)}function cm(i,t){return oP(i.writeTree,i.treePath,t)}function h0(i,t,n,r){return aP(i.writeTree,i.treePath,t,n,r)}function hh(i,t){return uP(i.writeTree,Nn(i.treePath,t))}function dP(i,t,n,r,s,a){return cP(i.writeTree,i.treePath,t,n,r,s,a)}function hm(i,t,n){return lP(i.writeTree,i.treePath,t,n)}function Tw(i,t){return kw(Nn(i.treePath,t),i.writeTree)}function kw(i,t){return{treePath:i,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;jt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),jt(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const a=s.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,uu(r,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,lu(r,s.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,ll(r,t.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,uu(r,t.snapshotNode,s.oldSnap));else throw fl("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const Ew=new pP;class dm{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Io(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hm(this.writes_,t,r)}}getChildAfterChild(t,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pa(this.viewCache_),a=dP(this.writes_,s,n,1,r,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(i){return{filter:i}}function gP(i,t){jt(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),jt(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function yP(i,t,n,r,s){const a=new fP;let o,u;if(n.type===us.OVERWRITE){const c=n;c.source.fromUser?o=Xf(i,t,c.path,c.snap,r,s,a):(jt(c.source.fromServer,"Unknown source."),u=c.source.tagged||t.serverCache.isFiltered()&&!wr(c.path),o=dh(i,t,c.path,c.snap,r,s,u,a))}else if(n.type===us.MERGE){const c=n;c.source.fromUser?o=bP(i,t,c.path,c.children,r,s,a):(jt(c.source.fromServer,"Unknown source."),u=c.source.tagged||t.serverCache.isFiltered(),o=Yf(i,t,c.path,c.children,r,s,u,a))}else if(n.type===us.ACK_USER_WRITE){const c=n;c.revert?o=xP(i,t,c.path,r,s,a):o=_P(i,t,c.path,c.affectedTree,r,s,a)}else if(n.type===us.LISTEN_COMPLETE)o=wP(i,t,n.path,r,a);else throw fl("Unknown operation type: "+n.type);const l=a.getChanges();return vP(t,o,l),{viewCache:o,changes:l}}function vP(i,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=uh(i);(n.length>0||!i.eventCache.isFullyInitialized()||s&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(bw(uh(t)))}}function Mw(i,t,n,r,s,a){const o=t.eventCache;if(hh(r,n)!=null)return t;{let u,l;if(wr(n))if(jt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const c=pa(t),p=c instanceof tr?c:tr.EMPTY_NODE,m=cm(r,p);u=i.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const c=ch(r,pa(t));u=i.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{const c=jr(n);if(c===".priority"){jt(Oo(n)===1,"Can't have a priority with additional path components");const p=o.getNode();l=t.serverCache.getNode();const m=h0(r,n,p,l);m!=null?u=i.filter.updatePriority(p,m):u=o.getNode()}else{const p=sn(n);let m;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const h=h0(r,n,o.getNode(),l);h!=null?m=o.getNode().getImmediateChild(c).updateChild(p,h):m=o.getNode().getImmediateChild(c)}else m=hm(r,c,t.serverCache);m!=null?u=i.filter.updateChild(o.getNode(),c,m,p,s,a):u=o.getNode()}}return Ul(t,u,o.isFullyInitialized()||wr(n),i.filter.filtersNodes())}}function dh(i,t,n,r,s,a,o,u){const l=t.serverCache;let c;const p=o?i.filter:i.filter.getIndexedFilter();if(wr(n))c=p.updateFullNode(l.getNode(),r,null);else if(p.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=p.updateFullNode(l.getNode(),f,null)}else{const f=jr(n);if(!l.isCompleteForPath(n)&&Oo(n)>1)return t;const d=sn(n),y=l.getNode().getImmediateChild(f).updateChild(d,r);f===".priority"?c=p.updatePriority(l.getNode(),y):c=p.updateChild(l.getNode(),f,y,d,Ew,null)}const m=xw(t,c,l.isFullyInitialized()||wr(n),p.filtersNodes()),h=new dm(s,m,a);return Mw(i,m,n,s,h,u)}function Xf(i,t,n,r,s,a,o){const u=t.eventCache;let l,c;const p=new dm(s,t,a);if(wr(n))c=i.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ul(t,c,!0,i.filter.filtersNodes());else{const m=jr(n);if(m===".priority")c=i.filter.updatePriority(t.eventCache.getNode(),r),l=Ul(t,c,u.isFullyInitialized(),u.isFiltered());else{const h=sn(n),f=u.getNode().getImmediateChild(m);let d;if(wr(h))d=r;else{const g=p.getCompleteChild(m);g!=null?uw(h)===".priority"&&g.getChild(hw(h)).isEmpty()?d=g:d=g.updateChild(h,r):d=tr.EMPTY_NODE}if(f.equals(d))l=t;else{const g=i.filter.updateChild(u.getNode(),m,d,h,p,o);l=Ul(t,g,u.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function d0(i,t){return i.eventCache.isCompleteForChild(t)}function bP(i,t,n,r,s,a,o){let u=t;return r.foreach((l,c)=>{const p=Nn(n,l);d0(t,jr(p))&&(u=Xf(i,u,p,c,s,a,o))}),r.foreach((l,c)=>{const p=Nn(n,l);d0(t,jr(p))||(u=Xf(i,u,p,c,s,a,o))}),u}function f0(i,t,n){return n.foreach((r,s)=>{t=t.updateChild(r,s)}),t}function Yf(i,t,n,r,s,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;wr(n)?c=r:c=new ln(null).setTree(n,r);const p=t.serverCache.getNode();return c.children.inorderTraversal((m,h)=>{if(p.hasChild(m)){const f=t.serverCache.getNode().getImmediateChild(m),d=f0(i,f,h);l=dh(i,l,new Zr(m),d,s,a,o,u)}}),c.children.inorderTraversal((m,h)=>{const f=!t.serverCache.isCompleteForChild(m)&&h.value===null;if(!p.hasChild(m)&&!f){const d=t.serverCache.getNode().getImmediateChild(m),g=f0(i,d,h);l=dh(i,l,new Zr(m),g,s,a,o,u)}}),l}function _P(i,t,n,r,s,a,o){if(hh(s,n)!=null)return t;const u=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(wr(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return dh(i,t,n,l.getNode().getChild(n),s,a,u,o);if(wr(n)){let c=new ln(null);return l.getNode().forEachChild(Xa,(p,m)=>{c=c.set(new Zr(p),m)}),Yf(i,t,n,c,s,a,u,o)}else return t}else{let c=new ln(null);return r.foreach((p,m)=>{const h=Nn(n,p);l.isCompleteForPath(h)&&(c=c.set(p,l.getNode().getChild(h)))}),Yf(i,t,n,c,s,a,u,o)}}function wP(i,t,n,r,s){const a=t.serverCache,o=xw(t,a.getNode(),a.isFullyInitialized()||wr(n),a.isFiltered());return Mw(i,o,n,r,Ew,s)}function xP(i,t,n,r,s,a){let o;if(hh(r,n)!=null)return t;{const u=new dm(r,t,s),l=t.eventCache.getNode();let c;if(wr(n)||jr(n)===".priority"){let p;if(t.serverCache.isFullyInitialized())p=ch(r,pa(t));else{const m=t.serverCache.getNode();jt(m instanceof tr,"serverChildren would be complete if leaf node"),p=cm(r,m)}p=p,c=i.filter.updateFullNode(l,p,a)}else{const p=jr(n);let m=hm(r,p,t.serverCache);m==null&&t.serverCache.isCompleteForChild(p)&&(m=l.getImmediateChild(p)),m!=null?c=i.filter.updateChild(l,p,m,sn(n),u,a):t.eventCache.getNode().hasChild(p)?c=i.filter.updateChild(l,p,tr.EMPTY_NODE,sn(n),u,a):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ch(r,pa(t)),o.isLeafNode()&&(c=i.filter.updateFullNode(c,o,a)))}return o=t.serverCache.isFullyInitialized()||hh(r,Ar())!=null,Ul(t,c,o,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new om(r.getIndex()),a=GI(r);this.processor_=mP(a);const o=n.serverCache,u=n.eventCache,l=s.updateFullNode(tr.EMPTY_NODE,o.getNode(),null),c=a.updateFullNode(tr.EMPTY_NODE,u.getNode(),null),p=new Io(l,o.isFullyInitialized(),s.filtersNodes()),m=new Io(c,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Vh(m,p),this.eventGenerator_=new YI(this.query_)}get query(){return this.query_}}function CP(i){return i.viewCache_.serverCache.getNode()}function jP(i){return uh(i.viewCache_)}function TP(i,t){const n=pa(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!wr(t)&&!n.getImmediateChild(jr(t)).isEmpty())?n.getChild(t):null}function p0(i){return i.eventRegistrations_.length===0}function kP(i,t){i.eventRegistrations_.push(t)}function m0(i,t,n){const r=[];if(n){jt(t==null,"A cancel should cancel all event registrations.");const s=i.query._path;i.eventRegistrations_.forEach(a=>{const o=a.createCancelEvent(n,s);o&&r.push(o)})}if(t){let s=[];for(let a=0;a<i.eventRegistrations_.length;++a){const o=i.eventRegistrations_[a];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(a+1));break}}i.eventRegistrations_=s}else i.eventRegistrations_=[];return r}function g0(i,t,n,r){t.type===us.MERGE&&t.source.queryId!==null&&(jt(pa(i.viewCache_),"We should always have a full cache before handling merges"),jt(uh(i.viewCache_),"Missing event cache, even though we have a server cache"));const s=i.viewCache_,a=yP(i.processor_,s,t,n,r);return gP(i.processor_,a.viewCache),jt(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=a.viewCache,Aw(i,a.changes,a.viewCache.eventCache.getNode(),null)}function EP(i,t){const n=i.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(bn,(a,o)=>{r.push(ll(a,o))}),n.isFullyInitialized()&&r.push(bw(n.getNode())),Aw(i,r,n.getNode(),t)}function Aw(i,t,n,r){const s=r?[r]:i.eventRegistrations_;return KI(i.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh;class Ow{constructor(){this.views=new Map}}function MP(i){jt(!fh,"__referenceConstructor has already been defined"),fh=i}function AP(){return jt(fh,"Reference.ts has not been loaded"),fh}function OP(i){return i.views.size===0}function fm(i,t,n,r){const s=t.source.queryId;if(s!==null){const a=i.views.get(s);return jt(a!=null,"SyncTree gave us an op for an invalid query."),g0(a,t,n,r)}else{let a=[];for(const o of i.views.values())a=a.concat(g0(o,t,n,r));return a}}function Iw(i,t,n,r,s){const a=t._queryIdentifier,o=i.views.get(a);if(!o){let u=ch(n,s?r:null),l=!1;u?l=!0:r instanceof tr?(u=cm(n,r),l=!1):(u=tr.EMPTY_NODE,l=!1);const c=Vh(new Io(u,l,!1),new Io(r,s,!1));return new SP(t,c)}return o}function IP(i,t,n,r,s,a){const o=Iw(i,t,r,s,a);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,o),kP(o,n),EP(o,n)}function PP(i,t,n,r){const s=t._queryIdentifier,a=[];let o=[];const u=Po(i);if(s==="default")for(const[l,c]of i.views.entries())o=o.concat(m0(c,n,r)),p0(c)&&(i.views.delete(l),c.query._queryParams.loadsAllData()||a.push(c.query));else{const l=i.views.get(s);l&&(o=o.concat(m0(l,n,r)),p0(l)&&(i.views.delete(s),l.query._queryParams.loadsAllData()||a.push(l.query)))}return u&&!Po(i)&&a.push(new(AP())(t._repo,t._path)),{removed:a,events:o}}function Pw(i){const t=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function jo(i,t){let n=null;for(const r of i.views.values())n=n||TP(r,t);return n}function Rw(i,t){if(t._queryParams.loadsAllData())return Hh(i);{const r=t._queryIdentifier;return i.views.get(r)}}function Dw(i,t){return Rw(i,t)!=null}function Po(i){return Hh(i)!=null}function Hh(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph;function RP(i){jt(!ph,"__referenceConstructor has already been defined"),ph=i}function DP(){return jt(ph,"Reference.ts has not been loaded"),ph}let LP=1;class y0{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ln(null),this.pendingWriteTree_=hP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lw(i,t,n,r,s){return eP(i.pendingWriteTree_,t,n,r,s),s?Pu(i,new fa(ww(),t,n)):[]}function Qo(i,t,n=!1){const r=tP(i.pendingWriteTree_,t);if(rP(i.pendingWriteTree_,t)){let a=new ln(null);return r.snap!=null?a=a.set(Ar(),!0):Ai(r.children,o=>{a=a.set(new Zr(o),!0)}),Pu(i,new lh(r.path,a,n))}else return[]}function Iu(i,t,n){return Pu(i,new fa(lm(),t,n))}function NP(i,t,n){const r=ln.fromObject(n);return Pu(i,new du(lm(),t,r))}function BP(i,t){return Pu(i,new hu(lm(),t))}function FP(i,t,n){const r=mm(i,n);if(r){const s=gm(r),a=s.path,o=s.queryId,u=xi(a,t),l=new hu(um(o),u);return ym(i,a,l)}else return[]}function Nw(i,t,n,r,s=!1){const a=t._path,o=i.syncPointTree_.get(a);let u=[];if(o&&(t._queryIdentifier==="default"||Dw(o,t))){const l=PP(o,t,n,r);OP(o)&&(i.syncPointTree_=i.syncPointTree_.remove(a));const c=l.removed;if(u=l.events,!s){const p=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,m=i.syncPointTree_.findOnPath(a,(h,f)=>Po(f));if(p&&!m){const h=i.syncPointTree_.subtree(a);if(!h.isEmpty()){const f=HP(h);for(let d=0;d<f.length;++d){const g=f[d],y=g.query,b=Vw(i,g);i.listenProvider_.startListening(Gl(y),fu(i,y),b.hashFn,b.onComplete)}}}!m&&c.length>0&&!r&&(p?i.listenProvider_.stopListening(Gl(t),null):c.forEach(h=>{const f=i.queryToTagMap.get(zh(h));i.listenProvider_.stopListening(Gl(h),f)}))}zP(i,c)}return u}function Bw(i,t,n,r){const s=mm(i,r);if(s!=null){const a=gm(s),o=a.path,u=a.queryId,l=xi(o,t),c=new fa(um(u),l,n);return ym(i,o,c)}else return[]}function UP(i,t,n,r){const s=mm(i,r);if(s){const a=gm(s),o=a.path,u=a.queryId,l=xi(o,t),c=ln.fromObject(n),p=new du(um(u),l,c);return ym(i,o,p)}else return[]}function VP(i,t,n,r=!1){const s=t._path;let a=null,o=!1;i.syncPointTree_.foreachOnPath(s,(h,f)=>{const d=xi(h,s);a=a||jo(f,d),o=o||Po(f)});let u=i.syncPointTree_.get(s);u?(o=o||Po(u),a=a||jo(u,Ar())):(u=new Ow,i.syncPointTree_=i.syncPointTree_.set(s,u));let l;a!=null?l=!0:(l=!1,a=tr.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((f,d)=>{const g=jo(d,Ar());g&&(a=a.updateImmediateChild(f,g))}));const c=Dw(u,t);if(!c&&!t._queryParams.loadsAllData()){const h=zh(t);jt(!i.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=WP();i.queryToTagMap.set(h,f),i.tagToQueryMap.set(f,h)}const p=Gh(i.pendingWriteTree_,s);let m=IP(u,t,n,p,a,l);if(!c&&!o&&!r){const h=Rw(u,t);m=m.concat(qP(i,t,h))}return m}function pm(i,t,n){const s=i.pendingWriteTree_,a=i.syncPointTree_.findOnPath(t,(o,u)=>{const l=xi(o,t),c=jo(u,l);if(c)return c});return jw(s,t,a,n,!0)}function GP(i,t){const n=t._path;let r=null;i.syncPointTree_.foreachOnPath(n,(c,p)=>{const m=xi(c,n);r=r||jo(p,m)});let s=i.syncPointTree_.get(n);s?r=r||jo(s,Ar()):(s=new Ow,i.syncPointTree_=i.syncPointTree_.set(n,s));const a=r!=null,o=a?new Io(r,!0,!1):null,u=Gh(i.pendingWriteTree_,t._path),l=Iw(s,t,u,a?o.getNode():tr.EMPTY_NODE,a);return jP(l)}function Pu(i,t){return Fw(t,i.syncPointTree_,null,Gh(i.pendingWriteTree_,Ar()))}function Fw(i,t,n,r){if(wr(i.path))return Uw(i,t,n,r);{const s=t.get(Ar());n==null&&s!=null&&(n=jo(s,Ar()));let a=[];const o=jr(i.path),u=i.operationForChild(o),l=t.children.get(o);if(l&&u){const c=n?n.getImmediateChild(o):null,p=Tw(r,o);a=a.concat(Fw(u,l,c,p))}return s&&(a=a.concat(fm(s,i,r,n))),a}}function Uw(i,t,n,r){const s=t.get(Ar());n==null&&s!=null&&(n=jo(s,Ar()));let a=[];return t.children.inorderTraversal((o,u)=>{const l=n?n.getImmediateChild(o):null,c=Tw(r,o),p=i.operationForChild(o);p&&(a=a.concat(Uw(p,u,l,c)))}),s&&(a=a.concat(fm(s,i,r,n))),a}function Vw(i,t){const n=t.query,r=fu(i,n);return{hashFn:()=>(CP(t)||tr.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?FP(i,n._path,r):BP(i,n._path);{const a=VO(s,n);return Nw(i,n,null,a)}}}}function fu(i,t){const n=zh(t);return i.queryToTagMap.get(n)}function zh(i){return i._path.toString()+"$"+i._queryIdentifier}function mm(i,t){return i.tagToQueryMap.get(t)}function gm(i){const t=i.indexOf("$");return jt(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Zr(i.substr(0,t))}}function ym(i,t,n){const r=i.syncPointTree_.get(t);jt(r,"Missing sync point for query tag that we're tracking");const s=Gh(i.pendingWriteTree_,t);return fm(r,n,s,null)}function HP(i){return i.fold((t,n,r)=>{if(n&&Po(n))return[Hh(n)];{let s=[];return n&&(s=Pw(n)),Ai(r,(a,o)=>{s=s.concat(o)}),s}})}function Gl(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(DP())(i._repo,i._path):i}function zP(i,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const s=zh(r),a=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(a)}}}function WP(){return LP++}function qP(i,t,n){const r=t._path,s=fu(i,t),a=Vw(i,n),o=i.listenProvider_.startListening(Gl(t),s,a.hashFn,a.onComplete),u=i.syncPointTree_.subtree(r);if(s)jt(!Po(u.value),"If we're adding a query, it shouldn't be shadowed");else{const l=u.fold((c,p,m)=>{if(!wr(c)&&p&&Po(p))return[Hh(p).query];{let h=[];return p&&(h=h.concat(Pw(p).map(f=>f.query))),Ai(m,(f,d)=>{h=h.concat(d)}),h}});for(let c=0;c<l.length;++c){const p=l[c];i.listenProvider_.stopListening(Gl(p),fu(i,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new vm(n)}node(){return this.node_}}class bm{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Nn(this.path_,t);return new bm(this.syncTree_,n)}node(){return pm(this.syncTree_,this.path_)}}const $P=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},v0=function(i,t,n){if(!i||typeof i!="object")return i;if(jt(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return XP(i[".sv"],t,n);if(typeof i[".sv"]=="object")return YP(i[".sv"],t);jt(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},XP=function(i,t,n){switch(i){case"timestamp":return n.timestamp;default:jt(!1,"Unexpected server value: "+i)}},YP=function(i,t,n){i.hasOwnProperty("increment")||jt(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;typeof r!="number"&&jt(!1,"Unexpected increment value: "+r);const s=t.node();if(jt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},KP=function(i,t,n,r){return _m(t,new bm(n,i),r)},Gw=function(i,t,n){return _m(i,new vm(t),n)};function _m(i,t,n){const r=i.getPriority().val(),s=v0(r,t.getImmediateChild(".priority"),n);let a;if(i.isLeafNode()){const o=i,u=v0(o.getValue(),t,n);return u!==o.getValue()||s!==o.getPriority().val()?new Gn(u,zn(s)):i}else{const o=i;return a=o,s!==o.getPriority().val()&&(a=a.updatePriority(new Gn(s))),o.forEachChild(bn,(u,l)=>{const c=_m(l,t.getImmediateChild(u),n);c!==l&&(a=a.updateImmediateChild(u,c))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function xm(i,t){let n=t instanceof Zr?t:new Zr(t),r=i,s=jr(n);for(;s!==null;){const a=il(r.node.children,s)||{children:{},childCount:0};r=new wm(s,r,a),n=sn(n),s=jr(n)}return r}function yl(i){return i.node.value}function Hw(i,t){i.node.value=t,Kf(i)}function zw(i){return i.node.childCount>0}function JP(i){return yl(i)===void 0&&!zw(i)}function Wh(i,t){Ai(i.node.children,(n,r)=>{t(new wm(n,i,r))})}function Ww(i,t,n,r){n&&!r&&t(i),Wh(i,s=>{Ww(s,t,!0,r)}),n&&r&&t(i)}function QP(i,t,n){let r=n?i:i.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Ru(i){return new Zr(i.parent===null?i.name:Ru(i.parent)+"/"+i.name)}function Kf(i){i.parent!==null&&ZP(i.parent,i.name,i)}function ZP(i,t,n){const r=JP(n),s=Zs(i.node.children,t);r&&s?(delete i.node.children[t],i.node.childCount--,Kf(i)):!r&&!s&&(i.node.children[t]=n.node,i.node.childCount++,Kf(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/[\[\].#$\/\u0000-\u001F\u007F]/,tR=/[\[\].#$\u0000-\u001F\u007F]/,Nd=10*1024*1024,qw=function(i){return typeof i=="string"&&i.length!==0&&!eR.test(i)},$w=function(i){return typeof i=="string"&&i.length!==0&&!tR.test(i)},rR=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),$w(i)},nR=function(i,t,n,r){r&&t===void 0||Sm(Gp(i,"value"),t,n)},Sm=function(i,t,n){const r=n instanceof Zr?new _I(n,i):n;if(t===void 0)throw new Error(i+"contains undefined "+Wo(r));if(typeof t=="function")throw new Error(i+"contains a function "+Wo(r)+" with contents = "+t.toString());if(G_(t))throw new Error(i+"contains "+t.toString()+" "+Wo(r));if(typeof t=="string"&&t.length>Nd/3&&Rh(t)>Nd)throw new Error(i+"contains a string greater than "+Nd+" utf8 bytes "+Wo(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,a=!1;if(Ai(t,(o,u)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(a=!0,!qw(o)))throw new Error(i+" contains an invalid key ("+o+") "+Wo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wI(r,o),Sm(i,u,r),xI(r)}),s&&a)throw new Error(i+' contains ".value" child '+Wo(r)+" in addition to actual children.")}},Xw=function(i,t,n,r){if(!(r&&n===void 0)&&!$w(n))throw new Error(Gp(i,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iR=function(i,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Xw(i,t,n,r)},Yw=function(i,t){if(jr(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},sR=function(i,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!qw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!rR(n))throw new Error(Gp(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kw(i,t){let n=null;for(let r=0;r<t.length;r++){const s=t[r],a=s.getPath();n!==null&&!dw(a,n.path)&&(i.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(s)}n&&i.eventLists_.push(n)}function Os(i,t,n){Kw(i,n),aR(i,r=>ls(r,t)||ls(t,r))}function aR(i,t){i.recursionDepth_++;let n=!0;for(let r=0;r<i.eventLists_.length;r++){const s=i.eventLists_[r];if(s){const a=s.path;t(a)?(lR(i.eventLists_[r]),i.eventLists_[r]=null):n=!1}}n&&(i.eventLists_=[]),i.recursionDepth_--}function lR(i){for(let t=0;t<i.events.length;t++){const n=i.events[t];if(n!==null){i.events[t]=null;const r=n.getEventRunner();ra&&li("event: "+n.toString()),gl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="repo_interrupt",cR=25;class hR{constructor(t,n,r,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ah(),this.transactionQueueTree_=new wm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dR(i,t,n){if(i.stats_=rm(i.repoInfo_),i.forceRestClient_||WO())i.server_=new oh(i.repoInfo_,(r,s,a,o)=>{b0(i,r,s,a,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>_0(i,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ln(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new $s(i.repoInfo_,t,(r,s,a,o)=>{b0(i,r,s,a,o)},r=>{_0(i,r)},r=>{pR(i,r)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=KO(i.repoInfo_,()=>new XI(i.stats_,i.server_)),i.infoData_=new HI,i.infoSyncTree_=new y0({startListening:(r,s,a,o)=>{let u=[];const l=i.infoData_.getNode(r._path);return l.isEmpty()||(u=Iu(i.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),u},stopListening:()=>{}}),jm(i,"connected",!1),i.serverSyncTree_=new y0({startListening:(r,s,a,o)=>(i.server_.listen(r,a,s,(u,l)=>{const c=o(u,l);Os(i.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{i.server_.unlisten(r,s)}})}function fR(i){const n=i.infoData_.getNode(new Zr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cm(i){return $P({timestamp:fR(i)})}function b0(i,t,n,r,s){i.dataUpdateCount++;const a=new Zr(t);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(r){const l=Kc(n,c=>zn(c));o=UP(i.serverSyncTree_,a,l,s)}else{const l=zn(n);o=Bw(i.serverSyncTree_,a,l,s)}else if(r){const l=Kc(n,c=>zn(c));o=NP(i.serverSyncTree_,a,l)}else{const l=zn(n);o=Iu(i.serverSyncTree_,a,l)}let u=a;o.length>0&&(u=$h(i,a)),Os(i.eventQueue_,u,o)}function _0(i,t){jm(i,"connected",t),t===!1&&yR(i)}function pR(i,t){Ai(t,(n,r)=>{jm(i,n,r)})}function jm(i,t,n){const r=new Zr("/.info/"+t),s=zn(n);i.infoData_.updateSnapshot(r,s);const a=Iu(i.infoSyncTree_,r,s);Os(i.eventQueue_,r,a)}function Jw(i){return i.nextWriteId_++}function mR(i,t,n){const r=GP(i.serverSyncTree_,t);return r!=null?Promise.resolve(r):i.server_.get(t).then(s=>{const a=zn(s).withIndex(t._queryParams.getIndex());VP(i.serverSyncTree_,t,n,!0);let o;if(t._queryParams.loadsAllData())o=Iu(i.serverSyncTree_,t._path,a);else{const u=fu(i.serverSyncTree_,t);o=Bw(i.serverSyncTree_,t._path,a,u)}return Os(i.eventQueue_,t._path,o),Nw(i.serverSyncTree_,t,n,null,!0),a},s=>(qh(i,"get for query "+Ln(t)+" failed: "+s),Promise.reject(new Error(s))))}function gR(i,t,n,r,s){qh(i,"set",{path:t.toString(),value:n,priority:r});const a=Cm(i),o=zn(n,r),u=pm(i.serverSyncTree_,t),l=Gw(o,u,a),c=Jw(i),p=Lw(i.serverSyncTree_,t,l,c,!0);Kw(i.eventQueue_,p),i.server_.put(t.toString(),o.val(!0),(h,f)=>{const d=h==="ok";d||Ei("set at "+t+" failed: "+h);const g=Qo(i.serverSyncTree_,c,!d);Os(i.eventQueue_,t,g),bR(i,s,h,f)});const m=rx(i,t);$h(i,m),Os(i.eventQueue_,m,[])}function yR(i){qh(i,"onDisconnectEvents");const t=Cm(i),n=ah();Wf(i.onDisconnect_,Ar(),(s,a)=>{const o=KP(s,a,i.serverSyncTree_,t);_w(n,s,o)});let r=[];Wf(n,Ar(),(s,a)=>{r=r.concat(Iu(i.serverSyncTree_,s,a));const o=rx(i,s);$h(i,o)}),i.onDisconnect_=ah(),Os(i.eventQueue_,Ar(),r)}function vR(i){i.persistentConnection_&&i.persistentConnection_.interrupt(uR)}function qh(i,...t){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),li(n,...t)}function bR(i,t,n,r){t&&gl(()=>{if(n==="ok")t(null);else{const s=(n||"error").toUpperCase();let a=s;r&&(a+=": "+r);const o=new Error(a);o.code=s,t(o)}})}function Qw(i,t,n){return pm(i.serverSyncTree_,t,n)||tr.EMPTY_NODE}function Tm(i,t=i.transactionQueueTree_){if(t||Xh(i,t),yl(t)){const n=ex(i,t);jt(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&_R(i,Ru(t),n)}else zw(t)&&Wh(t,n=>{Tm(i,n)})}function _R(i,t,n){const r=n.map(c=>c.currentWriteId),s=Qw(i,t,r);let a=s;const o=s.hash();for(let c=0;c<n.length;c++){const p=n[c];jt(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const m=xi(t,p.path);a=a.updateChild(m,p.currentOutputSnapshotRaw)}const u=a.val(!0),l=t;i.server_.put(l.toString(),u,c=>{qh(i,"transaction put response",{path:l.toString(),status:c});let p=[];if(c==="ok"){const m=[];for(let h=0;h<n.length;h++)n[h].status=2,p=p.concat(Qo(i.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&m.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Xh(i,xm(i.transactionQueueTree_,t)),Tm(i,i.transactionQueueTree_),Os(i.eventQueue_,t,p);for(let h=0;h<m.length;h++)gl(m[h])}else{if(c==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{Ei("transaction at "+l.toString()+" failed: "+c);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=c}$h(i,t)}},o)}function $h(i,t){const n=Zw(i,t),r=Ru(n),s=ex(i,n);return wR(i,s,r),r}function wR(i,t,n){if(t.length===0)return;const r=[];let s=[];const o=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const l=t[u],c=xi(n,l.path);let p=!1,m;if(jt(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)p=!0,m=l.abortReason,s=s.concat(Qo(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=cR)p=!0,m="maxretry",s=s.concat(Qo(i.serverSyncTree_,l.currentWriteId,!0));else{const h=Qw(i,l.path,o);l.currentInputSnapshot=h;const f=t[u].update(h.val());if(f!==void 0){Sm("transaction failed: Data returned ",f,l.path);let d=zn(f);typeof f=="object"&&f!=null&&Zs(f,".priority")||(d=d.updatePriority(h.getPriority()));const y=l.currentWriteId,b=Cm(i),x=Gw(d,h,b);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=x,l.currentWriteId=Jw(i),o.splice(o.indexOf(y),1),s=s.concat(Lw(i.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),s=s.concat(Qo(i.serverSyncTree_,y,!0))}else p=!0,m="nodata",s=s.concat(Qo(i.serverSyncTree_,l.currentWriteId,!0))}Os(i.eventQueue_,n,s),s=[],p&&(t[u].status=2,function(h){setTimeout(h,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?r.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):r.push(()=>t[u].onComplete(new Error(m),!1,null))))}Xh(i,i.transactionQueueTree_);for(let u=0;u<r.length;u++)gl(r[u]);Tm(i,i.transactionQueueTree_)}function Zw(i,t){let n,r=i.transactionQueueTree_;for(n=jr(t);n!==null&&yl(r)===void 0;)r=xm(r,n),t=sn(t),n=jr(t);return r}function ex(i,t){const n=[];return tx(i,t,n),n.sort((r,s)=>r.order-s.order),n}function tx(i,t,n){const r=yl(t);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Wh(t,s=>{tx(i,s,n)})}function Xh(i,t){const n=yl(t);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Hw(t,n.length>0?n:void 0)}Wh(t,r=>{Xh(i,r)})}function rx(i,t){const n=Ru(Zw(i,t)),r=xm(i.transactionQueueTree_,t);return QP(r,s=>{Bd(i,s)}),Bd(i,r),Ww(r,s=>{Bd(i,s)}),n}function Bd(i,t){const n=yl(t);if(n){const r=[];let s=[],a=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(jt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(jt(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Qo(i.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Hw(t,void 0):n.length=a+1,Os(i.eventQueue_,Ru(t),s);for(let o=0;o<r.length;o++)gl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(i){let t="";const n=i.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function SR(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const n of i.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ei(`Invalid query segment '${n}' in query '${i}'`)}return t}const w0=function(i,t){const n=CR(i),r=n.namespace;n.domain==="firebase.com"&&Ks(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ks("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||LO();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ew(n.host,n.secure,r,s,t,"",r!==n.subdomain),path:new Zr(n.pathString)}},CR=function(i){let t="",n="",r="",s="",a="",o=!0,u="https",l=443;if(typeof i=="string"){let c=i.indexOf("//");c>=0&&(u=i.substring(0,c-1),i=i.substring(c+2));let p=i.indexOf("/");p===-1&&(p=i.length);let m=i.indexOf("?");m===-1&&(m=i.length),t=i.substring(0,Math.min(p,m)),p<m&&(s=xR(i.substring(p,m)));const h=SR(i.substring(Math.min(i.length,m)));c=t.indexOf(":"),c>=0?(o=u==="https"||u==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const d=t.indexOf(".");r=t.substring(0,d).toLowerCase(),n=t.substring(d+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:u,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t,n,r,s){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ln(this.snapshot.exportVal())}}class TR{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return jt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n,r,s){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return wr(this._path)?null:uw(this._path)}get ref(){return new eo(this._repo,this._path)}get _queryIdentifier(){const t=o0(this._queryParams),n=em(t);return n==="{}"?"default":n}get _queryObject(){return o0(this._queryParams)}isEqual(t){if(t=zi(t),!(t instanceof km))return!1;const n=this._repo===t._repo,r=dw(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+bI(this._path)}}class eo extends km{constructor(t,n){super(t,n,new am,!1)}get parent(){const t=hw(this._path);return t===null?null:new eo(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class pu{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new Zr(t),r=ma(this.ref,t);return new pu(this._node.getChild(n),r,bn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>t(new pu(s,ma(this.ref,r),bn)))}hasChild(t){const n=new Zr(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Js(i,t){return i=zi(i),i._checkNotDeleted("ref"),t!==void 0?ma(i._root,t):i._root}function ma(i,t){return i=zi(i),jr(i._path)===null?iR("child","path",t,!1):Xw("child","path",t,!1),new eo(i._repo,Nn(i._path,t))}function Em(i){return Yw("remove",i._path),Yh(i,null)}function Yh(i,t){i=zi(i),Yw("set",i._path),nR("set",t,i._path,!1);const n=new Ph;return gR(i._repo,i._path,t,null,n.wrapCallback(()=>{})),n.promise}function mh(i){i=zi(i);const t=new kR(()=>{}),n=new Mm(t);return mR(i._repo,i,n).then(r=>new pu(r,new eo(i._repo,i._path),i._queryParams.getIndex()))}class Mm{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new jR("value",this,new pu(t.snapshotNode,new eo(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new TR(this,t,n):null}matches(t){return t instanceof Mm?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}MP(eo);RP(eo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="FIREBASE_DATABASE_EMULATOR_HOST",Jf={};let MR=!1;function AR(i,t,n,r){i.repoInfo_=new ew(`${t}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),r&&(i.authTokenProvider_=r)}function OR(i,t,n,r,s){let a=r||i.options.databaseURL;a===void 0&&(i.options.projectId||Ks("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),li("Using default host for project ",i.options.projectId),a=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=w0(a,s),u=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[ER]),c?(l=!0,a=`http://${c}?ns=${u.namespace}`,o=w0(a,s),u=o.repoInfo):l=!o.repoInfo.secure;const p=s&&l?new $a($a.OWNER):new $O(i.name,i.options,t);sR("Invalid Firebase Database URL",o),wr(o.path)||Ks("Database URL must point to the root of a Firebase Database (not including a child path).");const m=PR(u,i,p,new qO(i.name,n));return new RR(m,i)}function IR(i,t){const n=Jf[t];(!n||n[i.key]!==i)&&Ks(`Database ${t}(${i.repoInfo_}) has already been deleted.`),vR(i),delete n[i.key]}function PR(i,t,n,r){let s=Jf[t.name];s||(s={},Jf[t.name]=s);let a=s[i.toURLString()];return a&&Ks("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new hR(i,MR,n,r),s[i.toURLString()]=a,a}class RR{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eo(this._repo,Ar())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ks("Cannot call "+t+" on a deleted database.")}}function DR(i=o_(),t){const n=Wp(i,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=dE("database");r&&LR(n,...r)}return n}function LR(i,t,n,r={}){i=zi(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Ks("Cannot call useEmulator() after instance has already been initialized.");const s=i._repoInternal;let a;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Ks('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new $a($a.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:pE(r.mockUserToken,i.app.options.projectId);a=new $a(o)}AR(s,t,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(i){OO(ju),sl(new ua("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return OR(r,s,a,n)},"PUBLIC").setMultipleInstances(!0)),So(Hy,zy,i),So(Hy,zy,"esm2017")}$s.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};$s.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};NR();var BR="firebase",FR="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */So(BR,FR,"app");var Wn,Kh,Is,nx,ix,sx,ox,ax,Jh,lx,ux,cx,hx,dx,Ya,Am;Wn={};cx=new Gs;sx={apiKey:"AIzaSyBiC68RVONr8MrNN6032hLHLp2jWh_WD-A",authDomain:"shadercam-fabcd.firebaseapp.com",databaseURL:"https://shadercam-fabcd-default-rtdb.firebaseio.com",projectId:"shadercam-fabcd",storageBucket:"shadercam-fabcd.appspot.com",messagingSenderId:"225470326967",appId:"1:225470326967:web:65cd4f40b8778bbe170532"};s_(sx);Is=DR();Kh=AO();Ya=function(i,t){return Wn[i]=t,qc.publish("firebaseStateUpdated")};gA(Kh,async i=>{var t,n;return Ya("user",i),n=i?await Jh(i.uid):{},Ya("userShaders",n),t=(i!=null?i.uid:void 0)==="X8Seokq0dqaDUfNciKJC4LOeBe13",Ya("isAdmin",t)});lx=function(){return UA(Kh,cx)};ux=function(){return Kh.signOut()};ox=async function(){var i,t,n;return t=Js(Is),n={},i=await mh(ma(t,"templateShaders")),i.exists()&&Object.assign(n,i.val()),Ya("templateShaders",n)};Jh=async function(i,t=!1){var n,r,s,a,o,u,l,c;if(r=Js(Is),c={},o=await mh(ma(r,`userShaders/${i}/shaders/public`)),o.exists()){l=o.val();for(s in l)n=l[s],n.isPublic=!0;Object.assign(c,l)}if(((u=Wn.user)!=null?u.uid:void 0)===i&&!t&&(a=await mh(ma(r,`userShaders/${i}/shaders/private`)),a.exists())){l=a.val();for(s in l)n=l[s],n.isPublic=!1;Object.assign(c,l)}return c};ax=async function(){var i,t,n,r,s,a,o,u;if(i=Js(Is),u=[],n=await mh(ma(i,"usernames")),n.exists()){s=n.val();for(o in s)({name:t,publicShadersCount:r}=s[o]),o!==((a=Wn.user)!=null?a.uid:void 0)&&r>0&&u.push({uid:o,name:t,publicShadersCount:r})}return Ya("userList",u)};Am=async function(){var i,t,n;if(Wn.user)return n=await Jh(Wn.user.uid,!0),i=Object.keys(n).length,t=`usernames/${Wn.user.uid}/publicShadersCount`,Yh(Js(Is,t),i)};hx=function(i,t,n,r,s){var a,o,u,l,c,p;return Wn.user?i.length===0?[null,"shader name is empty"]:i.includes("/")?[null,"shader name cannot contain slashes"]:(c=s?dx(i,t,n):(a=r?"public":"private",u=r?"private":"public",o=`userShaders/${Wn.user.uid}/shaders/${a}/${i}`,l=`userShaders/${Wn.user.uid}/shaders/${u}/${i}`,Em(Js(Is,l)),p={shaderMainText:t,paramsJson:JSON.stringify(n),isPublic:r},Yh(Js(Is,o),p),[p,null]),Am(),c):[null,"Not logged in; cannot save"]};dx=function(i,t,n){var r,s;return r=`templateShaders/${i}`,s={shaderMainText:t,paramsJson:JSON.stringify(n)},Yh(Js(Is,r),s),[s,null]};nx=function(i,t){return Wn.user?(t?ix(i):(["public","private"].forEach(function(n){var r;return r=`userShaders/${Wn.user.uid}/shaders/${n}/${i}`,Em(Js(Is,r))}),Am()),null):"Not logged in; cannot delete"};ix=function(i){var t;return t=`templateShaders/${i}`,Em(Js(Is,t))};var ga=function(){/*!
* Copyright (c) 2021-2023 Momo Bassit.
* Licensed under the MIT License (MIT)
* https://github.com/mdbassit/Coloris
* Version: 0.18.0
* NPM: https://github.com/melloware/coloris-npm
*/return function(i,t,n){var r=t.createElement("canvas").getContext("2d"),s={r:0,g:0,b:0,h:0,s:0,v:0,a:1},a,o,u,l,c,p,m,h,f,d,g,y,b,x,C,S,w={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:function(){},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},_={},M="",I={},R=!1;function P(ye){if(typeof ye=="object"){var Fe=function(){switch(Ue){case"el":J(ye.el),ye.wrap!==!1&&Z(ye.el);break;case"parent":a=t.querySelector(ye.parent),a&&(a.appendChild(o),w.parent=ye.parent,a===t.body&&(a=null));break;case"themeMode":w.themeMode=ye.themeMode,ye.themeMode==="auto"&&i.matchMedia&&i.matchMedia("(prefers-color-scheme: dark)").matches&&(w.themeMode="dark");case"theme":ye.theme&&(w.theme=ye.theme),o.className="clr-picker clr-"+w.theme+" clr-"+w.themeMode,w.inline&&Q();break;case"rtl":w.rtl=!!ye.rtl,t.querySelectorAll(".clr-field").forEach(function(ce){return ce.classList.toggle("clr-rtl",w.rtl)});break;case"margin":ye.margin*=1,w.margin=isNaN(ye.margin)?w.margin:ye.margin;break;case"wrap":ye.el&&ye.wrap&&Z(ye.el);break;case"formatToggle":w.formatToggle=!!ye.formatToggle,Ye("clr-format").style.display=w.formatToggle?"block":"none",w.formatToggle&&(w.format="auto");break;case"swatches":if(Array.isArray(ye.swatches)){var st=[];ye.swatches.forEach(function(ce,ke){st.push('<button type="button" id="clr-swatch-'+ke+'" aria-labelledby="clr-swatch-label clr-swatch-'+ke+'" style="color: '+ce+';">'+ce+"</button>")}),Ye("clr-swatches").innerHTML=st.length?"<div>"+st.join("")+"</div>":"",w.swatches=ye.swatches.slice()}break;case"swatchesOnly":w.swatchesOnly=!!ye.swatchesOnly,o.setAttribute("data-minimal",w.swatchesOnly);break;case"alpha":w.alpha=!!ye.alpha,o.setAttribute("data-alpha",w.alpha);break;case"inline":if(w.inline=!!ye.inline,o.setAttribute("data-inline",w.inline),w.inline){var je=ye.defaultColor||w.defaultColor;C=$(je),Q(),H(je)}break;case"clearButton":typeof ye.clearButton=="object"&&(ye.clearButton.label&&(w.clearLabel=ye.clearButton.label,h.innerHTML=w.clearLabel),ye.clearButton=ye.clearButton.show),w.clearButton=!!ye.clearButton,h.style.display=w.clearButton?"block":"none";break;case"clearLabel":w.clearLabel=ye.clearLabel,h.innerHTML=w.clearLabel;break;case"closeButton":w.closeButton=!!ye.closeButton,w.closeButton?o.insertBefore(f,p):p.appendChild(f);break;case"closeLabel":w.closeLabel=ye.closeLabel,f.innerHTML=w.closeLabel;break;case"a11y":var Xe=ye.a11y,Pe=!1;if(typeof Xe=="object")for(var ee in Xe)Xe[ee]&&w.a11y[ee]&&(w.a11y[ee]=Xe[ee],Pe=!0);if(Pe){var ie=Ye("clr-open-label"),X=Ye("clr-swatch-label");ie.innerHTML=w.a11y.open,X.innerHTML=w.a11y.swatch,f.setAttribute("aria-label",w.a11y.close),h.setAttribute("aria-label",w.a11y.clear),d.setAttribute("aria-label",w.a11y.hueSlider),y.setAttribute("aria-label",w.a11y.alphaSlider),m.setAttribute("aria-label",w.a11y.input),u.setAttribute("aria-label",w.a11y.instruction)}break;default:w[Ue]=ye[Ue]}};for(var Ue in ye)Fe()}}function D(ye,Fe){typeof ye=="string"&&typeof Fe=="object"&&(_[ye]=Fe,R=!0)}function U(ye){delete _[ye],Object.keys(_).length===0&&(R=!1,ye===M&&z())}function F(ye){if(R){var Fe=["el","wrap","rtl","inline","defaultColor","a11y"],Ue=function(){var Xe=_[nt];if(ye.matches(nt)){M=nt,I={},Fe.forEach(function(ee){return delete Xe[ee]});for(var Pe in Xe)I[Pe]=Array.isArray(w[Pe])?w[Pe].slice():w[Pe];return P(Xe),"break"}};for(var nt in _){var st=Ue();if(st==="break")break}}}function z(){Object.keys(I).length>0&&(P(I),M="",I={})}function J(ye){Be(t,"click",ye,function(Fe){w.inline||(F(Fe.target),x=Fe.target,S=x.value,C=$(S),o.classList.add("clr-open"),Q(),H(S),(w.focusInput||w.selectInput)&&m.focus({preventScroll:!0}),w.selectInput&&m.select(),x.dispatchEvent(new Event("open",{bubbles:!0})))}),Be(t,"input",ye,function(Fe){var Ue=Fe.target.parentNode;Ue.classList.contains("clr-field")&&(Ue.style.color=Fe.target.value)})}function Q(){var ye=a,Fe=i.scrollY,Ue=o.offsetWidth,nt=o.offsetHeight,st={left:!1,top:!1},je,Xe,Pe,ee={x:0,y:0};if(ye&&(je=i.getComputedStyle(ye),Xe=parseFloat(je.marginTop),Pe=parseFloat(je.borderTopWidth),ee=ye.getBoundingClientRect(),ee.y+=Pe+Fe),!w.inline){var ie=x.getBoundingClientRect(),X=ie.x,ce=Fe+ie.y+ie.height+w.margin;ye?(X-=ee.x,ce-=ee.y,X+Ue>ye.clientWidth&&(X+=ie.width-Ue,st.left=!0),ce+nt>ye.clientHeight-Xe&&nt+w.margin<=ie.top-(ee.y-Fe)&&(ce-=ie.height+nt+w.margin*2,st.top=!0),ce+=ye.scrollTop):(X+Ue>t.documentElement.clientWidth&&(X+=ie.width-Ue,st.left=!0),ce+nt-Fe>t.documentElement.clientHeight&&nt+w.margin<=ie.top&&(ce=Fe+ie.y-nt-w.margin,st.top=!0)),o.classList.toggle("clr-left",st.left),o.classList.toggle("clr-top",st.top),o.style.left=X+"px",o.style.top=ce+"px",ee.x+=o.offsetLeft,ee.y+=o.offsetTop}l={width:u.offsetWidth,height:u.offsetHeight,x:u.offsetLeft+ee.x,y:u.offsetTop+ee.y}}function Z(ye){t.querySelectorAll(ye).forEach(function(Fe){var Ue=Fe.parentNode;if(!Ue.classList.contains("clr-field")){var nt=t.createElement("div"),st="clr-field";(w.rtl||Fe.classList.contains("clr-rtl"))&&(st+=" clr-rtl"),nt.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',Ue.insertBefore(nt,Fe),nt.setAttribute("class",st),nt.style.color=Fe.value,nt.appendChild(Fe)}})}function K(ye){if(x&&!w.inline){var Fe=x;ye&&(x=null,S!==Fe.value&&(Fe.value=S,Fe.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(function(){S!==Fe.value&&Fe.dispatchEvent(new Event("change",{bubbles:!0}))}),o.classList.remove("clr-open"),R&&z(),Fe.dispatchEvent(new Event("close",{bubbles:!0})),w.focusInput&&Fe.focus({preventScroll:!0}),x=null}}function H(ye){var Fe=le(ye),Ue=Ee(Fe);O(Ue.s,Ue.v),me(Fe,Ue),d.value=Ue.h,o.style.color="hsl("+Ue.h+", 100%, 50%)",g.style.left=Ue.h/360*100+"%",c.style.left=l.width*Ue.s/100+"px",c.style.top=l.height-l.height*Ue.v/100+"px",y.value=Ue.a*100,b.style.left=Ue.a*100+"%"}function $(ye){var Fe=ye.substring(0,3).toLowerCase();return Fe==="rgb"||Fe==="hsl"?Fe:"hex"}function Y(ye){ye=ye!==void 0?ye:m.value,x&&(x.value=ye,x.dispatchEvent(new Event("input",{bubbles:!0}))),w.onChange&&w.onChange.call(i,ye),t.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:ye}}))}function oe(ye,Fe){var Ue={h:d.value*1,s:ye/l.width*100,v:100-Fe/l.height*100,a:y.value/100},nt=pe(Ue);O(Ue.s,Ue.v),me(nt,Ue),Y()}function O(ye,Fe){var Ue=w.a11y.marker;ye=ye.toFixed(1)*1,Fe=Fe.toFixed(1)*1,Ue=Ue.replace("{s}",ye),Ue=Ue.replace("{v}",Fe),c.setAttribute("aria-label",Ue)}function B(ye){return{pageX:ye.changedTouches?ye.changedTouches[0].pageX:ye.pageX,pageY:ye.changedTouches?ye.changedTouches[0].pageY:ye.pageY}}function q(ye){var Fe=B(ye),Ue=Fe.pageX-l.x,nt=Fe.pageY-l.y;a&&(nt+=a.scrollTop),ae(Ue,nt),ye.preventDefault(),ye.stopPropagation()}function re(ye,Fe){var Ue=c.style.left.replace("px","")*1+ye,nt=c.style.top.replace("px","")*1+Fe;ae(Ue,nt)}function ae(ye,Fe){ye=ye<0?0:ye>l.width?l.width:ye,Fe=Fe<0?0:Fe>l.height?l.height:Fe,c.style.left=ye+"px",c.style.top=Fe+"px",oe(ye,Fe),c.focus()}function me(ye,Fe){ye===void 0&&(ye={}),Fe===void 0&&(Fe={});var Ue=w.format;for(var nt in ye)s[nt]=ye[nt];for(var st in Fe)s[st]=Fe[st];var je=Se(s),Xe=je.substring(0,7);switch(c.style.color=Xe,b.parentNode.style.color=Xe,b.style.color=je,p.style.color=je,u.style.display="none",u.offsetHeight,u.style.display="",b.nextElementSibling.style.display="none",b.nextElementSibling.offsetHeight,b.nextElementSibling.style.display="",Ue==="mixed"?Ue=s.a===1?"hex":"rgb":Ue==="auto"&&(Ue=C),Ue){case"hex":m.value=je;break;case"rgb":m.value=be(s);break;case"hsl":m.value=Ie(ve(s));break}t.querySelector('.clr-format [value="'+Ue+'"]').checked=!0}function ge(){var ye=d.value*1,Fe=c.style.left.replace("px","")*1,Ue=c.style.top.replace("px","")*1;o.style.color="hsl("+ye+", 100%, 50%)",g.style.left=ye/360*100+"%",oe(Fe,Ue)}function xe(){var ye=y.value/100;b.style.left=ye*100+"%",me({a:ye}),Y()}function pe(ye){var Fe=ye.s/100,Ue=ye.v/100,nt=Fe*Ue,st=ye.h/60,je=nt*(1-n.abs(st%2-1)),Xe=Ue-nt;nt=nt+Xe,je=je+Xe;var Pe=n.floor(st)%6,ee=[nt,je,Xe,Xe,je,nt][Pe],ie=[je,nt,nt,je,Xe,Xe][Pe],X=[Xe,Xe,je,nt,nt,je][Pe];return{r:n.round(ee*255),g:n.round(ie*255),b:n.round(X*255),a:ye.a}}function ve(ye){var Fe=ye.v/100,Ue=Fe*(1-ye.s/100/2),nt;return Ue>0&&Ue<1&&(nt=n.round((Fe-Ue)/n.min(Ue,1-Ue)*100)),{h:ye.h,s:nt||0,l:n.round(Ue*100),a:ye.a}}function Ee(ye){var Fe=ye.r/255,Ue=ye.g/255,nt=ye.b/255,st=n.max(Fe,Ue,nt),je=n.min(Fe,Ue,nt),Xe=st-je,Pe=st,ee=0,ie=0;return Xe&&(st===Fe&&(ee=(Ue-nt)/Xe),st===Ue&&(ee=2+(nt-Fe)/Xe),st===nt&&(ee=4+(Fe-Ue)/Xe),st&&(ie=Xe/st)),ee=n.floor(ee*60),{h:ee<0?ee+360:ee,s:n.round(ie*100),v:n.round(Pe*100),a:ye.a}}function le(ye){var Fe=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,Ue,nt;return r.fillStyle="#000",r.fillStyle=ye,Ue=Fe.exec(r.fillStyle),Ue?(nt={r:Ue[3]*1,g:Ue[4]*1,b:Ue[5]*1,a:Ue[6]*1},nt.a=+nt.a.toFixed(2)):(Ue=r.fillStyle.replace("#","").match(/.{2}/g).map(function(st){return parseInt(st,16)}),nt={r:Ue[0],g:Ue[1],b:Ue[2],a:1}),nt}function Se(ye){var Fe=ye.r.toString(16),Ue=ye.g.toString(16),nt=ye.b.toString(16),st="";if(ye.r<16&&(Fe="0"+Fe),ye.g<16&&(Ue="0"+Ue),ye.b<16&&(nt="0"+nt),w.alpha&&(ye.a<1||w.forceAlpha)){var je=ye.a*255|0;st=je.toString(16),je<16&&(st="0"+st)}return"#"+Fe+Ue+nt+st}function be(ye){return!w.alpha||ye.a===1&&!w.forceAlpha?"rgb("+ye.r+", "+ye.g+", "+ye.b+")":"rgba("+ye.r+", "+ye.g+", "+ye.b+", "+ye.a+")"}function Ie(ye){return!w.alpha||ye.a===1&&!w.forceAlpha?"hsl("+ye.h+", "+ye.s+"%, "+ye.l+"%)":"hsla("+ye.h+", "+ye.s+"%, "+ye.l+"%, "+ye.a+")"}function Me(){t.getElementById("clr-picker")||(a=null,o=t.createElement("div"),o.setAttribute("id","clr-picker"),o.className="clr-picker",o.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+w.a11y.input+'">'+('<div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+w.a11y.instruction+'">')+'<div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue">'+('<input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+w.a11y.hueSlider+'">')+'<div id="clr-hue-marker"></div></div><div class="clr-alpha">'+('<input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+w.a11y.alphaSlider+'">')+'<div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented">'+("<legend>"+w.a11y.format+"</legend>")+'<input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div>'+('<button type="button" id="clr-clear" class="clr-clear" aria-label="'+w.a11y.clear+'">'+w.clearLabel+"</button>")+'<div id="clr-color-preview" class="clr-preview">'+('<button type="button" id="clr-close" class="clr-close" aria-label="'+w.a11y.close+'">'+w.closeLabel+"</button>")+"</div>"+('<span id="clr-open-label" hidden>'+w.a11y.open+"</span>")+('<span id="clr-swatch-label" hidden>'+w.a11y.swatch+"</span>"),t.body.appendChild(o),u=Ye("clr-color-area"),c=Ye("clr-color-marker"),h=Ye("clr-clear"),f=Ye("clr-close"),p=Ye("clr-color-preview"),m=Ye("clr-color-value"),d=Ye("clr-hue-slider"),g=Ye("clr-hue-marker"),y=Ye("clr-alpha-slider"),b=Ye("clr-alpha-marker"),J(w.el),Z(w.el),Be(o,"mousedown",function(ye){o.classList.remove("clr-keyboard-nav"),ye.stopPropagation()}),Be(u,"mousedown",function(ye){Be(t,"mousemove",q)}),Be(u,"touchstart",function(ye){t.addEventListener("touchmove",q,{passive:!1})}),Be(c,"mousedown",function(ye){Be(t,"mousemove",q)}),Be(c,"touchstart",function(ye){t.addEventListener("touchmove",q,{passive:!1})}),Be(m,"change",function(ye){(x||w.inline)&&(H(m.value),Y())}),Be(h,"click",function(ye){Y(""),K()}),Be(f,"click",function(ye){Y(),K()}),Be(t,"click",".clr-format input",function(ye){C=ye.target.value,me(),Y()}),Be(o,"click",".clr-swatches button",function(ye){H(ye.target.textContent),Y(),w.swatchesOnly&&K()}),Be(t,"mouseup",function(ye){t.removeEventListener("mousemove",q)}),Be(t,"touchend",function(ye){t.removeEventListener("touchmove",q)}),Be(t,"mousedown",function(ye){o.classList.remove("clr-keyboard-nav"),K()}),Be(t,"keydown",function(ye){var Fe=["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];ye.key==="Escape"?K(!0):Fe.includes(ye.key)&&o.classList.add("clr-keyboard-nav")}),Be(t,"click",".clr-field button",function(ye){R&&z(),ye.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),Be(c,"keydown",function(ye){var Fe={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(Fe).includes(ye.key)&&(re.apply(void 0,Fe[ye.key]),ye.preventDefault())}),Be(u,"click",q),Be(d,"input",ge),Be(y,"input",xe))}function Ye(ye){return t.getElementById(ye)}function Be(ye,Fe,Ue,nt){var st=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof Ue=="string"?ye.addEventListener(Fe,function(je){st.call(je.target,Ue)&&nt.call(je.target,je)}):(nt=Ue,ye.addEventListener(Fe,nt))}function rt(ye,Fe){Fe=Fe!==void 0?Fe:[],t.readyState!=="loading"?ye.apply(void 0,Fe):t.addEventListener("DOMContentLoaded",function(){ye.apply(void 0,Fe)})}NodeList!==void 0&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var Ge=function(){var ye={init:Me,set:P,wrap:Z,close:K,setInstance:D,removeInstance:U,updatePosition:Q};function Fe(st){rt(function(){st&&(typeof st=="string"?J(st):P(st))})}var Ue=function(je){Fe[je]=function(){for(var Xe=arguments.length,Pe=new Array(Xe),ee=0;ee<Xe;ee++)Pe[ee]=arguments[ee];rt(ye[je],Pe)}};for(var nt in ye)Ue(nt);return Fe}();return Ge.coloris=Ge,Ge}(window,document,Math)}();ga.coloris;ga.init;ga.set;ga.wrap;ga.close;function x0(i,t,n){const r=i.slice();return r[38]=t[n],r}function S0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function C0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function j0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function T0(i,t,n){const r=i.slice();return r[45]=t[n],r}function UR(i){let t,n,r,s;return{c(){t=ot("button"),n=Yt("Login (to save & share)"),this.h()},l(a){t=at(a,"BUTTON",{class:!0,id:!0});var o=gt(t);n=Kt(o,"Login (to save & share)"),o.forEach(Ze),this.h()},h(){Je(t,"class","nav-btn svelte-1sbwyo"),Je(t,"id","login")},m(a,o){dr(a,t,o),De(t,n),r||(s=Dr(t,"click",lx),r=!0)},p:na,d(a){a&&Ze(t),r=!1,s()}}}function VR(i){let t,n,r=i[9].user.email+"",s,a,o,u;return{c(){t=ot("button"),n=Yt("Logout ("),s=Yt(r),a=Yt(")"),this.h()},l(l){t=at(l,"BUTTON",{class:!0,id:!0});var c=gt(t);n=Kt(c,"Logout ("),s=Kt(c,r),a=Kt(c,")"),c.forEach(Ze),this.h()},h(){Je(t,"class","nav-btn svelte-1sbwyo"),Je(t,"id","logout")},m(l,c){dr(l,t,c),De(t,n),De(t,s),De(t,a),o||(u=Dr(t,"click",ux),o=!0)},p(l,c){c[0]&512&&r!==(r=l[9].user.email+"")&&ia(s,r)},d(l){l&&Ze(t),o=!1,u()}}}function k0(i){let t,n,r,s,a;return{c(){t=ot("label"),n=ot("input"),r=Nt(),s=ot("span"),a=Yt("Template"),this.h()},l(o){t=at(o,"LABEL",{});var u=gt(t);n=at(u,"INPUT",{type:!0,id:!0}),r=Bt(u),s=at(u,"SPAN",{});var l=gt(s);a=Kt(l,"Template"),l.forEach(Ze),u.forEach(Ze),this.h()},h(){Je(n,"type","checkbox"),Je(n,"id","isTemplate"),n.value="Template"},m(o,u){dr(o,t,u),De(t,n),De(t,r),De(t,s),De(s,a)},d(o){o&&Ze(t)}}}function E0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g;return{c(){t=ot("span"),n=ot("span"),r=Yt("Value:"),s=Nt(),a=ot("input"),u=Nt(),l=ot("span"),c=ot("span"),p=Yt("Default:"),m=Nt(),h=ot("input"),this.h()},l(y){t=at(y,"SPAN",{class:!0});var b=gt(t);n=at(b,"SPAN",{class:!0});var x=gt(n);r=Kt(x,"Value:"),x.forEach(Ze),s=Bt(b),a=at(b,"INPUT",{class:!0,type:!0}),b.forEach(Ze),u=Bt(y),l=at(y,"SPAN",{class:!0});var C=gt(l);c=at(C,"SPAN",{class:!0});var S=gt(c);p=Kt(S,"Default:"),S.forEach(Ze),m=Bt(C),h=at(C,"INPUT",{class:!0,type:!0}),C.forEach(Ze),this.h()},h(){Je(n,"class","param-label"),Je(a,"class","texture-param-val-direct-set small-number-input svelte-1sbwyo"),Je(a,"type","text"),a.value=o=i[45].default||"",Je(t,"class","param-group"),Je(c,"class","param-label"),Je(h,"class","texture-param-default small-number-input svelte-1sbwyo"),Je(h,"type","text"),h.value=f=i[45].default||"",Je(l,"class","param-group")},m(y,b){dr(y,t,b),De(t,n),De(n,r),De(t,s),De(t,a),dr(y,u,b),dr(y,l,b),De(l,c),De(c,p),De(l,m),De(l,h),d||(g=[Dr(a,"input",function(){Gr(i[23])&&i[23].apply(this,arguments)}),Dr(h,"input",function(){Gr(i[22])&&i[22].apply(this,arguments)})],d=!0)},p(y,b){i=y,b[0]&262144&&o!==(o=i[45].default||"")&&a.value!==o&&(a.value=o),b[0]&262144&&f!==(f=i[45].default||"")&&h.value!==f&&(h.value=f)},d(y){y&&Ze(t),y&&Ze(u),y&&Ze(l),d=!1,cl(g)}}}function M0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g;return{c(){t=ot("span"),n=ot("span"),r=Yt("Value:"),s=Nt(),a=ot("input"),u=Nt(),l=ot("span"),c=ot("span"),p=Yt("Default:"),m=Nt(),h=ot("input"),this.h()},l(y){t=at(y,"SPAN",{class:!0});var b=gt(t);n=at(b,"SPAN",{class:!0});var x=gt(n);r=Kt(x,"Value:"),x.forEach(Ze),s=Bt(b),a=at(b,"INPUT",{class:!0,type:!0}),b.forEach(Ze),u=Bt(y),l=at(y,"SPAN",{class:!0});var C=gt(l);c=at(C,"SPAN",{class:!0});var S=gt(c);p=Kt(S,"Default:"),S.forEach(Ze),m=Bt(C),h=at(C,"INPUT",{class:!0,type:!0}),C.forEach(Ze),this.h()},h(){Je(n,"class","param-label"),Je(a,"class","boolean-param-val-direct-set"),Je(a,"type","checkbox"),a.checked=o=i[45].default||!1,Je(t,"class","param-group"),Je(c,"class","param-label"),Je(h,"class","boolean-param-default"),Je(h,"type","checkbox"),h.checked=f=i[45].default,Je(l,"class","param-group")},m(y,b){dr(y,t,b),De(t,n),De(n,r),De(t,s),De(t,a),dr(y,u,b),dr(y,l,b),De(l,c),De(c,p),De(l,m),De(l,h),d||(g=[Dr(a,"input",function(){Gr(i[2])&&i[2].apply(this,arguments)}),Dr(h,"input",function(){Gr(i[1])&&i[1].apply(this,arguments)})],d=!0)},p(y,b){i=y,b[0]&262144&&o!==(o=i[45].default||!1)&&(a.checked=o),b[0]&262144&&f!==(f=i[45].default)&&(h.checked=f)},d(y){y&&Ze(t),y&&Ze(u),y&&Ze(l),d=!1,cl(g)}}}function A0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g;return{c(){t=ot("span"),n=ot("span"),r=Yt("Value:"),s=Nt(),a=ot("input"),u=Nt(),l=ot("span"),c=ot("span"),p=Yt("Default:"),m=Nt(),h=ot("input"),this.h()},l(y){t=at(y,"SPAN",{class:!0});var b=gt(t);n=at(b,"SPAN",{class:!0});var x=gt(n);r=Kt(x,"Value:"),x.forEach(Ze),s=Bt(b),a=at(b,"INPUT",{class:!0,type:!0}),b.forEach(Ze),u=Bt(y),l=at(y,"SPAN",{class:!0});var C=gt(l);c=at(C,"SPAN",{class:!0});var S=gt(c);p=Kt(S,"Default:"),S.forEach(Ze),m=Bt(C),h=at(C,"INPUT",{class:!0,type:!0}),C.forEach(Ze),this.h()},h(){Je(n,"class","param-label"),Je(a,"class","color-picker color-param-val-direct-set small-number-input svelte-1sbwyo"),Je(a,"type","text"),a.value=o=i[45].default||"",Je(t,"class","param-group"),Je(c,"class","param-label"),Je(h,"class","color-picker color-param-default small-number-input svelte-1sbwyo"),Je(h,"type","text"),h.value=f=i[45].default||"",Je(l,"class","param-group")},m(y,b){dr(y,t,b),De(t,n),De(n,r),De(t,s),De(t,a),dr(y,u,b),dr(y,l,b),De(l,c),De(c,p),De(l,m),De(l,h),d||(g=[Dr(a,"input",function(){Gr(i[5])&&i[5].apply(this,arguments)}),Dr(h,"input",function(){Gr(i[4])&&i[4].apply(this,arguments)})],d=!0)},p(y,b){i=y,b[0]&262144&&o!==(o=i[45].default||"")&&a.value!==o&&(a.value=o),b[0]&262144&&f!==(f=i[45].default||"")&&h.value!==f&&(h.value=f)},d(y){y&&Ze(t),y&&Ze(u),y&&Ze(l),d=!1,cl(g)}}}function O0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,C,S,w,_,M,I,R,P,D,U,F,z,J,Q,Z,K;return{c(){t=ot("span"),n=ot("span"),r=Yt("Value:"),s=Nt(),a=ot("input"),u=Nt(),l=ot("span"),c=ot("span"),p=Yt("Default:"),m=Nt(),h=ot("input"),d=Nt(),g=ot("span"),y=ot("span"),b=Yt("Min:"),x=Nt(),C=ot("input"),w=Nt(),_=ot("span"),M=ot("span"),I=Yt("Max:"),R=Nt(),P=ot("input"),U=Nt(),F=ot("input"),this.h()},l(H){t=at(H,"SPAN",{class:!0});var $=gt(t);n=at($,"SPAN",{class:!0});var Y=gt(n);r=Kt(Y,"Value:"),Y.forEach(Ze),s=Bt($),a=at($,"INPUT",{class:!0,type:!0,step:!0}),$.forEach(Ze),u=Bt(H),l=at(H,"SPAN",{class:!0});var oe=gt(l);c=at(oe,"SPAN",{class:!0});var O=gt(c);p=Kt(O,"Default:"),O.forEach(Ze),m=Bt(oe),h=at(oe,"INPUT",{class:!0,type:!0,step:!0}),oe.forEach(Ze),d=Bt(H),g=at(H,"SPAN",{class:!0});var B=gt(g);y=at(B,"SPAN",{class:!0});var q=gt(y);b=Kt(q,"Min:"),q.forEach(Ze),x=Bt(B),C=at(B,"INPUT",{class:!0,type:!0,step:!0}),B.forEach(Ze),w=Bt(H),_=at(H,"SPAN",{class:!0});var re=gt(_);M=at(re,"SPAN",{class:!0});var ae=gt(M);I=Kt(ae,"Max:"),ae.forEach(Ze),R=Bt(re),P=at(re,"INPUT",{class:!0,type:!0,step:!0}),re.forEach(Ze),U=Bt(H),F=at(H,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),this.h()},h(){Je(n,"class","param-label"),Je(a,"class","float-param-val-direct-set small-number-input svelte-1sbwyo"),Je(a,"type","number"),Je(a,"step","0.001"),a.value=o=i[45].type.includes("FloatShaderParam")&&i[45].default||.5,Je(t,"class","param-group"),Je(c,"class","param-label"),Je(h,"class","float-param-default small-number-input svelte-1sbwyo"),Je(h,"type","number"),Je(h,"step","0.001"),h.value=f=i[45].type.includes("FloatShaderParam")&&i[45].default||.5,Je(l,"class","param-group"),Je(y,"class","param-label"),Je(C,"class","float-param-min small-number-input svelte-1sbwyo"),Je(C,"type","number"),Je(C,"step","0.001"),C.value=S=i[45].type.includes("FloatShaderParam")&&i[45].min||0,Je(g,"class","param-group"),Je(M,"class","param-label"),Je(P,"class","float-param-max small-number-input svelte-1sbwyo"),Je(P,"type","number"),Je(P,"step","0.001"),P.value=D=i[45].type.includes("FloatShaderParam")&&i[45].max||1,Je(_,"class","param-group"),Je(F,"class","float-param-slider"),Je(F,"type","range"),Je(F,"step","0.001"),Je(F,"min",z=i[45].type.includes("FloatShaderParam")&&i[45].min||0),Je(F,"max",J=i[45].type.includes("FloatShaderParam")&&i[45].max||1),F.value=Q=i[45].default||1},m(H,$){dr(H,t,$),De(t,n),De(n,r),De(t,s),De(t,a),dr(H,u,$),dr(H,l,$),De(l,c),De(c,p),De(l,m),De(l,h),dr(H,d,$),dr(H,g,$),De(g,y),De(y,b),De(g,x),De(g,C),dr(H,w,$),dr(H,_,$),De(_,M),De(M,I),De(_,R),De(_,P),dr(H,U,$),dr(H,F,$),Z||(K=[Dr(a,"change",function(){Gr(i[11])&&i[11].apply(this,arguments)}),Dr(h,"change",function(){Gr(i[10])&&i[10].apply(this,arguments)}),Dr(C,"change",function(){Gr(i[13])&&i[13].apply(this,arguments)}),Dr(P,"change",function(){Gr(i[12])&&i[12].apply(this,arguments)}),Dr(F,"input",function(){Gr(i[14])&&i[14].apply(this,arguments)})],Z=!0)},p(H,$){i=H,$[0]&262144&&o!==(o=i[45].type.includes("FloatShaderParam")&&i[45].default||.5)&&a.value!==o&&(a.value=o),$[0]&262144&&f!==(f=i[45].type.includes("FloatShaderParam")&&i[45].default||.5)&&h.value!==f&&(h.value=f),$[0]&262144&&S!==(S=i[45].type.includes("FloatShaderParam")&&i[45].min||0)&&C.value!==S&&(C.value=S),$[0]&262144&&D!==(D=i[45].type.includes("FloatShaderParam")&&i[45].max||1)&&P.value!==D&&(P.value=D),$[0]&262144&&z!==(z=i[45].type.includes("FloatShaderParam")&&i[45].min||0)&&Je(F,"min",z),$[0]&262144&&J!==(J=i[45].type.includes("FloatShaderParam")&&i[45].max||1)&&Je(F,"max",J),$[0]&262144&&Q!==(Q=i[45].default||1)&&(F.value=Q)},d(H){H&&Ze(t),H&&Ze(u),H&&Ze(l),H&&Ze(d),H&&Ze(g),H&&Ze(w),H&&Ze(_),H&&Ze(U),H&&Ze(F),Z=!1,cl(K)}}}function I0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,C=i[45].type.includes("TextureShaderParam"),S,w=i[45].type.includes("BooleanShaderParam"),_,M=i[45].type.includes("ColorShaderParam"),I,R=i[45].type.includes("FloatShaderParam"),P,D,U,F,z,J,Q,Z=C&&E0(i),K=w&&M0(i),H=M&&A0(i),$=R&&O0(i);return{c(){t=ot("li"),n=ot("input"),s=Nt(),a=ot("select"),o=ot("option"),u=Yt("Float"),c=ot("option"),p=Yt("Color"),h=ot("option"),f=Yt("Texture"),g=ot("option"),y=Yt("Boolean"),x=Nt(),Z&&Z.c(),S=Nt(),K&&K.c(),_=Nt(),H&&H.c(),I=Nt(),$&&$.c(),P=Nt(),D=ot("button"),U=Yt("Delete"),F=Nt(),this.h()},l(Y){t=at(Y,"LI",{class:!0,"data-param-name":!0});var oe=gt(t);n=at(oe,"INPUT",{type:!0,class:!0,placeholder:!0}),s=Bt(oe),a=at(oe,"SELECT",{class:!0});var O=gt(a);o=at(O,"OPTION",{});var B=gt(o);u=Kt(B,"Float"),B.forEach(Ze),c=at(O,"OPTION",{});var q=gt(c);p=Kt(q,"Color"),q.forEach(Ze),h=at(O,"OPTION",{});var re=gt(h);f=Kt(re,"Texture"),re.forEach(Ze),g=at(O,"OPTION",{});var ae=gt(g);y=Kt(ae,"Boolean"),ae.forEach(Ze),O.forEach(Ze),x=Bt(oe),Z&&Z.l(oe),S=Bt(oe),K&&K.l(oe),_=Bt(oe),H&&H.l(oe),I=Bt(oe),$&&$.l(oe),P=Bt(oe),D=at(oe,"BUTTON",{class:!0});var me=gt(D);U=Kt(me,"Delete"),me.forEach(Ze),F=Bt(oe),oe.forEach(Ze),this.h()},h(){Je(n,"type","text"),Je(n,"class","paramName"),n.value=r=i[45].paramName,Je(n,"placeholder","param name"),o.__value="FOO.BAR.FloatShaderParam",o.value=o.__value,o.selected=l=i[45].type.split(".").slice(-1)[0]=="FloatShaderParam",c.__value="FOO.BAR.ColorShaderParam",c.value=c.__value,c.selected=m=i[45].type.split(".").slice(-1)[0]=="ColorShaderParam",h.__value="FOO.BAR.TextureShaderParam",h.value=h.__value,h.selected=d=i[45].type.split(".").slice(-1)[0]=="TextureShaderParam",g.__value="FOO.BAR.BooleanShaderParam",g.value=g.__value,g.selected=b=i[45].type.split(".").slice(-1)[0]=="BooleanShaderParam",Je(a,"class","type-select"),Je(D,"class","delete-param"),Je(t,"class","shaderParam"),Je(t,"data-param-name",z=i[45].paramName)},m(Y,oe){dr(Y,t,oe),De(t,n),De(t,s),De(t,a),De(a,o),De(o,u),De(a,c),De(c,p),De(a,h),De(h,f),De(a,g),De(g,y),De(t,x),Z&&Z.m(t,null),De(t,S),K&&K.m(t,null),De(t,_),H&&H.m(t,null),De(t,I),$&&$.m(t,null),De(t,P),De(t,D),De(D,U),De(t,F),J||(Q=[Dr(n,"change",function(){Gr(i[26])&&i[26].apply(this,arguments)}),Dr(a,"change",function(){Gr(i[17])&&i[17].apply(this,arguments)}),Dr(D,"click",function(){Gr(i[7])&&i[7].apply(this,arguments)})],J=!0)},p(Y,oe){i=Y,oe[0]&262144&&r!==(r=i[45].paramName)&&n.value!==r&&(n.value=r),oe[0]&262144&&l!==(l=i[45].type.split(".").slice(-1)[0]=="FloatShaderParam")&&(o.selected=l),oe[0]&262144&&m!==(m=i[45].type.split(".").slice(-1)[0]=="ColorShaderParam")&&(c.selected=m),oe[0]&262144&&d!==(d=i[45].type.split(".").slice(-1)[0]=="TextureShaderParam")&&(h.selected=d),oe[0]&262144&&b!==(b=i[45].type.split(".").slice(-1)[0]=="BooleanShaderParam")&&(g.selected=b),oe[0]&262144&&(C=i[45].type.includes("TextureShaderParam")),C?Z?Z.p(i,oe):(Z=E0(i),Z.c(),Z.m(t,S)):Z&&(Z.d(1),Z=null),oe[0]&262144&&(w=i[45].type.includes("BooleanShaderParam")),w?K?K.p(i,oe):(K=M0(i),K.c(),K.m(t,_)):K&&(K.d(1),K=null),oe[0]&262144&&(M=i[45].type.includes("ColorShaderParam")),M?H?H.p(i,oe):(H=A0(i),H.c(),H.m(t,I)):H&&(H.d(1),H=null),oe[0]&262144&&(R=i[45].type.includes("FloatShaderParam")),R?$?$.p(i,oe):($=O0(i),$.c(),$.m(t,P)):$&&($.d(1),$=null),oe[0]&262144&&z!==(z=i[45].paramName)&&Je(t,"data-param-name",z)},d(Y){Y&&Ze(t),Z&&Z.d(),K&&K.d(),H&&H.d(),$&&$.d(),J=!1,cl(Q)}}}function GR(i){let t,n=Object.entries(i[9].templateShaders||{}).sort(B0),r=[];for(let s=0;s<n.length;s+=1)r[s]=P0(j0(i,n,s));return{c(){t=ot("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=at(s,"DIV",{class:!0});var a=gt(t);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(Ze),this.h()},h(){Je(t,"class","shader-grid")},m(s,a){dr(s,t,a);for(let o=0;o<r.length;o+=1)r[o].m(t,null)},p(s,a){if(a[0]&66048){n=Object.entries(s[9].templateShaders||{}).sort(B0);let o;for(o=0;o<n.length;o+=1){const u=j0(s,n,o);r[o]?r[o].p(u,a):(r[o]=P0(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){s&&Ze(t),mu(r,s)}}}function HR(i){let t,n;return{c(){t=ot("p"),n=Yt("No template shaders found."),this.h()},l(r){t=at(r,"P",{class:!0});var s=gt(t);n=Kt(s,"No template shaders found."),s.forEach(Ze),this.h()},h(){Je(t,"class","empty-state")},m(r,s){dr(r,t,s),De(t,n)},p:na,d(r){r&&Ze(t)}}}function P0(i){let t,n,r=i[34]+"",s,a,o,u;return{c(){t=ot("button"),n=ot("span"),s=Yt(r),a=Nt(),this.h()},l(l){t=at(l,"BUTTON",{class:!0});var c=gt(t);n=at(c,"SPAN",{class:!0});var p=gt(n);s=Kt(p,r),p.forEach(Ze),a=Bt(c),c.forEach(Ze),this.h()},h(){Je(n,"class","shader-name"),Je(t,"class","shader-card")},m(l,c){dr(l,t,c),De(t,n),De(n,s),De(t,a),o||(u=Dr(t,"click",function(){Gr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),o=!0)},p(l,c){i=l,c[0]&512&&r!==(r=i[34]+"")&&ia(s,r)},d(l){l&&Ze(t),o=!1,u()}}}function zR(i){let t,n=Object.entries(i[9].userShaders||{}),r=[];for(let s=0;s<n.length;s+=1)r[s]=R0(C0(i,n,s));return{c(){t=ot("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=at(s,"DIV",{class:!0});var a=gt(t);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(Ze),this.h()},h(){Je(t,"class","shader-grid")},m(s,a){dr(s,t,a);for(let o=0;o<r.length;o+=1)r[o].m(t,null)},p(s,a){if(a[0]&66048){n=Object.entries(s[9].userShaders||{});let o;for(o=0;o<n.length;o+=1){const u=C0(s,n,o);r[o]?r[o].p(u,a):(r[o]=R0(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){s&&Ze(t),mu(r,s)}}}function WR(i){let t,n;return{c(){t=ot("p"),n=Yt("No saved shaders found."),this.h()},l(r){t=at(r,"P",{class:!0});var s=gt(t);n=Kt(s,"No saved shaders found."),s.forEach(Ze),this.h()},h(){Je(t,"class","empty-state")},m(r,s){dr(r,t,s),De(t,n)},p:na,d(r){r&&Ze(t)}}}function R0(i){let t,n,r=i[34]+"",s,a,o,u=i[35].isPublic?"Public":"Private",l,c,p,m,h;return{c(){t=ot("button"),n=ot("span"),s=Yt(r),a=Nt(),o=ot("span"),l=Yt(u),p=Nt(),this.h()},l(f){t=at(f,"BUTTON",{class:!0});var d=gt(t);n=at(d,"SPAN",{class:!0});var g=gt(n);s=Kt(g,r),g.forEach(Ze),a=Bt(d),o=at(d,"SPAN",{class:!0});var y=gt(o);l=Kt(y,u),y.forEach(Ze),p=Bt(d),d.forEach(Ze),this.h()},h(){Je(n,"class","shader-name"),Je(o,"class",c="shader-badge "+(i[35].isPublic?"public":"private")),Je(t,"class","shader-card")},m(f,d){dr(f,t,d),De(t,n),De(n,s),De(t,a),De(t,o),De(o,l),De(t,p),m||(h=Dr(t,"click",function(){Gr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),m=!0)},p(f,d){i=f,d[0]&512&&r!==(r=i[34]+"")&&ia(s,r),d[0]&512&&u!==(u=i[35].isPublic?"Public":"Private")&&ia(l,u),d[0]&512&&c!==(c="shader-badge "+(i[35].isPublic?"public":"private"))&&Je(o,"class",c)},d(f){f&&Ze(t),m=!1,h()}}}function qR(i){let t,n,r,s;function a(l,c){var p;return(((p=l[9].userList)==null?void 0:p.length)||0)==0?YR:XR}let o=a(i),u=o(i);return{c(){t=ot("div"),n=Yt("Discover Users"),r=Nt(),s=ot("div"),u.c(),this.h()},l(l){t=at(l,"DIV",{class:!0});var c=gt(t);n=Kt(c,"Discover Users"),c.forEach(Ze),r=Bt(l),s=at(l,"DIV",{class:!0});var p=gt(s);u.l(p),p.forEach(Ze),this.h()},h(){Je(t,"class","panel-header"),Je(s,"class","panel-content")},m(l,c){dr(l,t,c),De(t,n),dr(l,r,c),dr(l,s,c),u.m(s,null)},p(l,c){o===(o=a(l))&&u?u.p(l,c):(u.d(1),u=o(l),u&&(u.c(),u.m(s,null)))},d(l){l&&Ze(t),l&&Ze(r),l&&Ze(s),u.d()}}}function $R(i){let t,n,r,s,a,o,u,l,c,p,m;function h(g,y){return y[0]&768&&(c=null),c==null&&(c=Object.keys(g[9].discoverShaders[g[8]]||{}).length==0),c?JR:KR}let f=h(i,[-1,-1]),d=f(i);return{c(){t=ot("div"),n=ot("span"),r=Yt("User Shaders"),s=Nt(),a=ot("button"),o=Yt("â Back to Users"),u=Nt(),l=ot("div"),d.c(),this.h()},l(g){t=at(g,"DIV",{class:!0});var y=gt(t);n=at(y,"SPAN",{});var b=gt(n);r=Kt(b,"User Shaders"),b.forEach(Ze),s=Bt(y),a=at(y,"BUTTON",{class:!0});var x=gt(a);o=Kt(x,"â Back to Users"),x.forEach(Ze),y.forEach(Ze),u=Bt(g),l=at(g,"DIV",{class:!0});var C=gt(l);d.l(C),C.forEach(Ze),this.h()},h(){Je(a,"class","back-btn"),Je(t,"class","panel-header"),Je(l,"class","panel-content")},m(g,y){dr(g,t,y),De(t,n),De(n,r),De(t,s),De(t,a),De(a,o),dr(g,u,y),dr(g,l,y),d.m(l,null),p||(m=Dr(a,"click",function(){Gr(i[24])&&i[24].apply(this,arguments)}),p=!0)},p(g,y){i=g,f===(f=h(i,y))&&d?d.p(i,y):(d.d(1),d=f(i),d&&(d.c(),d.m(l,null)))},d(g){g&&Ze(t),g&&Ze(u),g&&Ze(l),d.d(),p=!1,m()}}}function XR(i){let t,n=i[9].userList||[],r=[];for(let s=0;s<n.length;s+=1)r[s]=L0(x0(i,n,s));return{c(){t=ot("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=at(s,"DIV",{class:!0});var a=gt(t);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(Ze),this.h()},h(){Je(t,"class","shader-grid")},m(s,a){dr(s,t,a);for(let o=0;o<r.length;o+=1)r[o].m(t,null)},p(s,a){if(a[0]&1049088){n=s[9].userList||[];let o;for(o=0;o<n.length;o+=1){const u=x0(s,n,o);r[o]?r[o].p(u,a):(r[o]=L0(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){s&&Ze(t),mu(r,s)}}}function YR(i){let t,n;return{c(){t=ot("p"),n=Yt("No other users have created public shaders yet."),this.h()},l(r){t=at(r,"P",{class:!0});var s=gt(t);n=Kt(s,"No other users have created public shaders yet."),s.forEach(Ze),this.h()},h(){Je(t,"class","empty-state")},m(r,s){dr(r,t,s),De(t,n)},p:na,d(r){r&&Ze(t)}}}function D0(i){let t,n,r=i[38].name+"",s,a,o,u=i[38].publicShadersCount+"",l,c,p,m,h;return{c(){t=ot("button"),n=ot("span"),s=Yt(r),a=Nt(),o=ot("span"),l=Yt(u),c=Yt(" shaders"),p=Nt(),this.h()},l(f){t=at(f,"BUTTON",{class:!0});var d=gt(t);n=at(d,"SPAN",{class:!0});var g=gt(n);s=Kt(g,r),g.forEach(Ze),a=Bt(d),o=at(d,"SPAN",{class:!0});var y=gt(o);l=Kt(y,u),c=Kt(y," shaders"),y.forEach(Ze),p=Bt(d),d.forEach(Ze),this.h()},h(){Je(n,"class","shader-name"),Je(o,"class","shader-badge public"),Je(t,"class","shader-card user-card")},m(f,d){dr(f,t,d),De(t,n),De(n,s),De(t,a),De(t,o),De(o,l),De(o,c),De(t,p),m||(h=Dr(t,"click",function(){Gr(i[20](i[38].uid))&&i[20](i[38].uid).apply(this,arguments)}),m=!0)},p(f,d){i=f,d[0]&512&&r!==(r=i[38].name+"")&&ia(s,r),d[0]&512&&u!==(u=i[38].publicShadersCount+"")&&ia(l,u)},d(f){f&&Ze(t),m=!1,h()}}}function L0(i){let t,n=i[38].publicShadersCount>0&&D0(i);return{c(){n&&n.c(),t=Om()},l(r){n&&n.l(r),t=Om()},m(r,s){n&&n.m(r,s),dr(r,t,s)},p(r,s){r[38].publicShadersCount>0?n?n.p(r,s):(n=D0(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&Ze(t)}}}function KR(i){let t,n=Object.entries(i[9].discoverShaders[i[8]]||{}),r=[];for(let s=0;s<n.length;s+=1)r[s]=N0(S0(i,n,s));return{c(){t=ot("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=at(s,"DIV",{class:!0});var a=gt(t);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(Ze),this.h()},h(){Je(t,"class","shader-grid")},m(s,a){dr(s,t,a);for(let o=0;o<r.length;o+=1)r[o].m(t,null)},p(s,a){if(a[0]&66304){n=Object.entries(s[9].discoverShaders[s[8]]||{});let o;for(o=0;o<n.length;o+=1){const u=S0(s,n,o);r[o]?r[o].p(u,a):(r[o]=N0(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){s&&Ze(t),mu(r,s)}}}function JR(i){let t,n;return{c(){t=ot("p"),n=Yt("This user has no public shaders."),this.h()},l(r){t=at(r,"P",{class:!0});var s=gt(t);n=Kt(s,"This user has no public shaders."),s.forEach(Ze),this.h()},h(){Je(t,"class","empty-state")},m(r,s){dr(r,t,s),De(t,n)},p:na,d(r){r&&Ze(t)}}}function N0(i){let t,n,r=i[34]+"",s,a,o,u;return{c(){t=ot("button"),n=ot("span"),s=Yt(r),a=Nt(),this.h()},l(l){t=at(l,"BUTTON",{class:!0});var c=gt(t);n=at(c,"SPAN",{class:!0});var p=gt(n);s=Kt(p,r),p.forEach(Ze),a=Bt(c),c.forEach(Ze),this.h()},h(){Je(n,"class","shader-name"),Je(t,"class","shader-card")},m(l,c){dr(l,t,c),De(t,n),De(n,s),De(t,a),o||(u=Dr(t,"click",function(){Gr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),o=!0)},p(l,c){i=l,c[0]&768&&r!==(r=i[34]+"")&&ia(s,r)},d(l){l&&Ze(t),o=!1,u()}}}function QR(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,C,S,w,_,M,I,R,P,D,U,F,z,J,Q,Z,K,H,$,Y,oe,O,B,q,re,ae,me,ge,xe,pe,ve,Ee,le,Se,be,Ie,Me,Ye,Be,rt,Ge,ye,Fe,Ue,nt,st,je,Xe,Pe,ee,ie,X,ce,ke,Re,$e,mt,_t,wt,Ct,zt,Pt,At,Wt,Gt,kr,en,Xr,xr,Sr,lr,mn,Br,br,Or,On,Zn,Oi,Un,Wi,Zi,we,pt,xt,ft,sr,lt,fr,St,ur,Tt;function tn(Ir,mr){return Ir[9].user?VR:UR}let Yr=tn(i),_r=Yr(i),gr=i[9].isAdmin&&k0(),Cn=i[18],or=[];for(let Ir=0;Ir<Cn.length;Ir+=1)or[Ir]=I0(T0(i,Cn,Ir));function jn(Ir,mr){return mr[0]&512&&(Ct=null),Ct==null&&(Ct=Object.keys(Ir[9].templateShaders||{}).length==0),Ct?HR:GR}let zr=jn(i,[-1,-1]),ei=zr(i);function ti(Ir,mr){return mr[0]&512&&(Xr=null),Xr==null&&(Xr=Object.keys(Ir[9].userShaders||{}).length==0),Xr?WR:zR}let di=ti(i,[-1,-1]),In=di(i);function ds(Ir,mr){return Ir[8]?$R:qR}let fs=ds(i),ri=fs(i);return{c(){t=ot("container"),n=ot("div"),r=ot("button"),s=Yt("Camera"),a=Nt(),o=ot("button"),u=Yt("Template Shaders"),l=Nt(),c=ot("button"),p=Yt("My Shaders"),m=Nt(),h=ot("button"),f=Yt("Discover Shaders"),d=Nt(),g=ot("button"),y=Yt("About"),b=Nt(),_r.c(),x=Nt(),C=ot("div"),S=ot("div"),w=ot("div"),_=Nt(),M=ot("div"),I=ot("div"),R=ot("div"),P=ot("div"),D=ot("label"),U=Yt("Name"),F=Nt(),z=ot("input"),J=Nt(),Q=ot("div"),Z=ot("label"),K=ot("input"),H=Nt(),$=ot("span"),Y=Yt("Public"),oe=Nt(),gr&&gr.c(),O=Nt(),B=ot("div"),q=ot("div"),re=ot("div"),ae=ot("button"),me=Yt("Update Preview"),ge=Nt(),xe=ot("button"),pe=Yt("Save Shader"),ve=Nt(),Ee=ot("button"),le=Yt("Delete Shader"),Se=Nt(),be=ot("button"),Ie=Yt("Clear Shader"),Me=Nt(),Ye=ot("div"),Be=ot("div"),rt=ot("div"),Ge=ot("button"),ye=Yt("Add Parameter"),Fe=Nt(),Ue=ot("span"),nt=Yt("Auto-defines a uniform in the shader"),st=Nt(),je=ot("ol");for(let Ir=0;Ir<or.length;Ir+=1)or[Ir].c();Xe=Nt(),Pe=ot("div"),ee=ot("div"),ie=ot("div"),X=ot("div"),ce=Nt(),ke=ot("div"),Re=ot("div"),$e=ot("div"),mt=Yt("Template Shaders"),_t=Nt(),wt=ot("div"),ei.c(),zt=Nt(),Pt=ot("div"),At=ot("div"),Wt=ot("div"),Gt=Yt("My Shaders"),kr=Nt(),en=ot("div"),In.c(),xr=Nt(),Sr=ot("div"),lr=ot("div"),ri.c(),mn=Nt(),Br=ot("div"),br=ot("div"),Or=ot("div"),On=ot("div"),Zn=ot("p"),Oi=Yt("Created by "),Un=ot("a"),Wi=Yt("Max Pleaner"),Zi=Nt(),we=ot("p"),pt=ot("a"),xt=Yt("View source code on GitHub"),ft=Nt(),sr=ot("p"),lt=Yt(`This site was originally intended to feed camera effects into an Android/iOS app.
              That project remains incomplete. If you're interested in building such an application,
              please feel free to contact me.`),fr=Nt(),St=ot("hr"),this.h()},l(Ir){t=at(Ir,"CONTAINER",{id:!0});var mr=gt(t);n=at(mr,"DIV",{id:!0});var Er=gt(n);r=at(Er,"BUTTON",{class:!0,"data-tab":!0});var Ci=gt(r);s=Kt(Ci,"Camera"),Ci.forEach(Ze),a=Bt(Er),o=at(Er,"BUTTON",{class:!0,"data-tab":!0});var ba=gt(o);u=Kt(ba,"Template Shaders"),ba.forEach(Ze),l=Bt(Er),c=at(Er,"BUTTON",{class:!0,"data-tab":!0});var to=gt(c);p=Kt(to,"My Shaders"),to.forEach(Ze),m=Bt(Er),h=at(Er,"BUTTON",{class:!0,"data-tab":!0});var Ii=gt(h);f=Kt(Ii,"Discover Shaders"),Ii.forEach(Ze),d=Bt(Er),g=at(Er,"BUTTON",{class:!0,"data-tab":!0});var Pi=gt(g);y=Kt(Pi,"About"),Pi.forEach(Ze),b=Bt(Er),_r.l(Er),Er.forEach(Ze),x=Bt(mr),C=at(mr,"DIV",{id:!0});var Pn=gt(C);S=at(Pn,"DIV",{class:!0,id:!0});var Ri=gt(S);w=at(Ri,"DIV",{id:!0}),gt(w).forEach(Ze),_=Bt(Ri),M=at(Ri,"DIV",{class:!0});var Tn=gt(M);I=at(Tn,"DIV",{class:!0});var ro=gt(I);R=at(ro,"DIV",{class:!0});var es=gt(R);P=at(es,"DIV",{class:!0});var ni=gt(P);D=at(ni,"LABEL",{for:!0});var Ds=gt(D);U=Kt(Ds,"Name"),Ds.forEach(Ze),F=Bt(ni),z=at(ni,"INPUT",{id:!0,type:!0,placeholder:!0}),J=Bt(ni),Q=at(ni,"DIV",{class:!0});var no=gt(Q);Z=at(no,"LABEL",{});var ts=gt(Z);K=at(ts,"INPUT",{type:!0,id:!0}),H=Bt(ts),$=at(ts,"SPAN",{});var Bo=gt($);Y=Kt(Bo,"Public"),Bo.forEach(Ze),ts.forEach(Ze),oe=Bt(no),gr&&gr.l(no),no.forEach(Ze),ni.forEach(Ze),es.forEach(Ze),ro.forEach(Ze),O=Bt(Tn),B=at(Tn,"DIV",{class:!0});var _a=gt(B);q=at(_a,"DIV",{class:!0});var Ls=gt(q);re=at(Ls,"DIV",{class:!0});var Di=gt(re);ae=at(Di,"BUTTON",{id:!0});var wa=gt(ae);me=Kt(wa,"Update Preview"),wa.forEach(Ze),ge=Bt(Di),xe=at(Di,"BUTTON",{id:!0});var Fo=gt(xe);pe=Kt(Fo,"Save Shader"),Fo.forEach(Ze),ve=Bt(Di),Ee=at(Di,"BUTTON",{id:!0});var xa=gt(Ee);le=Kt(xa,"Delete Shader"),xa.forEach(Ze),Se=Bt(Di),be=at(Di,"BUTTON",{id:!0});var Sa=gt(be);Ie=Kt(Sa,"Clear Shader"),Sa.forEach(Ze),Di.forEach(Ze),Ls.forEach(Ze),_a.forEach(Ze),Me=Bt(Tn),Ye=at(Tn,"DIV",{id:!0,class:!0});var Ca=gt(Ye);Be=at(Ca,"DIV",{class:!0});var io=gt(Be);rt=at(io,"DIV",{class:!0});var ps=gt(rt);Ge=at(ps,"BUTTON",{});var qn=gt(Ge);ye=Kt(qn,"Add Parameter"),qn.forEach(Ze),Fe=Bt(ps),Ue=at(ps,"SPAN",{class:!0});var fi=gt(Ue);nt=Kt(fi,"Auto-defines a uniform in the shader"),fi.forEach(Ze),ps.forEach(Ze),st=Bt(io),je=at(io,"OL",{});var qi=gt(je);for(let et=0;et<or.length;et+=1)or[et].l(qi);qi.forEach(Ze),io.forEach(Ze),Ca.forEach(Ze),Tn.forEach(Ze),Xe=Bt(Ri),Pe=at(Ri,"DIV",{class:!0});var rs=gt(Pe);ee=at(rs,"DIV",{class:!0});var pi=gt(ee);ie=at(pi,"DIV",{class:!0,style:!0});var $i=gt(ie);X=at($i,"DIV",{id:!0}),gt(X).forEach(Ze),$i.forEach(Ze),pi.forEach(Ze),rs.forEach(Ze),Ri.forEach(Ze),ce=Bt(Pn),ke=at(Pn,"DIV",{class:!0,id:!0});var ja=gt(ke);Re=at(ja,"DIV",{class:!0});var mi=gt(Re);$e=at(mi,"DIV",{class:!0});var Ns=gt($e);mt=Kt(Ns,"Template Shaders"),Ns.forEach(Ze),_t=Bt(mi),wt=at(mi,"DIV",{class:!0});var ns=gt(wt);ei.l(ns),ns.forEach(Ze),mi.forEach(Ze),ja.forEach(Ze),zt=Bt(Pn),Pt=at(Pn,"DIV",{class:!0,id:!0});var so=gt(Pt);At=at(so,"DIV",{class:!0});var is=gt(At);Wt=at(is,"DIV",{class:!0});var Uo=gt(Wt);Gt=Kt(Uo,"My Shaders"),Uo.forEach(Ze),kr=Bt(is),en=at(is,"DIV",{class:!0});var Vo=gt(en);In.l(Vo),Vo.forEach(Ze),is.forEach(Ze),so.forEach(Ze),xr=Bt(Pn),Sr=at(Pn,"DIV",{class:!0,id:!0});var Go=gt(Sr);lr=at(Go,"DIV",{class:!0});var T=gt(lr);ri.l(T),T.forEach(Ze),Go.forEach(Ze),mn=Bt(Pn),Br=at(Pn,"DIV",{class:!0,id:!0});var A=gt(Br);br=at(A,"DIV",{class:!0});var N=gt(br);Or=at(N,"DIV",{class:!0});var V=gt(Or);On=at(V,"DIV",{class:!0});var te=gt(On);Zn=at(te,"P",{});var ne=gt(Zn);Oi=Kt(ne,"Created by "),Un=at(ne,"A",{href:!0,target:!0,rel:!0});var ue=gt(Un);Wi=Kt(ue,"Max Pleaner"),ue.forEach(Ze),ne.forEach(Ze),Zi=Bt(te),we=at(te,"P",{});var Ae=gt(we);pt=at(Ae,"A",{href:!0,target:!0,rel:!0});var Ce=gt(pt);xt=Kt(Ce,"View source code on GitHub"),Ce.forEach(Ze),Ae.forEach(Ze),ft=Bt(te),sr=at(te,"P",{});var Ve=gt(sr);lt=Kt(Ve,`This site was originally intended to feed camera effects into an Android/iOS app.
              That project remains incomplete. If you're interested in building such an application,
              please feel free to contact me.`),Ve.forEach(Ze),te.forEach(Ze),V.forEach(Ze),N.forEach(Ze),A.forEach(Ze),Pn.forEach(Ze),fr=Bt(mr),St=at(mr,"HR",{}),mr.forEach(Ze),this.h()},h(){Je(r,"class","nav-btn selected svelte-1sbwyo"),Je(r,"data-tab","cameraTab"),Je(o,"class","nav-btn svelte-1sbwyo"),Je(o,"data-tab","templateShadersTab"),Je(c,"class","nav-btn svelte-1sbwyo"),Je(c,"data-tab","userShadersTab"),Je(h,"class","nav-btn svelte-1sbwyo"),Je(h,"data-tab","discoverShadersTab"),Je(g,"class","nav-btn svelte-1sbwyo"),Je(g,"data-tab","aboutTab"),Je(n,"id","tab-nav"),Je(w,"id","canvas"),Je(D,"for","shader-name"),Je(z,"id","shader-name"),Je(z,"type","text"),Je(z,"placeholder","Enter shader name"),Je(K,"type","checkbox"),Je(K,"id","isPublic"),K.checked=i[15],K.value="Public",Je(Q,"class","checkbox-group"),Je(P,"class","form-row"),Je(R,"class","panel-content"),Je(I,"class","control-panel"),Je(ae,"id","update"),Je(xe,"id","save"),Je(Ee,"id","delete"),Je(be,"id","clear"),Je(re,"class","button-row"),Je(q,"class","panel-content"),Je(B,"class","control-panel"),Je(Ue,"class","param-description"),Je(rt,"class","param-header-row"),Je(Be,"class","panel-content"),Je(Ye,"id","params"),Je(Ye,"class","control-panel"),Je(M,"class","controls-column"),Je(X,"id","editorWrapper"),Je(ie,"class","panel-content"),vx(ie,"padding","0"),Je(ee,"class","control-panel"),Je(Pe,"class","controls-column"),Je(S,"class","tab hidden"),Je(S,"id","cameraTab"),Je($e,"class","panel-header"),Je(wt,"class","panel-content"),Je(Re,"class","control-panel"),Je(ke,"class","tab hidden shader-list-tab"),Je(ke,"id","templateShadersTab"),Je(Wt,"class","panel-header"),Je(en,"class","panel-content"),Je(At,"class","control-panel"),Je(Pt,"class","tab hidden shader-list-tab"),Je(Pt,"id","userShadersTab"),Je(lr,"class","control-panel"),Je(Sr,"class","tab hidden shader-list-tab"),Je(Sr,"id","discoverShadersTab"),Je(Un,"href","https://maxpleaner.com"),Je(Un,"target","_blank"),Je(Un,"rel","noopener noreferrer"),Je(pt,"href","https://github.com/maxpleaner/ShaderWeb"),Je(pt,"target","_blank"),Je(pt,"rel","noopener noreferrer"),Je(On,"class","about-content"),Je(Or,"class","panel-content"),Je(br,"class","control-panel"),Je(Br,"class","tab hidden shader-list-tab"),Je(Br,"id","aboutTab"),Je(C,"id","tabs"),Je(t,"id","page")},m(Ir,mr){dr(Ir,t,mr),De(t,n),De(n,r),De(r,s),De(n,a),De(n,o),De(o,u),De(n,l),De(n,c),De(c,p),De(n,m),De(n,h),De(h,f),De(n,d),De(n,g),De(g,y),De(n,b),_r.m(n,null),De(t,x),De(t,C),De(C,S),De(S,w),De(S,_),De(S,M),De(M,I),De(I,R),De(R,P),De(P,D),De(D,U),De(P,F),De(P,z),De(P,J),De(P,Q),De(Q,Z),De(Z,K),De(Z,H),De(Z,$),De($,Y),De(Q,oe),gr&&gr.m(Q,null),De(M,O),De(M,B),De(B,q),De(q,re),De(re,ae),De(ae,me),De(re,ge),De(re,xe),De(xe,pe),De(re,ve),De(re,Ee),De(Ee,le),De(re,Se),De(re,be),De(be,Ie),De(M,Me),De(M,Ye),De(Ye,Be),De(Be,rt),De(rt,Ge),De(Ge,ye),De(rt,Fe),De(rt,Ue),De(Ue,nt),De(Be,st),De(Be,je);for(let Er=0;Er<or.length;Er+=1)or[Er].m(je,null);De(S,Xe),De(S,Pe),De(Pe,ee),De(ee,ie),De(ie,X),De(C,ce),De(C,ke),De(ke,Re),De(Re,$e),De($e,mt),De(Re,_t),De(Re,wt),ei.m(wt,null),De(C,zt),De(C,Pt),De(Pt,At),De(At,Wt),De(Wt,Gt),De(At,kr),De(At,en),In.m(en,null),De(C,xr),De(C,Sr),De(Sr,lr),ri.m(lr,null),De(C,mn),De(C,Br),De(Br,br),De(br,Or),De(Or,On),De(On,Zn),De(Zn,Oi),De(Zn,Un),De(Un,Wi),De(On,Zi),De(On,we),De(we,pt),De(pt,xt),De(On,ft),De(On,sr),De(sr,lt),De(t,fr),De(t,St),ur||(Tt=[Dr(r,"click",function(){Gr(i[21])&&i[21].apply(this,arguments)}),Dr(o,"click",function(){Gr(i[21])&&i[21].apply(this,arguments)}),Dr(c,"click",function(){Gr(i[21])&&i[21].apply(this,arguments)}),Dr(h,"click",function(){Gr(i[21])&&i[21].apply(this,arguments)}),Dr(g,"click",function(){Gr(i[21])&&i[21].apply(this,arguments)}),Dr(ae,"click",function(){Gr(i[25])&&i[25].apply(this,arguments)}),Dr(xe,"click",function(){Gr(i[19])&&i[19].apply(this,arguments)}),Dr(Ee,"click",function(){Gr(i[6])&&i[6].apply(this,arguments)}),Dr(be,"click",function(){Gr(i[3])&&i[3].apply(this,arguments)}),Dr(Ge,"click",function(){Gr(i[0])&&i[0].apply(this,arguments)})],ur=!0)},p(Ir,mr){if(i=Ir,Yr===(Yr=tn(i))&&_r?_r.p(i,mr):(_r.d(1),_r=Yr(i),_r&&(_r.c(),_r.m(n,null))),mr[0]&32768&&(K.checked=i[15]),i[9].isAdmin?gr||(gr=k0(),gr.c(),gr.m(Q,null)):gr&&(gr.d(1),gr=null),mr[0]&80116918){Cn=i[18];let Er;for(Er=0;Er<Cn.length;Er+=1){const Ci=T0(i,Cn,Er);or[Er]?or[Er].p(Ci,mr):(or[Er]=I0(Ci),or[Er].c(),or[Er].m(je,null))}for(;Er<or.length;Er+=1)or[Er].d(1);or.length=Cn.length}zr===(zr=jn(i,mr))&&ei?ei.p(i,mr):(ei.d(1),ei=zr(i),ei&&(ei.c(),ei.m(wt,null))),di===(di=ti(i,mr))&&In?In.p(i,mr):(In.d(1),In=di(i),In&&(In.c(),In.m(en,null))),fs===(fs=ds(i))&&ri?ri.p(i,mr):(ri.d(1),ri=fs(i),ri&&(ri.c(),ri.m(lr,null)))},i:na,o:na,d(Ir){Ir&&Ze(t),_r.d(),gr&&gr.d(),mu(or,Ir),ei.d(),In.d(),ri.d(),ur=!1,cl(Tt)}}}const B0=([i,t])=>i;function ZR(i,t,n){var r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,C,S,w,_,M,I,R,P,D,U,F,z,J,Q,Z,K;return ga.init(),ga({el:".color-picker",alpha:!1}),window.$=$r,M=null,d=null,R=[],f=null,w=!1,p="https://upload.wikimedia.org/wikipedia/commons/9/9a/512x512_Dissolve_Noise_Texture.png",g=Wn,qc.subscribe("firebaseStateUpdated",function(){return n(9,g=Wn)}),qc.subscribe("shaderDrawError",function(H,$){return alert($)}),bx(()=>{var H;return M=new Sx($1),H=$=>$+Dp.split(`
`).length+Math.max(1,R.length),d=new Ht({extensions:[Yk,vp.define(Zk),hb({formatNumber:H})],parent:$r("#editorWrapper")[0]}),d.dispatch({changes:{from:0,to:d.state.doc.length,insert:$c}}),$r("#cameraTab").removeClass("hidden"),ox(),ax()}),Z=function(){return J(d.state.doc.toString(),R)},P=async function(){var H,$,Y,oe,O,B,q,re,ae;return oe=R.some(function(me){var ge;return{val:ge}=ir.paramValues[me.paramName],ge!==me.val}),oe&&(ae=confirm("Update defaults to match current values?"),ae&&R.forEach(function(me){var ge;return{val:ge}=ir.paramValues[me.paramName],me.default=ge})),re=d.state.doc.toString(),O=$r("#shader-name").val(),$=$r("#isPublic")[0].checked,Y=(B=$r("#isTemplate")[0])!=null?B.checked:void 0,[q,H]=await hx(O,re,R,$,Y),H?alert(H):(alert("saved"),g.user&&g.user.uid===f&&n(9,g.discoverShaders[g.user.uid][O]=q,g),Y?n(9,g.templateShaders[O]=q,g):n(9,g.userShaders[O]=q,g)),J(re,R)},m=function(){var H,$,Y,oe;if(confirm("are you sure?"))return Y=$r("#shader-name").val(),$=(oe=$r("#isTemplate")[0])!=null?oe.checked:void 0,H=nx(Y,$),H?alert(H):(g.user&&g.user.uid===f&&delete g.discoverShaders[g.user.uid][Y],delete g.userShaders[Y],n(9,g),n(9,g),alert("deleted"),o())},J=function(H,$){var Y,oe;return $r("[data-tab='cameraTab']").trigger("click"),[Y,oe]=z1(H,$),oe?(alert(oe),!1):(ir.shaderObj=Y,M.shader(ir.shaderObj),!0)},U=function(){var H,$,Y;return H=$r(this),$r(".nav-btn").removeClass("selected"),H.addClass("selected"),$=`#${H.data("tab")}`,Y=$r($),$r(".tab").addClass("hidden"),Y.removeClass("hidden")},_=function(H,$){var Y,oe;n(18,R=JSON.parse($.paramsJson)),ir.paramValues={},$r("#shader-name").val(H),J($.shaderMainText,R),n(15,w=$.isPublic),oe=ir.paramValues;for(Y in oe)oe[Y],delete ir.paramValues[Y];return ir.imagesCache={},R.forEach(function(O){var B;return B=null,O.type.includes("ColorShaderParam")?B="color":O.type.includes("FloatShaderParam")?B="float":O.type.includes("TextureShaderParam")?B="texture":O.type.includes("BooleanShaderParam")&&(B="boolean"),ir.paramValues[O.paramName]={type:B,val:O.default}}),d.dispatch({changes:{from:0,to:d.state.doc.length,insert:$.shaderMainText}})},o=function(){return _("",{shaderMainText:$c,paramsJson:JSON.stringify([])})},u=function(){return o(),alert("cleared")},K=function(){var H,$,Y,oe,O,B;return H=$r(this),B=H.closest(".shaderParam"),Y=B.attr("data-param-name"),$=H.val(),oe=R.find(function(q){return q.paramName===Y}),oe.paramName=$,n(18,R),B.attr("data-param-name",$),O=ir.paramValues[Y],delete ir.paramValues[Y],ir.paramValues[$]=O},r=function(){return console.log("TODO: make param types compatible with app"),R.push({paramName:"",type:"FOO.BAR.FloatShaderParam",default:1,min:0,max:10}),n(18,R),ir.paramValues[""]={type:"float",val:1}},h=function(){var H,$,Y;if(confirm("are you sure?"))return H=$r(this),Y=H.closest(".shaderParam"),$=Y.attr("data-param-name"),delete ir.paramValues[$],n(18,R=R.filter(function(oe){return oe.paramName!==$}))},I=function(){var H,$,Y,oe,O,B,q;return q=$r(this),$=q.val().split(".").slice(-1)[0],B=q.closest(".shaderParam"),O=B.attr("data-param-name"),Y=B.find(".shaderOptions"),Y.addClass("hidden"),H=B.find(`.shaderOptions[data-param-type='${$}']`),H.removeClass("hidden"),oe=R.find(function(re){return re.paramName===O}),$==="FloatShaderParam"?(Object.assign(oe,{type:"Foo.Bar.FloatShaderParam",default:1,min:0,max:10}),ir.paramValues[O]={type:"float",val:1}):$==="ColorShaderParam"?(ir.paramValues[O]={type:"color",val:"#ff0000"},Object.assign(oe,{type:"Foo.Bar.ColorShaderParam",default:"#ff0000"})):$==="TextureShaderParam"?(ir.paramValues[O]={type:"texture",val:p},Object.assign(oe,{type:"Foo.Bar.TextureShaderParam",default:p})):$==="BooleanShaderParam"&&(ir.paramValues[O]={type:"boolean",val:p},Object.assign(oe,{type:"Foo.Bar.BooleanShaderParam",default:!0})),n(18,R)},z=function(){var H,$,Y;return H=$r(this),Y=H.closest(".shaderParam"),$=Y.attr("data-param-name"),ir.paramValues[$]={type:"texture",val:H.val()}},F=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.default=H.val(),n(18,R),ir.paramValues[Y]={type:"texture",val:H.val()}},a=function(){var H,$,Y;return H=$r(this),Y=H.closest(".shaderParam"),$=Y.attr("data-param-name"),ir.paramValues[$]={type:"boolean",val:H[0].checked}},s=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.default=H[0].checked,n(18,R),ir.paramValues[Y]={type:"boolean",val:H[0].checked}},c=function(){var H,$,Y;return H=$r(this),Y=H.closest(".shaderParam"),$=Y.attr("data-param-name"),ir.paramValues[$]={type:"color",val:H.val()}},l=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.default=H.val(),n(18,R),ir.paramValues[Y]={type:"color",val:H.val()}},b=function(){var H,$,Y,oe;return H=$r(this),Y=H.closest(".shaderParam"),$=Y.attr("data-param-name"),oe=Y.find(".float-param-slider"),oe.val(H.val()),ir.paramValues[$]={type:"float",val:H.val()}},C=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.min=H.val(),n(18,R)},y=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.default=H.val(),n(18,R),ir.paramValues[Y]={type:"float",val:H.val()}},x=function(){var H,$,Y,oe;return H=$r(this),oe=H.closest(".shaderParam"),Y=oe.attr("data-param-name"),$=R.find(function(O){return O.paramName===Y}),$.max=H.val(),n(18,R)},S=function(){var H,$,Y,oe;return $=$r(this),oe=$.closest(".shaderParam"),Y=oe.attr("data-param-name"),H=oe.find(".float-param-val-direct-set"),H.val($.val()),ir.paramValues[Y]={type:"float",val:$.val()}},D=async function(H){var $;return $=await Jh(H,!0),Wn.discoverShaders||(Wn.discoverShaders={}),Wn.discoverShaders[H]=$,n(9,g=Wn),n(8,f=H)},Q=function(){return n(8,f=null)},[r,s,a,u,l,c,m,h,f,g,y,b,x,C,S,w,_,I,R,P,D,U,F,z,Q,Z,K]}class rD extends mx{constructor(t){super(),gx(this,t,ZR,QR,yx,{},null,[-1,-1])}}export{rD as default};
